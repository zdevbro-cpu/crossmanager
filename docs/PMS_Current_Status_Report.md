# PMS/RMS/SMS 현재 시스템 현황 분석 보고서 (As-Is Status Report)

## 1. 개요
본 문서는 2024년 12월 10일 기준, 시스템에 실제 구현되어 있는 데이터베이스 스키마와 프론트엔드 기능을 분석하여 작성되었습니다.
과거 기획서 유실에 대비하여 현재 시스템의 구현 범위를 파악하고, 누락 사항을 식별하는 데 목적이 있습니다.

## 2. 모듈별 구현 현황

### 2.1. PMS (프로젝트 관리)
- **DB 테이블**: `projects`, `tasks`
- **구현 기능**:
    - **프로젝트 정보**: 코드, 고객사(삼성/LG), 착공/준공일, 보안등급, 규정 유형 관리.
    - **공정 관리 (WBS)**: 계층형 작업(Task) 관리, 선행작업(Predecessors), 진행률, 가중치, 마일스톤 지원.
- **상태**: ✅ **핵심 기능 구현 완료**. 간트 차트(`Schedule.tsx`)와 연동됨.

### 2.2. 계약 및 견적 관리 (Contract Management)
- **DB 테이블**: `contracts`, `contract_items`
- **구현 기능**:
    - **계약 유형**: 견적(EST), 계약(CONTRACT), 변경(CHANGE) 구분.
    - **금액 관리**: 도급액, 실행예산(직/간접비), 이윤, 리스크 비용 등 상세 구조.
    - **세부 내역**: 공종별 아이템(규격, 수량, 단가) 관리.
    - **규정**: 고객사 규정(Regulation Config) JSON 저장 지원.
- **상태**: ✅ **상세 설계 반영됨**. 단순 헤더뿐만 아니라 상세 내역(Item)까지 DB화 되어 있음.

### 2.3. 자원 관리 (RMS)
- **DB 테이블**: `equipments`, `personnel`, `resource_assignments`
- **구현 기능**:
    - **마스터**: 장비(규격, 현위치, 정비일), 인력(자격증, 보안등급) 관리.
    - **배차/투입**: 프로젝트별 기간 단위 할당(`start_date` ~ `end_date`).
- **상태**: ✅ **기본 투입 관리 구현됨**. 다만, 일별 상세 작업일보와 연동된 "실제 투입량" 집계 로직은 확인 필요.

### 2.4. 안전 관리 (SMS)
- **DB 테이블**: `safety_incidents`, `safety_educations`, `safety_checklists`, `safety_checklist_items`
- **구현 기능**:
    - **사고 이력**: 사고/아차사고 기록, 조치사항.
    - **교육 이력**: 이수증 및 유효기간 관리.
    - **점검표**: 일일/특별 점검 및 부적합 사항(사진 포함) 관리.
- **상태**: ✅ **데이터 구조 충실함**.

### 2.5. 문서 관리 (Document Management) - **[현재 구현 진행 중]**
- **현황**:
    - 별도의 `documents` 통합 테이블 부재.
    - 계약서(`contracts`), 점검표(`safety_checklists`) 테이블 내에 개별 첨부파일 컬럼만 존재.
    - 버전 관리, 승인 프로세스 테이블 없음.
- **결론**: **현재 진행 중인 "문서 관리 모듈" 개발이 필수적임.** 기존에 흩어진 파일 정보를 통합할 필요가 있음.

## 3. 요약 및 제언
- **기존 모듈(공정, 계약, 자원)**은 상당히 구체적인 수준(`contract_items` 등)으로 DB가 설계되어 있어, 과거 기획 내용이 코드에 잘 반영된 것으로 판단됩니다.
- **누락 우려 사항**: "일일 작업보고서"를 생성할 때 필요한 "금일 작업 실적"과 "익일 계획"을 텍스트로 저장하는 별도 테이블이나 컬럼이 `tasks` 테이블 외에 명시적으로 보이지 않습니다. (리포트 자동 생성 시 `tasks`의 진척률만으로는 부족할 수 있음).
    - -> **보완 제안**: 문서 관리 모듈 개발 시 리포트 생성을 위해 `daily_work_logs` 같은 중간 데이터를 저장하거나, `tasks` 기록을 활용하는 로직 정립이 필요합니다.
