# 위험성평가(RA) 개발 방식 비교: Standard DB vs RAG + LLM

현재 보유 중인 `riskTemplates.ts` (약 1.4만 라인의 표준 데이터)를 활용하여 위험성평가 기능을 구현하는 두 가지 주요 접근 방식을 비교 분석합니다.

## 1. 접근 방식 개요

### A. Standard DB 방식 (전통적 접근)
- **개요**: 표준 데이터를 정형화된 데이터베이스(RDB)에 저장하고, 사용자가 공종/작업단계를 선택하여 데이터를 '조회' 및 '선택'하는 방식.
- **핵심 기술**: PostgreSQL/MySQL (또는 Firestore), 정확한 키워드 매칭(Exact Match), 카테고리 분류.
- **UX 흐름**: `공종 선택` -> `작업 선택` -> `위험요인 목록 노출` -> `사용자 체크(V)` -> `저장`.

### B. RAG + LLM 방식 (생성형 AI 접근)
- **개요**: 표준 데이터를 벡터 DB에 임베딩하여 지식 베이스(Main Knowledge)로 구축. 사용자의 입력(작업 상황) 상황에 맞춰 AI가 가장 적절한 위험요인과 대책을 '추천'하거나 '문구를 다듬어' 제공.
- **핵심 기술**: Vector DB(Pinecone/Milvus/Chroma), OpenAI API (LLM), 임베딩(Embedding).
- **UX 흐름**: `작업 상황 입력 (예: "비 오는 날 3층 높이에서 비계 해체")` -> `AI가 유사 사례 검색 및 위험성평가 초안 생성` -> `사용자 검토 및 수정` -> `저장`.

---

## 2. 상세 비교

| 비교 항목 | A. Standard DB (정형 데이터) | B. RAG + LLM (AI 검색/생성) |
| :--- | :--- | :--- |
| **정확성 & 신뢰성** | **매우 높음**. <br>승인된 표준 문구가 그대로 사용됨. 법적 분쟁 시 근거 자료로 활용 용이. | **중간~높음**. <br>AI가 문맥에 맞춰 변형할 수 있어, 표준에서 벗어난 문구가 생성될 위험(Hallucination) 존재. 검수 필수. |
| **검색 유연성** | **낮음**. <br>정확한 키워드나 카테고리를 모르면 데이터를 찾기 어려움. (예: '굴착기' vs '포크레인') | **매우 높음**. <br>의미 기반 검색(Semantic Search). '땅 파는 작업'이라고 쳐도 '굴착 작업' 데이터를 찾아냄. |
| **사용자 편의성(UX)** | **수동적**. <br>사용자가 일일이 리스트를 뒤져야 함. 데이터가 많을수록 피로도 증가. | **능동적**. <br>상황만 묘사하면 AI가 1차 초안을 작성해주므로 업무 속도 획기적 단축. |
| **구축/운영 비용** | **낮음**. <br>일반 DB 비용만 발생. 속도가 빠름. | **높음**. <br>Vector DB 비용 + LLM 토큰 비용 발생. API 응답 속도(Latency)가 상대적으로 느림. |
| **데이터 확장성** | 새로운 데이터 추가 시 관리자가 직접 분류 체계에 맞춰 입력해야 함. | 비정형 텍스트(과거 사고 사례, 매뉴얼 PDF 등)를 그대로 지식 베이스에 추가하면 즉시 활용 가능. |

---

## 3. 현 프로젝트(`riskTemplates.ts`) 적합성 분석

### 현재 데이터 특성
- 데이터가 `Step`, `Factor`, `Risk`, `Measure`로 매우 **구조화**되어 있습니다.
- 동일한 문구가 반복되는 패턴이 많습니다. (중복 데이터)
- 안전 문구 특성상 **"표준 준수"**가 창의적인 글쓰기보다 중요합니다.

### 추천 전략: 하이브리드 (Hybrid)

현재 상황에서는 **A안(Standard DB)을 기반으로 하되, B안(RAG)의 검색 능력을 더하는 것**이 가장 이상적입니다.

#### 1단계 (Priority): Standard DB 구축 (필수)
안전 관리의 핵심은 **"승인된 표준의 준수"**입니다. RAG가 아무리 뛰어나도, 엉뚱한 안전 수칙을 지어내면 사고 발생 시 책임 소지가 큽니다. 따라서, 1차적으로는 탄탄한 **Standard DB**를 구축하여 데이터의 무결성을 확보해야 합니다. 현재의 `riskTemplates.ts`는 이 DB의 초기 데이터(Seed)로 완벽합니다.

#### 2단계 (Advanced): RAG 기반 '스마트 검색' 도입
A안의 단점(찾기 어려움)을 보완하기 위해 도입합니다.
- **문구 생성(Generation)이 아닌 검색(Retrieval)에 집중**: LLM에게 "말을 지어내라"고 하는 것이 아니라, "Standard DB에서 사용자의 입력과 가장 의미가 통하는 항목을 **찾아와라**"고 시키는 방식입니다.
- **벡터 검색 활용**: 사용자가 "비계 위에서 용접"이라고 입력하면, DB에서 `[시스템 비계]` 카테고리의 `[화기 작업]` 관련 표준 항목들을 의미론적으로 검색해서 띄워줍니다. 문구는 DB에 있는 표준 문구를 그대로 보여줍니다.

## 4. 결론 및 제안

**"원 계획(RAG+LLM)"이 개발 목표라면, 단순한 SQL DB가 아닌 Vector DB 구성이 포함된 계획이 필요합니다.**

다음과 같은 수순을 제안합니다:
1.  **데이터 정제**: `riskTemplates.ts`의 중복을 제거하고 ID를 부여하여 **Vector DB**에 넣기 좋은 형태로 가공 (JSONL 등).
2.  **임베딩(Embeddings)**: 각 위험 항목(Step + Risk Factor + Measure)을 텍스트로 합쳐 벡터화하여 Vector DB(OpenAI, Pinecone 등)에 저장.
3.  **검색 인터페이스 개발**: 사용자가 작업 내용을 입력하면 Vector DB에서 Top-K 유사 항목을 추출하여 Editor에 뿌려주는 기능 개발.
4.  **LLM 옵션**: 필요하다면 추출된 항목을 바탕으로 "현장 특화 문구"로 다듬는(Refine) 기능을 옵션으로 제공.

이 방향이 맞다면, 앞서 작성한 '개발 계획서'를 **"RAG 기반 지능형 위험성평가 시스템 개발 계획"**으로 전면 수정하겠습니다.
