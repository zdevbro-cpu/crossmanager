# 통합 보고(Reporting)·체크리스트(Checklist) 연계 요구사항 정의서 (Producer/Consumer 모델)

버전: v1.0  
작성일: 2025-12-12  
대상: Cross Specialness(주) DX / PMS·SMS·SWMS·EMS

---

## 1. 목적
본 문서는 다음을 목표로 한다.

1) **보고 페이지(Reporting Hub) 설계**를 기반으로, **EMS/SMS/SWMS에서 생산(Producer)되는 보고서·요약블록이 PMS에서 소비(Consumer)되는 하이브리드 보고 체계**를 정의한다.
2) **체크리스트 관리의 문서 성격(증빙/불변/감사추적)**을 반영하여, 체크리스트가 **보고서에 어떻게 포함(링크/요약/첨부)되는지**를 설계한다.
3) ‘각 모듈에서 보고서를 만들고 PMS는 통합·검토·코멘트·대외 제출을 수행한다’는 운영 원칙 하에 **기능 요구사항(Functional Requirements)**, **데이터 요구사항(Data Requirements)**, **승인/보존 정책(Compliance)**을 상세화한다.

---

## 2. 범위(Scope)
### 2.1 포함 시스템
- **PMS**: 프로젝트 통합 허브(통합 보고/검토/배포)
- **SMS**: 안전관리(체크리스트, RA/DRI, 패트롤, 사고/아차사고)
- **SWMS**: 스크랩·폐기물(계근/반출/정산)
- **EMS**: 장비관리(가동/정비/배차/비용)

### 2.2 포함 업무
- 모듈별 보고서 생성(Producer)
- 모듈 요약 블록 생성 및 PMS 전달
- PMS 통합 보고서 생성(Consumer)
- 체크리스트 불변 보존 및 보고서 반영(참조/요약/첨부)

---

## 3. 핵심 개념 정리

### 3.1 Producer/Consumer 모델
- **Producer(생산자)**: SMS/SWMS/EMS(그리고 PMS 자체)에서 **도메인 보고서 및 요약 블록을 생성**하고, PMS로 전달한다.
- **Consumer(소비자)**: PMS는 각 Producer가 생성한 요약 블록/첨부/링크를 **재입력 없이 수집·조합하여 통합 보고서를 생성**한다.

> 원칙: **데이터·내용은 1회 입력(One Source of Truth), PMS에서는 재작성 금지(Zero Re-entry)**

### 3.2 체크리스트의 문서 성격(증빙/불변)
체크리스트는 단순 메모가 아니라 **증빙 문서(Evidence Record)**이며, 아래 성격을 반드시 만족해야 한다.

- **작성 완료 후 수정 불가(Immutable)**
- **감사추적(Audit Trail) 필수**: 누가/언제/어디서/무엇을 점검했는지 기록
- **현장별/프로젝트별 이중 귀속 관리**
- **시간/참석자/교육내용/점검결과/사진 등 핵심 메타데이터 포함**
- **정정/보완은 ‘수정’이 아니라 ‘추가 문서(시정조치/재점검)’로 연결**

### 3.3 “체크리스트에 보고서가 들어간다”의 의미(정의)
현장에서 흔히 ‘보고서가 체크리스트에 들어간다’는 표현은 보통 아래 3가지 형태 중 하나를 의미한다.

1) **체크리스트가 보고서에 포함된다(권장)**: 보고서(일/주/월/고객사)의 안전 섹션에 체크리스트 결과가 자동 요약·삽입
2) **보고서가 체크리스트의 첨부/참조로 연결된다(조건부)**: 특정 작업허가/점검 프로세스에서 ‘보고서 파일’을 체크리스트 증빙으로 링크
3) **체크리스트와 보고서가 동일 데이터로부터 생성된다(권장)**: 체크리스트 입력 데이터 → 보고서 자동생성

본 설계에서는 **1) + 3)을 기본**, 2)는 특정 케이스에서 옵션으로 제공한다.

---

## 4. 모듈별 보고서 유형(Producer 산출물)

### 4.1 PMS 보고서(프로젝트 중심)
- 일일작업보고(Daily)
- 주간 공정보고(Weekly)
- 월간 종합(Executive)
- 공정/자원/원가/리스크 보고

### 4.2 SMS 보고서(안전 중심)
- RA(위험성평가) 보고
- DRI(일일 위험예지) 보고
- 체크리스트/패트롤 결과 보고
- 사고/아차사고 분석 보고
- 교육/자격/부적합(NC) 보고

### 4.3 SWMS 보고서(스크랩/폐기물)
- 계근 입출 보고
- 반출 사진/증빙 보고
- 반출량 분석(일/주/월)
- 정산 보고
- 폐기물 처리 보고

### 4.4 EMS 보고서(장비관리)
- 장비 가동률(Utilization) 보고
- 정비/고장(Maintenance/Breakdown) 보고
- 배차/이동(Dispatch/Movement) 보고
- 비용/원가(Cost) 보고

---

## 5. 체크리스트와 보고서의 연계 분석

### 5.1 체크리스트는 어디에 속하는가?
- **체크리스트의 ‘작성/원본 보관’은 SMS 소유(Producer)**
- PMS는 체크리스트 원본을 **수정하지 않으며**, 통합 보고서 생성 시 **요약/링크/첨부로 소비(Consumer)**

### 5.2 체크리스트 데이터가 보고서에 반영되는 방식(권장)
- SMS에서 체크리스트 제출(Submit) 시, 아래가 자동 생성된다.
  - (A) **Checklist Evidence Record(불변 원본)**
  - (B) **Checklist Summary Block(요약 블록)**: 보고용 요약(통계/KPI/부적합/조치)
  - (C) 필요 시 **Attachment Pack**: 핵심 사진/서명/위치 정보를 포함한 PDF 번들

PMS 통합 보고서는 (B) 요약 블록을 자동 삽입하고, (A)/(C)는 링크로 참조한다.

### 5.3 EMS/SWMS 보고서가 체크리스트에 ‘들어가는’ 케이스(옵션)
다음의 경우, 특정 체크리스트(작업허가/인수/종료점검)에 EMS/SWMS 산출물이 **첨부 또는 참조 링크**로 연결될 수 있다.

- **EMS**: 장비 투입 전 점검 결과(장비 점검 리포트), 장비 검사증/정비 완료 증빙
- **SWMS**: 반출/계근 증빙(계근표), 폐기물 인계서, 정산서

> 단, 이 경우에도 체크리스트 원본은 수정되지 않으며, **‘첨부(Attachment)’는 별도 객체로 연결**된다.

---

## 6. 기능 요구사항 정의(Producer/Consumer 기반)

### 6.1 공통 요구사항(모듈 공통)

#### FR-COM-01: 보고서/요약 블록 생성
- 각 모듈은 도메인 보고서(PDF/HTML)와 PMS로 전달할 **요약 블록(JSON)**을 생성해야 한다.

#### FR-COM-02: 요약 블록 표준 스키마
- 요약 블록은 모듈별로 상이하되, 아래 공통 필드를 포함해야 한다.
  - project_id, site_id, report_type, period(일/주/월), created_by, created_at(server), status(draft/submitted/approved), source_module

#### FR-COM-03: 통합 보고서 재입력 금지
- PMS는 모듈 데이터의 ‘재작성’을 요구하지 않는다.
- PMS에서 수정 가능한 것은 **PM 코멘트/총평/요청사항** 등 PMS 소유 영역으로 제한한다.

#### FR-COM-04: 승인 워크플로우 연계
- 모듈 보고서 승인(도메인 승인)과 PMS 통합 승인(대외 제출 승인)을 분리한다.
  - 예: SMS 안전보고 승인(안전관리자) → PMS 통합 보고 승인(PM)

---

### 6.2 SMS(체크리스트 포함) Producer 요구사항

#### FR-SMS-CL-01: 체크리스트 템플릿 관리
- 작업유형(중량물/고소/화기/해체/반출 등)별 템플릿을 제공한다.
- RA 결과(위험요소/조치)를 체크리스트 항목으로 매핑할 수 있어야 한다.

#### FR-SMS-CL-02: 제출(Submit) 이후 불변(Immutable)
- 체크리스트는 **제출 이후 수정 불가**여야 한다.
- 수정이 필요한 경우 **정정/보완/재점검 문서**를 생성하여 원본과 연결한다.

#### FR-SMS-CL-03: 불변 메타데이터 자동 기록
- 제출 시점에 아래 정보가 서버 기준으로 자동 기록되고 변경 불가해야 한다.
  - timestamp(서버), 작성자, 참석자, 위치(GPS 또는 site 코드), 교육여부/교육내용, 점검결과, 사진 증빙

#### FR-SMS-CL-04: Audit Trail
- 열람/다운로드/첨부추가/정정문서 생성 등 모든 행위 로그를 남긴다.

#### FR-SMS-REP-01: 안전 보고서 생성
- 체크리스트/패트롤/RA/사고 데이터를 기반으로 일·주·월 안전 보고서를 생성한다.
- 보고서 생성 시 **체크리스트 요약 블록**을 자동 포함한다.

#### FR-SMS-REP-02: PMS 전달용 요약 블록
- 안전 보고서/체크리스트는 PMS에 전달 가능한 요약 블록을 생성한다.
  - KPI: 점검 수행률, 부적합 건수, 조치완료율, 고위험 항목 등

---

### 6.3 SWMS Producer 요구사항

#### FR-SWMS-REP-01: 계근/반출/정산 보고서 생성
- 프로젝트/현장별 일·주·월 반출량 및 정산 보고서를 자동 생성한다.

#### FR-SWMS-REP-02: 체크리스트 연계(옵션 첨부)
- 특정 체크리스트(반출 전 점검, 인계점검 등)에 계근표/인계서/정산서를 **첨부 객체로 연결**할 수 있다.

#### FR-SWMS-BLK-01: PMS 요약 블록
- 반출량, 품목별 비중, 정산 요약, 증빙 유무 등을 포함한 요약 블록을 생성한다.

---

### 6.4 EMS Producer 요구사항

#### FR-EMS-REP-01: 가동률/정비/배차/비용 보고서 생성
- 장비별/프로젝트별 KPI를 집계하여 정기 보고서를 자동 생성한다.

#### FR-EMS-REP-02: 체크리스트 연계(옵션 첨부)
- 장비 투입 전 점검(Pre-Use) 체크리스트에 장비 점검 리포트/검사증/정비 완료 증빙을 **첨부 객체**로 연결할 수 있다.

#### FR-EMS-BLK-01: PMS 요약 블록
- KPI: Utilization, Idle Rate, MTBF, MTTR, 고장건수, 정비예정, 비용/시간 등을 포함한다.

---

### 6.5 PMS Consumer 요구사항(통합 보고 허브)

#### FR-PMS-HUB-01: 요약 블록 수집(Import)
- PMS는 SMS/SWMS/EMS에서 생성된 요약 블록을 프로젝트·기간 기준으로 자동 수집한다.

#### FR-PMS-HUB-02: 통합 보고서 자동 조립(Compose)
- 통합 보고서는 다음 기본 섹션을 자동 구성한다.
  1) 공정 진척(PMS)
  2) 안전 현황(SMS 요약 블록)
  3) 스크랩/폐기물(SWMS 요약 블록)
  4) 장비 현황(EMS 요약 블록)
  5) 이슈/리스크 및 PM 총평(PMS 작성 영역)

#### FR-PMS-HUB-03: 코멘트/피드백 기능
- PMS 관리자는 통합 보고서 내 모듈 섹션별로 코멘트(댓글/지시/요청)를 남길 수 있어야 한다.
- 코멘트는 원본(Producer 보고서/체크리스트)을 수정하지 않으며, **피드백 객체로 저장**된다.

#### FR-PMS-HUB-04: 링크/첨부 참조
- PMS는 각 요약 블록이 참조하는 원본 보고서(PDF) 및 체크리스트 원본(불변)을 링크로 제공한다.

#### FR-PMS-HUB-05: 대외 배포(Export)
- PMS는 고객사 제출용 PDF를 생성한다.
- 고객사 양식 템플릿 적용 및 열람 로그 추적을 지원한다.

---

## 7. 데이터 요구사항(핵심 엔터티)

### 7.1 Checklist Evidence Record (SMS)
- checklist_id (불변 ID)
- project_id, site_id
- checklist_type (작업 전/중/후/패트롤/허가 등)
- created_at(server), created_by
- participants[]
- training: {done, topic, duration, materials_ref}
- results: {item_id, pass_fail_na, comment, photo_refs[]}
- gps/location
- immutable_hash (옵션: 무결성 검증)

### 7.2 Report (각 모듈)
- report_id, source_module
- project_id, site_id, period
- report_type
- status(draft/submitted/approved)
- file_ref(PDF/HTML)
- summary_block_ref(JSON)

### 7.3 Summary Block (PMS 수집 대상)
- block_id
- source_module
- project_id, site_id, period
- kpi: {...}
- highlights: [...]
- issues: [...]
- evidence_links: [checklist_ids, report_ids, attachments]

### 7.4 Attachment (불변 문서와 분리)
- attachment_id
- owner_type(checklist/report)
- owner_id
- file_ref
- created_at(server), created_by
- immutable_flag (옵션)

---

## 8. 정책/규정 요구사항(보존·감사)

### 8.1 불변(Immutable) 정책
- 체크리스트는 제출 이후 수정 불가.
- 필요한 경우 ‘정정/보완/재점검’ 문서를 생성하여 연결.

### 8.2 영구/장기 보존
- 프로젝트 종료 후에도 체크리스트 및 핵심 증빙은 장기(또는 영구) 보관을 기본으로 한다.
- 보존기간은 법/고객사 요구에 따라 정책 값으로 설정 가능.

### 8.3 감사 추적(Audit Trail)
- 체크리스트/보고서/첨부/통합 보고서에 대한 열람·다운로드·승인·반려 기록 저장.

---

## 9. UI/업무 흐름 요약(보고 페이지 설계 관점)

### 9.1 각 모듈(Producer) 화면
- “보고서 생성” 버튼은 **각 모듈 내부**에 존재한다.
  - SMS: 안전보고 생성 / 체크리스트 요약 자동 반영
  - SWMS: 반출·정산 보고 생성
  - EMS: 가동·정비·배차·비용 보고 생성

### 9.2 PMS(Consumer) 화면
- “통합 보고서 생성” 버튼은 PMS에 존재한다.
- 통합 보고서 편집 화면에서 PM은 **총평/리스크/요청사항**만 작성한다.
- 모듈 섹션은 ‘읽기 전용 + 코멘트’ 방식이 기본.

---

## 10. 수용 기준(Acceptance Criteria) 예시
- AC-01: 체크리스트 제출 후 원본 수정이 불가해야 한다.
- AC-02: 체크리스트 정정이 필요할 경우, 원본 변경 없이 정정 문서로 연결되어야 한다.
- AC-03: SMS/SWMS/EMS는 PMS로 요약 블록을 전송할 수 있어야 한다.
- AC-04: PMS는 요약 블록을 자동 조합하여 통합 주간 보고서를 생성할 수 있어야 한다.
- AC-05: 통합 보고서에는 각 섹션별 원본(체크리스트/도메인 보고서) 링크가 포함되어야 한다.

---

## 11. 확장(Phase II) 포인트(요약)
- 바디캠/웨어러블 이벤트 → 체크리스트/보고서 자동 태깅
- AI 기반 요약 블록 생성(주요 위험, 이상패턴)
- 예지정비(EMS), 이상반출(SWMS), 위험점수(SMS) 자동 반영

---

## 12. 결론
본 문서는 **“각 모듈에서 생산 → PMS에서 통합 소비”**라는 하이브리드 구조를 기준으로, 체크리스트를 **불변 증빙 문서**로 정의하고 보고서/통합 보고 체계에 안전하게 연결하는 요구사항을 제시한다.

핵심은 **중복 입력 없이** 현장의 실제 업무 흐름을 유지하면서, PMS에서 경영/고객사 관점의 통합 보고와 검토를 완성하는 것이다.
