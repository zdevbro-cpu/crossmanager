import{r as c,j as e}from"./index-Bk_PkX1w.js";import{P as j,T as I}from"./trash-2-1f4s6_-J.js";import{P as T,S as C}from"./save-DAxO90IJ.js";import{c as w}from"./createLucideIcon-CQVuD4m9.js";const k=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],p=w("x",k),A=[{id:"TPL001",title:"고소작업차 작업 전 점검",items:[{id:"1",content:"아우트리거 설치 및 지반 상태 확인"},{id:"2",content:"작업대 난간 및 안전장치 작동 여부확인"},{id:"3",content:"안전대 부착설비 상태 및 체결 확인"},{id:"4",content:"신호수 배치 및 작업 반경 통제"},{id:"5",content:"작업자 안전모 및 보호구 착용 상태"}],updatedAt:"2023-10-01"},{id:"TPL002",title:"굴착기 작업 안전 점검",items:[{id:"1",content:"작업 반경 내 접근 금지 조치 및 유도원 배치"},{id:"2",content:"후방 카메라 및 경보장치 작동 확인"},{id:"3",content:"버켓 연결핀 및 안전핀 체결 상태"},{id:"4",content:"지반 침하 우려 구간 보강 조치"},{id:"5",content:"운전자 자격 및 보험 가입 여부 확인"}],updatedAt:"2023-10-05"},{id:"TPL003",title:"가설 전기 분전반 점검",items:[{id:"1",content:"누전차단기 작동 테스트 (시험 버튼)"},{id:"2",content:"외함 접지 연결 상태 확인"},{id:"3",content:"케이블 피복 손상 여부 및 결선 상태"},{id:"4",content:"충전부 방호 조치 (덮개 등)"},{id:"5",content:"분전반 앞 적재물 없음 확인"}],updatedAt:"2023-10-10"}];function E(){const[i,o]=c.useState(A),[u,a]=c.useState(!1),[m,x]=c.useState(null),[r,h]=c.useState(""),[l,d]=c.useState([{id:Date.now().toString(),content:""}]),g=()=>{x(null),h(""),d([{id:Date.now().toString(),content:""}]),a(!0)},f=t=>{x(t),h(t.title),d([...t.items]),a(!0)},b=()=>{d([...l,{id:Date.now().toString(),content:""}])},y=t=>{d(l.filter((s,n)=>n!==t))},N=(t,s)=>{const n=[...l];n[t].content=s,d(n)},v=()=>{if(!r.trim()){alert("템플릿 제목을 입력해주세요.");return}const t=l.filter(s=>s.content.trim()!=="");if(t.length===0){alert("적어도 하나의 점검 항목이 필요합니다.");return}if(m)o(i.map(s=>s.id===m.id?{...s,title:r,items:t,updatedAt:new Date().toISOString().split("T")[0]}:s));else{const s={id:`TPL${String(i.length+1).padStart(3,"0")}`,title:r,items:t,updatedAt:new Date().toISOString().split("T")[0]};o([...i,s])}a(!1)},S=t=>{confirm("정말 삭제하시겠습니까?")&&o(i.filter(s=>s.id!==t))};return e.jsxs("div",{className:"page",children:[e.jsxs("header",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("p",{className:"eyebrow",children:"System Admin"}),e.jsx("h1",{children:"체크리스트 표준 템플릿 관리"}),e.jsx("p",{className:"muted",children:"전사 공통 안전 점검 항목을 표준화하여 관리합니다."})]}),e.jsxs("button",{className:"btn-primary",onClick:g,children:[e.jsx(j,{size:18})," 새 템플릿 등록"]})]}),e.jsx("div",{className:"card",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"100px"},children:"ID"}),e.jsx("th",{children:"템플릿 명"}),e.jsx("th",{children:"점검 항목 수"}),e.jsx("th",{children:"최종 수정일"}),e.jsx("th",{style:{width:"120px",textAlign:"right"},children:"관리"})]})}),e.jsx("tbody",{children:i.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{className:"badge badge-tag",children:t.id})}),e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:600},children:t.title}),e.jsxs("div",{className:"muted",style:{fontSize:"0.8rem",marginTop:"0.2rem"},children:[t.items.slice(0,2).map(s=>s.content).join(", "),t.items.length>2&&" ..."]})]}),e.jsxs("td",{children:[t.items.length,"개 항목"]}),e.jsx("td",{children:t.updatedAt}),e.jsxs("td",{style:{textAlign:"right"},children:[e.jsx("button",{className:"btn-icon",onClick:()=>f(t),children:e.jsx(T,{size:16})}),e.jsx("button",{className:"btn-icon danger",onClick:()=>S(t.id),children:e.jsx(I,{size:16})})]})]},t.id))})]})}),u&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"600px"},children:[e.jsxs("header",{className:"modal-header",children:[e.jsx("h2",{children:m?"템플릿 수정":"새 템플릿 등록"}),e.jsx("button",{className:"btn-text",onClick:()=>a(!1),children:e.jsx(p,{size:24})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"템플릿 제목"}),e.jsx("input",{className:"input",value:r,onChange:t=>h(t.target.value),placeholder:"예: 지게차 작업 전 안전 점검"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["점검 항목",e.jsxs("button",{className:"btn-secondary small",onClick:b,children:[e.jsx(j,{size:14})," 항목 추가"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",maxHeight:"400px",overflowY:"auto",paddingRight:"0.5rem"},children:l.map((t,s)=>e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("span",{className:"badge badge-tag",style:{width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},children:s+1}),e.jsx("input",{className:"input",value:t.content,onChange:n=>N(s,n.target.value),placeholder:"점검 항목을 입력하세요",style:{marginBottom:0}}),e.jsx("button",{className:"btn-icon danger",onClick:()=>y(s),children:e.jsx(p,{size:16})})]},t.id))})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>a(!1),children:"취소"}),e.jsxs("button",{className:"btn-primary",onClick:v,children:[e.jsx(C,{size:18})," 저장"]})]})]})})]})}export{E as default};
