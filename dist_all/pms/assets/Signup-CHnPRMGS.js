import{b as $,l as M,r as a,j as e,m as f,o as I}from"./index-Bk_PkX1w.js";import{c as L}from"./createLucideIcon-CQVuD4m9.js";import{E as j}from"./eye-DDw_AOHp.js";const O=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],y=L("eye-off",O);function _(){const{show:b}=$(),c=M(),[d,w]=a.useState(""),[o,v]=a.useState(""),[u,C]=a.useState(""),[h,S]=a.useState(""),[p,k]=a.useState(""),[x,n]=a.useState(""),[m,g]=a.useState(!1),[i,N]=a.useState(!1),[l,E]=a.useState(!1),P=t=>{const s=t.target.value.replace(/[^0-9]/g,"");let r=s;s.length>3&&s.length<=7?r=`${s.slice(0,3)}-${s.slice(3)}`:s.length>7&&(r=`${s.slice(0,3)}-${s.slice(3,7)}-${s.slice(7,11)}`),k(r)},q=async t=>{if(t.preventDefault(),o!==u){n("비밀번호가 일치하지 않습니다.");return}g(!0),n("");try{if(!f)throw new Error("Firebase Auth not initialized");const r=(await I(f,d,o)).user,z=p.replace(/-/g,"");if(!(await fetch("http://localhost:3000/api/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:r.uid,email:r.email,name:h,contact:z})})).ok)throw new Error("Backend registration failed");b("직원 등록 요청이 전송되었습니다. 관리자 승인을 기다려주세요.","success"),c("/login")}catch(s){console.error(s),s.code==="auth/email-already-in-use"?n("이미 사용 중인 이메일입니다."):n("회원가입 중 오류가 발생했습니다.")}finally{g(!1)}};return e.jsx("div",{className:"center-page",children:e.jsxs("div",{className:"auth-card",children:[e.jsx("h2",{children:"직원등록"}),e.jsx("p",{className:"muted",children:"시스템 사용을 위해 가입을 요청합니다."}),x&&e.jsx("div",{className:"error-message",children:x}),e.jsxs("form",{onSubmit:q,className:"auth-form",children:[e.jsxs("label",{children:[e.jsx("span",{children:"이메일"}),e.jsx("input",{type:"email",value:d,onChange:t=>w(t.target.value),required:!0,placeholder:"user@example.com"})]}),e.jsxs("label",{children:[e.jsx("span",{children:"비밀번호"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:i?"text":"password",value:o,onChange:t=>v(t.target.value),required:!0,placeholder:"Min. 6 characters",style:{width:"100%",paddingRight:"40px"}}),e.jsx("button",{type:"button",onClick:()=>N(!i),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#9fb2cc",cursor:"pointer",display:"flex",alignItems:"center",padding:0},children:i?e.jsx(y,{size:18}):e.jsx(j,{size:18})})]})]}),e.jsxs("label",{children:[e.jsx("span",{children:"비밀번호 확인"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:l?"text":"password",value:u,onChange:t=>C(t.target.value),required:!0,placeholder:"비밀번호 재입력",style:{width:"100%",paddingRight:"40px"}}),e.jsx("button",{type:"button",onClick:()=>E(!l),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#9fb2cc",cursor:"pointer",display:"flex",alignItems:"center",padding:0},children:l?e.jsx(y,{size:18}):e.jsx(j,{size:18})})]})]}),e.jsxs("label",{children:[e.jsx("span",{children:"이름"}),e.jsx("input",{type:"text",value:h,onChange:t=>S(t.target.value),required:!0,placeholder:"홍길동"})]}),e.jsxs("label",{children:[e.jsx("span",{children:"연락처"}),e.jsx("input",{type:"text",value:p,onChange:P,required:!0,placeholder:"010-1234-5678",maxLength:13})]}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:m,children:m?"처리 중...":"가입 요청"})]}),e.jsx("div",{className:"auth-footer",children:e.jsxs("p",{children:["이미 계정이 있으신가요? ",e.jsx("a",{onClick:()=>c("/login"),children:"로그인"})]})})]})})}export{_ as default};
