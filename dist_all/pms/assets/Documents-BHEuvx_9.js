import{u as D,a as C,b as w,r as i,j as e}from"./index-DLDgXF6I.js";import{b,a as p}from"./mock-8k32bwyI.js";import{P,C as k}from"./pencil-1cMlvm32.js";import{T as E,P as S}from"./trash-2-DXkKrmXK.js";import"./createLucideIcon-BDg0D3mO.js";const z=async()=>Promise.resolve(b),B=()=>D({queryKey:["documents"],queryFn:z});function L(){const{selectedId:c}=C(),{show:d}=w(),{data:o,isLoading:N,isError:f}=B(),[v,j]=i.useState(b),[h,m]=i.useState(null),[l,u]=i.useState(null);i.useEffect(()=>{o&&j(o)},[o]);const g=v.filter(s=>!c||s.projectId===c),[a,n]=i.useState({projectId:c||"p1",name:"",type:"도면",url:""});i.useEffect(()=>{c&&n(s=>({...s,projectId:c}))},[c]);const y=async s=>{if(s.preventDefault(),!a.name){m("문서명을 입력해주세요."),d("문서명을 입력해주세요.","warning");return}const r={id:l??crypto.randomUUID(),projectId:a.projectId,name:a.name,type:a.type,url:a.url||"#"};j(t=>l?t.map(x=>x.id===l?r:x):[r,...t]),m(l?"화면에서 수정했습니다. (DB 저장을 위해 백엔드 구현 필요)":"화면에만 추가했습니다. (DB 저장을 위해 백엔드 구현 필요)"),d(l?"화면에서 수정했습니다.":"화면에만 추가했습니다.","info"),n({...a,name:"",url:""}),u(null)},I=async s=>{confirm("삭제하시겠습니까?")&&(j(r=>r.filter(t=>t.id!==s)),m("삭제했습니다. (DB 삭제를 위해 백엔드 구현 필요)"),d("삭제했습니다.","success"))};return e.jsxs("div",{className:"page",children:[e.jsxs("header",{className:"section-header",children:[e.jsxs("div",{children:[e.jsx("p",{className:"eyebrow",children:"문서/보고 자동화"}),e.jsx("h2",{children:"문서 구조화 저장, 고객사 보고 양식 자동 변환"}),e.jsx("p",{className:"muted",children:"도면/계약서/허가서를 프로젝트별로 정리하고, 고객사별 보고 양식을 자동 변환합니다."})]}),e.jsx("div",{className:"pill pill-outline",children:"문서 구조화 · 양식 변환"})]}),e.jsxs("section",{className:"card table-card",children:[e.jsxs("div",{className:"table-head",children:[e.jsx("p",{className:"card-label",children:"문서 목록 (선택한 프로젝트)"}),e.jsx("div",{className:"table-actions",children:e.jsx("button",{className:"pill pill-outline",children:"양식 변환 (준비 중)"})})]}),h&&e.jsx("p",{className:"muted",children:h}),N&&e.jsx("p",{className:"muted",children:"불러오는 중..."}),f&&e.jsx("p",{className:"muted",children:"불러오기 오류, 새로고침 해주세요."}),e.jsxs("div",{className:"table",children:[e.jsxs("div",{className:"table-row table-header",children:[e.jsx("span",{children:"프로젝트"}),e.jsx("span",{children:"문서명"}),e.jsx("span",{children:"유형"}),e.jsx("span",{children:"링크"}),e.jsx("span",{children:"관리"})]}),g.map(s=>{const r=p.find(t=>t.id===s.projectId);return e.jsxs("div",{className:"table-row",children:[e.jsx("span",{children:r?.name??s.projectId}),e.jsx("span",{children:s.name}),e.jsx("span",{children:s.type}),e.jsx("span",{children:e.jsx("a",{href:s.url,target:"_blank",rel:"noreferrer",children:"열기"})}),e.jsxs("span",{className:"row-actions",children:[e.jsx("button",{className:"icon-button",onClick:()=>{u(s.id),n({projectId:s.projectId||"p1",name:s.name,type:s.type||"",url:s.url||""})},"aria-label":"편집",title:"편집",children:e.jsx(P,{size:18})}),e.jsx("button",{className:"icon-button",onClick:()=>I(s.id),"aria-label":"삭제",title:"삭제",children:e.jsx(E,{size:18})})]})]},s.id)})]})]}),e.jsxs("section",{className:"card",children:[e.jsx("p",{className:"card-label",children:l?"문서 수정":"문서 추가"}),e.jsxs("form",{className:"form-grid",onSubmit:y,children:[e.jsxs("label",{children:[e.jsx("span",{children:"프로젝트"}),e.jsx("select",{value:a.projectId,onChange:s=>n({...a,projectId:s.target.value}),children:p.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs("label",{children:[e.jsx("span",{children:"문서명"}),e.jsx("input",{value:a.name,onChange:s=>n({...a,name:s.target.value})})]}),e.jsxs("label",{children:[e.jsx("span",{children:"유형"}),e.jsxs("select",{value:a.type,onChange:s=>n({...a,type:s.target.value}),children:[e.jsx("option",{value:"도면",children:"도면"}),e.jsx("option",{value:"계약서",children:"계약서"}),e.jsx("option",{value:"허가서",children:"허가서"}),e.jsx("option",{value:"기타",children:"기타"})]})]}),e.jsxs("label",{children:[e.jsx("span",{children:"링크"}),e.jsx("input",{value:a.url,onChange:s=>n({...a,url:s.target.value})})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",className:"icon-button","aria-label":"추가",children:l?e.jsx(k,{size:18}):e.jsx(S,{size:18})})})]})]}),e.jsxs("section",{className:"grid two",children:[e.jsxs("article",{className:"card",children:[e.jsx("p",{className:"card-label",children:"핵심 기능"}),e.jsxs("ul",{className:"list",children:[e.jsx("li",{children:"도면/계약서/허가서 구조화 저장, 링크 관리"}),e.jsx("li",{children:"고객사 보고 양식 자동 변환 준비"}),e.jsx("li",{children:"사진·이슈 자동 삽입 준비(보고 자동화)"})]})]}),e.jsxs("article",{className:"card",children:[e.jsx("p",{className:"card-label",children:"데이터 키"}),e.jsxs("ul",{className:"list",children:[e.jsxs("li",{children:["`documents`: ","{projectId, name, type, url}"]}),e.jsx("li",{children:"파일 스토리지 연계 시 Storage 보안 규칙 준수"})]})]})]})]})}export{L as default};
