var Gb=i=>{throw TypeError(i)};var x1=(i,e,t)=>e.has(i)||Gb("Cannot "+t);var Mn=(i,e,t)=>(x1(i,e,"read from private field"),t?t.call(i):e.get(i)),Tr=(i,e,t)=>e.has(i)?Gb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),Ji=(i,e,t,n)=>(x1(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),Ir=(i,e,t)=>(x1(i,e,"access private method"),t);var Yb=(i,e,t,n)=>({set _(r){Ji(i,e,r,t)},get _(){return Mn(i,e,n)}});function i_(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const l=Object.getOwnPropertyDescriptor(n,r);l&&Object.defineProperty(i,r,l.get?l:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();var $d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var b1={exports:{}},Ou={};var Xb;function s_(){if(Xb)return Ou;Xb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:i,type:n,key:u,ref:r!==void 0?r:null,props:l}}return Ou.Fragment=e,Ou.jsx=t,Ou.jsxs=t,Ou}var qb;function r_(){return qb||(qb=1,b1.exports=s_()),b1.exports}var S=r_(),A1={exports:{}},mt={};var Wb;function a_(){if(Wb)return mt;Wb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function N($){return $===null||typeof $!="object"?null:($=T&&$[T]||$["@@iterator"],typeof $=="function"?$:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,L={};function k($,ue,Ce){this.props=$,this.context=ue,this.refs=L,this.updater=Ce||M}k.prototype.isReactComponent={},k.prototype.setState=function($,ue){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ue,"setState")},k.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function P(){}P.prototype=k.prototype;function j($,ue,Ce){this.props=$,this.context=ue,this.refs=L,this.updater=Ce||M}var U=j.prototype=new P;U.constructor=j,R(U,k.prototype),U.isPureReactComponent=!0;var G=Array.isArray;function Y(){}var V={H:null,A:null,T:null,S:null},ie=Object.prototype.hasOwnProperty;function Q($,ue,Ce){var Oe=Ce.ref;return{$$typeof:i,type:$,key:ue,ref:Oe!==void 0?Oe:null,props:Ce}}function be($,ue){return Q($.type,ue,$.props)}function we($){return typeof $=="object"&&$!==null&&$.$$typeof===i}function oe($){var ue={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(Ce){return ue[Ce]})}var Ee=/\/+/g;function Se($,ue){return typeof $=="object"&&$!==null&&$.key!=null?oe(""+$.key):ue.toString(36)}function ae($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(Y,Y):($.status="pending",$.then(function(ue){$.status==="pending"&&($.status="fulfilled",$.value=ue)},function(ue){$.status==="pending"&&($.status="rejected",$.reason=ue)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function K($,ue,Ce,Oe,Ve){var Re=typeof $;(Re==="undefined"||Re==="boolean")&&($=null);var Ge=!1;if($===null)Ge=!0;else switch(Re){case"bigint":case"string":case"number":Ge=!0;break;case"object":switch($.$$typeof){case i:case e:Ge=!0;break;case A:return Ge=$._init,K(Ge($._payload),ue,Ce,Oe,Ve)}}if(Ge)return Ve=Ve($),Ge=Oe===""?"."+Se($,0):Oe,G(Ve)?(Ce="",Ge!=null&&(Ce=Ge.replace(Ee,"$&/")+"/"),K(Ve,ue,Ce,"",function(ct){return ct})):Ve!=null&&(we(Ve)&&(Ve=be(Ve,Ce+(Ve.key==null||$&&$.key===Ve.key?"":(""+Ve.key).replace(Ee,"$&/")+"/")+Ge)),ue.push(Ve)),1;Ge=0;var Ne=Oe===""?".":Oe+":";if(G($))for(var Qe=0;Qe<$.length;Qe++)Oe=$[Qe],Re=Ne+Se(Oe,Qe),Ge+=K(Oe,ue,Ce,Re,Ve);else if(Qe=N($),typeof Qe=="function")for($=Qe.call($),Qe=0;!(Oe=$.next()).done;)Oe=Oe.value,Re=Ne+Se(Oe,Qe++),Ge+=K(Oe,ue,Ce,Re,Ve);else if(Re==="object"){if(typeof $.then=="function")return K(ae($),ue,Ce,Oe,Ve);throw ue=String($),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return Ge}function re($,ue,Ce){if($==null)return $;var Oe=[],Ve=0;return K($,Oe,"","",function(Re){return ue.call(Ce,Re,Ve++)}),Oe}function Ie($){if($._status===-1){var ue=$._result;ue=ue(),ue.then(function(Ce){($._status===0||$._status===-1)&&($._status=1,$._result=Ce)},function(Ce){($._status===0||$._status===-1)&&($._status=2,$._result=Ce)}),$._status===-1&&($._status=0,$._result=ue)}if($._status===1)return $._result.default;throw $._result}var Ue=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},Je={map:re,forEach:function($,ue,Ce){re($,function(){ue.apply(this,arguments)},Ce)},count:function($){var ue=0;return re($,function(){ue++}),ue},toArray:function($){return re($,function(ue){return ue})||[]},only:function($){if(!we($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return mt.Activity=E,mt.Children=Je,mt.Component=k,mt.Fragment=t,mt.Profiler=r,mt.PureComponent=j,mt.StrictMode=n,mt.Suspense=y,mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,mt.__COMPILER_RUNTIME={__proto__:null,c:function($){return V.H.useMemoCache($)}},mt.cache=function($){return function(){return $.apply(null,arguments)}},mt.cacheSignal=function(){return null},mt.cloneElement=function($,ue,Ce){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var Oe=R({},$.props),Ve=$.key;if(ue!=null)for(Re in ue.key!==void 0&&(Ve=""+ue.key),ue)!ie.call(ue,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&ue.ref===void 0||(Oe[Re]=ue[Re]);var Re=arguments.length-2;if(Re===1)Oe.children=Ce;else if(1<Re){for(var Ge=Array(Re),Ne=0;Ne<Re;Ne++)Ge[Ne]=arguments[Ne+2];Oe.children=Ge}return Q($.type,Ve,Oe)},mt.createContext=function($){return $={$$typeof:u,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:l,_context:$},$},mt.createElement=function($,ue,Ce){var Oe,Ve={},Re=null;if(ue!=null)for(Oe in ue.key!==void 0&&(Re=""+ue.key),ue)ie.call(ue,Oe)&&Oe!=="key"&&Oe!=="__self"&&Oe!=="__source"&&(Ve[Oe]=ue[Oe]);var Ge=arguments.length-2;if(Ge===1)Ve.children=Ce;else if(1<Ge){for(var Ne=Array(Ge),Qe=0;Qe<Ge;Qe++)Ne[Qe]=arguments[Qe+2];Ve.children=Ne}if($&&$.defaultProps)for(Oe in Ge=$.defaultProps,Ge)Ve[Oe]===void 0&&(Ve[Oe]=Ge[Oe]);return Q($,Re,Ve)},mt.createRef=function(){return{current:null}},mt.forwardRef=function($){return{$$typeof:f,render:$}},mt.isValidElement=we,mt.lazy=function($){return{$$typeof:A,_payload:{_status:-1,_result:$},_init:Ie}},mt.memo=function($,ue){return{$$typeof:m,type:$,compare:ue===void 0?null:ue}},mt.startTransition=function($){var ue=V.T,Ce={};V.T=Ce;try{var Oe=$(),Ve=V.S;Ve!==null&&Ve(Ce,Oe),typeof Oe=="object"&&Oe!==null&&typeof Oe.then=="function"&&Oe.then(Y,Ue)}catch(Re){Ue(Re)}finally{ue!==null&&Ce.types!==null&&(ue.types=Ce.types),V.T=ue}},mt.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},mt.use=function($){return V.H.use($)},mt.useActionState=function($,ue,Ce){return V.H.useActionState($,ue,Ce)},mt.useCallback=function($,ue){return V.H.useCallback($,ue)},mt.useContext=function($){return V.H.useContext($)},mt.useDebugValue=function(){},mt.useDeferredValue=function($,ue){return V.H.useDeferredValue($,ue)},mt.useEffect=function($,ue){return V.H.useEffect($,ue)},mt.useEffectEvent=function($){return V.H.useEffectEvent($)},mt.useId=function(){return V.H.useId()},mt.useImperativeHandle=function($,ue,Ce){return V.H.useImperativeHandle($,ue,Ce)},mt.useInsertionEffect=function($,ue){return V.H.useInsertionEffect($,ue)},mt.useLayoutEffect=function($,ue){return V.H.useLayoutEffect($,ue)},mt.useMemo=function($,ue){return V.H.useMemo($,ue)},mt.useOptimistic=function($,ue){return V.H.useOptimistic($,ue)},mt.useReducer=function($,ue,Ce){return V.H.useReducer($,ue,Ce)},mt.useRef=function($){return V.H.useRef($)},mt.useState=function($){return V.H.useState($)},mt.useSyncExternalStore=function($,ue,Ce){return V.H.useSyncExternalStore($,ue,Ce)},mt.useTransition=function(){return V.H.useTransition()},mt.version="19.2.1",mt}var Kb;function Hp(){return Kb||(Kb=1,A1.exports=a_()),A1.exports}var W=Hp();const nn=zp(W);var w1={exports:{}},Lu={},E1={exports:{}},v1={};var Qb;function o_(){return Qb||(Qb=1,(function(i){function e(K,re){var Ie=K.length;K.push(re);e:for(;0<Ie;){var Ue=Ie-1>>>1,Je=K[Ue];if(0<r(Je,re))K[Ue]=re,K[Ie]=Je,Ie=Ue;else break e}}function t(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var re=K[0],Ie=K.pop();if(Ie!==re){K[0]=Ie;e:for(var Ue=0,Je=K.length,$=Je>>>1;Ue<$;){var ue=2*(Ue+1)-1,Ce=K[ue],Oe=ue+1,Ve=K[Oe];if(0>r(Ce,Ie))Oe<Je&&0>r(Ve,Ce)?(K[Ue]=Ve,K[Oe]=Ie,Ue=Oe):(K[Ue]=Ce,K[ue]=Ie,Ue=ue);else if(Oe<Je&&0>r(Ve,Ie))K[Ue]=Ve,K[Oe]=Ie,Ue=Oe;else break e}}return re}function r(K,re){var Ie=K.sortIndex-re.sortIndex;return Ie!==0?Ie:K.id-re.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();i.unstable_now=function(){return u.now()-f}}var y=[],m=[],A=1,E=null,T=3,N=!1,M=!1,R=!1,L=!1,k=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function U(K){for(var re=t(m);re!==null;){if(re.callback===null)n(m);else if(re.startTime<=K)n(m),re.sortIndex=re.expirationTime,e(y,re);else break;re=t(m)}}function G(K){if(R=!1,U(K),!M)if(t(y)!==null)M=!0,Y||(Y=!0,oe());else{var re=t(m);re!==null&&ae(G,re.startTime-K)}}var Y=!1,V=-1,ie=5,Q=-1;function be(){return L?!0:!(i.unstable_now()-Q<ie)}function we(){if(L=!1,Y){var K=i.unstable_now();Q=K;var re=!0;try{e:{M=!1,R&&(R=!1,P(V),V=-1),N=!0;var Ie=T;try{t:{for(U(K),E=t(y);E!==null&&!(E.expirationTime>K&&be());){var Ue=E.callback;if(typeof Ue=="function"){E.callback=null,T=E.priorityLevel;var Je=Ue(E.expirationTime<=K);if(K=i.unstable_now(),typeof Je=="function"){E.callback=Je,U(K),re=!0;break t}E===t(y)&&n(y),U(K)}else n(y);E=t(y)}if(E!==null)re=!0;else{var $=t(m);$!==null&&ae(G,$.startTime-K),re=!1}}break e}finally{E=null,T=Ie,N=!1}re=void 0}}finally{re?oe():Y=!1}}}var oe;if(typeof j=="function")oe=function(){j(we)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,Se=Ee.port2;Ee.port1.onmessage=we,oe=function(){Se.postMessage(null)}}else oe=function(){k(we,0)};function ae(K,re){V=k(function(){K(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(K){switch(T){case 1:case 2:case 3:var re=3;break;default:re=T}var Ie=T;T=re;try{return K()}finally{T=Ie}},i.unstable_requestPaint=function(){L=!0},i.unstable_runWithPriority=function(K,re){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Ie=T;T=K;try{return re()}finally{T=Ie}},i.unstable_scheduleCallback=function(K,re,Ie){var Ue=i.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?Ue+Ie:Ue):Ie=Ue,K){case 1:var Je=-1;break;case 2:Je=250;break;case 5:Je=1073741823;break;case 4:Je=1e4;break;default:Je=5e3}return Je=Ie+Je,K={id:A++,callback:re,priorityLevel:K,startTime:Ie,expirationTime:Je,sortIndex:-1},Ie>Ue?(K.sortIndex=Ie,e(m,K),t(y)===null&&K===t(m)&&(R?(P(V),V=-1):R=!0,ae(G,Ie-Ue))):(K.sortIndex=Je,e(y,K),M||N||(M=!0,Y||(Y=!0,oe()))),K},i.unstable_shouldYield=be,i.unstable_wrapCallback=function(K){var re=T;return function(){var Ie=T;T=re;try{return K.apply(this,arguments)}finally{T=Ie}}}})(v1)),v1}var Zb;function l_(){return Zb||(Zb=1,E1.exports=o_()),E1.exports}var S1={exports:{}},_i={};var $b;function c_(){if($b)return _i;$b=1;var i=Hp();function e(y){var m="https://react.dev/errors/"+y;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)m+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+y+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(y,m,A){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:y,containerInfo:m,implementation:A}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(y,m){if(y==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return _i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,_i.createPortal=function(y,m){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(y,m,null,A)},_i.flushSync=function(y){var m=u.T,A=n.p;try{if(u.T=null,n.p=2,y)return y()}finally{u.T=m,n.p=A,n.d.f()}},_i.preconnect=function(y,m){typeof y=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(y,m))},_i.prefetchDNS=function(y){typeof y=="string"&&n.d.D(y)},_i.preinit=function(y,m){if(typeof y=="string"&&m&&typeof m.as=="string"){var A=m.as,E=f(A,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,N=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;A==="style"?n.d.S(y,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:N}):A==="script"&&n.d.X(y,{crossOrigin:E,integrity:T,fetchPriority:N,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},_i.preinitModule=function(y,m){if(typeof y=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var A=f(m.as,m.crossOrigin);n.d.M(y,{crossOrigin:A,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(y)},_i.preload=function(y,m){if(typeof y=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var A=m.as,E=f(A,m.crossOrigin);n.d.L(y,A,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},_i.preloadModule=function(y,m){if(typeof y=="string")if(m){var A=f(m.as,m.crossOrigin);n.d.m(y,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:A,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(y)},_i.requestFormReset=function(y){n.d.r(y)},_i.unstable_batchedUpdates=function(y,m){return y(m)},_i.useFormState=function(y,m,A){return u.H.useFormState(y,m,A)},_i.useFormStatus=function(){return u.H.useHostTransitionStatus()},_i.version="19.2.1",_i}var Jb;function u_(){if(Jb)return S1.exports;Jb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),S1.exports=c_(),S1.exports}var e2;function h_(){if(e2)return Lu;e2=1;var i=l_(),e=Hp(),t=u_();function n(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var o=s,d=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(d=o.return),s=o.return;while(s)}return o.tag===3?d:null}function u(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function f(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function y(s){if(l(s)!==s)throw Error(n(188))}function m(s){var o=s.alternate;if(!o){if(o=l(s),o===null)throw Error(n(188));return o!==s?null:s}for(var d=s,x=o;;){var v=d.return;if(v===null)break;var _=v.alternate;if(_===null){if(x=v.return,x!==null){d=x;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===d)return y(v),s;if(_===x)return y(v),o;_=_.sibling}throw Error(n(188))}if(d.return!==x.return)d=v,x=_;else{for(var O=!1,H=v.child;H;){if(H===d){O=!0,d=v,x=_;break}if(H===x){O=!0,x=v,d=_;break}H=H.sibling}if(!O){for(H=_.child;H;){if(H===d){O=!0,d=_,x=v;break}if(H===x){O=!0,x=_,d=v;break}H=H.sibling}if(!O)throw Error(n(189))}}if(d.alternate!==x)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?s:o}function A(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=A(s),o!==null)return o;s=s.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),j=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),be=Symbol.for("react.memo_cache_sentinel"),we=Symbol.iterator;function oe(s){return s===null||typeof s!="object"?null:(s=we&&s[we]||s["@@iterator"],typeof s=="function"?s:null)}var Ee=Symbol.for("react.client.reference");function Se(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Ee?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case k:return"Profiler";case L:return"StrictMode";case G:return"Suspense";case Y:return"SuspenseList";case Q:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case M:return"Portal";case j:return s.displayName||"Context";case P:return(s._context.displayName||"Context")+".Consumer";case U:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case V:return o=s.displayName||null,o!==null?o:Se(s.type)||"Memo";case ie:o=s._payload,s=s._init;try{return Se(s(o))}catch{}}return null}var ae=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie={pending:!1,data:null,method:null,action:null},Ue=[],Je=-1;function $(s){return{current:s}}function ue(s){0>Je||(s.current=Ue[Je],Ue[Je]=null,Je--)}function Ce(s,o){Je++,Ue[Je]=s.current,s.current=o}var Oe=$(null),Ve=$(null),Re=$(null),Ge=$(null);function Ne(s,o){switch(Ce(Re,o),Ce(Ve,s),Ce(Oe,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?fb(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=fb(o),s=gb(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ue(Oe),Ce(Oe,s)}function Qe(){ue(Oe),ue(Ve),ue(Re)}function ct(s){s.memoizedState!==null&&Ce(Ge,s);var o=Oe.current,d=gb(o,s.type);o!==d&&(Ce(Ve,s),Ce(Oe,d))}function Ht(s){Ve.current===s&&(ue(Oe),ue(Ve)),Ge.current===s&&(ue(Ge),Nu._currentValue=Ie)}var kn,Ye;function bt(s){if(kn===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);kn=o&&o[1]||"",Ye=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kn+s+Ye}var It=!1;function Qt(s,o){if(!s||It)return"";It=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(o){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(xe){var ge=xe}Reflect.construct(s,[],Te)}else{try{Te.call()}catch(xe){ge=xe}s.call(Te.prototype)}}else{try{throw Error()}catch(xe){ge=xe}(Te=s())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(xe){if(xe&&ge&&typeof xe.stack=="string")return[xe.stack,ge.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=x.DetermineComponentFrameRoot(),O=_[0],H=_[1];if(O&&H){var Z=O.split(`
`),fe=H.split(`
`);for(v=x=0;x<Z.length&&!Z[x].includes("DetermineComponentFrameRoot");)x++;for(;v<fe.length&&!fe[v].includes("DetermineComponentFrameRoot");)v++;if(x===Z.length||v===fe.length)for(x=Z.length-1,v=fe.length-1;1<=x&&0<=v&&Z[x]!==fe[v];)v--;for(;1<=x&&0<=v;x--,v--)if(Z[x]!==fe[v]){if(x!==1||v!==1)do if(x--,v--,0>v||Z[x]!==fe[v]){var ve=`
`+Z[x].replace(" at new "," at ");return s.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",s.displayName)),ve}while(1<=x&&0<=v);break}}}finally{It=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?bt(d):""}function ln(s,o){switch(s.tag){case 26:case 27:case 5:return bt(s.type);case 16:return bt("Lazy");case 13:return s.child!==o&&o!==null?bt("Suspense Fallback"):bt("Suspense");case 19:return bt("SuspenseList");case 0:case 15:return Qt(s.type,!1);case 11:return Qt(s.type.render,!1);case 1:return Qt(s.type,!0);case 31:return bt("Activity");default:return""}}function Dt(s){try{var o="",d=null;do o+=ln(s,d),d=s,s=s.return;while(s);return o}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var ft=Object.prototype.hasOwnProperty,te=i.unstable_scheduleCallback,J=i.unstable_cancelCallback,Ae=i.unstable_shouldYield,je=i.unstable_requestPaint,Le=i.unstable_now,Fe=i.unstable_getCurrentPriorityLevel,ze=i.unstable_ImmediatePriority,gt=i.unstable_UserBlockingPriority,ut=i.unstable_NormalPriority,_t=i.unstable_LowPriority,Vi=i.unstable_IdlePriority,Mi=i.log,Hc=i.unstable_setDisableYieldValue,Zt=null,ke=null;function $t(s){if(typeof Mi=="function"&&Hc(s),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(Zt,s)}catch{}}var pt=Math.clz32?Math.clz32:Vc,An=Math.log,gr=Math.LN2;function Vc(s){return s>>>=0,s===0?32:31-(An(s)/gr|0)|0}var Io=256,Ot=262144,Ts=4194304;function pr(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function No(s,o,d){var x=s.pendingLanes;if(x===0)return 0;var v=0,_=s.suspendedLanes,O=s.pingedLanes;s=s.warmLanes;var H=x&134217727;return H!==0?(x=H&~_,x!==0?v=pr(x):(O&=H,O!==0?v=pr(O):d||(d=H&~s,d!==0&&(v=pr(d))))):(H=x&~_,H!==0?v=pr(H):O!==0?v=pr(O):d||(d=x&~s,d!==0&&(v=pr(d)))),v===0?0:o!==0&&o!==v&&(o&_)===0&&(_=v&-v,d=o&-o,_>=d||_===32&&(d&4194048)!==0)?o:v}function xi(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function Gc(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function li(){var s=Ts;return Ts<<=1,(Ts&62914560)===0&&(Ts=4194304),s}function mr(s){for(var o=[],d=0;31>d;d++)o.push(s);return o}function yr(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Is(s,o,d,x,v,_){var O=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var H=s.entanglements,Z=s.expirationTimes,fe=s.hiddenUpdates;for(d=O&~d;0<d;){var ve=31-pt(d),Te=1<<ve;H[ve]=0,Z[ve]=-1;var ge=fe[ve];if(ge!==null)for(fe[ve]=null,ve=0;ve<ge.length;ve++){var xe=ge[ve];xe!==null&&(xe.lane&=-536870913)}d&=~Te}x!==0&&kh(s,x,0),_!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=_&~(O&~o))}function kh(s,o,d){s.pendingLanes|=o,s.suspendedLanes&=~o;var x=31-pt(o);s.entangledLanes|=o,s.entanglements[x]=s.entanglements[x]|1073741824|d&261930}function xr(s,o){var d=s.entangledLanes|=o;for(s=s.entanglements;d;){var x=31-pt(d),v=1<<x;v&o|s[x]&o&&(s[x]|=o),d&=~v}}function wl(s,o){var d=o&-o;return d=(d&42)!==0?1:fi(d),(d&(s.suspendedLanes|o))!==0?0:d}function fi(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function qs(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Di(){var s=re.p;return s!==0?s:(s=window.event,s===void 0?32:Bb(s.type))}function He(s,o){var d=re.p;try{return re.p=s,o()}finally{re.p=d}}var Oi=Math.random().toString(36).slice(2),Yn="__reactFiber$"+Oi,sn="__reactProps$"+Oi,as="__reactContainer$"+Oi,Ta="__reactEvents$"+Oi,El="__reactListeners$"+Oi,Ns="__reactHandles$"+Oi,Ph="__reactResources$"+Oi,Ro="__reactMarker$"+Oi;function Gi(s){delete s[Yn],delete s[sn],delete s[Ta],delete s[El],delete s[Ns]}function jn(s){var o=s[Yn];if(o)return o;for(var d=s.parentNode;d;){if(o=d[as]||d[Yn]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(s=wb(s);s!==null;){if(d=s[Yn])return d;s=wb(s)}return o}s=d,d=s.parentNode}return null}function qt(s){if(s=s[Yn]||s[as]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function Ia(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(n(33))}function Li(s){var o=s[Ph];return o||(o=s[Ph]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Un(s){s[Ro]=!0}var Me=new Set,Bh={};function Jt(s,o){os(s,o),os(s+"Capture",o)}function os(s,o){for(Bh[s]=o,s=0;s<o.length;s++)Me.add(o[s])}var S0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vt={},zt={};function Nt(s){return ft.call(zt,s)?!0:ft.call(Vt,s)?!1:S0.test(s)?zt[s]=!0:(Vt[s]=!0,!1)}function Na(s,o,d){if(Nt(o))if(d===null)s.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var x=o.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+d)}}function Ra(s,o,d){if(d===null)s.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+d)}}function ls(s,o,d,x){if(x===null)s.removeAttribute(d);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(o,d,""+x)}}function Gt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ws(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function C0(s,o,d){var x=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var v=x.get,_=x.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return v.call(this)},set:function(O){d=""+O,_.call(this,O)}}),Object.defineProperty(s,o,{enumerable:x.enumerable}),{getValue:function(){return d},setValue:function(O){d=""+O},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function En(s){if(!s._valueTracker){var o=Ws(s)?"checked":"value";s._valueTracker=C0(s,o,""+s[o])}}function Ks(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var d=o.getValue(),x="";return s&&(x=Ws(s)?s.checked?"true":"false":s.value),s=x,s!==d?(o.setValue(s),!0):!1}function vl(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ma=/[\n"\\]/g;function Tt(s){return s.replace(Ma,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ei(s,o,d,x,v,_,O,H){s.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?s.type=O:s.removeAttribute("type"),o!=null?O==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+Gt(o)):s.value!==""+Gt(o)&&(s.value=""+Gt(o)):O!=="submit"&&O!=="reset"||s.removeAttribute("value"),o!=null?X(s,O,Gt(o)):d!=null?X(s,O,Gt(d)):x!=null&&s.removeAttribute("value"),v==null&&_!=null&&(s.defaultChecked=!!_),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?s.name=""+Gt(H):s.removeAttribute("name")}function he(s,o,d,x,v,_,O,H){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),o!=null||d!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){En(s);return}d=d!=null?""+Gt(d):"",o=o!=null?""+Gt(o):d,H||o===s.value||(s.value=o),s.defaultValue=o}x=x??v,x=typeof x!="function"&&typeof x!="symbol"&&!!x,s.checked=H?s.checked:!!x,s.defaultChecked=!!x,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(s.name=O),En(s)}function X(s,o,d){o==="number"&&vl(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function $e(s,o,d,x){if(s=s.options,o){o={};for(var v=0;v<d.length;v++)o["$"+d[v]]=!0;for(d=0;d<s.length;d++)v=o.hasOwnProperty("$"+s[d].value),s[d].selected!==v&&(s[d].selected=v),v&&x&&(s[d].defaultSelected=!0)}else{for(d=""+Gt(d),o=null,v=0;v<s.length;v++){if(s[v].value===d){s[v].selected=!0,x&&(s[v].defaultSelected=!0);return}o!==null||s[v].disabled||(o=s[v])}o!==null&&(o.selected=!0)}}function Xn(s,o,d){if(o!=null&&(o=""+Gt(o),o!==s.value&&(s.value=o),d==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=d!=null?""+Gt(d):""}function ki(s,o,d,x){if(o==null){if(x!=null){if(d!=null)throw Error(n(92));if(ae(x)){if(1<x.length)throw Error(n(93));x=x[0]}d=x}d==null&&(d=""),o=d}d=Gt(o),s.defaultValue=d,x=s.textContent,x===d&&x!==""&&x!==null&&(s.value=x),En(s)}function Da(s,o){if(o){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=o;return}}s.textContent=o}var Yc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pi(s,o,d){var x=o.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?x?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":x?s.setProperty(o,d):typeof d!="number"||d===0||Yc.has(o)?o==="float"?s.cssFloat=d:s[o]=(""+d).trim():s[o]=d+"px"}function tt(s,o,d){if(o!=null&&typeof o!="object")throw Error(n(62));if(s=s.style,d!=null){for(var x in d)!d.hasOwnProperty(x)||o!=null&&o.hasOwnProperty(x)||(x.indexOf("--")===0?s.setProperty(x,""):x==="float"?s.cssFloat="":s[x]="");for(var v in o)x=o[v],o.hasOwnProperty(v)&&d[v]!==x&&Pi(s,v,x)}else for(var _ in o)o.hasOwnProperty(_)&&Pi(s,_,o[_])}function fn(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oa(s){return _0.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Yi(){}var Mo=null;function Xc(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var vn=null,Rs=null;function Qs(s){var o=qt(s);if(o&&(s=o.stateNode)){var d=s[sn]||null;e:switch(s=o.stateNode,o.type){case"input":if(ei(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),o=d.name,d.type==="radio"&&o!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Tt(""+o)+'"][type="radio"]'),o=0;o<d.length;o++){var x=d[o];if(x!==s&&x.form===s.form){var v=x[sn]||null;if(!v)throw Error(n(90));ei(x,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<d.length;o++)x=d[o],x.form===s.form&&Ks(x)}break e;case"textarea":Xn(s,d.value,d.defaultValue);break e;case"select":o=d.value,o!=null&&$e(s,!!d.multiple,o,!1)}}}var st=!1;function jh(s,o,d){if(st)return s(o,d);st=!0;try{var x=s(o);return x}finally{if(st=!1,(vn!==null||Rs!==null)&&(Rd(),vn&&(o=vn,s=Rs,Rs=vn=null,Qs(o),s)))for(o=0;o<s.length;o++)Qs(s[o])}}function ht(s,o){var d=s.stateNode;if(d===null)return null;var x=d[sn]||null;if(x===null)return null;d=x[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(s=s.type,x=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!x;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(n(231,o,typeof d));return d}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qc=!1;if(gn)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){qc=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{qc=!1}var Zs=null,$s=null,Sl=null;function La(){if(Sl)return Sl;var s,o=$s,d=o.length,x,v="value"in Zs?Zs.value:Zs.textContent,_=v.length;for(s=0;s<d&&o[s]===v[s];s++);var O=d-s;for(x=1;x<=O&&o[d-x]===v[_-x];x++);return Sl=v.slice(s,1<x?1-x:void 0)}function br(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Ar(){return!0}function Wc(){return!1}function ti(s){function o(d,x,v,_,O){this._reactName=d,this._targetInst=v,this.type=x,this.nativeEvent=_,this.target=O,this.currentTarget=null;for(var H in s)s.hasOwnProperty(H)&&(d=s[H],this[H]=d?d(_):_[H]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ar:Wc,this.isPropagationStopped=Wc,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ar)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ar)},persist:function(){},isPersistent:Ar}),o}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ci=ti(cs),ka=E({},cs,{view:0,detail:0}),Uh=ti(ka),Cl,Kc,Do,_l=E({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Do&&(Do&&s.type==="mousemove"?(Cl=s.screenX-Do.screenX,Kc=s.screenY-Do.screenY):Kc=Cl=0,Do=s),Cl)},movementY:function(s){return"movementY"in s?s.movementY:Kc}}),Wt=ti(_l),zh=E({},_l,{dataTransfer:0}),Tl=ti(zh),wr=E({},ka,{relatedTarget:0}),Qc=ti(wr),me=E({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),Et=ti(me),ui=E({},cs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Il=ti(ui),Hh=E({},cs,{data:0}),Vh=ti(Hh),T0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qn(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Zc[s])?!!o[s]:!1}function Oo(){return qn}var Nn=E({},ka,{key:function(s){if(s.key){var o=T0[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=br(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?I0[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oo,charCode:function(s){return s.type==="keypress"?br(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?br(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Nl=ti(Nn),Xr=E({},_l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),en=ti(Xr),rt=E({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oo}),N0=ti(rt),pn=E({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),qr=ti(pn),Pa=E({},_l,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),R0=ti(Pa),Ms=E({},cs,{newState:0,oldState:0}),$c=ti(Ms),Gh=[9,13,27,32],Lo=gn&&"CompositionEvent"in window,Ba=null;gn&&"documentMode"in document&&(Ba=document.documentMode);var Yh=gn&&"TextEvent"in window&&!Ba,Xh=gn&&(!Lo||Ba&&8<Ba&&11>=Ba),Wr=" ",Rl=!1;function qh(s,o){switch(s){case"keyup":return Gh.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fa(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ja=!1;function Er(s,o){switch(s){case"compositionend":return Fa(o);case"keypress":return o.which!==32?null:(Rl=!0,Wr);case"textInput":return s=o.data,s===Wr&&Rl?null:s;default:return null}}function Ml(s,o){if(ja)return s==="compositionend"||!Lo&&qh(s,o)?(s=La(),Sl=$s=Zs=null,ja=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Xh&&o.locale!=="ko"?null:o.data;default:return null}}var Xi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jc(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!Xi[s.type]:o==="textarea"}function us(s,o,d,x){vn?Rs?Rs.push(x):Rs=[x]:vn=x,o=Bd(o,"onChange"),0<o.length&&(d=new ci("onChange","change",null,d,x),s.push({event:d,listeners:o}))}var ko=null,Kr=null;function M0(s){ob(s,0)}function Po(s){var o=Ia(s);if(Ks(o))return s}function hs(s,o){if(s==="change")return o}var Wh=!1;if(gn){var Bo;if(gn){var Qr="oninput"in document;if(!Qr){var Lt=document.createElement("div");Lt.setAttribute("oninput","return;"),Qr=typeof Lt.oninput=="function"}Bo=Qr}else Bo=!1;Wh=Bo&&(!document.documentMode||9<document.documentMode)}function Fo(){ko&&(ko.detachEvent("onpropertychange",B),Kr=ko=null)}function B(s){if(s.propertyName==="value"&&Po(Kr)){var o=[];us(o,Kr,s,Xc(s)),jh(M0,o)}}function a(s,o,d){s==="focusin"?(Fo(),ko=o,Kr=d,ko.attachEvent("onpropertychange",B)):s==="focusout"&&Fo()}function c(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Po(Kr)}function h(s,o){if(s==="click")return Po(o)}function g(s,o){if(s==="input"||s==="change")return Po(o)}function p(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var b=typeof Object.is=="function"?Object.is:p;function w(s,o){if(b(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var d=Object.keys(s),x=Object.keys(o);if(d.length!==x.length)return!1;for(x=0;x<d.length;x++){var v=d[x];if(!ft.call(o,v)||!b(s[v],o[v]))return!1}return!0}function C(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function I(s,o){var d=C(s);s=0;for(var x;d;){if(d.nodeType===3){if(x=s+d.textContent.length,s<=o&&x>=o)return{node:d,offset:o-s};s=x}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=C(d)}}function D(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?D(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function F(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=vl(s.document);o instanceof s.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)s=o.contentWindow;else break;o=vl(s.document)}return o}function z(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var q=gn&&"documentMode"in document&&11>=document.documentMode,ee=null,ne=null,ce=null,pe=!1;function Be(s,o,d){var x=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;pe||ee==null||ee!==vl(x)||(x=ee,"selectionStart"in x&&z(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),ce&&w(ce,x)||(ce=x,x=Bd(ne,"onSelect"),0<x.length&&(o=new ci("onSelect","select",null,o,d),s.push({event:o,listeners:x}),o.target=ee)))}function Pe(s,o){var d={};return d[s.toLowerCase()]=o.toLowerCase(),d["Webkit"+s]="webkit"+o,d["Moz"+s]="moz"+o,d}var De={animationend:Pe("Animation","AnimationEnd"),animationiteration:Pe("Animation","AnimationIteration"),animationstart:Pe("Animation","AnimationStart"),transitionrun:Pe("Transition","TransitionRun"),transitionstart:Pe("Transition","TransitionStart"),transitioncancel:Pe("Transition","TransitionCancel"),transitionend:Pe("Transition","TransitionEnd")},Ct={},dt={};gn&&(dt=document.createElement("div").style,"AnimationEvent"in window||(delete De.animationend.animation,delete De.animationiteration.animation,delete De.animationstart.animation),"TransitionEvent"in window||delete De.transitionend.transition);function zn(s){if(Ct[s])return Ct[s];if(!De[s])return s;var o=De[s],d;for(d in o)if(o.hasOwnProperty(d)&&d in dt)return Ct[s]=o[d];return s}var qi=zn("animationend"),bi=zn("animationiteration"),tn=zn("animationstart"),hi=zn("transitionrun"),Bi=zn("transitionstart"),Ua=zn("transitioncancel"),Zr=zn("transitionend"),Kh=new Map,eu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");eu.push("scrollEnd");function Js(s,o){Kh.set(s,o),Jt(o,[s])}var Qh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Ds=[],Dl=0,D0=0;function Zh(){for(var s=Dl,o=D0=Dl=0;o<s;){var d=Ds[o];Ds[o++]=null;var x=Ds[o];Ds[o++]=null;var v=Ds[o];Ds[o++]=null;var _=Ds[o];if(Ds[o++]=null,x!==null&&v!==null){var O=x.pending;O===null?v.next=v:(v.next=O.next,O.next=v),x.pending=v}_!==0&&Hm(d,v,_)}}function $h(s,o,d,x){Ds[Dl++]=s,Ds[Dl++]=o,Ds[Dl++]=d,Ds[Dl++]=x,D0|=x,s.lanes|=x,s=s.alternate,s!==null&&(s.lanes|=x)}function O0(s,o,d,x){return $h(s,o,d,x),Jh(s)}function jo(s,o){return $h(s,null,null,o),Jh(s)}function Hm(s,o,d){s.lanes|=d;var x=s.alternate;x!==null&&(x.lanes|=d);for(var v=!1,_=s.return;_!==null;)_.childLanes|=d,x=_.alternate,x!==null&&(x.childLanes|=d),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(v=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,v&&o!==null&&(v=31-pt(d),s=_.hiddenUpdates,x=s[v],x===null?s[v]=[o]:x.push(o),o.lane=d|536870912),_):null}function Jh(s){if(50<Eu)throw Eu=0,Hg=null,Error(n(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Ol={};function US(s,o,d,x){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(s,o,d,x){return new US(s,o,d,x)}function L0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function $r(s,o){var d=s.alternate;return d===null?(d=ds(s.tag,o,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=o,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&65011712,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,o=s.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function Vm(s,o){s.flags&=65011714;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,o=d.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function ed(s,o,d,x,v,_){var O=0;if(x=s,typeof s=="function")L0(s)&&(O=1);else if(typeof s=="string")O=YC(s,d,Oe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case Q:return s=ds(31,d,o,v),s.elementType=Q,s.lanes=_,s;case R:return Uo(d.children,v,_,o);case L:O=8,v|=24;break;case k:return s=ds(12,d,o,v|2),s.elementType=k,s.lanes=_,s;case G:return s=ds(13,d,o,v),s.elementType=G,s.lanes=_,s;case Y:return s=ds(19,d,o,v),s.elementType=Y,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:O=10;break e;case P:O=9;break e;case U:O=11;break e;case V:O=14;break e;case ie:O=16,x=null;break e}O=29,d=Error(n(130,s===null?"null":typeof s,"")),x=null}return o=ds(O,d,o,v),o.elementType=s,o.type=x,o.lanes=_,o}function Uo(s,o,d,x){return s=ds(7,s,x,o),s.lanes=d,s}function k0(s,o,d){return s=ds(6,s,null,o),s.lanes=d,s}function Gm(s){var o=ds(18,null,null,0);return o.stateNode=s,o}function P0(s,o,d){return o=ds(4,s.children!==null?s.children:[],s.key,o),o.lanes=d,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Ym=new WeakMap;function Os(s,o){if(typeof s=="object"&&s!==null){var d=Ym.get(s);return d!==void 0?d:(o={value:s,source:o,stack:Dt(o)},Ym.set(s,o),o)}return{value:s,source:o,stack:Dt(o)}}var Ll=[],kl=0,td=null,tu=0,Ls=[],ks=0,za=null,vr=1,Sr="";function Jr(s,o){Ll[kl++]=tu,Ll[kl++]=td,td=s,tu=o}function Xm(s,o,d){Ls[ks++]=vr,Ls[ks++]=Sr,Ls[ks++]=za,za=s;var x=vr;s=Sr;var v=32-pt(x)-1;x&=~(1<<v),d+=1;var _=32-pt(o)+v;if(30<_){var O=v-v%5;_=(x&(1<<O)-1).toString(32),x>>=O,v-=O,vr=1<<32-pt(o)+v|d<<v|x,Sr=_+s}else vr=1<<_|d<<v|x,Sr=s}function B0(s){s.return!==null&&(Jr(s,1),Xm(s,1,0))}function F0(s){for(;s===td;)td=Ll[--kl],Ll[kl]=null,tu=Ll[--kl],Ll[kl]=null;for(;s===za;)za=Ls[--ks],Ls[ks]=null,Sr=Ls[--ks],Ls[ks]=null,vr=Ls[--ks],Ls[ks]=null}function qm(s,o){Ls[ks++]=vr,Ls[ks++]=Sr,Ls[ks++]=za,vr=o.id,Sr=o.overflow,za=s}var Ai=null,Sn=null,jt=!1,Ha=null,Ps=!1,j0=Error(n(519));function Va(s){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nu(Os(o,s)),j0}function Wm(s){var o=s.stateNode,d=s.type,x=s.memoizedProps;switch(o[Yn]=s,o[sn]=x,d){case"dialog":Mt("cancel",o),Mt("close",o);break;case"iframe":case"object":case"embed":Mt("load",o);break;case"video":case"audio":for(d=0;d<Su.length;d++)Mt(Su[d],o);break;case"source":Mt("error",o);break;case"img":case"image":case"link":Mt("error",o),Mt("load",o);break;case"details":Mt("toggle",o);break;case"input":Mt("invalid",o),he(o,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":Mt("invalid",o);break;case"textarea":Mt("invalid",o),ki(o,x.value,x.defaultValue,x.children)}d=x.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||o.textContent===""+d||x.suppressHydrationWarning===!0||hb(o.textContent,d)?(x.popover!=null&&(Mt("beforetoggle",o),Mt("toggle",o)),x.onScroll!=null&&Mt("scroll",o),x.onScrollEnd!=null&&Mt("scrollend",o),x.onClick!=null&&(o.onclick=Yi),o=!0):o=!1,o||Va(s,!0)}function Km(s){for(Ai=s.return;Ai;)switch(Ai.tag){case 5:case 31:case 13:Ps=!1;return;case 27:case 3:Ps=!0;return;default:Ai=Ai.return}}function Pl(s){if(s!==Ai)return!1;if(!jt)return Km(s),jt=!0,!1;var o=s.tag,d;if((d=o!==3&&o!==27)&&((d=o===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||i1(s.type,s.memoizedProps)),d=!d),d&&Sn&&Va(s),Km(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));Sn=Ab(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));Sn=Ab(s)}else o===27?(o=Sn,io(s.type)?(s=l1,l1=null,Sn=s):Sn=o):Sn=Ai?Fs(s.stateNode.nextSibling):null;return!0}function zo(){Sn=Ai=null,jt=!1}function U0(){var s=Ha;return s!==null&&(Zi===null?Zi=s:Zi.push.apply(Zi,s),Ha=null),s}function nu(s){Ha===null?Ha=[s]:Ha.push(s)}var z0=$(null),Ho=null,ea=null;function Ga(s,o,d){Ce(z0,o._currentValue),o._currentValue=d}function ta(s){s._currentValue=z0.current,ue(z0)}function H0(s,o,d){for(;s!==null;){var x=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,x!==null&&(x.childLanes|=o)):x!==null&&(x.childLanes&o)!==o&&(x.childLanes|=o),s===d)break;s=s.return}}function V0(s,o,d,x){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var _=v.dependencies;if(_!==null){var O=v.child;_=_.firstContext;e:for(;_!==null;){var H=_;_=v;for(var Z=0;Z<o.length;Z++)if(H.context===o[Z]){_.lanes|=d,H=_.alternate,H!==null&&(H.lanes|=d),H0(_.return,d,s),x||(O=null);break e}_=H.next}}else if(v.tag===18){if(O=v.return,O===null)throw Error(n(341));O.lanes|=d,_=O.alternate,_!==null&&(_.lanes|=d),H0(O,d,s),O=null}else O=v.child;if(O!==null)O.return=v;else for(O=v;O!==null;){if(O===s){O=null;break}if(v=O.sibling,v!==null){v.return=O.return,O=v;break}O=O.return}v=O}}function Bl(s,o,d,x){s=null;for(var v=o,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var O=v.alternate;if(O===null)throw Error(n(387));if(O=O.memoizedProps,O!==null){var H=v.type;b(v.pendingProps.value,O.value)||(s!==null?s.push(H):s=[H])}}else if(v===Ge.current){if(O=v.alternate,O===null)throw Error(n(387));O.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(Nu):s=[Nu])}v=v.return}s!==null&&V0(o,s,d,x),o.flags|=262144}function nd(s){for(s=s.firstContext;s!==null;){if(!b(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Vo(s){Ho=s,ea=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function wi(s){return Qm(Ho,s)}function id(s,o){return Ho===null&&Vo(s),Qm(s,o)}function Qm(s,o){var d=o._currentValue;if(o={context:o,memoizedValue:d,next:null},ea===null){if(s===null)throw Error(n(308));ea=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else ea=ea.next=o;return d}var zS=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(d,x){s.push(x)}};this.abort=function(){o.aborted=!0,s.forEach(function(d){return d()})}},HS=i.unstable_scheduleCallback,VS=i.unstable_NormalPriority,ni={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function G0(){return{controller:new zS,data:new Map,refCount:0}}function iu(s){s.refCount--,s.refCount===0&&HS(VS,function(){s.controller.abort()})}var su=null,Y0=0,Fl=0,jl=null;function GS(s,o){if(su===null){var d=su=[];Y0=0,Fl=Wg(),jl={status:"pending",value:void 0,then:function(x){d.push(x)}}}return Y0++,o.then(Zm,Zm),o}function Zm(){if(--Y0===0&&su!==null){jl!==null&&(jl.status="fulfilled");var s=su;su=null,Fl=0,jl=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function YS(s,o){var d=[],x={status:"pending",value:null,reason:null,then:function(v){d.push(v)}};return s.then(function(){x.status="fulfilled",x.value=o;for(var v=0;v<d.length;v++)(0,d[v])(o)},function(v){for(x.status="rejected",x.reason=v,v=0;v<d.length;v++)(0,d[v])(void 0)}),x}var $m=K.S;K.S=function(s,o){kx=Le(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&GS(s,o),$m!==null&&$m(s,o)};var Go=$(null);function X0(){var s=Go.current;return s!==null?s:mn.pooledCache}function sd(s,o){o===null?Ce(Go,Go.current):Ce(Go,o.pool)}function Jm(){var s=X0();return s===null?null:{parent:ni._currentValue,pool:s}}var Ul=Error(n(460)),q0=Error(n(474)),rd=Error(n(542)),ad={then:function(){}};function ey(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ty(s,o,d){switch(d=s[d],d===void 0?s.push(o):d!==o&&(o.then(Yi,Yi),o=d),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,iy(s),s;default:if(typeof o.status=="string")o.then(Yi,Yi);else{if(s=mn,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=o,s.status="pending",s.then(function(x){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=x}},function(x){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=x}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,iy(s),s}throw Xo=o,Ul}}function Yo(s){try{var o=s._init;return o(s._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(Xo=d,Ul):d}}var Xo=null;function ny(){if(Xo===null)throw Error(n(459));var s=Xo;return Xo=null,s}function iy(s){if(s===Ul||s===rd)throw Error(n(483))}var zl=null,ru=0;function od(s){var o=ru;return ru+=1,zl===null&&(zl=[]),ty(zl,s,o)}function au(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function ld(s,o){throw o.$$typeof===T?Error(n(525)):(s=Object.prototype.toString.call(o),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function sy(s){function o(le,se){if(s){var de=le.deletions;de===null?(le.deletions=[se],le.flags|=16):de.push(se)}}function d(le,se){if(!s)return null;for(;se!==null;)o(le,se),se=se.sibling;return null}function x(le){for(var se=new Map;le!==null;)le.key!==null?se.set(le.key,le):se.set(le.index,le),le=le.sibling;return se}function v(le,se){return le=$r(le,se),le.index=0,le.sibling=null,le}function _(le,se,de){return le.index=de,s?(de=le.alternate,de!==null?(de=de.index,de<se?(le.flags|=67108866,se):de):(le.flags|=67108866,se)):(le.flags|=1048576,se)}function O(le){return s&&le.alternate===null&&(le.flags|=67108866),le}function H(le,se,de,_e){return se===null||se.tag!==6?(se=k0(de,le.mode,_e),se.return=le,se):(se=v(se,de),se.return=le,se)}function Z(le,se,de,_e){var nt=de.type;return nt===R?ve(le,se,de.props.children,_e,de.key):se!==null&&(se.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===ie&&Yo(nt)===se.type)?(se=v(se,de.props),au(se,de),se.return=le,se):(se=ed(de.type,de.key,de.props,null,le.mode,_e),au(se,de),se.return=le,se)}function fe(le,se,de,_e){return se===null||se.tag!==4||se.stateNode.containerInfo!==de.containerInfo||se.stateNode.implementation!==de.implementation?(se=P0(de,le.mode,_e),se.return=le,se):(se=v(se,de.children||[]),se.return=le,se)}function ve(le,se,de,_e,nt){return se===null||se.tag!==7?(se=Uo(de,le.mode,_e,nt),se.return=le,se):(se=v(se,de),se.return=le,se)}function Te(le,se,de){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=k0(""+se,le.mode,de),se.return=le,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case N:return de=ed(se.type,se.key,se.props,null,le.mode,de),au(de,se),de.return=le,de;case M:return se=P0(se,le.mode,de),se.return=le,se;case ie:return se=Yo(se),Te(le,se,de)}if(ae(se)||oe(se))return se=Uo(se,le.mode,de,null),se.return=le,se;if(typeof se.then=="function")return Te(le,od(se),de);if(se.$$typeof===j)return Te(le,id(le,se),de);ld(le,se)}return null}function ge(le,se,de,_e){var nt=se!==null?se.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return nt!==null?null:H(le,se,""+de,_e);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case N:return de.key===nt?Z(le,se,de,_e):null;case M:return de.key===nt?fe(le,se,de,_e):null;case ie:return de=Yo(de),ge(le,se,de,_e)}if(ae(de)||oe(de))return nt!==null?null:ve(le,se,de,_e,null);if(typeof de.then=="function")return ge(le,se,od(de),_e);if(de.$$typeof===j)return ge(le,se,id(le,de),_e);ld(le,de)}return null}function xe(le,se,de,_e,nt){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return le=le.get(de)||null,H(se,le,""+_e,nt);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case N:return le=le.get(_e.key===null?de:_e.key)||null,Z(se,le,_e,nt);case M:return le=le.get(_e.key===null?de:_e.key)||null,fe(se,le,_e,nt);case ie:return _e=Yo(_e),xe(le,se,de,_e,nt)}if(ae(_e)||oe(_e))return le=le.get(de)||null,ve(se,le,_e,nt,null);if(typeof _e.then=="function")return xe(le,se,de,od(_e),nt);if(_e.$$typeof===j)return xe(le,se,de,id(se,_e),nt);ld(se,_e)}return null}function Ze(le,se,de,_e){for(var nt=null,Yt=null,et=se,vt=se=0,Pt=null;et!==null&&vt<de.length;vt++){et.index>vt?(Pt=et,et=null):Pt=et.sibling;var Xt=ge(le,et,de[vt],_e);if(Xt===null){et===null&&(et=Pt);break}s&&et&&Xt.alternate===null&&o(le,et),se=_(Xt,se,vt),Yt===null?nt=Xt:Yt.sibling=Xt,Yt=Xt,et=Pt}if(vt===de.length)return d(le,et),jt&&Jr(le,vt),nt;if(et===null){for(;vt<de.length;vt++)et=Te(le,de[vt],_e),et!==null&&(se=_(et,se,vt),Yt===null?nt=et:Yt.sibling=et,Yt=et);return jt&&Jr(le,vt),nt}for(et=x(et);vt<de.length;vt++)Pt=xe(et,le,vt,de[vt],_e),Pt!==null&&(s&&Pt.alternate!==null&&et.delete(Pt.key===null?vt:Pt.key),se=_(Pt,se,vt),Yt===null?nt=Pt:Yt.sibling=Pt,Yt=Pt);return s&&et.forEach(function(lo){return o(le,lo)}),jt&&Jr(le,vt),nt}function at(le,se,de,_e){if(de==null)throw Error(n(151));for(var nt=null,Yt=null,et=se,vt=se=0,Pt=null,Xt=de.next();et!==null&&!Xt.done;vt++,Xt=de.next()){et.index>vt?(Pt=et,et=null):Pt=et.sibling;var lo=ge(le,et,Xt.value,_e);if(lo===null){et===null&&(et=Pt);break}s&&et&&lo.alternate===null&&o(le,et),se=_(lo,se,vt),Yt===null?nt=lo:Yt.sibling=lo,Yt=lo,et=Pt}if(Xt.done)return d(le,et),jt&&Jr(le,vt),nt;if(et===null){for(;!Xt.done;vt++,Xt=de.next())Xt=Te(le,Xt.value,_e),Xt!==null&&(se=_(Xt,se,vt),Yt===null?nt=Xt:Yt.sibling=Xt,Yt=Xt);return jt&&Jr(le,vt),nt}for(et=x(et);!Xt.done;vt++,Xt=de.next())Xt=xe(et,le,vt,Xt.value,_e),Xt!==null&&(s&&Xt.alternate!==null&&et.delete(Xt.key===null?vt:Xt.key),se=_(Xt,se,vt),Yt===null?nt=Xt:Yt.sibling=Xt,Yt=Xt);return s&&et.forEach(function(n_){return o(le,n_)}),jt&&Jr(le,vt),nt}function hn(le,se,de,_e){if(typeof de=="object"&&de!==null&&de.type===R&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case N:e:{for(var nt=de.key;se!==null;){if(se.key===nt){if(nt=de.type,nt===R){if(se.tag===7){d(le,se.sibling),_e=v(se,de.props.children),_e.return=le,le=_e;break e}}else if(se.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===ie&&Yo(nt)===se.type){d(le,se.sibling),_e=v(se,de.props),au(_e,de),_e.return=le,le=_e;break e}d(le,se);break}else o(le,se);se=se.sibling}de.type===R?(_e=Uo(de.props.children,le.mode,_e,de.key),_e.return=le,le=_e):(_e=ed(de.type,de.key,de.props,null,le.mode,_e),au(_e,de),_e.return=le,le=_e)}return O(le);case M:e:{for(nt=de.key;se!==null;){if(se.key===nt)if(se.tag===4&&se.stateNode.containerInfo===de.containerInfo&&se.stateNode.implementation===de.implementation){d(le,se.sibling),_e=v(se,de.children||[]),_e.return=le,le=_e;break e}else{d(le,se);break}else o(le,se);se=se.sibling}_e=P0(de,le.mode,_e),_e.return=le,le=_e}return O(le);case ie:return de=Yo(de),hn(le,se,de,_e)}if(ae(de))return Ze(le,se,de,_e);if(oe(de)){if(nt=oe(de),typeof nt!="function")throw Error(n(150));return de=nt.call(de),at(le,se,de,_e)}if(typeof de.then=="function")return hn(le,se,od(de),_e);if(de.$$typeof===j)return hn(le,se,id(le,de),_e);ld(le,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,se!==null&&se.tag===6?(d(le,se.sibling),_e=v(se,de),_e.return=le,le=_e):(d(le,se),_e=k0(de,le.mode,_e),_e.return=le,le=_e),O(le)):d(le,se)}return function(le,se,de,_e){try{ru=0;var nt=hn(le,se,de,_e);return zl=null,nt}catch(et){if(et===Ul||et===rd)throw et;var Yt=ds(29,et,null,le.mode);return Yt.lanes=_e,Yt.return=le,Yt}finally{}}}var qo=sy(!0),ry=sy(!1),Ya=!1;function W0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function K0(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Xa(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function qa(s,o,d){var x=s.updateQueue;if(x===null)return null;if(x=x.shared,(Kt&2)!==0){var v=x.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),x.pending=o,o=Jh(s),Hm(s,null,d),o}return $h(s,x,o,d),Jh(s)}function ou(s,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194048)!==0)){var x=o.lanes;x&=s.pendingLanes,d|=x,o.lanes=d,xr(s,d)}}function Q0(s,o){var d=s.updateQueue,x=s.alternate;if(x!==null&&(x=x.updateQueue,d===x)){var v=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var O={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};_===null?v=_=O:_=_.next=O,d=d.next}while(d!==null);_===null?v=_=o:_=_.next=o}else v=_=o;d={baseState:x.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:x.shared,callbacks:x.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=o:s.next=o,d.lastBaseUpdate=o}var Z0=!1;function lu(){if(Z0){var s=jl;if(s!==null)throw s}}function cu(s,o,d,x){Z0=!1;var v=s.updateQueue;Ya=!1;var _=v.firstBaseUpdate,O=v.lastBaseUpdate,H=v.shared.pending;if(H!==null){v.shared.pending=null;var Z=H,fe=Z.next;Z.next=null,O===null?_=fe:O.next=fe,O=Z;var ve=s.alternate;ve!==null&&(ve=ve.updateQueue,H=ve.lastBaseUpdate,H!==O&&(H===null?ve.firstBaseUpdate=fe:H.next=fe,ve.lastBaseUpdate=Z))}if(_!==null){var Te=v.baseState;O=0,ve=fe=Z=null,H=_;do{var ge=H.lane&-536870913,xe=ge!==H.lane;if(xe?(kt&ge)===ge:(x&ge)===ge){ge!==0&&ge===Fl&&(Z0=!0),ve!==null&&(ve=ve.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var Ze=s,at=H;ge=o;var hn=d;switch(at.tag){case 1:if(Ze=at.payload,typeof Ze=="function"){Te=Ze.call(hn,Te,ge);break e}Te=Ze;break e;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=at.payload,ge=typeof Ze=="function"?Ze.call(hn,Te,ge):Ze,ge==null)break e;Te=E({},Te,ge);break e;case 2:Ya=!0}}ge=H.callback,ge!==null&&(s.flags|=64,xe&&(s.flags|=8192),xe=v.callbacks,xe===null?v.callbacks=[ge]:xe.push(ge))}else xe={lane:ge,tag:H.tag,payload:H.payload,callback:H.callback,next:null},ve===null?(fe=ve=xe,Z=Te):ve=ve.next=xe,O|=ge;if(H=H.next,H===null){if(H=v.shared.pending,H===null)break;xe=H,H=xe.next,xe.next=null,v.lastBaseUpdate=xe,v.shared.pending=null}}while(!0);ve===null&&(Z=Te),v.baseState=Z,v.firstBaseUpdate=fe,v.lastBaseUpdate=ve,_===null&&(v.shared.lanes=0),$a|=O,s.lanes=O,s.memoizedState=Te}}function ay(s,o){if(typeof s!="function")throw Error(n(191,s));s.call(o)}function oy(s,o){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)ay(d[s],o)}var Hl=$(null),cd=$(0);function ly(s,o){s=ua,Ce(cd,s),Ce(Hl,o),ua=s|o.baseLanes}function $0(){Ce(cd,ua),Ce(Hl,Hl.current)}function J0(){ua=cd.current,ue(Hl),ue(cd)}var fs=$(null),Bs=null;function Wa(s){var o=s.alternate;Ce(Wn,Wn.current&1),Ce(fs,s),Bs===null&&(o===null||Hl.current!==null||o.memoizedState!==null)&&(Bs=s)}function eg(s){Ce(Wn,Wn.current),Ce(fs,s),Bs===null&&(Bs=s)}function cy(s){s.tag===22?(Ce(Wn,Wn.current),Ce(fs,s),Bs===null&&(Bs=s)):Ka()}function Ka(){Ce(Wn,Wn.current),Ce(fs,fs.current)}function gs(s){ue(fs),Bs===s&&(Bs=null),ue(Wn)}var Wn=$(0);function ud(s){for(var o=s;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||a1(d)||o1(d)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var na=0,At=null,cn=null,ii=null,hd=!1,Vl=!1,Wo=!1,dd=0,uu=0,Gl=null,XS=0;function Hn(){throw Error(n(321))}function tg(s,o){if(o===null)return!1;for(var d=0;d<o.length&&d<s.length;d++)if(!b(s[d],o[d]))return!1;return!0}function ng(s,o,d,x,v,_){return na=_,At=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,K.H=s===null||s.memoizedState===null?Xy:yg,Wo=!1,_=d(x,v),Wo=!1,Vl&&(_=hy(o,d,x,v)),uy(s),_}function uy(s){K.H=fu;var o=cn!==null&&cn.next!==null;if(na=0,ii=cn=At=null,hd=!1,uu=0,Gl=null,o)throw Error(n(300));s===null||si||(s=s.dependencies,s!==null&&nd(s)&&(si=!0))}function hy(s,o,d,x){At=s;var v=0;do{if(Vl&&(Gl=null),uu=0,Vl=!1,25<=v)throw Error(n(301));if(v+=1,ii=cn=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}K.H=qy,_=o(d,x)}while(Vl);return _}function qS(){var s=K.H,o=s.useState()[0];return o=typeof o.then=="function"?hu(o):o,s=s.useState()[0],(cn!==null?cn.memoizedState:null)!==s&&(At.flags|=1024),o}function ig(){var s=dd!==0;return dd=0,s}function sg(s,o,d){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~d}function rg(s){if(hd){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}hd=!1}na=0,ii=cn=At=null,Vl=!1,uu=dd=0,Gl=null}function Fi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ii===null?At.memoizedState=ii=s:ii=ii.next=s,ii}function Kn(){if(cn===null){var s=At.alternate;s=s!==null?s.memoizedState:null}else s=cn.next;var o=ii===null?At.memoizedState:ii.next;if(o!==null)ii=o,cn=s;else{if(s===null)throw At.alternate===null?Error(n(467)):Error(n(310));cn=s,s={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},ii===null?At.memoizedState=ii=s:ii=ii.next=s}return ii}function fd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hu(s){var o=uu;return uu+=1,Gl===null&&(Gl=[]),s=ty(Gl,s,o),o=At,(ii===null?o.memoizedState:ii.next)===null&&(o=o.alternate,K.H=o===null||o.memoizedState===null?Xy:yg),s}function gd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return hu(s);if(s.$$typeof===j)return wi(s)}throw Error(n(438,String(s)))}function ag(s){var o=null,d=At.updateQueue;if(d!==null&&(o=d.memoCache),o==null){var x=At.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(o={data:x.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),d===null&&(d=fd(),At.updateQueue=d),d.memoCache=o,d=o.data[o.index],d===void 0)for(d=o.data[o.index]=Array(s),x=0;x<s;x++)d[x]=be;return o.index++,d}function ia(s,o){return typeof o=="function"?o(s):o}function pd(s){var o=Kn();return og(o,cn,s)}function og(s,o,d){var x=s.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=d;var v=s.baseQueue,_=x.pending;if(_!==null){if(v!==null){var O=v.next;v.next=_.next,_.next=O}o.baseQueue=v=_,x.pending=null}if(_=s.baseState,v===null)s.memoizedState=_;else{o=v.next;var H=O=null,Z=null,fe=o,ve=!1;do{var Te=fe.lane&-536870913;if(Te!==fe.lane?(kt&Te)===Te:(na&Te)===Te){var ge=fe.revertLane;if(ge===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),Te===Fl&&(ve=!0);else if((na&ge)===ge){fe=fe.next,ge===Fl&&(ve=!0);continue}else Te={lane:0,revertLane:fe.revertLane,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},Z===null?(H=Z=Te,O=_):Z=Z.next=Te,At.lanes|=ge,$a|=ge;Te=fe.action,Wo&&d(_,Te),_=fe.hasEagerState?fe.eagerState:d(_,Te)}else ge={lane:Te,revertLane:fe.revertLane,gesture:fe.gesture,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},Z===null?(H=Z=ge,O=_):Z=Z.next=ge,At.lanes|=Te,$a|=Te;fe=fe.next}while(fe!==null&&fe!==o);if(Z===null?O=_:Z.next=H,!b(_,s.memoizedState)&&(si=!0,ve&&(d=jl,d!==null)))throw d;s.memoizedState=_,s.baseState=O,s.baseQueue=Z,x.lastRenderedState=_}return v===null&&(x.lanes=0),[s.memoizedState,x.dispatch]}function lg(s){var o=Kn(),d=o.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var x=d.dispatch,v=d.pending,_=o.memoizedState;if(v!==null){d.pending=null;var O=v=v.next;do _=s(_,O.action),O=O.next;while(O!==v);b(_,o.memoizedState)||(si=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),d.lastRenderedState=_}return[_,x]}function dy(s,o,d){var x=At,v=Kn(),_=jt;if(_){if(d===void 0)throw Error(n(407));d=d()}else d=o();var O=!b((cn||v).memoizedState,d);if(O&&(v.memoizedState=d,si=!0),v=v.queue,hg(py.bind(null,x,v,s),[s]),v.getSnapshot!==o||O||ii!==null&&ii.memoizedState.tag&1){if(x.flags|=2048,Yl(9,{destroy:void 0},gy.bind(null,x,v,d,o),null),mn===null)throw Error(n(349));_||(na&127)!==0||fy(x,o,d)}return d}function fy(s,o,d){s.flags|=16384,s={getSnapshot:o,value:d},o=At.updateQueue,o===null?(o=fd(),At.updateQueue=o,o.stores=[s]):(d=o.stores,d===null?o.stores=[s]:d.push(s))}function gy(s,o,d,x){o.value=d,o.getSnapshot=x,my(o)&&yy(s)}function py(s,o,d){return d(function(){my(o)&&yy(s)})}function my(s){var o=s.getSnapshot;s=s.value;try{var d=o();return!b(s,d)}catch{return!0}}function yy(s){var o=jo(s,2);o!==null&&$i(o,s,2)}function cg(s){var o=Fi();if(typeof s=="function"){var d=s;if(s=d(),Wo){$t(!0);try{d()}finally{$t(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:s},o}function xy(s,o,d,x){return s.baseState=d,og(s,cn,typeof x=="function"?x:ia)}function WS(s,o,d,x,v){if(xd(s))throw Error(n(485));if(s=o.action,s!==null){var _={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){_.listeners.push(O)}};K.T!==null?d(!0):_.isTransition=!1,x(_),d=o.pending,d===null?(_.next=o.pending=_,by(o,_)):(_.next=d.next,o.pending=d.next=_)}}function by(s,o){var d=o.action,x=o.payload,v=s.state;if(o.isTransition){var _=K.T,O={};K.T=O;try{var H=d(v,x),Z=K.S;Z!==null&&Z(O,H),Ay(s,o,H)}catch(fe){ug(s,o,fe)}finally{_!==null&&O.types!==null&&(_.types=O.types),K.T=_}}else try{_=d(v,x),Ay(s,o,_)}catch(fe){ug(s,o,fe)}}function Ay(s,o,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(x){wy(s,o,x)},function(x){return ug(s,o,x)}):wy(s,o,d)}function wy(s,o,d){o.status="fulfilled",o.value=d,Ey(o),s.state=d,o=s.pending,o!==null&&(d=o.next,d===o?s.pending=null:(d=d.next,o.next=d,by(s,d)))}function ug(s,o,d){var x=s.pending;if(s.pending=null,x!==null){x=x.next;do o.status="rejected",o.reason=d,Ey(o),o=o.next;while(o!==x)}s.action=null}function Ey(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function vy(s,o){return o}function Sy(s,o){if(jt){var d=mn.formState;if(d!==null){e:{var x=At;if(jt){if(Sn){t:{for(var v=Sn,_=Ps;v.nodeType!==8;){if(!_){v=null;break t}if(v=Fs(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){Sn=Fs(v.nextSibling),x=v.data==="F!";break e}}Va(x)}x=!1}x&&(o=d[0])}}return d=Fi(),d.memoizedState=d.baseState=o,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:o},d.queue=x,d=Vy.bind(null,At,x),x.dispatch=d,x=cg(!1),_=mg.bind(null,At,!1,x.queue),x=Fi(),v={state:o,dispatch:null,action:s,pending:null},x.queue=v,d=WS.bind(null,At,v,_,d),v.dispatch=d,x.memoizedState=s,[o,d,!1]}function Cy(s){var o=Kn();return _y(o,cn,s)}function _y(s,o,d){if(o=og(s,o,vy)[0],s=pd(ia)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var x=hu(o)}catch(O){throw O===Ul?rd:O}else x=o;o=Kn();var v=o.queue,_=v.dispatch;return d!==o.memoizedState&&(At.flags|=2048,Yl(9,{destroy:void 0},KS.bind(null,v,d),null)),[x,_,s]}function KS(s,o){s.action=o}function Ty(s){var o=Kn(),d=cn;if(d!==null)return _y(o,d,s);Kn(),o=o.memoizedState,d=Kn();var x=d.queue.dispatch;return d.memoizedState=s,[o,x,!1]}function Yl(s,o,d,x){return s={tag:s,create:d,deps:x,inst:o,next:null},o=At.updateQueue,o===null&&(o=fd(),At.updateQueue=o),d=o.lastEffect,d===null?o.lastEffect=s.next=s:(x=d.next,d.next=s,s.next=x,o.lastEffect=s),s}function Iy(){return Kn().memoizedState}function md(s,o,d,x){var v=Fi();At.flags|=s,v.memoizedState=Yl(1|o,{destroy:void 0},d,x===void 0?null:x)}function yd(s,o,d,x){var v=Kn();x=x===void 0?null:x;var _=v.memoizedState.inst;cn!==null&&x!==null&&tg(x,cn.memoizedState.deps)?v.memoizedState=Yl(o,_,d,x):(At.flags|=s,v.memoizedState=Yl(1|o,_,d,x))}function Ny(s,o){md(8390656,8,s,o)}function hg(s,o){yd(2048,8,s,o)}function QS(s){At.flags|=4;var o=At.updateQueue;if(o===null)o=fd(),At.updateQueue=o,o.events=[s];else{var d=o.events;d===null?o.events=[s]:d.push(s)}}function Ry(s){var o=Kn().memoizedState;return QS({ref:o,nextImpl:s}),function(){if((Kt&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function My(s,o){return yd(4,2,s,o)}function Dy(s,o){return yd(4,4,s,o)}function Oy(s,o){if(typeof o=="function"){s=s();var d=o(s);return function(){typeof d=="function"?d():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Ly(s,o,d){d=d!=null?d.concat([s]):null,yd(4,4,Oy.bind(null,o,s),d)}function dg(){}function ky(s,o){var d=Kn();o=o===void 0?null:o;var x=d.memoizedState;return o!==null&&tg(o,x[1])?x[0]:(d.memoizedState=[s,o],s)}function Py(s,o){var d=Kn();o=o===void 0?null:o;var x=d.memoizedState;if(o!==null&&tg(o,x[1]))return x[0];if(x=s(),Wo){$t(!0);try{s()}finally{$t(!1)}}return d.memoizedState=[x,o],x}function fg(s,o,d){return d===void 0||(na&1073741824)!==0&&(kt&261930)===0?s.memoizedState=o:(s.memoizedState=d,s=Bx(),At.lanes|=s,$a|=s,d)}function By(s,o,d,x){return b(d,o)?d:Hl.current!==null?(s=fg(s,d,x),b(s,o)||(si=!0),s):(na&42)===0||(na&1073741824)!==0&&(kt&261930)===0?(si=!0,s.memoizedState=d):(s=Bx(),At.lanes|=s,$a|=s,o)}function Fy(s,o,d,x,v){var _=re.p;re.p=_!==0&&8>_?_:8;var O=K.T,H={};K.T=H,mg(s,!1,o,d);try{var Z=v(),fe=K.S;if(fe!==null&&fe(H,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var ve=YS(Z,x);du(s,o,ve,ys(s))}else du(s,o,x,ys(s))}catch(Te){du(s,o,{then:function(){},status:"rejected",reason:Te},ys())}finally{re.p=_,O!==null&&H.types!==null&&(O.types=H.types),K.T=O}}function ZS(){}function gg(s,o,d,x){if(s.tag!==5)throw Error(n(476));var v=jy(s).queue;Fy(s,v,o,Ie,d===null?ZS:function(){return Uy(s),d(x)})}function jy(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:Ie,baseState:Ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:Ie},next:null};var d={};return o.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:d},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function Uy(s){var o=jy(s);o.next===null&&(o=s.alternate.memoizedState),du(s,o.next.queue,{},ys())}function pg(){return wi(Nu)}function zy(){return Kn().memoizedState}function Hy(){return Kn().memoizedState}function $S(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var d=ys();s=Xa(d);var x=qa(o,s,d);x!==null&&($i(x,o,d),ou(x,o,d)),o={cache:G0()},s.payload=o;return}o=o.return}}function JS(s,o,d){var x=ys();d={lane:x,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},xd(s)?Gy(o,d):(d=O0(s,o,d,x),d!==null&&($i(d,s,x),Yy(d,o,x)))}function Vy(s,o,d){var x=ys();du(s,o,d,x)}function du(s,o,d,x){var v={lane:x,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(xd(s))Gy(o,v);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var O=o.lastRenderedState,H=_(O,d);if(v.hasEagerState=!0,v.eagerState=H,b(H,O))return $h(s,o,v,0),mn===null&&Zh(),!1}catch{}finally{}if(d=O0(s,o,v,x),d!==null)return $i(d,s,x),Yy(d,o,x),!0}return!1}function mg(s,o,d,x){if(x={lane:2,revertLane:Wg(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},xd(s)){if(o)throw Error(n(479))}else o=O0(s,d,x,2),o!==null&&$i(o,s,2)}function xd(s){var o=s.alternate;return s===At||o!==null&&o===At}function Gy(s,o){Vl=hd=!0;var d=s.pending;d===null?o.next=o:(o.next=d.next,d.next=o),s.pending=o}function Yy(s,o,d){if((d&4194048)!==0){var x=o.lanes;x&=s.pendingLanes,d|=x,o.lanes=d,xr(s,d)}}var fu={readContext:wi,use:gd,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useLayoutEffect:Hn,useInsertionEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useSyncExternalStore:Hn,useId:Hn,useHostTransitionStatus:Hn,useFormState:Hn,useActionState:Hn,useOptimistic:Hn,useMemoCache:Hn,useCacheRefresh:Hn};fu.useEffectEvent=Hn;var Xy={readContext:wi,use:gd,useCallback:function(s,o){return Fi().memoizedState=[s,o===void 0?null:o],s},useContext:wi,useEffect:Ny,useImperativeHandle:function(s,o,d){d=d!=null?d.concat([s]):null,md(4194308,4,Oy.bind(null,o,s),d)},useLayoutEffect:function(s,o){return md(4194308,4,s,o)},useInsertionEffect:function(s,o){md(4,2,s,o)},useMemo:function(s,o){var d=Fi();o=o===void 0?null:o;var x=s();if(Wo){$t(!0);try{s()}finally{$t(!1)}}return d.memoizedState=[x,o],x},useReducer:function(s,o,d){var x=Fi();if(d!==void 0){var v=d(o);if(Wo){$t(!0);try{d(o)}finally{$t(!1)}}}else v=o;return x.memoizedState=x.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},x.queue=s,s=s.dispatch=JS.bind(null,At,s),[x.memoizedState,s]},useRef:function(s){var o=Fi();return s={current:s},o.memoizedState=s},useState:function(s){s=cg(s);var o=s.queue,d=Vy.bind(null,At,o);return o.dispatch=d,[s.memoizedState,d]},useDebugValue:dg,useDeferredValue:function(s,o){var d=Fi();return fg(d,s,o)},useTransition:function(){var s=cg(!1);return s=Fy.bind(null,At,s.queue,!0,!1),Fi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,d){var x=At,v=Fi();if(jt){if(d===void 0)throw Error(n(407));d=d()}else{if(d=o(),mn===null)throw Error(n(349));(kt&127)!==0||fy(x,o,d)}v.memoizedState=d;var _={value:d,getSnapshot:o};return v.queue=_,Ny(py.bind(null,x,_,s),[s]),x.flags|=2048,Yl(9,{destroy:void 0},gy.bind(null,x,_,d,o),null),d},useId:function(){var s=Fi(),o=mn.identifierPrefix;if(jt){var d=Sr,x=vr;d=(x&~(1<<32-pt(x)-1)).toString(32)+d,o="_"+o+"R_"+d,d=dd++,0<d&&(o+="H"+d.toString(32)),o+="_"}else d=XS++,o="_"+o+"r_"+d.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:pg,useFormState:Sy,useActionState:Sy,useOptimistic:function(s){var o=Fi();o.memoizedState=o.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=d,o=mg.bind(null,At,!0,d),d.dispatch=o,[s,o]},useMemoCache:ag,useCacheRefresh:function(){return Fi().memoizedState=$S.bind(null,At)},useEffectEvent:function(s){var o=Fi(),d={impl:s};return o.memoizedState=d,function(){if((Kt&2)!==0)throw Error(n(440));return d.impl.apply(void 0,arguments)}}},yg={readContext:wi,use:gd,useCallback:ky,useContext:wi,useEffect:hg,useImperativeHandle:Ly,useInsertionEffect:My,useLayoutEffect:Dy,useMemo:Py,useReducer:pd,useRef:Iy,useState:function(){return pd(ia)},useDebugValue:dg,useDeferredValue:function(s,o){var d=Kn();return By(d,cn.memoizedState,s,o)},useTransition:function(){var s=pd(ia)[0],o=Kn().memoizedState;return[typeof s=="boolean"?s:hu(s),o]},useSyncExternalStore:dy,useId:zy,useHostTransitionStatus:pg,useFormState:Cy,useActionState:Cy,useOptimistic:function(s,o){var d=Kn();return xy(d,cn,s,o)},useMemoCache:ag,useCacheRefresh:Hy};yg.useEffectEvent=Ry;var qy={readContext:wi,use:gd,useCallback:ky,useContext:wi,useEffect:hg,useImperativeHandle:Ly,useInsertionEffect:My,useLayoutEffect:Dy,useMemo:Py,useReducer:lg,useRef:Iy,useState:function(){return lg(ia)},useDebugValue:dg,useDeferredValue:function(s,o){var d=Kn();return cn===null?fg(d,s,o):By(d,cn.memoizedState,s,o)},useTransition:function(){var s=lg(ia)[0],o=Kn().memoizedState;return[typeof s=="boolean"?s:hu(s),o]},useSyncExternalStore:dy,useId:zy,useHostTransitionStatus:pg,useFormState:Ty,useActionState:Ty,useOptimistic:function(s,o){var d=Kn();return cn!==null?xy(d,cn,s,o):(d.baseState=s,[s,d.queue.dispatch])},useMemoCache:ag,useCacheRefresh:Hy};qy.useEffectEvent=Ry;function xg(s,o,d,x){o=s.memoizedState,d=d(x,o),d=d==null?o:E({},o,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var bg={enqueueSetState:function(s,o,d){s=s._reactInternals;var x=ys(),v=Xa(x);v.payload=o,d!=null&&(v.callback=d),o=qa(s,v,x),o!==null&&($i(o,s,x),ou(o,s,x))},enqueueReplaceState:function(s,o,d){s=s._reactInternals;var x=ys(),v=Xa(x);v.tag=1,v.payload=o,d!=null&&(v.callback=d),o=qa(s,v,x),o!==null&&($i(o,s,x),ou(o,s,x))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var d=ys(),x=Xa(d);x.tag=2,o!=null&&(x.callback=o),o=qa(s,x,d),o!==null&&($i(o,s,d),ou(o,s,d))}};function Wy(s,o,d,x,v,_,O){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(x,_,O):o.prototype&&o.prototype.isPureReactComponent?!w(d,x)||!w(v,_):!0}function Ky(s,o,d,x){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,x),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,x),o.state!==s&&bg.enqueueReplaceState(o,o.state,null)}function Ko(s,o){var d=o;if("ref"in o){d={};for(var x in o)x!=="ref"&&(d[x]=o[x])}if(s=s.defaultProps){d===o&&(d=E({},d));for(var v in s)d[v]===void 0&&(d[v]=s[v])}return d}function Qy(s){Qh(s)}function Zy(s){console.error(s)}function $y(s){Qh(s)}function bd(s,o){try{var d=s.onUncaughtError;d(o.value,{componentStack:o.stack})}catch(x){setTimeout(function(){throw x})}}function Jy(s,o,d){try{var x=s.onCaughtError;x(d.value,{componentStack:d.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Ag(s,o,d){return d=Xa(d),d.tag=3,d.payload={element:null},d.callback=function(){bd(s,o)},d}function ex(s){return s=Xa(s),s.tag=3,s}function tx(s,o,d,x){var v=d.type.getDerivedStateFromError;if(typeof v=="function"){var _=x.value;s.payload=function(){return v(_)},s.callback=function(){Jy(o,d,x)}}var O=d.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(s.callback=function(){Jy(o,d,x),typeof v!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var H=x.stack;this.componentDidCatch(x.value,{componentStack:H!==null?H:""})})}function eC(s,o,d,x,v){if(d.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(o=d.alternate,o!==null&&Bl(o,d,v,!0),d=fs.current,d!==null){switch(d.tag){case 31:case 13:return Bs===null?Md():d.alternate===null&&Vn===0&&(Vn=3),d.flags&=-257,d.flags|=65536,d.lanes=v,x===ad?d.flags|=16384:(o=d.updateQueue,o===null?d.updateQueue=new Set([x]):o.add(x),Yg(s,x,v)),!1;case 22:return d.flags|=65536,x===ad?d.flags|=16384:(o=d.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([x])},d.updateQueue=o):(d=o.retryQueue,d===null?o.retryQueue=new Set([x]):d.add(x)),Yg(s,x,v)),!1}throw Error(n(435,d.tag))}return Yg(s,x,v),Md(),!1}if(jt)return o=fs.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,x!==j0&&(s=Error(n(422),{cause:x}),nu(Os(s,d)))):(x!==j0&&(o=Error(n(423),{cause:x}),nu(Os(o,d))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,x=Os(x,d),v=Ag(s.stateNode,x,v),Q0(s,v),Vn!==4&&(Vn=2)),!1;var _=Error(n(520),{cause:x});if(_=Os(_,d),wu===null?wu=[_]:wu.push(_),Vn!==4&&(Vn=2),o===null)return!0;x=Os(x,d),d=o;do{switch(d.tag){case 3:return d.flags|=65536,s=v&-v,d.lanes|=s,s=Ag(d.stateNode,x,s),Q0(d,s),!1;case 1:if(o=d.type,_=d.stateNode,(d.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ja===null||!Ja.has(_))))return d.flags|=65536,v&=-v,d.lanes|=v,v=ex(v),tx(v,s,d,x),Q0(d,v),!1}d=d.return}while(d!==null);return!1}var wg=Error(n(461)),si=!1;function Ei(s,o,d,x){o.child=s===null?ry(o,null,d,x):qo(o,s.child,d,x)}function nx(s,o,d,x,v){d=d.render;var _=o.ref;if("ref"in x){var O={};for(var H in x)H!=="ref"&&(O[H]=x[H])}else O=x;return Vo(o),x=ng(s,o,d,O,_,v),H=ig(),s!==null&&!si?(sg(s,o,v),sa(s,o,v)):(jt&&H&&B0(o),o.flags|=1,Ei(s,o,x,v),o.child)}function ix(s,o,d,x,v){if(s===null){var _=d.type;return typeof _=="function"&&!L0(_)&&_.defaultProps===void 0&&d.compare===null?(o.tag=15,o.type=_,sx(s,o,_,x,v)):(s=ed(d.type,null,x,o,o.mode,v),s.ref=o.ref,s.return=o,o.child=s)}if(_=s.child,!Ng(s,v)){var O=_.memoizedProps;if(d=d.compare,d=d!==null?d:w,d(O,x)&&s.ref===o.ref)return sa(s,o,v)}return o.flags|=1,s=$r(_,x),s.ref=o.ref,s.return=o,o.child=s}function sx(s,o,d,x,v){if(s!==null){var _=s.memoizedProps;if(w(_,x)&&s.ref===o.ref)if(si=!1,o.pendingProps=x=_,Ng(s,v))(s.flags&131072)!==0&&(si=!0);else return o.lanes=s.lanes,sa(s,o,v)}return Eg(s,o,d,x,v)}function rx(s,o,d,x){var v=x.children,_=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|d:d,s!==null){for(x=o.child=s.child,v=0;x!==null;)v=v|x.lanes|x.childLanes,x=x.sibling;x=v&~_}else x=0,o.child=null;return ax(s,o,_,d,x)}if((d&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&sd(o,_!==null?_.cachePool:null),_!==null?ly(o,_):$0(),cy(o);else return x=o.lanes=536870912,ax(s,o,_!==null?_.baseLanes|d:d,d,x)}else _!==null?(sd(o,_.cachePool),ly(o,_),Ka(),o.memoizedState=null):(s!==null&&sd(o,null),$0(),Ka());return Ei(s,o,v,d),o.child}function gu(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function ax(s,o,d,x,v){var _=X0();return _=_===null?null:{parent:ni._currentValue,pool:_},o.memoizedState={baseLanes:d,cachePool:_},s!==null&&sd(o,null),$0(),cy(o),s!==null&&Bl(s,o,x,!0),o.childLanes=v,null}function Ad(s,o){return o=Ed({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function ox(s,o,d){return qo(o,s.child,null,d),s=Ad(o,o.pendingProps),s.flags|=2,gs(o),o.memoizedState=null,s}function tC(s,o,d){var x=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(jt){if(x.mode==="hidden")return s=Ad(o,x),o.lanes=536870912,gu(null,s);if(eg(o),(s=Sn)?(s=bb(s,Ps),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:za!==null?{id:vr,overflow:Sr}:null,retryLane:536870912,hydrationErrors:null},d=Gm(s),d.return=o,o.child=d,Ai=o,Sn=null)):s=null,s===null)throw Va(o);return o.lanes=536870912,null}return Ad(o,x)}var _=s.memoizedState;if(_!==null){var O=_.dehydrated;if(eg(o),v)if(o.flags&256)o.flags&=-257,o=ox(s,o,d);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(n(558));else if(si||Bl(s,o,d,!1),v=(d&s.childLanes)!==0,si||v){if(x=mn,x!==null&&(O=wl(x,d),O!==0&&O!==_.retryLane))throw _.retryLane=O,jo(s,O),$i(x,s,O),wg;Md(),o=ox(s,o,d)}else s=_.treeContext,Sn=Fs(O.nextSibling),Ai=o,jt=!0,Ha=null,Ps=!1,s!==null&&qm(o,s),o=Ad(o,x),o.flags|=4096;return o}return s=$r(s.child,{mode:x.mode,children:x.children}),s.ref=o.ref,o.child=s,s.return=o,s}function wd(s,o){var d=o.ref;if(d===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(n(284));(s===null||s.ref!==d)&&(o.flags|=4194816)}}function Eg(s,o,d,x,v){return Vo(o),d=ng(s,o,d,x,void 0,v),x=ig(),s!==null&&!si?(sg(s,o,v),sa(s,o,v)):(jt&&x&&B0(o),o.flags|=1,Ei(s,o,d,v),o.child)}function lx(s,o,d,x,v,_){return Vo(o),o.updateQueue=null,d=hy(o,x,d,v),uy(s),x=ig(),s!==null&&!si?(sg(s,o,_),sa(s,o,_)):(jt&&x&&B0(o),o.flags|=1,Ei(s,o,d,_),o.child)}function cx(s,o,d,x,v){if(Vo(o),o.stateNode===null){var _=Ol,O=d.contextType;typeof O=="object"&&O!==null&&(_=wi(O)),_=new d(x,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=bg,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=x,_.state=o.memoizedState,_.refs={},W0(o),O=d.contextType,_.context=typeof O=="object"&&O!==null?wi(O):Ol,_.state=o.memoizedState,O=d.getDerivedStateFromProps,typeof O=="function"&&(xg(o,d,O,x),_.state=o.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(O=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),O!==_.state&&bg.enqueueReplaceState(_,_.state,null),cu(o,x,_,v),lu(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),x=!0}else if(s===null){_=o.stateNode;var H=o.memoizedProps,Z=Ko(d,H);_.props=Z;var fe=_.context,ve=d.contextType;O=Ol,typeof ve=="object"&&ve!==null&&(O=wi(ve));var Te=d.getDerivedStateFromProps;ve=typeof Te=="function"||typeof _.getSnapshotBeforeUpdate=="function",H=o.pendingProps!==H,ve||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(H||fe!==O)&&Ky(o,_,x,O),Ya=!1;var ge=o.memoizedState;_.state=ge,cu(o,x,_,v),lu(),fe=o.memoizedState,H||ge!==fe||Ya?(typeof Te=="function"&&(xg(o,d,Te,x),fe=o.memoizedState),(Z=Ya||Wy(o,d,Z,x,ge,fe,O))?(ve||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=x,o.memoizedState=fe),_.props=x,_.state=fe,_.context=O,x=Z):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),x=!1)}else{_=o.stateNode,K0(s,o),O=o.memoizedProps,ve=Ko(d,O),_.props=ve,Te=o.pendingProps,ge=_.context,fe=d.contextType,Z=Ol,typeof fe=="object"&&fe!==null&&(Z=wi(fe)),H=d.getDerivedStateFromProps,(fe=typeof H=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(O!==Te||ge!==Z)&&Ky(o,_,x,Z),Ya=!1,ge=o.memoizedState,_.state=ge,cu(o,x,_,v),lu();var xe=o.memoizedState;O!==Te||ge!==xe||Ya||s!==null&&s.dependencies!==null&&nd(s.dependencies)?(typeof H=="function"&&(xg(o,d,H,x),xe=o.memoizedState),(ve=Ya||Wy(o,d,ve,x,ge,xe,Z)||s!==null&&s.dependencies!==null&&nd(s.dependencies))?(fe||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(x,xe,Z),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(x,xe,Z)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||O===s.memoizedProps&&ge===s.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||O===s.memoizedProps&&ge===s.memoizedState||(o.flags|=1024),o.memoizedProps=x,o.memoizedState=xe),_.props=x,_.state=xe,_.context=Z,x=ve):(typeof _.componentDidUpdate!="function"||O===s.memoizedProps&&ge===s.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||O===s.memoizedProps&&ge===s.memoizedState||(o.flags|=1024),x=!1)}return _=x,wd(s,o),x=(o.flags&128)!==0,_||x?(_=o.stateNode,d=x&&typeof d.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,s!==null&&x?(o.child=qo(o,s.child,null,v),o.child=qo(o,null,d,v)):Ei(s,o,d,v),o.memoizedState=_.state,s=o.child):s=sa(s,o,v),s}function ux(s,o,d,x){return zo(),o.flags|=256,Ei(s,o,d,x),o.child}var vg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sg(s){return{baseLanes:s,cachePool:Jm()}}function Cg(s,o,d){return s=s!==null?s.childLanes&~d:0,o&&(s|=ms),s}function hx(s,o,d){var x=o.pendingProps,v=!1,_=(o.flags&128)!==0,O;if((O=_)||(O=s!==null&&s.memoizedState===null?!1:(Wn.current&2)!==0),O&&(v=!0,o.flags&=-129),O=(o.flags&32)!==0,o.flags&=-33,s===null){if(jt){if(v?Wa(o):Ka(),(s=Sn)?(s=bb(s,Ps),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:za!==null?{id:vr,overflow:Sr}:null,retryLane:536870912,hydrationErrors:null},d=Gm(s),d.return=o,o.child=d,Ai=o,Sn=null)):s=null,s===null)throw Va(o);return o1(s)?o.lanes=32:o.lanes=536870912,null}var H=x.children;return x=x.fallback,v?(Ka(),v=o.mode,H=Ed({mode:"hidden",children:H},v),x=Uo(x,v,d,null),H.return=o,x.return=o,H.sibling=x,o.child=H,x=o.child,x.memoizedState=Sg(d),x.childLanes=Cg(s,O,d),o.memoizedState=vg,gu(null,x)):(Wa(o),_g(o,H))}var Z=s.memoizedState;if(Z!==null&&(H=Z.dehydrated,H!==null)){if(_)o.flags&256?(Wa(o),o.flags&=-257,o=Tg(s,o,d)):o.memoizedState!==null?(Ka(),o.child=s.child,o.flags|=128,o=null):(Ka(),H=x.fallback,v=o.mode,x=Ed({mode:"visible",children:x.children},v),H=Uo(H,v,d,null),H.flags|=2,x.return=o,H.return=o,x.sibling=H,o.child=x,qo(o,s.child,null,d),x=o.child,x.memoizedState=Sg(d),x.childLanes=Cg(s,O,d),o.memoizedState=vg,o=gu(null,x));else if(Wa(o),o1(H)){if(O=H.nextSibling&&H.nextSibling.dataset,O)var fe=O.dgst;O=fe,x=Error(n(419)),x.stack="",x.digest=O,nu({value:x,source:null,stack:null}),o=Tg(s,o,d)}else if(si||Bl(s,o,d,!1),O=(d&s.childLanes)!==0,si||O){if(O=mn,O!==null&&(x=wl(O,d),x!==0&&x!==Z.retryLane))throw Z.retryLane=x,jo(s,x),$i(O,s,x),wg;a1(H)||Md(),o=Tg(s,o,d)}else a1(H)?(o.flags|=192,o.child=s.child,o=null):(s=Z.treeContext,Sn=Fs(H.nextSibling),Ai=o,jt=!0,Ha=null,Ps=!1,s!==null&&qm(o,s),o=_g(o,x.children),o.flags|=4096);return o}return v?(Ka(),H=x.fallback,v=o.mode,Z=s.child,fe=Z.sibling,x=$r(Z,{mode:"hidden",children:x.children}),x.subtreeFlags=Z.subtreeFlags&65011712,fe!==null?H=$r(fe,H):(H=Uo(H,v,d,null),H.flags|=2),H.return=o,x.return=o,x.sibling=H,o.child=x,gu(null,x),x=o.child,H=s.child.memoizedState,H===null?H=Sg(d):(v=H.cachePool,v!==null?(Z=ni._currentValue,v=v.parent!==Z?{parent:Z,pool:Z}:v):v=Jm(),H={baseLanes:H.baseLanes|d,cachePool:v}),x.memoizedState=H,x.childLanes=Cg(s,O,d),o.memoizedState=vg,gu(s.child,x)):(Wa(o),d=s.child,s=d.sibling,d=$r(d,{mode:"visible",children:x.children}),d.return=o,d.sibling=null,s!==null&&(O=o.deletions,O===null?(o.deletions=[s],o.flags|=16):O.push(s)),o.child=d,o.memoizedState=null,d)}function _g(s,o){return o=Ed({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Ed(s,o){return s=ds(22,s,null,o),s.lanes=0,s}function Tg(s,o,d){return qo(o,s.child,null,d),s=_g(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function dx(s,o,d){s.lanes|=o;var x=s.alternate;x!==null&&(x.lanes|=o),H0(s.return,o,d)}function Ig(s,o,d,x,v,_){var O=s.memoizedState;O===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:x,tail:d,tailMode:v,treeForkCount:_}:(O.isBackwards=o,O.rendering=null,O.renderingStartTime=0,O.last=x,O.tail=d,O.tailMode=v,O.treeForkCount=_)}function fx(s,o,d){var x=o.pendingProps,v=x.revealOrder,_=x.tail;x=x.children;var O=Wn.current,H=(O&2)!==0;if(H?(O=O&1|2,o.flags|=128):O&=1,Ce(Wn,O),Ei(s,o,x,d),x=jt?tu:0,!H&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&dx(s,d,o);else if(s.tag===19)dx(s,d,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(v){case"forwards":for(d=o.child,v=null;d!==null;)s=d.alternate,s!==null&&ud(s)===null&&(v=d),d=d.sibling;d=v,d===null?(v=o.child,o.child=null):(v=d.sibling,d.sibling=null),Ig(o,!1,v,d,_,x);break;case"backwards":case"unstable_legacy-backwards":for(d=null,v=o.child,o.child=null;v!==null;){if(s=v.alternate,s!==null&&ud(s)===null){o.child=v;break}s=v.sibling,v.sibling=d,d=v,v=s}Ig(o,!0,d,null,_,x);break;case"together":Ig(o,!1,null,null,void 0,x);break;default:o.memoizedState=null}return o.child}function sa(s,o,d){if(s!==null&&(o.dependencies=s.dependencies),$a|=o.lanes,(d&o.childLanes)===0)if(s!==null){if(Bl(s,o,d,!1),(d&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(n(153));if(o.child!==null){for(s=o.child,d=$r(s,s.pendingProps),o.child=d,d.return=o;s.sibling!==null;)s=s.sibling,d=d.sibling=$r(s,s.pendingProps),d.return=o;d.sibling=null}return o.child}function Ng(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&nd(s)))}function nC(s,o,d){switch(o.tag){case 3:Ne(o,o.stateNode.containerInfo),Ga(o,ni,s.memoizedState.cache),zo();break;case 27:case 5:ct(o);break;case 4:Ne(o,o.stateNode.containerInfo);break;case 10:Ga(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,eg(o),null;break;case 13:var x=o.memoizedState;if(x!==null)return x.dehydrated!==null?(Wa(o),o.flags|=128,null):(d&o.child.childLanes)!==0?hx(s,o,d):(Wa(o),s=sa(s,o,d),s!==null?s.sibling:null);Wa(o);break;case 19:var v=(s.flags&128)!==0;if(x=(d&o.childLanes)!==0,x||(Bl(s,o,d,!1),x=(d&o.childLanes)!==0),v){if(x)return fx(s,o,d);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Ce(Wn,Wn.current),x)break;return null;case 22:return o.lanes=0,rx(s,o,d,o.pendingProps);case 24:Ga(o,ni,s.memoizedState.cache)}return sa(s,o,d)}function gx(s,o,d){if(s!==null)if(s.memoizedProps!==o.pendingProps)si=!0;else{if(!Ng(s,d)&&(o.flags&128)===0)return si=!1,nC(s,o,d);si=(s.flags&131072)!==0}else si=!1,jt&&(o.flags&1048576)!==0&&Xm(o,tu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var x=o.pendingProps;if(s=Yo(o.elementType),o.type=s,typeof s=="function")L0(s)?(x=Ko(s,x),o.tag=1,o=cx(null,o,s,x,d)):(o.tag=0,o=Eg(null,o,s,x,d));else{if(s!=null){var v=s.$$typeof;if(v===U){o.tag=11,o=nx(null,o,s,x,d);break e}else if(v===V){o.tag=14,o=ix(null,o,s,x,d);break e}}throw o=Se(s)||s,Error(n(306,o,""))}}return o;case 0:return Eg(s,o,o.type,o.pendingProps,d);case 1:return x=o.type,v=Ko(x,o.pendingProps),cx(s,o,x,v,d);case 3:e:{if(Ne(o,o.stateNode.containerInfo),s===null)throw Error(n(387));x=o.pendingProps;var _=o.memoizedState;v=_.element,K0(s,o),cu(o,x,null,d);var O=o.memoizedState;if(x=O.cache,Ga(o,ni,x),x!==_.cache&&V0(o,[ni],d,!0),lu(),x=O.element,_.isDehydrated)if(_={element:x,isDehydrated:!1,cache:O.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=ux(s,o,x,d);break e}else if(x!==v){v=Os(Error(n(424)),o),nu(v),o=ux(s,o,x,d);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Sn=Fs(s.firstChild),Ai=o,jt=!0,Ha=null,Ps=!0,d=ry(o,null,x,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(zo(),x===v){o=sa(s,o,d);break e}Ei(s,o,x,d)}o=o.child}return o;case 26:return wd(s,o),s===null?(d=Cb(o.type,null,o.pendingProps,null))?o.memoizedState=d:jt||(d=o.type,s=o.pendingProps,x=Fd(Re.current).createElement(d),x[Yn]=o,x[sn]=s,vi(x,d,s),Un(x),o.stateNode=x):o.memoizedState=Cb(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return ct(o),s===null&&jt&&(x=o.stateNode=Eb(o.type,o.pendingProps,Re.current),Ai=o,Ps=!0,v=Sn,io(o.type)?(l1=v,Sn=Fs(x.firstChild)):Sn=v),Ei(s,o,o.pendingProps.children,d),wd(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&jt&&((v=x=Sn)&&(x=DC(x,o.type,o.pendingProps,Ps),x!==null?(o.stateNode=x,Ai=o,Sn=Fs(x.firstChild),Ps=!1,v=!0):v=!1),v||Va(o)),ct(o),v=o.type,_=o.pendingProps,O=s!==null?s.memoizedProps:null,x=_.children,i1(v,_)?x=null:O!==null&&i1(v,O)&&(o.flags|=32),o.memoizedState!==null&&(v=ng(s,o,qS,null,null,d),Nu._currentValue=v),wd(s,o),Ei(s,o,x,d),o.child;case 6:return s===null&&jt&&((s=d=Sn)&&(d=OC(d,o.pendingProps,Ps),d!==null?(o.stateNode=d,Ai=o,Sn=null,s=!0):s=!1),s||Va(o)),null;case 13:return hx(s,o,d);case 4:return Ne(o,o.stateNode.containerInfo),x=o.pendingProps,s===null?o.child=qo(o,null,x,d):Ei(s,o,x,d),o.child;case 11:return nx(s,o,o.type,o.pendingProps,d);case 7:return Ei(s,o,o.pendingProps,d),o.child;case 8:return Ei(s,o,o.pendingProps.children,d),o.child;case 12:return Ei(s,o,o.pendingProps.children,d),o.child;case 10:return x=o.pendingProps,Ga(o,o.type,x.value),Ei(s,o,x.children,d),o.child;case 9:return v=o.type._context,x=o.pendingProps.children,Vo(o),v=wi(v),x=x(v),o.flags|=1,Ei(s,o,x,d),o.child;case 14:return ix(s,o,o.type,o.pendingProps,d);case 15:return sx(s,o,o.type,o.pendingProps,d);case 19:return fx(s,o,d);case 31:return tC(s,o,d);case 22:return rx(s,o,d,o.pendingProps);case 24:return Vo(o),x=wi(ni),s===null?(v=X0(),v===null&&(v=mn,_=G0(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=d),v=_),o.memoizedState={parent:x,cache:v},W0(o),Ga(o,ni,v)):((s.lanes&d)!==0&&(K0(s,o),cu(o,null,null,d),lu()),v=s.memoizedState,_=o.memoizedState,v.parent!==x?(v={parent:x,cache:x},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),Ga(o,ni,x)):(x=_.cache,Ga(o,ni,x),x!==v.cache&&V0(o,[ni],d,!0))),Ei(s,o,o.pendingProps.children,d),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function ra(s){s.flags|=4}function Rg(s,o,d,x,v){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(v&335544128)===v)if(s.stateNode.complete)s.flags|=8192;else if(zx())s.flags|=8192;else throw Xo=ad,q0}else s.flags&=-16777217}function px(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Rb(o))if(zx())s.flags|=8192;else throw Xo=ad,q0}function vd(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?li():536870912,s.lanes|=o,Kl|=o)}function pu(s,o){if(!jt)switch(s.tailMode){case"hidden":o=s.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:x.sibling=null}}function Cn(s){var o=s.alternate!==null&&s.alternate.child===s.child,d=0,x=0;if(o)for(var v=s.child;v!==null;)d|=v.lanes|v.childLanes,x|=v.subtreeFlags&65011712,x|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)d|=v.lanes|v.childLanes,x|=v.subtreeFlags,x|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=x,s.childLanes=d,o}function iC(s,o,d){var x=o.pendingProps;switch(F0(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(o),null;case 1:return Cn(o),null;case 3:return d=o.stateNode,x=null,s!==null&&(x=s.memoizedState.cache),o.memoizedState.cache!==x&&(o.flags|=2048),ta(ni),Qe(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(Pl(o)?ra(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,U0())),Cn(o),null;case 26:var v=o.type,_=o.memoizedState;return s===null?(ra(o),_!==null?(Cn(o),px(o,_)):(Cn(o),Rg(o,v,null,x,d))):_?_!==s.memoizedState?(ra(o),Cn(o),px(o,_)):(Cn(o),o.flags&=-16777217):(s=s.memoizedProps,s!==x&&ra(o),Cn(o),Rg(o,v,s,x,d)),null;case 27:if(Ht(o),d=Re.current,v=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==x&&ra(o);else{if(!x){if(o.stateNode===null)throw Error(n(166));return Cn(o),null}s=Oe.current,Pl(o)?Wm(o):(s=Eb(v,x,d),o.stateNode=s,ra(o))}return Cn(o),null;case 5:if(Ht(o),v=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==x&&ra(o);else{if(!x){if(o.stateNode===null)throw Error(n(166));return Cn(o),null}if(_=Oe.current,Pl(o))Wm(o);else{var O=Fd(Re.current);switch(_){case 1:_=O.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=O.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=O.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof x.is=="string"?O.createElement("select",{is:x.is}):O.createElement("select"),x.multiple?_.multiple=!0:x.size&&(_.size=x.size);break;default:_=typeof x.is=="string"?O.createElement(v,{is:x.is}):O.createElement(v)}}_[Yn]=o,_[sn]=x;e:for(O=o.child;O!==null;){if(O.tag===5||O.tag===6)_.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===o)break e;for(;O.sibling===null;){if(O.return===null||O.return===o)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}o.stateNode=_;e:switch(vi(_,v,x),v){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&ra(o)}}return Cn(o),Rg(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,d),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==x&&ra(o);else{if(typeof x!="string"&&o.stateNode===null)throw Error(n(166));if(s=Re.current,Pl(o)){if(s=o.stateNode,d=o.memoizedProps,x=null,v=Ai,v!==null)switch(v.tag){case 27:case 5:x=v.memoizedProps}s[Yn]=o,s=!!(s.nodeValue===d||x!==null&&x.suppressHydrationWarning===!0||hb(s.nodeValue,d)),s||Va(o,!0)}else s=Fd(s).createTextNode(x),s[Yn]=o,o.stateNode=s}return Cn(o),null;case 31:if(d=o.memoizedState,s===null||s.memoizedState!==null){if(x=Pl(o),d!==null){if(s===null){if(!x)throw Error(n(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(557));s[Yn]=o}else zo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Cn(o),s=!1}else d=U0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=d),s=!0;if(!s)return o.flags&256?(gs(o),o):(gs(o),null);if((o.flags&128)!==0)throw Error(n(558))}return Cn(o),null;case 13:if(x=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=Pl(o),x!==null&&x.dehydrated!==null){if(s===null){if(!v)throw Error(n(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[Yn]=o}else zo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Cn(o),v=!1}else v=U0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(gs(o),o):(gs(o),null)}return gs(o),(o.flags&128)!==0?(o.lanes=d,o):(d=x!==null,s=s!==null&&s.memoizedState!==null,d&&(x=o.child,v=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(v=x.alternate.memoizedState.cachePool.pool),_=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(_=x.memoizedState.cachePool.pool),_!==v&&(x.flags|=2048)),d!==s&&d&&(o.child.flags|=8192),vd(o,o.updateQueue),Cn(o),null);case 4:return Qe(),s===null&&$g(o.stateNode.containerInfo),Cn(o),null;case 10:return ta(o.type),Cn(o),null;case 19:if(ue(Wn),x=o.memoizedState,x===null)return Cn(o),null;if(v=(o.flags&128)!==0,_=x.rendering,_===null)if(v)pu(x,!1);else{if(Vn!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(_=ud(s),_!==null){for(o.flags|=128,pu(x,!1),s=_.updateQueue,o.updateQueue=s,vd(o,s),o.subtreeFlags=0,s=d,d=o.child;d!==null;)Vm(d,s),d=d.sibling;return Ce(Wn,Wn.current&1|2),jt&&Jr(o,x.treeForkCount),o.child}s=s.sibling}x.tail!==null&&Le()>Id&&(o.flags|=128,v=!0,pu(x,!1),o.lanes=4194304)}else{if(!v)if(s=ud(_),s!==null){if(o.flags|=128,v=!0,s=s.updateQueue,o.updateQueue=s,vd(o,s),pu(x,!0),x.tail===null&&x.tailMode==="hidden"&&!_.alternate&&!jt)return Cn(o),null}else 2*Le()-x.renderingStartTime>Id&&d!==536870912&&(o.flags|=128,v=!0,pu(x,!1),o.lanes=4194304);x.isBackwards?(_.sibling=o.child,o.child=_):(s=x.last,s!==null?s.sibling=_:o.child=_,x.last=_)}return x.tail!==null?(s=x.tail,x.rendering=s,x.tail=s.sibling,x.renderingStartTime=Le(),s.sibling=null,d=Wn.current,Ce(Wn,v?d&1|2:d&1),jt&&Jr(o,x.treeForkCount),s):(Cn(o),null);case 22:case 23:return gs(o),J0(),x=o.memoizedState!==null,s!==null?s.memoizedState!==null!==x&&(o.flags|=8192):x&&(o.flags|=8192),x?(d&536870912)!==0&&(o.flags&128)===0&&(Cn(o),o.subtreeFlags&6&&(o.flags|=8192)):Cn(o),d=o.updateQueue,d!==null&&vd(o,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),x=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(x=o.memoizedState.cachePool.pool),x!==d&&(o.flags|=2048),s!==null&&ue(Go),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),ta(ni),Cn(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function sC(s,o){switch(F0(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return ta(ni),Qe(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Ht(o),null;case 31:if(o.memoizedState!==null){if(gs(o),o.alternate===null)throw Error(n(340));zo()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(gs(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(n(340));zo()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ue(Wn),null;case 4:return Qe(),null;case 10:return ta(o.type),null;case 22:case 23:return gs(o),J0(),s!==null&&ue(Go),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return ta(ni),null;case 25:return null;default:return null}}function mx(s,o){switch(F0(o),o.tag){case 3:ta(ni),Qe();break;case 26:case 27:case 5:Ht(o);break;case 4:Qe();break;case 31:o.memoizedState!==null&&gs(o);break;case 13:gs(o);break;case 19:ue(Wn);break;case 10:ta(o.type);break;case 22:case 23:gs(o),J0(),s!==null&&ue(Go);break;case 24:ta(ni)}}function mu(s,o){try{var d=o.updateQueue,x=d!==null?d.lastEffect:null;if(x!==null){var v=x.next;d=v;do{if((d.tag&s)===s){x=void 0;var _=d.create,O=d.inst;x=_(),O.destroy=x}d=d.next}while(d!==v)}}catch(H){an(o,o.return,H)}}function Qa(s,o,d){try{var x=o.updateQueue,v=x!==null?x.lastEffect:null;if(v!==null){var _=v.next;x=_;do{if((x.tag&s)===s){var O=x.inst,H=O.destroy;if(H!==void 0){O.destroy=void 0,v=o;var Z=d,fe=H;try{fe()}catch(ve){an(v,Z,ve)}}}x=x.next}while(x!==_)}}catch(ve){an(o,o.return,ve)}}function yx(s){var o=s.updateQueue;if(o!==null){var d=s.stateNode;try{oy(o,d)}catch(x){an(s,s.return,x)}}}function xx(s,o,d){d.props=Ko(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(x){an(s,o,x)}}function yu(s,o){try{var d=s.ref;if(d!==null){switch(s.tag){case 26:case 27:case 5:var x=s.stateNode;break;case 30:x=s.stateNode;break;default:x=s.stateNode}typeof d=="function"?s.refCleanup=d(x):d.current=x}}catch(v){an(s,o,v)}}function Cr(s,o){var d=s.ref,x=s.refCleanup;if(d!==null)if(typeof x=="function")try{x()}catch(v){an(s,o,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(v){an(s,o,v)}else d.current=null}function bx(s){var o=s.type,d=s.memoizedProps,x=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":d.autoFocus&&x.focus();break e;case"img":d.src?x.src=d.src:d.srcSet&&(x.srcset=d.srcSet)}}catch(v){an(s,s.return,v)}}function Mg(s,o,d){try{var x=s.stateNode;_C(x,s.type,d,o),x[sn]=o}catch(v){an(s,s.return,v)}}function Ax(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&io(s.type)||s.tag===4}function Dg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ax(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&io(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Og(s,o,d){var x=s.tag;if(x===5||x===6)s=s.stateNode,o?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(s,o):(o=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,o.appendChild(s),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=Yi));else if(x!==4&&(x===27&&io(s.type)&&(d=s.stateNode,o=null),s=s.child,s!==null))for(Og(s,o,d),s=s.sibling;s!==null;)Og(s,o,d),s=s.sibling}function Sd(s,o,d){var x=s.tag;if(x===5||x===6)s=s.stateNode,o?d.insertBefore(s,o):d.appendChild(s);else if(x!==4&&(x===27&&io(s.type)&&(d=s.stateNode),s=s.child,s!==null))for(Sd(s,o,d),s=s.sibling;s!==null;)Sd(s,o,d),s=s.sibling}function wx(s){var o=s.stateNode,d=s.memoizedProps;try{for(var x=s.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);vi(o,x,d),o[Yn]=s,o[sn]=d}catch(_){an(s,s.return,_)}}var aa=!1,ri=!1,Lg=!1,Ex=typeof WeakSet=="function"?WeakSet:Set,gi=null;function rC(s,o){if(s=s.containerInfo,t1=Yd,s=F(s),z(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var x=d.getSelection&&d.getSelection();if(x&&x.rangeCount!==0){d=x.anchorNode;var v=x.anchorOffset,_=x.focusNode;x=x.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var O=0,H=-1,Z=-1,fe=0,ve=0,Te=s,ge=null;t:for(;;){for(var xe;Te!==d||v!==0&&Te.nodeType!==3||(H=O+v),Te!==_||x!==0&&Te.nodeType!==3||(Z=O+x),Te.nodeType===3&&(O+=Te.nodeValue.length),(xe=Te.firstChild)!==null;)ge=Te,Te=xe;for(;;){if(Te===s)break t;if(ge===d&&++fe===v&&(H=O),ge===_&&++ve===x&&(Z=O),(xe=Te.nextSibling)!==null)break;Te=ge,ge=Te.parentNode}Te=xe}d=H===-1||Z===-1?null:{start:H,end:Z}}else d=null}d=d||{start:0,end:0}}else d=null;for(n1={focusedElem:s,selectionRange:d},Yd=!1,gi=o;gi!==null;)if(o=gi,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,gi=s;else for(;gi!==null;){switch(o=gi,_=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(d=0;d<s.length;d++)v=s[d],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,d=o,v=_.memoizedProps,_=_.memoizedState,x=d.stateNode;try{var Ze=Ko(d.type,v);s=x.getSnapshotBeforeUpdate(Ze,_),x.__reactInternalSnapshotBeforeUpdate=s}catch(at){an(d,d.return,at)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,d=s.nodeType,d===9)r1(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":r1(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=o.sibling,s!==null){s.return=o.return,gi=s;break}gi=o.return}}function vx(s,o,d){var x=d.flags;switch(d.tag){case 0:case 11:case 15:la(s,d),x&4&&mu(5,d);break;case 1:if(la(s,d),x&4)if(s=d.stateNode,o===null)try{s.componentDidMount()}catch(O){an(d,d.return,O)}else{var v=Ko(d.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(v,o,s.__reactInternalSnapshotBeforeUpdate)}catch(O){an(d,d.return,O)}}x&64&&yx(d),x&512&&yu(d,d.return);break;case 3:if(la(s,d),x&64&&(s=d.updateQueue,s!==null)){if(o=null,d.child!==null)switch(d.child.tag){case 27:case 5:o=d.child.stateNode;break;case 1:o=d.child.stateNode}try{oy(s,o)}catch(O){an(d,d.return,O)}}break;case 27:o===null&&x&4&&wx(d);case 26:case 5:la(s,d),o===null&&x&4&&bx(d),x&512&&yu(d,d.return);break;case 12:la(s,d);break;case 31:la(s,d),x&4&&_x(s,d);break;case 13:la(s,d),x&4&&Tx(s,d),x&64&&(s=d.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(d=gC.bind(null,d),LC(s,d))));break;case 22:if(x=d.memoizedState!==null||aa,!x){o=o!==null&&o.memoizedState!==null||ri,v=aa;var _=ri;aa=x,(ri=o)&&!_?ca(s,d,(d.subtreeFlags&8772)!==0):la(s,d),aa=v,ri=_}break;case 30:break;default:la(s,d)}}function Sx(s){var o=s.alternate;o!==null&&(s.alternate=null,Sx(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Gi(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Rn=null,Wi=!1;function oa(s,o,d){for(d=d.child;d!==null;)Cx(s,o,d),d=d.sibling}function Cx(s,o,d){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(Zt,d)}catch{}switch(d.tag){case 26:ri||Cr(d,o),oa(s,o,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:ri||Cr(d,o);var x=Rn,v=Wi;io(d.type)&&(Rn=d.stateNode,Wi=!1),oa(s,o,d),_u(d.stateNode),Rn=x,Wi=v;break;case 5:ri||Cr(d,o);case 6:if(x=Rn,v=Wi,Rn=null,oa(s,o,d),Rn=x,Wi=v,Rn!==null)if(Wi)try{(Rn.nodeType===9?Rn.body:Rn.nodeName==="HTML"?Rn.ownerDocument.body:Rn).removeChild(d.stateNode)}catch(_){an(d,o,_)}else try{Rn.removeChild(d.stateNode)}catch(_){an(d,o,_)}break;case 18:Rn!==null&&(Wi?(s=Rn,yb(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,d.stateNode),ic(s)):yb(Rn,d.stateNode));break;case 4:x=Rn,v=Wi,Rn=d.stateNode.containerInfo,Wi=!0,oa(s,o,d),Rn=x,Wi=v;break;case 0:case 11:case 14:case 15:Qa(2,d,o),ri||Qa(4,d,o),oa(s,o,d);break;case 1:ri||(Cr(d,o),x=d.stateNode,typeof x.componentWillUnmount=="function"&&xx(d,o,x)),oa(s,o,d);break;case 21:oa(s,o,d);break;case 22:ri=(x=ri)||d.memoizedState!==null,oa(s,o,d),ri=x;break;default:oa(s,o,d)}}function _x(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ic(s)}catch(d){an(o,o.return,d)}}}function Tx(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ic(s)}catch(d){an(o,o.return,d)}}function aC(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new Ex),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new Ex),o;default:throw Error(n(435,s.tag))}}function Cd(s,o){var d=aC(s);o.forEach(function(x){if(!d.has(x)){d.add(x);var v=pC.bind(null,s,x);x.then(v,v)}})}function Ki(s,o){var d=o.deletions;if(d!==null)for(var x=0;x<d.length;x++){var v=d[x],_=s,O=o,H=O;e:for(;H!==null;){switch(H.tag){case 27:if(io(H.type)){Rn=H.stateNode,Wi=!1;break e}break;case 5:Rn=H.stateNode,Wi=!1;break e;case 3:case 4:Rn=H.stateNode.containerInfo,Wi=!0;break e}H=H.return}if(Rn===null)throw Error(n(160));Cx(_,O,v),Rn=null,Wi=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Ix(o,s),o=o.sibling}var er=null;function Ix(s,o){var d=s.alternate,x=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ki(o,s),Qi(s),x&4&&(Qa(3,s,s.return),mu(3,s),Qa(5,s,s.return));break;case 1:Ki(o,s),Qi(s),x&512&&(ri||d===null||Cr(d,d.return)),x&64&&aa&&(s=s.updateQueue,s!==null&&(x=s.callbacks,x!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?x:d.concat(x))));break;case 26:var v=er;if(Ki(o,s),Qi(s),x&512&&(ri||d===null||Cr(d,d.return)),x&4){var _=d!==null?d.memoizedState:null;if(x=s.memoizedState,d===null)if(x===null)if(s.stateNode===null){e:{x=s.type,d=s.memoizedProps,v=v.ownerDocument||v;t:switch(x){case"title":_=v.getElementsByTagName("title")[0],(!_||_[Ro]||_[Yn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(x),v.head.insertBefore(_,v.querySelector("head > title"))),vi(_,x,d),_[Yn]=s,Un(_),x=_;break e;case"link":var O=Ib("link","href",v).get(x+(d.href||""));if(O){for(var H=0;H<O.length;H++)if(_=O[H],_.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&_.getAttribute("rel")===(d.rel==null?null:d.rel)&&_.getAttribute("title")===(d.title==null?null:d.title)&&_.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){O.splice(H,1);break t}}_=v.createElement(x),vi(_,x,d),v.head.appendChild(_);break;case"meta":if(O=Ib("meta","content",v).get(x+(d.content||""))){for(H=0;H<O.length;H++)if(_=O[H],_.getAttribute("content")===(d.content==null?null:""+d.content)&&_.getAttribute("name")===(d.name==null?null:d.name)&&_.getAttribute("property")===(d.property==null?null:d.property)&&_.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&_.getAttribute("charset")===(d.charSet==null?null:d.charSet)){O.splice(H,1);break t}}_=v.createElement(x),vi(_,x,d),v.head.appendChild(_);break;default:throw Error(n(468,x))}_[Yn]=s,Un(_),x=_}s.stateNode=x}else Nb(v,s.type,s.stateNode);else s.stateNode=Tb(v,x,s.memoizedProps);else _!==x?(_===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):_.count--,x===null?Nb(v,s.type,s.stateNode):Tb(v,x,s.memoizedProps)):x===null&&s.stateNode!==null&&Mg(s,s.memoizedProps,d.memoizedProps)}break;case 27:Ki(o,s),Qi(s),x&512&&(ri||d===null||Cr(d,d.return)),d!==null&&x&4&&Mg(s,s.memoizedProps,d.memoizedProps);break;case 5:if(Ki(o,s),Qi(s),x&512&&(ri||d===null||Cr(d,d.return)),s.flags&32){v=s.stateNode;try{Da(v,"")}catch(Ze){an(s,s.return,Ze)}}x&4&&s.stateNode!=null&&(v=s.memoizedProps,Mg(s,v,d!==null?d.memoizedProps:v)),x&1024&&(Lg=!0);break;case 6:if(Ki(o,s),Qi(s),x&4){if(s.stateNode===null)throw Error(n(162));x=s.memoizedProps,d=s.stateNode;try{d.nodeValue=x}catch(Ze){an(s,s.return,Ze)}}break;case 3:if(zd=null,v=er,er=jd(o.containerInfo),Ki(o,s),er=v,Qi(s),x&4&&d!==null&&d.memoizedState.isDehydrated)try{ic(o.containerInfo)}catch(Ze){an(s,s.return,Ze)}Lg&&(Lg=!1,Nx(s));break;case 4:x=er,er=jd(s.stateNode.containerInfo),Ki(o,s),Qi(s),er=x;break;case 12:Ki(o,s),Qi(s);break;case 31:Ki(o,s),Qi(s),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,Cd(s,x)));break;case 13:Ki(o,s),Qi(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Td=Le()),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,Cd(s,x)));break;case 22:v=s.memoizedState!==null;var Z=d!==null&&d.memoizedState!==null,fe=aa,ve=ri;if(aa=fe||v,ri=ve||Z,Ki(o,s),ri=ve,aa=fe,Qi(s),x&8192)e:for(o=s.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(d===null||Z||aa||ri||Qo(s)),d=null,o=s;;){if(o.tag===5||o.tag===26){if(d===null){Z=d=o;try{if(_=Z.stateNode,v)O=_.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{H=Z.stateNode;var Te=Z.memoizedProps.style,ge=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;H.style.display=ge==null||typeof ge=="boolean"?"":(""+ge).trim()}}catch(Ze){an(Z,Z.return,Ze)}}}else if(o.tag===6){if(d===null){Z=o;try{Z.stateNode.nodeValue=v?"":Z.memoizedProps}catch(Ze){an(Z,Z.return,Ze)}}}else if(o.tag===18){if(d===null){Z=o;try{var xe=Z.stateNode;v?xb(xe,!0):xb(Z.stateNode,!1)}catch(Ze){an(Z,Z.return,Ze)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;d===o&&(d=null),o=o.return}d===o&&(d=null),o.sibling.return=o.return,o=o.sibling}x&4&&(x=s.updateQueue,x!==null&&(d=x.retryQueue,d!==null&&(x.retryQueue=null,Cd(s,d))));break;case 19:Ki(o,s),Qi(s),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,Cd(s,x)));break;case 30:break;case 21:break;default:Ki(o,s),Qi(s)}}function Qi(s){var o=s.flags;if(o&2){try{for(var d,x=s.return;x!==null;){if(Ax(x)){d=x;break}x=x.return}if(d==null)throw Error(n(160));switch(d.tag){case 27:var v=d.stateNode,_=Dg(s);Sd(s,_,v);break;case 5:var O=d.stateNode;d.flags&32&&(Da(O,""),d.flags&=-33);var H=Dg(s);Sd(s,H,O);break;case 3:case 4:var Z=d.stateNode.containerInfo,fe=Dg(s);Og(s,fe,Z);break;default:throw Error(n(161))}}catch(ve){an(s,s.return,ve)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Nx(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;Nx(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function la(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)vx(s,o.alternate,o),o=o.sibling}function Qo(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Qa(4,o,o.return),Qo(o);break;case 1:Cr(o,o.return);var d=o.stateNode;typeof d.componentWillUnmount=="function"&&xx(o,o.return,d),Qo(o);break;case 27:_u(o.stateNode);case 26:case 5:Cr(o,o.return),Qo(o);break;case 22:o.memoizedState===null&&Qo(o);break;case 30:Qo(o);break;default:Qo(o)}s=s.sibling}}function ca(s,o,d){for(d=d&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var x=o.alternate,v=s,_=o,O=_.flags;switch(_.tag){case 0:case 11:case 15:ca(v,_,d),mu(4,_);break;case 1:if(ca(v,_,d),x=_,v=x.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(fe){an(x,x.return,fe)}if(x=_,v=x.updateQueue,v!==null){var H=x.stateNode;try{var Z=v.shared.hiddenCallbacks;if(Z!==null)for(v.shared.hiddenCallbacks=null,v=0;v<Z.length;v++)ay(Z[v],H)}catch(fe){an(x,x.return,fe)}}d&&O&64&&yx(_),yu(_,_.return);break;case 27:wx(_);case 26:case 5:ca(v,_,d),d&&x===null&&O&4&&bx(_),yu(_,_.return);break;case 12:ca(v,_,d);break;case 31:ca(v,_,d),d&&O&4&&_x(v,_);break;case 13:ca(v,_,d),d&&O&4&&Tx(v,_);break;case 22:_.memoizedState===null&&ca(v,_,d),yu(_,_.return);break;case 30:break;default:ca(v,_,d)}o=o.sibling}}function kg(s,o){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&iu(d))}function Pg(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&iu(s))}function tr(s,o,d,x){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Rx(s,o,d,x),o=o.sibling}function Rx(s,o,d,x){var v=o.flags;switch(o.tag){case 0:case 11:case 15:tr(s,o,d,x),v&2048&&mu(9,o);break;case 1:tr(s,o,d,x);break;case 3:tr(s,o,d,x),v&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&iu(s)));break;case 12:if(v&2048){tr(s,o,d,x),s=o.stateNode;try{var _=o.memoizedProps,O=_.id,H=_.onPostCommit;typeof H=="function"&&H(O,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Z){an(o,o.return,Z)}}else tr(s,o,d,x);break;case 31:tr(s,o,d,x);break;case 13:tr(s,o,d,x);break;case 23:break;case 22:_=o.stateNode,O=o.alternate,o.memoizedState!==null?_._visibility&2?tr(s,o,d,x):xu(s,o):_._visibility&2?tr(s,o,d,x):(_._visibility|=2,Xl(s,o,d,x,(o.subtreeFlags&10256)!==0||!1)),v&2048&&kg(O,o);break;case 24:tr(s,o,d,x),v&2048&&Pg(o.alternate,o);break;default:tr(s,o,d,x)}}function Xl(s,o,d,x,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=s,O=o,H=d,Z=x,fe=O.flags;switch(O.tag){case 0:case 11:case 15:Xl(_,O,H,Z,v),mu(8,O);break;case 23:break;case 22:var ve=O.stateNode;O.memoizedState!==null?ve._visibility&2?Xl(_,O,H,Z,v):xu(_,O):(ve._visibility|=2,Xl(_,O,H,Z,v)),v&&fe&2048&&kg(O.alternate,O);break;case 24:Xl(_,O,H,Z,v),v&&fe&2048&&Pg(O.alternate,O);break;default:Xl(_,O,H,Z,v)}o=o.sibling}}function xu(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var d=s,x=o,v=x.flags;switch(x.tag){case 22:xu(d,x),v&2048&&kg(x.alternate,x);break;case 24:xu(d,x),v&2048&&Pg(x.alternate,x);break;default:xu(d,x)}o=o.sibling}}var bu=8192;function ql(s,o,d){if(s.subtreeFlags&bu)for(s=s.child;s!==null;)Mx(s,o,d),s=s.sibling}function Mx(s,o,d){switch(s.tag){case 26:ql(s,o,d),s.flags&bu&&s.memoizedState!==null&&XC(d,er,s.memoizedState,s.memoizedProps);break;case 5:ql(s,o,d);break;case 3:case 4:var x=er;er=jd(s.stateNode.containerInfo),ql(s,o,d),er=x;break;case 22:s.memoizedState===null&&(x=s.alternate,x!==null&&x.memoizedState!==null?(x=bu,bu=16777216,ql(s,o,d),bu=x):ql(s,o,d));break;default:ql(s,o,d)}}function Dx(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Au(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var x=o[d];gi=x,Lx(x,s)}Dx(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ox(s),s=s.sibling}function Ox(s){switch(s.tag){case 0:case 11:case 15:Au(s),s.flags&2048&&Qa(9,s,s.return);break;case 3:Au(s);break;case 12:Au(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,_d(s)):Au(s);break;default:Au(s)}}function _d(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var x=o[d];gi=x,Lx(x,s)}Dx(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Qa(8,o,o.return),_d(o);break;case 22:d=o.stateNode,d._visibility&2&&(d._visibility&=-3,_d(o));break;default:_d(o)}s=s.sibling}}function Lx(s,o){for(;gi!==null;){var d=gi;switch(d.tag){case 0:case 11:case 15:Qa(8,d,o);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var x=d.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:iu(d.memoizedState.cache)}if(x=d.child,x!==null)x.return=d,gi=x;else e:for(d=s;gi!==null;){x=gi;var v=x.sibling,_=x.return;if(Sx(x),x===d){gi=null;break e}if(v!==null){v.return=_,gi=v;break e}gi=_}}}var oC={getCacheForType:function(s){var o=wi(ni),d=o.data.get(s);return d===void 0&&(d=s(),o.data.set(s,d)),d},cacheSignal:function(){return wi(ni).controller.signal}},lC=typeof WeakMap=="function"?WeakMap:Map,Kt=0,mn=null,Rt=null,kt=0,rn=0,ps=null,Za=!1,Wl=!1,Bg=!1,ua=0,Vn=0,$a=0,Zo=0,Fg=0,ms=0,Kl=0,wu=null,Zi=null,jg=!1,Td=0,kx=0,Id=1/0,Nd=null,Ja=null,di=0,eo=null,Ql=null,ha=0,Ug=0,zg=null,Px=null,Eu=0,Hg=null;function ys(){return(Kt&2)!==0&&kt!==0?kt&-kt:K.T!==null?Wg():Di()}function Bx(){if(ms===0)if((kt&536870912)===0||jt){var s=Ot;Ot<<=1,(Ot&3932160)===0&&(Ot=262144),ms=s}else ms=536870912;return s=fs.current,s!==null&&(s.flags|=32),ms}function $i(s,o,d){(s===mn&&(rn===2||rn===9)||s.cancelPendingCommit!==null)&&(Zl(s,0),to(s,kt,ms,!1)),yr(s,d),((Kt&2)===0||s!==mn)&&(s===mn&&((Kt&2)===0&&(Zo|=d),Vn===4&&to(s,kt,ms,!1)),_r(s))}function Fx(s,o,d){if((Kt&6)!==0)throw Error(n(327));var x=!d&&(o&127)===0&&(o&s.expiredLanes)===0||xi(s,o),v=x?hC(s,o):Gg(s,o,!0),_=x;do{if(v===0){Wl&&!x&&to(s,o,0,!1);break}else{if(d=s.current.alternate,_&&!cC(d)){v=Gg(s,o,!1),_=!1;continue}if(v===2){if(_=o,s.errorRecoveryDisabledLanes&_)var O=0;else O=s.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){o=O;e:{var H=s;v=wu;var Z=H.current.memoizedState.isDehydrated;if(Z&&(Zl(H,O).flags|=256),O=Gg(H,O,!1),O!==2){if(Bg&&!Z){H.errorRecoveryDisabledLanes|=_,Zo|=_,v=4;break e}_=Zi,Zi=v,_!==null&&(Zi===null?Zi=_:Zi.push.apply(Zi,_))}v=O}if(_=!1,v!==2)continue}}if(v===1){Zl(s,0),to(s,o,0,!0);break}e:{switch(x=s,_=v,_){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:to(x,o,ms,!Za);break e;case 2:Zi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(v=Td+300-Le(),10<v)){if(to(x,o,ms,!Za),No(x,0,!0)!==0)break e;ha=o,x.timeoutHandle=pb(jx.bind(null,x,d,Zi,Nd,jg,o,ms,Zo,Kl,Za,_,"Throttled",-0,0),v);break e}jx(x,d,Zi,Nd,jg,o,ms,Zo,Kl,Za,_,null,-0,0)}}break}while(!0);_r(s)}function jx(s,o,d,x,v,_,O,H,Z,fe,ve,Te,ge,xe){if(s.timeoutHandle=-1,Te=o.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yi},Mx(o,_,Te);var Ze=(_&62914560)===_?Td-Le():(_&4194048)===_?kx-Le():0;if(Ze=qC(Te,Ze),Ze!==null){ha=_,s.cancelPendingCommit=Ze(qx.bind(null,s,o,_,d,x,v,O,H,Z,ve,Te,null,ge,xe)),to(s,_,O,!fe);return}}qx(s,o,_,d,x,v,O,H,Z)}function cC(s){for(var o=s;;){var d=o.tag;if((d===0||d===11||d===15)&&o.flags&16384&&(d=o.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var x=0;x<d.length;x++){var v=d[x],_=v.getSnapshot;v=v.value;try{if(!b(_(),v))return!1}catch{return!1}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function to(s,o,d,x){o&=~Fg,o&=~Zo,s.suspendedLanes|=o,s.pingedLanes&=~o,x&&(s.warmLanes|=o),x=s.expirationTimes;for(var v=o;0<v;){var _=31-pt(v),O=1<<_;x[_]=-1,v&=~O}d!==0&&kh(s,d,o)}function Rd(){return(Kt&6)===0?(vu(0),!1):!0}function Vg(){if(Rt!==null){if(rn===0)var s=Rt.return;else s=Rt,ea=Ho=null,rg(s),zl=null,ru=0,s=Rt;for(;s!==null;)mx(s.alternate,s),s=s.return;Rt=null}}function Zl(s,o){var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,NC(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),ha=0,Vg(),mn=s,Rt=d=$r(s.current,null),kt=o,rn=0,ps=null,Za=!1,Wl=xi(s,o),Bg=!1,Kl=ms=Fg=Zo=$a=Vn=0,Zi=wu=null,jg=!1,(o&8)!==0&&(o|=o&32);var x=s.entangledLanes;if(x!==0)for(s=s.entanglements,x&=o;0<x;){var v=31-pt(x),_=1<<v;o|=s[v],x&=~_}return ua=o,Zh(),d}function Ux(s,o){At=null,K.H=fu,o===Ul||o===rd?(o=ny(),rn=3):o===q0?(o=ny(),rn=4):rn=o===wg?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ps=o,Rt===null&&(Vn=1,bd(s,Os(o,s.current)))}function zx(){var s=fs.current;return s===null?!0:(kt&4194048)===kt?Bs===null:(kt&62914560)===kt||(kt&536870912)!==0?s===Bs:!1}function Hx(){var s=K.H;return K.H=fu,s===null?fu:s}function Vx(){var s=K.A;return K.A=oC,s}function Md(){Vn=4,Za||(kt&4194048)!==kt&&fs.current!==null||(Wl=!0),($a&134217727)===0&&(Zo&134217727)===0||mn===null||to(mn,kt,ms,!1)}function Gg(s,o,d){var x=Kt;Kt|=2;var v=Hx(),_=Vx();(mn!==s||kt!==o)&&(Nd=null,Zl(s,o)),o=!1;var O=Vn;e:do try{if(rn!==0&&Rt!==null){var H=Rt,Z=ps;switch(rn){case 8:Vg(),O=6;break e;case 3:case 2:case 9:case 6:fs.current===null&&(o=!0);var fe=rn;if(rn=0,ps=null,$l(s,H,Z,fe),d&&Wl){O=0;break e}break;default:fe=rn,rn=0,ps=null,$l(s,H,Z,fe)}}uC(),O=Vn;break}catch(ve){Ux(s,ve)}while(!0);return o&&s.shellSuspendCounter++,ea=Ho=null,Kt=x,K.H=v,K.A=_,Rt===null&&(mn=null,kt=0,Zh()),O}function uC(){for(;Rt!==null;)Gx(Rt)}function hC(s,o){var d=Kt;Kt|=2;var x=Hx(),v=Vx();mn!==s||kt!==o?(Nd=null,Id=Le()+500,Zl(s,o)):Wl=xi(s,o);e:do try{if(rn!==0&&Rt!==null){o=Rt;var _=ps;t:switch(rn){case 1:rn=0,ps=null,$l(s,o,_,1);break;case 2:case 9:if(ey(_)){rn=0,ps=null,Yx(o);break}o=function(){rn!==2&&rn!==9||mn!==s||(rn=7),_r(s)},_.then(o,o);break e;case 3:rn=7;break e;case 4:rn=5;break e;case 7:ey(_)?(rn=0,ps=null,Yx(o)):(rn=0,ps=null,$l(s,o,_,7));break;case 5:var O=null;switch(Rt.tag){case 26:O=Rt.memoizedState;case 5:case 27:var H=Rt;if(O?Rb(O):H.stateNode.complete){rn=0,ps=null;var Z=H.sibling;if(Z!==null)Rt=Z;else{var fe=H.return;fe!==null?(Rt=fe,Dd(fe)):Rt=null}break t}}rn=0,ps=null,$l(s,o,_,5);break;case 6:rn=0,ps=null,$l(s,o,_,6);break;case 8:Vg(),Vn=6;break e;default:throw Error(n(462))}}dC();break}catch(ve){Ux(s,ve)}while(!0);return ea=Ho=null,K.H=x,K.A=v,Kt=d,Rt!==null?0:(mn=null,kt=0,Zh(),Vn)}function dC(){for(;Rt!==null&&!Ae();)Gx(Rt)}function Gx(s){var o=gx(s.alternate,s,ua);s.memoizedProps=s.pendingProps,o===null?Dd(s):Rt=o}function Yx(s){var o=s,d=o.alternate;switch(o.tag){case 15:case 0:o=lx(d,o,o.pendingProps,o.type,void 0,kt);break;case 11:o=lx(d,o,o.pendingProps,o.type.render,o.ref,kt);break;case 5:rg(o);default:mx(d,o),o=Rt=Vm(o,ua),o=gx(d,o,ua)}s.memoizedProps=s.pendingProps,o===null?Dd(s):Rt=o}function $l(s,o,d,x){ea=Ho=null,rg(o),zl=null,ru=0;var v=o.return;try{if(eC(s,v,o,d,kt)){Vn=1,bd(s,Os(d,s.current)),Rt=null;return}}catch(_){if(v!==null)throw Rt=v,_;Vn=1,bd(s,Os(d,s.current)),Rt=null;return}o.flags&32768?(jt||x===1?s=!0:Wl||(kt&536870912)!==0?s=!1:(Za=s=!0,(x===2||x===9||x===3||x===6)&&(x=fs.current,x!==null&&x.tag===13&&(x.flags|=16384))),Xx(o,s)):Dd(o)}function Dd(s){var o=s;do{if((o.flags&32768)!==0){Xx(o,Za);return}s=o.return;var d=iC(o.alternate,o,ua);if(d!==null){Rt=d;return}if(o=o.sibling,o!==null){Rt=o;return}Rt=o=s}while(o!==null);Vn===0&&(Vn=5)}function Xx(s,o){do{var d=sC(s.alternate,s);if(d!==null){d.flags&=32767,Rt=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!o&&(s=s.sibling,s!==null)){Rt=s;return}Rt=s=d}while(s!==null);Vn=6,Rt=null}function qx(s,o,d,x,v,_,O,H,Z){s.cancelPendingCommit=null;do Od();while(di!==0);if((Kt&6)!==0)throw Error(n(327));if(o!==null){if(o===s.current)throw Error(n(177));if(_=o.lanes|o.childLanes,_|=D0,Is(s,d,_,O,H,Z),s===mn&&(Rt=mn=null,kt=0),Ql=o,eo=s,ha=d,Ug=_,zg=v,Px=x,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,mC(ut,function(){return $x(),null})):(s.callbackNode=null,s.callbackPriority=0),x=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||x){x=K.T,K.T=null,v=re.p,re.p=2,O=Kt,Kt|=4;try{rC(s,o,d)}finally{Kt=O,re.p=v,K.T=x}}di=1,Wx(),Kx(),Qx()}}function Wx(){if(di===1){di=0;var s=eo,o=Ql,d=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||d){d=K.T,K.T=null;var x=re.p;re.p=2;var v=Kt;Kt|=4;try{Ix(o,s);var _=n1,O=F(s.containerInfo),H=_.focusedElem,Z=_.selectionRange;if(O!==H&&H&&H.ownerDocument&&D(H.ownerDocument.documentElement,H)){if(Z!==null&&z(H)){var fe=Z.start,ve=Z.end;if(ve===void 0&&(ve=fe),"selectionStart"in H)H.selectionStart=fe,H.selectionEnd=Math.min(ve,H.value.length);else{var Te=H.ownerDocument||document,ge=Te&&Te.defaultView||window;if(ge.getSelection){var xe=ge.getSelection(),Ze=H.textContent.length,at=Math.min(Z.start,Ze),hn=Z.end===void 0?at:Math.min(Z.end,Ze);!xe.extend&&at>hn&&(O=hn,hn=at,at=O);var le=I(H,at),se=I(H,hn);if(le&&se&&(xe.rangeCount!==1||xe.anchorNode!==le.node||xe.anchorOffset!==le.offset||xe.focusNode!==se.node||xe.focusOffset!==se.offset)){var de=Te.createRange();de.setStart(le.node,le.offset),xe.removeAllRanges(),at>hn?(xe.addRange(de),xe.extend(se.node,se.offset)):(de.setEnd(se.node,se.offset),xe.addRange(de))}}}}for(Te=[],xe=H;xe=xe.parentNode;)xe.nodeType===1&&Te.push({element:xe,left:xe.scrollLeft,top:xe.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Te.length;H++){var _e=Te[H];_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}Yd=!!t1,n1=t1=null}finally{Kt=v,re.p=x,K.T=d}}s.current=o,di=2}}function Kx(){if(di===2){di=0;var s=eo,o=Ql,d=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||d){d=K.T,K.T=null;var x=re.p;re.p=2;var v=Kt;Kt|=4;try{vx(s,o.alternate,o)}finally{Kt=v,re.p=x,K.T=d}}di=3}}function Qx(){if(di===4||di===3){di=0,je();var s=eo,o=Ql,d=ha,x=Px;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?di=5:(di=0,Ql=eo=null,Zx(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(Ja=null),qs(d),o=o.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(Zt,o,void 0,(o.current.flags&128)===128)}catch{}if(x!==null){o=K.T,v=re.p,re.p=2,K.T=null;try{for(var _=s.onRecoverableError,O=0;O<x.length;O++){var H=x[O];_(H.value,{componentStack:H.stack})}}finally{K.T=o,re.p=v}}(ha&3)!==0&&Od(),_r(s),v=s.pendingLanes,(d&261930)!==0&&(v&42)!==0?s===Hg?Eu++:(Eu=0,Hg=s):Eu=0,vu(0)}}function Zx(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,iu(o)))}function Od(){return Wx(),Kx(),Qx(),$x()}function $x(){if(di!==5)return!1;var s=eo,o=Ug;Ug=0;var d=qs(ha),x=K.T,v=re.p;try{re.p=32>d?32:d,K.T=null,d=zg,zg=null;var _=eo,O=ha;if(di=0,Ql=eo=null,ha=0,(Kt&6)!==0)throw Error(n(331));var H=Kt;if(Kt|=4,Ox(_.current),Rx(_,_.current,O,d),Kt=H,vu(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(Zt,_)}catch{}return!0}finally{re.p=v,K.T=x,Zx(s,o)}}function Jx(s,o,d){o=Os(d,o),o=Ag(s.stateNode,o,2),s=qa(s,o,2),s!==null&&(yr(s,2),_r(s))}function an(s,o,d){if(s.tag===3)Jx(s,s,d);else for(;o!==null;){if(o.tag===3){Jx(o,s,d);break}else if(o.tag===1){var x=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Ja===null||!Ja.has(x))){s=Os(d,s),d=ex(2),x=qa(o,d,2),x!==null&&(tx(d,x,o,s),yr(x,2),_r(x));break}}o=o.return}}function Yg(s,o,d){var x=s.pingCache;if(x===null){x=s.pingCache=new lC;var v=new Set;x.set(o,v)}else v=x.get(o),v===void 0&&(v=new Set,x.set(o,v));v.has(d)||(Bg=!0,v.add(d),s=fC.bind(null,s,o,d),o.then(s,s))}function fC(s,o,d){var x=s.pingCache;x!==null&&x.delete(o),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,mn===s&&(kt&d)===d&&(Vn===4||Vn===3&&(kt&62914560)===kt&&300>Le()-Td?(Kt&2)===0&&Zl(s,0):Fg|=d,Kl===kt&&(Kl=0)),_r(s)}function eb(s,o){o===0&&(o=li()),s=jo(s,o),s!==null&&(yr(s,o),_r(s))}function gC(s){var o=s.memoizedState,d=0;o!==null&&(d=o.retryLane),eb(s,d)}function pC(s,o){var d=0;switch(s.tag){case 31:case 13:var x=s.stateNode,v=s.memoizedState;v!==null&&(d=v.retryLane);break;case 19:x=s.stateNode;break;case 22:x=s.stateNode._retryCache;break;default:throw Error(n(314))}x!==null&&x.delete(o),eb(s,d)}function mC(s,o){return te(s,o)}var Ld=null,Jl=null,Xg=!1,kd=!1,qg=!1,no=0;function _r(s){s!==Jl&&s.next===null&&(Jl===null?Ld=Jl=s:Jl=Jl.next=s),kd=!0,Xg||(Xg=!0,xC())}function vu(s,o){if(!qg&&kd){qg=!0;do for(var d=!1,x=Ld;x!==null;){if(s!==0){var v=x.pendingLanes;if(v===0)var _=0;else{var O=x.suspendedLanes,H=x.pingedLanes;_=(1<<31-pt(42|s)+1)-1,_&=v&~(O&~H),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(d=!0,sb(x,_))}else _=kt,_=No(x,x===mn?_:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(_&3)===0||xi(x,_)||(d=!0,sb(x,_));x=x.next}while(d);qg=!1}}function yC(){tb()}function tb(){kd=Xg=!1;var s=0;no!==0&&IC()&&(s=no);for(var o=Le(),d=null,x=Ld;x!==null;){var v=x.next,_=nb(x,o);_===0?(x.next=null,d===null?Ld=v:d.next=v,v===null&&(Jl=d)):(d=x,(s!==0||(_&3)!==0)&&(kd=!0)),x=v}di!==0&&di!==5||vu(s),no!==0&&(no=0)}function nb(s,o){for(var d=s.suspendedLanes,x=s.pingedLanes,v=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var O=31-pt(_),H=1<<O,Z=v[O];Z===-1?((H&d)===0||(H&x)!==0)&&(v[O]=Gc(H,o)):Z<=o&&(s.expiredLanes|=H),_&=~H}if(o=mn,d=kt,d=No(s,s===o?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),x=s.callbackNode,d===0||s===o&&(rn===2||rn===9)||s.cancelPendingCommit!==null)return x!==null&&x!==null&&J(x),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||xi(s,d)){if(o=d&-d,o===s.callbackPriority)return o;switch(x!==null&&J(x),qs(d)){case 2:case 8:d=gt;break;case 32:d=ut;break;case 268435456:d=Vi;break;default:d=ut}return x=ib.bind(null,s),d=te(d,x),s.callbackPriority=o,s.callbackNode=d,o}return x!==null&&x!==null&&J(x),s.callbackPriority=2,s.callbackNode=null,2}function ib(s,o){if(di!==0&&di!==5)return s.callbackNode=null,s.callbackPriority=0,null;var d=s.callbackNode;if(Od()&&s.callbackNode!==d)return null;var x=kt;return x=No(s,s===mn?x:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),x===0?null:(Fx(s,x,o),nb(s,Le()),s.callbackNode!=null&&s.callbackNode===d?ib.bind(null,s):null)}function sb(s,o){if(Od())return null;Fx(s,o,!0)}function xC(){RC(function(){(Kt&6)!==0?te(ze,yC):tb()})}function Wg(){if(no===0){var s=Fl;s===0&&(s=Io,Io<<=1,(Io&261888)===0&&(Io=256)),no=s}return no}function rb(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Oa(""+s)}function ab(s,o){var d=o.ownerDocument.createElement("input");return d.name=o.name,d.value=o.value,s.id&&d.setAttribute("form",s.id),o.parentNode.insertBefore(d,o),s=new FormData(s),d.parentNode.removeChild(d),s}function bC(s,o,d,x,v){if(o==="submit"&&d&&d.stateNode===v){var _=rb((v[sn]||null).action),O=x.submitter;O&&(o=(o=O[sn]||null)?rb(o.formAction):O.getAttribute("formAction"),o!==null&&(_=o,O=null));var H=new ci("action","action",null,x,v);s.push({event:H,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(no!==0){var Z=O?ab(v,O):new FormData(v);gg(d,{pending:!0,data:Z,method:v.method,action:_},null,Z)}}else typeof _=="function"&&(H.preventDefault(),Z=O?ab(v,O):new FormData(v),gg(d,{pending:!0,data:Z,method:v.method,action:_},_,Z))},currentTarget:v}]})}}for(var Kg=0;Kg<eu.length;Kg++){var Qg=eu[Kg],AC=Qg.toLowerCase(),wC=Qg[0].toUpperCase()+Qg.slice(1);Js(AC,"on"+wC)}Js(qi,"onAnimationEnd"),Js(bi,"onAnimationIteration"),Js(tn,"onAnimationStart"),Js("dblclick","onDoubleClick"),Js("focusin","onFocus"),Js("focusout","onBlur"),Js(hi,"onTransitionRun"),Js(Bi,"onTransitionStart"),Js(Ua,"onTransitionCancel"),Js(Zr,"onTransitionEnd"),os("onMouseEnter",["mouseout","mouseover"]),os("onMouseLeave",["mouseout","mouseover"]),os("onPointerEnter",["pointerout","pointerover"]),os("onPointerLeave",["pointerout","pointerover"]),Jt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Su));function ob(s,o){o=(o&4)!==0;for(var d=0;d<s.length;d++){var x=s[d],v=x.event;x=x.listeners;e:{var _=void 0;if(o)for(var O=x.length-1;0<=O;O--){var H=x[O],Z=H.instance,fe=H.currentTarget;if(H=H.listener,Z!==_&&v.isPropagationStopped())break e;_=H,v.currentTarget=fe;try{_(v)}catch(ve){Qh(ve)}v.currentTarget=null,_=Z}else for(O=0;O<x.length;O++){if(H=x[O],Z=H.instance,fe=H.currentTarget,H=H.listener,Z!==_&&v.isPropagationStopped())break e;_=H,v.currentTarget=fe;try{_(v)}catch(ve){Qh(ve)}v.currentTarget=null,_=Z}}}}function Mt(s,o){var d=o[Ta];d===void 0&&(d=o[Ta]=new Set);var x=s+"__bubble";d.has(x)||(lb(o,s,2,!1),d.add(x))}function Zg(s,o,d){var x=0;o&&(x|=4),lb(d,s,x,o)}var Pd="_reactListening"+Math.random().toString(36).slice(2);function $g(s){if(!s[Pd]){s[Pd]=!0,Me.forEach(function(d){d!=="selectionchange"&&(EC.has(d)||Zg(d,!1,s),Zg(d,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Pd]||(o[Pd]=!0,Zg("selectionchange",!1,o))}}function lb(s,o,d,x){switch(Bb(o)){case 2:var v=QC;break;case 8:v=ZC;break;default:v=f1}d=v.bind(null,o,d,s),v=void 0,!qc||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),x?v!==void 0?s.addEventListener(o,d,{capture:!0,passive:v}):s.addEventListener(o,d,!0):v!==void 0?s.addEventListener(o,d,{passive:v}):s.addEventListener(o,d,!1)}function Jg(s,o,d,x,v){var _=x;if((o&1)===0&&(o&2)===0&&x!==null)e:for(;;){if(x===null)return;var O=x.tag;if(O===3||O===4){var H=x.stateNode.containerInfo;if(H===v)break;if(O===4)for(O=x.return;O!==null;){var Z=O.tag;if((Z===3||Z===4)&&O.stateNode.containerInfo===v)return;O=O.return}for(;H!==null;){if(O=jn(H),O===null)return;if(Z=O.tag,Z===5||Z===6||Z===26||Z===27){x=_=O;continue e}H=H.parentNode}}x=x.return}jh(function(){var fe=_,ve=Xc(d),Te=[];e:{var ge=Kh.get(s);if(ge!==void 0){var xe=ci,Ze=s;switch(s){case"keypress":if(br(d)===0)break e;case"keydown":case"keyup":xe=Nl;break;case"focusin":Ze="focus",xe=Qc;break;case"focusout":Ze="blur",xe=Qc;break;case"beforeblur":case"afterblur":xe=Qc;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=Wt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=Tl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=N0;break;case qi:case bi:case tn:xe=Et;break;case Zr:xe=qr;break;case"scroll":case"scrollend":xe=Uh;break;case"wheel":xe=R0;break;case"copy":case"cut":case"paste":xe=Il;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=en;break;case"toggle":case"beforetoggle":xe=$c}var at=(o&4)!==0,hn=!at&&(s==="scroll"||s==="scrollend"),le=at?ge!==null?ge+"Capture":null:ge;at=[];for(var se=fe,de;se!==null;){var _e=se;if(de=_e.stateNode,_e=_e.tag,_e!==5&&_e!==26&&_e!==27||de===null||le===null||(_e=ht(se,le),_e!=null&&at.push(Cu(se,_e,de))),hn)break;se=se.return}0<at.length&&(ge=new xe(ge,Ze,null,d,ve),Te.push({event:ge,listeners:at}))}}if((o&7)===0){e:{if(ge=s==="mouseover"||s==="pointerover",xe=s==="mouseout"||s==="pointerout",ge&&d!==Mo&&(Ze=d.relatedTarget||d.fromElement)&&(jn(Ze)||Ze[as]))break e;if((xe||ge)&&(ge=ve.window===ve?ve:(ge=ve.ownerDocument)?ge.defaultView||ge.parentWindow:window,xe?(Ze=d.relatedTarget||d.toElement,xe=fe,Ze=Ze?jn(Ze):null,Ze!==null&&(hn=l(Ze),at=Ze.tag,Ze!==hn||at!==5&&at!==27&&at!==6)&&(Ze=null)):(xe=null,Ze=fe),xe!==Ze)){if(at=Wt,_e="onMouseLeave",le="onMouseEnter",se="mouse",(s==="pointerout"||s==="pointerover")&&(at=en,_e="onPointerLeave",le="onPointerEnter",se="pointer"),hn=xe==null?ge:Ia(xe),de=Ze==null?ge:Ia(Ze),ge=new at(_e,se+"leave",xe,d,ve),ge.target=hn,ge.relatedTarget=de,_e=null,jn(ve)===fe&&(at=new at(le,se+"enter",Ze,d,ve),at.target=de,at.relatedTarget=hn,_e=at),hn=_e,xe&&Ze)t:{for(at=vC,le=xe,se=Ze,de=0,_e=le;_e;_e=at(_e))de++;_e=0;for(var nt=se;nt;nt=at(nt))_e++;for(;0<de-_e;)le=at(le),de--;for(;0<_e-de;)se=at(se),_e--;for(;de--;){if(le===se||se!==null&&le===se.alternate){at=le;break t}le=at(le),se=at(se)}at=null}else at=null;xe!==null&&cb(Te,ge,xe,at,!1),Ze!==null&&hn!==null&&cb(Te,hn,Ze,at,!0)}}e:{if(ge=fe?Ia(fe):window,xe=ge.nodeName&&ge.nodeName.toLowerCase(),xe==="select"||xe==="input"&&ge.type==="file")var Yt=hs;else if(Jc(ge))if(Wh)Yt=g;else{Yt=c;var et=a}else xe=ge.nodeName,!xe||xe.toLowerCase()!=="input"||ge.type!=="checkbox"&&ge.type!=="radio"?fe&&fn(fe.elementType)&&(Yt=hs):Yt=h;if(Yt&&(Yt=Yt(s,fe))){us(Te,Yt,d,ve);break e}et&&et(s,ge,fe),s==="focusout"&&fe&&ge.type==="number"&&fe.memoizedProps.value!=null&&X(ge,"number",ge.value)}switch(et=fe?Ia(fe):window,s){case"focusin":(Jc(et)||et.contentEditable==="true")&&(ee=et,ne=fe,ce=null);break;case"focusout":ce=ne=ee=null;break;case"mousedown":pe=!0;break;case"contextmenu":case"mouseup":case"dragend":pe=!1,Be(Te,d,ve);break;case"selectionchange":if(q)break;case"keydown":case"keyup":Be(Te,d,ve)}var vt;if(Lo)e:{switch(s){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else ja?qh(s,d)&&(Pt="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(Pt="onCompositionStart");Pt&&(Xh&&d.locale!=="ko"&&(ja||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&ja&&(vt=La()):(Zs=ve,$s="value"in Zs?Zs.value:Zs.textContent,ja=!0)),et=Bd(fe,Pt),0<et.length&&(Pt=new Vh(Pt,s,null,d,ve),Te.push({event:Pt,listeners:et}),vt?Pt.data=vt:(vt=Fa(d),vt!==null&&(Pt.data=vt)))),(vt=Yh?Er(s,d):Ml(s,d))&&(Pt=Bd(fe,"onBeforeInput"),0<Pt.length&&(et=new Vh("onBeforeInput","beforeinput",null,d,ve),Te.push({event:et,listeners:Pt}),et.data=vt)),bC(Te,s,fe,d,ve)}ob(Te,o)})}function Cu(s,o,d){return{instance:s,listener:o,currentTarget:d}}function Bd(s,o){for(var d=o+"Capture",x=[];s!==null;){var v=s,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=ht(s,d),v!=null&&x.unshift(Cu(s,v,_)),v=ht(s,o),v!=null&&x.push(Cu(s,v,_))),s.tag===3)return x;s=s.return}return[]}function vC(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function cb(s,o,d,x,v){for(var _=o._reactName,O=[];d!==null&&d!==x;){var H=d,Z=H.alternate,fe=H.stateNode;if(H=H.tag,Z!==null&&Z===x)break;H!==5&&H!==26&&H!==27||fe===null||(Z=fe,v?(fe=ht(d,_),fe!=null&&O.unshift(Cu(d,fe,Z))):v||(fe=ht(d,_),fe!=null&&O.push(Cu(d,fe,Z)))),d=d.return}O.length!==0&&s.push({event:o,listeners:O})}var SC=/\r\n?/g,CC=/\u0000|\uFFFD/g;function ub(s){return(typeof s=="string"?s:""+s).replace(SC,`
`).replace(CC,"")}function hb(s,o){return o=ub(o),ub(s)===o}function un(s,o,d,x,v,_){switch(d){case"children":typeof x=="string"?o==="body"||o==="textarea"&&x===""||Da(s,x):(typeof x=="number"||typeof x=="bigint")&&o!=="body"&&Da(s,""+x);break;case"className":Ra(s,"class",x);break;case"tabIndex":Ra(s,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":Ra(s,d,x);break;case"style":tt(s,x,_);break;case"data":if(o!=="object"){Ra(s,"data",x);break}case"src":case"href":if(x===""&&(o!=="a"||d!=="href")){s.removeAttribute(d);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){s.removeAttribute(d);break}x=Oa(""+x),s.setAttribute(d,x);break;case"action":case"formAction":if(typeof x=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(d==="formAction"?(o!=="input"&&un(s,o,"name",v.name,v,null),un(s,o,"formEncType",v.formEncType,v,null),un(s,o,"formMethod",v.formMethod,v,null),un(s,o,"formTarget",v.formTarget,v,null)):(un(s,o,"encType",v.encType,v,null),un(s,o,"method",v.method,v,null),un(s,o,"target",v.target,v,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){s.removeAttribute(d);break}x=Oa(""+x),s.setAttribute(d,x);break;case"onClick":x!=null&&(s.onclick=Yi);break;case"onScroll":x!=null&&Mt("scroll",s);break;case"onScrollEnd":x!=null&&Mt("scrollend",s);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(d=x.__html,d!=null){if(v.children!=null)throw Error(n(60));s.innerHTML=d}}break;case"multiple":s.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":s.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){s.removeAttribute("xlink:href");break}d=Oa(""+x),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(d,""+x):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":x===!0?s.setAttribute(d,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(d,x):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?s.setAttribute(d,x):s.removeAttribute(d);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?s.removeAttribute(d):s.setAttribute(d,x);break;case"popover":Mt("beforetoggle",s),Mt("toggle",s),Na(s,"popover",x);break;case"xlinkActuate":ls(s,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":ls(s,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":ls(s,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":ls(s,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":ls(s,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":ls(s,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":ls(s,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":ls(s,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":ls(s,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":Na(s,"is",x);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Fh.get(d)||d,Na(s,d,x))}}function e1(s,o,d,x,v,_){switch(d){case"style":tt(s,x,_);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(d=x.__html,d!=null){if(v.children!=null)throw Error(n(60));s.innerHTML=d}}break;case"children":typeof x=="string"?Da(s,x):(typeof x=="number"||typeof x=="bigint")&&Da(s,""+x);break;case"onScroll":x!=null&&Mt("scroll",s);break;case"onScrollEnd":x!=null&&Mt("scrollend",s);break;case"onClick":x!=null&&(s.onclick=Yi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bh.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(v=d.endsWith("Capture"),o=d.slice(2,v?d.length-7:void 0),_=s[sn]||null,_=_!=null?_[d]:null,typeof _=="function"&&s.removeEventListener(o,_,v),typeof x=="function")){typeof _!="function"&&_!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(o,x,v);break e}d in s?s[d]=x:x===!0?s.setAttribute(d,""):Na(s,d,x)}}}function vi(s,o,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",s),Mt("load",s);var x=!1,v=!1,_;for(_ in d)if(d.hasOwnProperty(_)){var O=d[_];if(O!=null)switch(_){case"src":x=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:un(s,o,_,O,d,null)}}v&&un(s,o,"srcSet",d.srcSet,d,null),x&&un(s,o,"src",d.src,d,null);return;case"input":Mt("invalid",s);var H=_=O=v=null,Z=null,fe=null;for(x in d)if(d.hasOwnProperty(x)){var ve=d[x];if(ve!=null)switch(x){case"name":v=ve;break;case"type":O=ve;break;case"checked":Z=ve;break;case"defaultChecked":fe=ve;break;case"value":_=ve;break;case"defaultValue":H=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(n(137,o));break;default:un(s,o,x,ve,d,null)}}he(s,_,H,Z,fe,O,v,!1);return;case"select":Mt("invalid",s),x=O=_=null;for(v in d)if(d.hasOwnProperty(v)&&(H=d[v],H!=null))switch(v){case"value":_=H;break;case"defaultValue":O=H;break;case"multiple":x=H;default:un(s,o,v,H,d,null)}o=_,d=O,s.multiple=!!x,o!=null?$e(s,!!x,o,!1):d!=null&&$e(s,!!x,d,!0);return;case"textarea":Mt("invalid",s),_=v=x=null;for(O in d)if(d.hasOwnProperty(O)&&(H=d[O],H!=null))switch(O){case"value":x=H;break;case"defaultValue":v=H;break;case"children":_=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(n(91));break;default:un(s,o,O,H,d,null)}ki(s,x,v,_);return;case"option":for(Z in d)if(d.hasOwnProperty(Z)&&(x=d[Z],x!=null))switch(Z){case"selected":s.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:un(s,o,Z,x,d,null)}return;case"dialog":Mt("beforetoggle",s),Mt("toggle",s),Mt("cancel",s),Mt("close",s);break;case"iframe":case"object":Mt("load",s);break;case"video":case"audio":for(x=0;x<Su.length;x++)Mt(Su[x],s);break;case"image":Mt("error",s),Mt("load",s);break;case"details":Mt("toggle",s);break;case"embed":case"source":case"link":Mt("error",s),Mt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in d)if(d.hasOwnProperty(fe)&&(x=d[fe],x!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:un(s,o,fe,x,d,null)}return;default:if(fn(o)){for(ve in d)d.hasOwnProperty(ve)&&(x=d[ve],x!==void 0&&e1(s,o,ve,x,d,void 0));return}}for(H in d)d.hasOwnProperty(H)&&(x=d[H],x!=null&&un(s,o,H,x,d,null))}function _C(s,o,d,x){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,O=null,H=null,Z=null,fe=null,ve=null;for(xe in d){var Te=d[xe];if(d.hasOwnProperty(xe)&&Te!=null)switch(xe){case"checked":break;case"value":break;case"defaultValue":Z=Te;default:x.hasOwnProperty(xe)||un(s,o,xe,null,x,Te)}}for(var ge in x){var xe=x[ge];if(Te=d[ge],x.hasOwnProperty(ge)&&(xe!=null||Te!=null))switch(ge){case"type":_=xe;break;case"name":v=xe;break;case"checked":fe=xe;break;case"defaultChecked":ve=xe;break;case"value":O=xe;break;case"defaultValue":H=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(n(137,o));break;default:xe!==Te&&un(s,o,ge,xe,x,Te)}}ei(s,O,H,Z,fe,ve,_,v);return;case"select":xe=O=H=ge=null;for(_ in d)if(Z=d[_],d.hasOwnProperty(_)&&Z!=null)switch(_){case"value":break;case"multiple":xe=Z;default:x.hasOwnProperty(_)||un(s,o,_,null,x,Z)}for(v in x)if(_=x[v],Z=d[v],x.hasOwnProperty(v)&&(_!=null||Z!=null))switch(v){case"value":ge=_;break;case"defaultValue":H=_;break;case"multiple":O=_;default:_!==Z&&un(s,o,v,_,x,Z)}o=H,d=O,x=xe,ge!=null?$e(s,!!d,ge,!1):!!x!=!!d&&(o!=null?$e(s,!!d,o,!0):$e(s,!!d,d?[]:"",!1));return;case"textarea":xe=ge=null;for(H in d)if(v=d[H],d.hasOwnProperty(H)&&v!=null&&!x.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:un(s,o,H,null,x,v)}for(O in x)if(v=x[O],_=d[O],x.hasOwnProperty(O)&&(v!=null||_!=null))switch(O){case"value":ge=v;break;case"defaultValue":xe=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==_&&un(s,o,O,v,x,_)}Xn(s,ge,xe);return;case"option":for(var Ze in d)if(ge=d[Ze],d.hasOwnProperty(Ze)&&ge!=null&&!x.hasOwnProperty(Ze))switch(Ze){case"selected":s.selected=!1;break;default:un(s,o,Ze,null,x,ge)}for(Z in x)if(ge=x[Z],xe=d[Z],x.hasOwnProperty(Z)&&ge!==xe&&(ge!=null||xe!=null))switch(Z){case"selected":s.selected=ge&&typeof ge!="function"&&typeof ge!="symbol";break;default:un(s,o,Z,ge,x,xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in d)ge=d[at],d.hasOwnProperty(at)&&ge!=null&&!x.hasOwnProperty(at)&&un(s,o,at,null,x,ge);for(fe in x)if(ge=x[fe],xe=d[fe],x.hasOwnProperty(fe)&&ge!==xe&&(ge!=null||xe!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(n(137,o));break;default:un(s,o,fe,ge,x,xe)}return;default:if(fn(o)){for(var hn in d)ge=d[hn],d.hasOwnProperty(hn)&&ge!==void 0&&!x.hasOwnProperty(hn)&&e1(s,o,hn,void 0,x,ge);for(ve in x)ge=x[ve],xe=d[ve],!x.hasOwnProperty(ve)||ge===xe||ge===void 0&&xe===void 0||e1(s,o,ve,ge,x,xe);return}}for(var le in d)ge=d[le],d.hasOwnProperty(le)&&ge!=null&&!x.hasOwnProperty(le)&&un(s,o,le,null,x,ge);for(Te in x)ge=x[Te],xe=d[Te],!x.hasOwnProperty(Te)||ge===xe||ge==null&&xe==null||un(s,o,Te,ge,x,xe)}function db(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function TC(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,d=performance.getEntriesByType("resource"),x=0;x<d.length;x++){var v=d[x],_=v.transferSize,O=v.initiatorType,H=v.duration;if(_&&H&&db(O)){for(O=0,H=v.responseEnd,x+=1;x<d.length;x++){var Z=d[x],fe=Z.startTime;if(fe>H)break;var ve=Z.transferSize,Te=Z.initiatorType;ve&&db(Te)&&(Z=Z.responseEnd,O+=ve*(Z<H?1:(H-fe)/(Z-fe)))}if(--x,o+=8*(_+O)/(v.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var t1=null,n1=null;function Fd(s){return s.nodeType===9?s:s.ownerDocument}function fb(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gb(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function i1(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var s1=null;function IC(){var s=window.event;return s&&s.type==="popstate"?s===s1?!1:(s1=s,!0):(s1=null,!1)}var pb=typeof setTimeout=="function"?setTimeout:void 0,NC=typeof clearTimeout=="function"?clearTimeout:void 0,mb=typeof Promise=="function"?Promise:void 0,RC=typeof queueMicrotask=="function"?queueMicrotask:typeof mb<"u"?function(s){return mb.resolve(null).then(s).catch(MC)}:pb;function MC(s){setTimeout(function(){throw s})}function io(s){return s==="head"}function yb(s,o){var d=o,x=0;do{var v=d.nextSibling;if(s.removeChild(d),v&&v.nodeType===8)if(d=v.data,d==="/$"||d==="/&"){if(x===0){s.removeChild(v),ic(o);return}x--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")x++;else if(d==="html")_u(s.ownerDocument.documentElement);else if(d==="head"){d=s.ownerDocument.head,_u(d);for(var _=d.firstChild;_;){var O=_.nextSibling,H=_.nodeName;_[Ro]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&_.rel.toLowerCase()==="stylesheet"||d.removeChild(_),_=O}}else d==="body"&&_u(s.ownerDocument.body);d=v}while(d);ic(o)}function xb(s,o){var d=s;s=0;do{var x=d.nextSibling;if(d.nodeType===1?o?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(o?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(s===0)break;s--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||s++;d=x}while(d)}function r1(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var d=o;switch(o=o.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":r1(d),Gi(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function DC(s,o,d,x){for(;s.nodeType===1;){var v=d;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!x&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(x){if(!s[Ro])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=Fs(s.nextSibling),s===null)break}return null}function OC(s,o,d){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=Fs(s.nextSibling),s===null))return null;return s}function bb(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Fs(s.nextSibling),s===null))return null;return s}function a1(s){return s.data==="$?"||s.data==="$~"}function o1(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function LC(s,o){var d=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||d.readyState!=="loading")o();else{var x=function(){o(),d.removeEventListener("DOMContentLoaded",x)};d.addEventListener("DOMContentLoaded",x),s._reactRetry=x}}function Fs(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var l1=null;function Ab(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"||d==="/&"){if(o===0)return Fs(s.nextSibling);o--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||o++}s=s.nextSibling}return null}function wb(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(o===0)return s;o--}else d!=="/$"&&d!=="/&"||o++}s=s.previousSibling}return null}function Eb(s,o,d){switch(o=Fd(d),s){case"html":if(s=o.documentElement,!s)throw Error(n(452));return s;case"head":if(s=o.head,!s)throw Error(n(453));return s;case"body":if(s=o.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function _u(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Gi(s)}var js=new Map,vb=new Set;function jd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var da=re.d;re.d={f:kC,r:PC,D:BC,C:FC,L:jC,m:UC,X:HC,S:zC,M:VC};function kC(){var s=da.f(),o=Rd();return s||o}function PC(s){var o=qt(s);o!==null&&o.tag===5&&o.type==="form"?Uy(o):da.r(s)}var ec=typeof document>"u"?null:document;function Sb(s,o,d){var x=ec;if(x&&typeof o=="string"&&o){var v=Tt(o);v='link[rel="'+s+'"][href="'+v+'"]',typeof d=="string"&&(v+='[crossorigin="'+d+'"]'),vb.has(v)||(vb.add(v),s={rel:s,crossOrigin:d,href:o},x.querySelector(v)===null&&(o=x.createElement("link"),vi(o,"link",s),Un(o),x.head.appendChild(o)))}}function BC(s){da.D(s),Sb("dns-prefetch",s,null)}function FC(s,o){da.C(s,o),Sb("preconnect",s,o)}function jC(s,o,d){da.L(s,o,d);var x=ec;if(x&&s&&o){var v='link[rel="preload"][as="'+Tt(o)+'"]';o==="image"&&d&&d.imageSrcSet?(v+='[imagesrcset="'+Tt(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(v+='[imagesizes="'+Tt(d.imageSizes)+'"]')):v+='[href="'+Tt(s)+'"]';var _=v;switch(o){case"style":_=tc(s);break;case"script":_=nc(s)}js.has(_)||(s=E({rel:"preload",href:o==="image"&&d&&d.imageSrcSet?void 0:s,as:o},d),js.set(_,s),x.querySelector(v)!==null||o==="style"&&x.querySelector(Tu(_))||o==="script"&&x.querySelector(Iu(_))||(o=x.createElement("link"),vi(o,"link",s),Un(o),x.head.appendChild(o)))}}function UC(s,o){da.m(s,o);var d=ec;if(d&&s){var x=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Tt(x)+'"][href="'+Tt(s)+'"]',_=v;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=nc(s)}if(!js.has(_)&&(s=E({rel:"modulepreload",href:s},o),js.set(_,s),d.querySelector(v)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Iu(_)))return}x=d.createElement("link"),vi(x,"link",s),Un(x),d.head.appendChild(x)}}}function zC(s,o,d){da.S(s,o,d);var x=ec;if(x&&s){var v=Li(x).hoistableStyles,_=tc(s);o=o||"default";var O=v.get(_);if(!O){var H={loading:0,preload:null};if(O=x.querySelector(Tu(_)))H.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":o},d),(d=js.get(_))&&c1(s,d);var Z=O=x.createElement("link");Un(Z),vi(Z,"link",s),Z._p=new Promise(function(fe,ve){Z.onload=fe,Z.onerror=ve}),Z.addEventListener("load",function(){H.loading|=1}),Z.addEventListener("error",function(){H.loading|=2}),H.loading|=4,Ud(O,o,x)}O={type:"stylesheet",instance:O,count:1,state:H},v.set(_,O)}}}function HC(s,o){da.X(s,o);var d=ec;if(d&&s){var x=Li(d).hoistableScripts,v=nc(s),_=x.get(v);_||(_=d.querySelector(Iu(v)),_||(s=E({src:s,async:!0},o),(o=js.get(v))&&u1(s,o),_=d.createElement("script"),Un(_),vi(_,"link",s),d.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},x.set(v,_))}}function VC(s,o){da.M(s,o);var d=ec;if(d&&s){var x=Li(d).hoistableScripts,v=nc(s),_=x.get(v);_||(_=d.querySelector(Iu(v)),_||(s=E({src:s,async:!0,type:"module"},o),(o=js.get(v))&&u1(s,o),_=d.createElement("script"),Un(_),vi(_,"link",s),d.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},x.set(v,_))}}function Cb(s,o,d,x){var v=(v=Re.current)?jd(v):null;if(!v)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(o=tc(d.href),d=Li(v).hoistableStyles,x=d.get(o),x||(x={type:"style",instance:null,count:0,state:null},d.set(o,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=tc(d.href);var _=Li(v).hoistableStyles,O=_.get(s);if(O||(v=v.ownerDocument||v,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,O),(_=v.querySelector(Tu(s)))&&!_._p&&(O.instance=_,O.state.loading=5),js.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},js.set(s,d),_||GC(v,s,d,O.state))),o&&x===null)throw Error(n(528,""));return O}if(o&&x!==null)throw Error(n(529,""));return null;case"script":return o=d.async,d=d.src,typeof d=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=nc(d),d=Li(v).hoistableScripts,x=d.get(o),x||(x={type:"script",instance:null,count:0,state:null},d.set(o,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function tc(s){return'href="'+Tt(s)+'"'}function Tu(s){return'link[rel="stylesheet"]['+s+"]"}function _b(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function GC(s,o,d,x){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?x.loading=1:(o=s.createElement("link"),x.preload=o,o.addEventListener("load",function(){return x.loading|=1}),o.addEventListener("error",function(){return x.loading|=2}),vi(o,"link",d),Un(o),s.head.appendChild(o))}function nc(s){return'[src="'+Tt(s)+'"]'}function Iu(s){return"script[async]"+s}function Tb(s,o,d){if(o.count++,o.instance===null)switch(o.type){case"style":var x=s.querySelector('style[data-href~="'+Tt(d.href)+'"]');if(x)return o.instance=x,Un(x),x;var v=E({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return x=(s.ownerDocument||s).createElement("style"),Un(x),vi(x,"style",v),Ud(x,d.precedence,s),o.instance=x;case"stylesheet":v=tc(d.href);var _=s.querySelector(Tu(v));if(_)return o.state.loading|=4,o.instance=_,Un(_),_;x=_b(d),(v=js.get(v))&&c1(x,v),_=(s.ownerDocument||s).createElement("link"),Un(_);var O=_;return O._p=new Promise(function(H,Z){O.onload=H,O.onerror=Z}),vi(_,"link",x),o.state.loading|=4,Ud(_,d.precedence,s),o.instance=_;case"script":return _=nc(d.src),(v=s.querySelector(Iu(_)))?(o.instance=v,Un(v),v):(x=d,(v=js.get(_))&&(x=E({},d),u1(x,v)),s=s.ownerDocument||s,v=s.createElement("script"),Un(v),vi(v,"link",x),s.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(x=o.instance,o.state.loading|=4,Ud(x,d.precedence,s));return o.instance}function Ud(s,o,d){for(var x=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=x.length?x[x.length-1]:null,_=v,O=0;O<x.length;O++){var H=x[O];if(H.dataset.precedence===o)_=H;else if(_!==v)break}_?_.parentNode.insertBefore(s,_.nextSibling):(o=d.nodeType===9?d.head:d,o.insertBefore(s,o.firstChild))}function c1(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function u1(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var zd=null;function Ib(s,o,d){if(zd===null){var x=new Map,v=zd=new Map;v.set(d,x)}else v=zd,x=v.get(d),x||(x=new Map,v.set(d,x));if(x.has(s))return x;for(x.set(s,null),d=d.getElementsByTagName(s),v=0;v<d.length;v++){var _=d[v];if(!(_[Ro]||_[Yn]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var O=_.getAttribute(o)||"";O=s+O;var H=x.get(O);H?H.push(_):x.set(O,[_])}}return x}function Nb(s,o,d){s=s.ownerDocument||s,s.head.insertBefore(d,o==="title"?s.querySelector("head > title"):null)}function YC(s,o,d){if(d===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Rb(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function XC(s,o,d,x){if(d.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var v=tc(x.href),_=o.querySelector(Tu(v));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=Hd.bind(s),o.then(s,s)),d.state.loading|=4,d.instance=_,Un(_);return}_=o.ownerDocument||o,x=_b(x),(v=js.get(v))&&c1(x,v),_=_.createElement("link"),Un(_);var O=_;O._p=new Promise(function(H,Z){O.onload=H,O.onerror=Z}),vi(_,"link",x),d.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(d,o),(o=d.state.preload)&&(d.state.loading&3)===0&&(s.count++,d=Hd.bind(s),o.addEventListener("load",d),o.addEventListener("error",d))}}var h1=0;function qC(s,o){return s.stylesheets&&s.count===0&&Gd(s,s.stylesheets),0<s.count||0<s.imgCount?function(d){var x=setTimeout(function(){if(s.stylesheets&&Gd(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+o);0<s.imgBytes&&h1===0&&(h1=62500*TC());var v=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Gd(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>h1?50:800)+o);return s.unsuspend=d,function(){s.unsuspend=null,clearTimeout(x),clearTimeout(v)}}:null}function Hd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Vd=null;function Gd(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Vd=new Map,o.forEach(WC,s),Vd=null,Hd.call(s))}function WC(s,o){if(!(o.state.loading&4)){var d=Vd.get(s);if(d)var x=d.get(null);else{d=new Map,Vd.set(s,d);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var O=v[_];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(d.set(O.dataset.precedence,O),x=O)}x&&d.set(null,x)}v=o.instance,O=v.getAttribute("data-precedence"),_=d.get(O)||x,_===x&&d.set(null,v),d.set(O,v),this.count++,x=Hd.bind(this),v.addEventListener("load",x),v.addEventListener("error",x),_?_.parentNode.insertBefore(v,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),o.state.loading|=4}}var Nu={$$typeof:j,Provider:null,Consumer:null,_currentValue:Ie,_currentValue2:Ie,_threadCount:0};function KC(s,o,d,x,v,_,O,H,Z){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mr(0),this.hiddenUpdates=mr(null),this.identifierPrefix=x,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function Mb(s,o,d,x,v,_,O,H,Z,fe,ve,Te){return s=new KC(s,o,d,O,Z,fe,ve,Te,H),o=1,_===!0&&(o|=24),_=ds(3,null,null,o),s.current=_,_.stateNode=s,o=G0(),o.refCount++,s.pooledCache=o,o.refCount++,_.memoizedState={element:x,isDehydrated:d,cache:o},W0(_),s}function Db(s){return s?(s=Ol,s):Ol}function Ob(s,o,d,x,v,_){v=Db(v),x.context===null?x.context=v:x.pendingContext=v,x=Xa(o),x.payload={element:d},_=_===void 0?null:_,_!==null&&(x.callback=_),d=qa(s,x,o),d!==null&&($i(d,s,o),ou(d,s,o))}function Lb(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<o?d:o}}function d1(s,o){Lb(s,o),(s=s.alternate)&&Lb(s,o)}function kb(s){if(s.tag===13||s.tag===31){var o=jo(s,67108864);o!==null&&$i(o,s,67108864),d1(s,67108864)}}function Pb(s){if(s.tag===13||s.tag===31){var o=ys();o=fi(o);var d=jo(s,o);d!==null&&$i(d,s,o),d1(s,o)}}var Yd=!0;function QC(s,o,d,x){var v=K.T;K.T=null;var _=re.p;try{re.p=2,f1(s,o,d,x)}finally{re.p=_,K.T=v}}function ZC(s,o,d,x){var v=K.T;K.T=null;var _=re.p;try{re.p=8,f1(s,o,d,x)}finally{re.p=_,K.T=v}}function f1(s,o,d,x){if(Yd){var v=g1(x);if(v===null)Jg(s,o,x,Xd,d),Fb(s,x);else if(JC(v,s,o,d,x))x.stopPropagation();else if(Fb(s,x),o&4&&-1<$C.indexOf(s)){for(;v!==null;){var _=qt(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var O=pr(_.pendingLanes);if(O!==0){var H=_;for(H.pendingLanes|=2,H.entangledLanes|=2;O;){var Z=1<<31-pt(O);H.entanglements[1]|=Z,O&=~Z}_r(_),(Kt&6)===0&&(Id=Le()+500,vu(0))}}break;case 31:case 13:H=jo(_,2),H!==null&&$i(H,_,2),Rd(),d1(_,2)}if(_=g1(x),_===null&&Jg(s,o,x,Xd,d),_===v)break;v=_}v!==null&&x.stopPropagation()}else Jg(s,o,x,null,d)}}function g1(s){return s=Xc(s),p1(s)}var Xd=null;function p1(s){if(Xd=null,s=jn(s),s!==null){var o=l(s);if(o===null)s=null;else{var d=o.tag;if(d===13){if(s=u(o),s!==null)return s;s=null}else if(d===31){if(s=f(o),s!==null)return s;s=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Xd=s,null}function Bb(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fe()){case ze:return 2;case gt:return 8;case ut:case _t:return 32;case Vi:return 268435456;default:return 32}default:return 32}}var m1=!1,so=null,ro=null,ao=null,Ru=new Map,Mu=new Map,oo=[],$C="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fb(s,o){switch(s){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":Ru.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(o.pointerId)}}function Du(s,o,d,x,v,_){return s===null||s.nativeEvent!==_?(s={blockedOn:o,domEventName:d,eventSystemFlags:x,nativeEvent:_,targetContainers:[v]},o!==null&&(o=qt(o),o!==null&&kb(o)),s):(s.eventSystemFlags|=x,o=s.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),s)}function JC(s,o,d,x,v){switch(o){case"focusin":return so=Du(so,s,o,d,x,v),!0;case"dragenter":return ro=Du(ro,s,o,d,x,v),!0;case"mouseover":return ao=Du(ao,s,o,d,x,v),!0;case"pointerover":var _=v.pointerId;return Ru.set(_,Du(Ru.get(_)||null,s,o,d,x,v)),!0;case"gotpointercapture":return _=v.pointerId,Mu.set(_,Du(Mu.get(_)||null,s,o,d,x,v)),!0}return!1}function jb(s){var o=jn(s.target);if(o!==null){var d=l(o);if(d!==null){if(o=d.tag,o===13){if(o=u(d),o!==null){s.blockedOn=o,He(s.priority,function(){Pb(d)});return}}else if(o===31){if(o=f(d),o!==null){s.blockedOn=o,He(s.priority,function(){Pb(d)});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function qd(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var d=g1(s.nativeEvent);if(d===null){d=s.nativeEvent;var x=new d.constructor(d.type,d);Mo=x,d.target.dispatchEvent(x),Mo=null}else return o=qt(d),o!==null&&kb(o),s.blockedOn=d,!1;o.shift()}return!0}function Ub(s,o,d){qd(s)&&d.delete(o)}function e_(){m1=!1,so!==null&&qd(so)&&(so=null),ro!==null&&qd(ro)&&(ro=null),ao!==null&&qd(ao)&&(ao=null),Ru.forEach(Ub),Mu.forEach(Ub)}function Wd(s,o){s.blockedOn===o&&(s.blockedOn=null,m1||(m1=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,e_)))}var Kd=null;function zb(s){Kd!==s&&(Kd=s,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Kd===s&&(Kd=null);for(var o=0;o<s.length;o+=3){var d=s[o],x=s[o+1],v=s[o+2];if(typeof x!="function"){if(p1(x||d)===null)continue;break}var _=qt(d);_!==null&&(s.splice(o,3),o-=3,gg(_,{pending:!0,data:v,method:d.method,action:x},x,v))}}))}function ic(s){function o(Z){return Wd(Z,s)}so!==null&&Wd(so,s),ro!==null&&Wd(ro,s),ao!==null&&Wd(ao,s),Ru.forEach(o),Mu.forEach(o);for(var d=0;d<oo.length;d++){var x=oo[d];x.blockedOn===s&&(x.blockedOn=null)}for(;0<oo.length&&(d=oo[0],d.blockedOn===null);)jb(d),d.blockedOn===null&&oo.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(x=0;x<d.length;x+=3){var v=d[x],_=d[x+1],O=v[sn]||null;if(typeof _=="function")O||zb(d);else if(O){var H=null;if(_&&_.hasAttribute("formAction")){if(v=_,O=_[sn]||null)H=O.formAction;else if(p1(v)!==null)continue}else H=O.action;typeof H=="function"?d[x+1]=H:(d.splice(x,3),x-=3),zb(d)}}}function Hb(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(O){return v=O})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),x||setTimeout(d,20)}function d(){if(!x&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,v=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(d,100),function(){x=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function y1(s){this._internalRoot=s}Qd.prototype.render=y1.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(n(409));var d=o.current,x=ys();Ob(d,x,s,o,null,null)},Qd.prototype.unmount=y1.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Ob(s.current,2,null,s,null,null),Rd(),o[as]=null}};function Qd(s){this._internalRoot=s}Qd.prototype.unstable_scheduleHydration=function(s){if(s){var o=Di();s={blockedOn:null,target:s,priority:o};for(var d=0;d<oo.length&&o!==0&&o<oo[d].priority;d++);oo.splice(d,0,s),d===0&&jb(s)}};var Vb=e.version;if(Vb!=="19.2.1")throw Error(n(527,Vb,"19.2.1"));re.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=m(o),s=s!==null?A(s):null,s=s===null?null:s.stateNode,s};var t_={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zd.isDisabled&&Zd.supportsFiber)try{Zt=Zd.inject(t_),ke=Zd}catch{}}return Lu.createRoot=function(s,o){if(!r(s))throw Error(n(299));var d=!1,x="",v=Qy,_=Zy,O=$y;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(x=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(O=o.onRecoverableError)),o=Mb(s,1,!1,null,null,d,x,null,v,_,O,Hb),s[as]=o.current,$g(s),new y1(o)},Lu.hydrateRoot=function(s,o,d){if(!r(s))throw Error(n(299));var x=!1,v="",_=Qy,O=Zy,H=$y,Z=null;return d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onUncaughtError!==void 0&&(_=d.onUncaughtError),d.onCaughtError!==void 0&&(O=d.onCaughtError),d.onRecoverableError!==void 0&&(H=d.onRecoverableError),d.formState!==void 0&&(Z=d.formState)),o=Mb(s,1,!0,o,d??null,x,v,Z,_,O,H,Hb),o.context=Db(null),d=o.current,x=ys(),x=fi(x),v=Xa(x),v.callback=null,qa(d,v,x),d=x,o.current.lanes=d,yr(o,d),_r(o),s[as]=o.current,$g(s),new Qd(o)},Lu.version="19.2.1",Lu}var t2;function d_(){if(t2)return w1.exports;t2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),w1.exports=h_(),w1.exports}var f_=d_();var n2="popstate";function g_(i={}){function e(n,r){let{pathname:l,search:u,hash:f}=n.location;return sp("",{pathname:l,search:u,hash:f},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:$u(r)}return m_(e,t,null,i)}function Ln(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Ys(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function p_(){return Math.random().toString(36).substring(2,10)}function i2(i,e){return{usr:i.state,key:i.key,idx:e}}function sp(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Mc(e):e,state:t,key:e&&e.key||n||p_()}}function $u({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Mc(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function m_(i,e,t,n={}){let{window:r=document.defaultView,v5Compat:l=!1}=n,u=r.history,f="POP",y=null,m=A();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function A(){return(u.state||{idx:null}).idx}function E(){f="POP";let L=A(),k=L==null?null:L-m;m=L,y&&y({action:f,location:R.location,delta:k})}function T(L,k){f="PUSH";let P=sp(R.location,L,k);m=A()+1;let j=i2(P,m),U=R.createHref(P);try{u.pushState(j,"",U)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;r.location.assign(U)}l&&y&&y({action:f,location:R.location,delta:1})}function N(L,k){f="REPLACE";let P=sp(R.location,L,k);m=A();let j=i2(P,m),U=R.createHref(P);u.replaceState(j,"",U),l&&y&&y({action:f,location:R.location,delta:0})}function M(L){return y_(L)}let R={get action(){return f},get location(){return i(r,u)},listen(L){if(y)throw new Error("A history only accepts one active listener");return r.addEventListener(n2,E),y=L,()=>{r.removeEventListener(n2,E),y=null}},createHref(L){return e(r,L)},createURL:M,encodeLocation(L){let k=M(L);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:T,replace:N,go(L){return u.go(L)}};return R}function y_(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ln(t,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:$u(i);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function Iw(i,e,t="/"){return x_(i,e,t,!1)}function x_(i,e,t,n){let r=typeof e=="string"?Mc(e):e,l=Aa(r.pathname||"/",t);if(l==null)return null;let u=Nw(i);b_(u);let f=null;for(let y=0;f==null&&y<u.length;++y){let m=R_(l);f=I_(u[y],m,n)}return f}function Nw(i,e=[],t=[],n="",r=!1){let l=(u,f,y=r,m)=>{let A={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(A.relativePath.startsWith("/")){if(!A.relativePath.startsWith(n)&&y)return;Ln(A.relativePath.startsWith(n),`Absolute route path "${A.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),A.relativePath=A.relativePath.slice(n.length)}let E=ba([n,A.relativePath]),T=t.concat(A);u.children&&u.children.length>0&&(Ln(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Nw(u.children,e,T,E,y)),!(u.path==null&&!u.index)&&e.push({path:E,score:__(E,u.index),routesMeta:T})};return i.forEach((u,f)=>{if(u.path===""||!u.path?.includes("?"))l(u,f);else for(let y of Rw(u.path))l(u,f,!0,y)}),e}function Rw(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),l=t.replace(/\?$/,"");if(n.length===0)return r?[l,""]:[l];let u=Rw(n.join("/")),f=[];return f.push(...u.map(y=>y===""?l:[l,y].join("/"))),r&&f.push(...u),f.map(y=>i.startsWith("/")&&y===""?"/":y)}function b_(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:T_(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var A_=/^:[\w-]+$/,w_=3,E_=2,v_=1,S_=10,C_=-2,s2=i=>i==="*";function __(i,e){let t=i.split("/"),n=t.length;return t.some(s2)&&(n+=C_),e&&(n+=E_),t.filter(r=>!s2(r)).reduce((r,l)=>r+(A_.test(l)?w_:l===""?v_:S_),n)}function T_(i,e){return i.length===e.length&&i.slice(0,-1).every((n,r)=>n===e[r])?i[i.length-1]-e[e.length-1]:0}function I_(i,e,t=!1){let{routesMeta:n}=i,r={},l="/",u=[];for(let f=0;f<n.length;++f){let y=n[f],m=f===n.length-1,A=l==="/"?e:e.slice(l.length)||"/",E=_f({path:y.relativePath,caseSensitive:y.caseSensitive,end:m},A),T=y.route;if(!E&&m&&t&&!n[n.length-1].route.index&&(E=_f({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},A)),!E)return null;Object.assign(r,E.params),u.push({params:r,pathname:ba([l,E.pathname]),pathnameBase:k_(ba([l,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(l=ba([l,E.pathnameBase]))}return u}function _f(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=N_(i.path,i.caseSensitive,i.end),r=e.match(t);if(!r)return null;let l=r[0],u=l.replace(/(.)\/+$/,"$1"),f=r.slice(1);return{params:n.reduce((m,{paramName:A,isOptional:E},T)=>{if(A==="*"){let M=f[T]||"";u=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const N=f[T];return E&&!N?m[A]=void 0:m[A]=(N||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:u,pattern:i}}function N_(i,e=!1,t=!0){Ys(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,y)=>(n.push({paramName:f,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function R_(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ys(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Aa(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}var M_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,D_=i=>M_.test(i);function O_(i,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof i=="string"?Mc(i):i,l;if(t)if(D_(t))l=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),Ys(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${t}`)}t.startsWith("/")?l=r2(t.substring(1),"/"):l=r2(t,e)}else l=e;return{pathname:l,search:P_(n),hash:B_(r)}}function r2(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function C1(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function L_(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Vp(i){let e=L_(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function Gp(i,e,t,n=!1){let r;typeof i=="string"?r=Mc(i):(r={...i},Ln(!r.pathname||!r.pathname.includes("?"),C1("?","pathname","search",r)),Ln(!r.pathname||!r.pathname.includes("#"),C1("#","pathname","hash",r)),Ln(!r.search||!r.search.includes("#"),C1("#","search","hash",r)));let l=i===""||r.pathname==="",u=l?"/":r.pathname,f;if(u==null)f=t;else{let E=e.length-1;if(!n&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),E-=1;r.pathname=T.join("/")}f=E>=0?e[E]:"/"}let y=O_(r,f),m=u&&u!=="/"&&u.endsWith("/"),A=(l||u===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(m||A)&&(y.pathname+="/"),y}var ba=i=>i.join("/").replace(/\/\/+/g,"/"),k_=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),P_=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,B_=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function F_(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function j_(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Mw=["POST","PUT","PATCH","DELETE"];new Set(Mw);var U_=["GET",...Mw];new Set(U_);var Dc=W.createContext(null);Dc.displayName="DataRouter";var Zf=W.createContext(null);Zf.displayName="DataRouterState";W.createContext(!1);var Dw=W.createContext({isTransitioning:!1});Dw.displayName="ViewTransition";var z_=W.createContext(new Map);z_.displayName="Fetchers";var H_=W.createContext(null);H_.displayName="Await";var Xs=W.createContext(null);Xs.displayName="Navigation";var dh=W.createContext(null);dh.displayName="Location";var hr=W.createContext({outlet:null,matches:[],isDataRoute:!1});hr.displayName="Route";var Yp=W.createContext(null);Yp.displayName="RouteError";function V_(i,{relative:e}={}){Ln(Oc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=W.useContext(Xs),{hash:r,pathname:l,search:u}=fh(i,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:ba([t,l])),n.createHref({pathname:f,search:u,hash:r})}function Oc(){return W.useContext(dh)!=null}function Hr(){return Ln(Oc(),"useLocation() may be used only in the context of a <Router> component."),W.useContext(dh).location}var Ow="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Lw(i){W.useContext(Xs).static||W.useLayoutEffect(i)}function yl(){let{isDataRoute:i}=W.useContext(hr);return i?iT():G_()}function G_(){Ln(Oc(),"useNavigate() may be used only in the context of a <Router> component.");let i=W.useContext(Dc),{basename:e,navigator:t}=W.useContext(Xs),{matches:n}=W.useContext(hr),{pathname:r}=Hr(),l=JSON.stringify(Vp(n)),u=W.useRef(!1);return Lw(()=>{u.current=!0}),W.useCallback((y,m={})=>{if(Ys(u.current,Ow),!u.current)return;if(typeof y=="number"){t.go(y);return}let A=Gp(y,JSON.parse(l),r,m.relative==="path");i==null&&e!=="/"&&(A.pathname=A.pathname==="/"?e:ba([e,A.pathname])),(m.replace?t.replace:t.push)(A,m.state,m)},[e,t,l,r,i])}W.createContext(null);function Y_(){let{matches:i}=W.useContext(hr),e=i[i.length-1];return e?e.params:{}}function fh(i,{relative:e}={}){let{matches:t}=W.useContext(hr),{pathname:n}=Hr(),r=JSON.stringify(Vp(t));return W.useMemo(()=>Gp(i,JSON.parse(r),n,e==="path"),[i,r,n,e])}function X_(i,e){return kw(i,e)}function kw(i,e,t,n,r){Ln(Oc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=W.useContext(Xs),{matches:u}=W.useContext(hr),f=u[u.length-1],y=f?f.params:{},m=f?f.pathname:"/",A=f?f.pathnameBase:"/",E=f&&f.route;{let P=E&&E.path||"";Pw(m,!E||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let T=Hr(),N;if(e){let P=typeof e=="string"?Mc(e):e;Ln(A==="/"||P.pathname?.startsWith(A),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${A}" but pathname "${P.pathname}" was given in the \`location\` prop.`),N=P}else N=T;let M=N.pathname||"/",R=M;if(A!=="/"){let P=A.replace(/^\//,"").split("/");R="/"+M.replace(/^\//,"").split("/").slice(P.length).join("/")}let L=Iw(i,{pathname:R});Ys(E||L!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Ys(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=Z_(L&&L.map(P=>Object.assign({},P,{params:Object.assign({},y,P.params),pathname:ba([A,l.encodeLocation?l.encodeLocation(P.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?A:ba([A,l.encodeLocation?l.encodeLocation(P.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathnameBase])})),u,t,n,r);return e&&k?W.createElement(dh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},k):k}function q_(){let i=nT(),e=F_(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},u=null;return console.error("Error handled by React Router default ErrorBoundary:",i),u=W.createElement(W.Fragment,null,W.createElement("p",null," Hey developer "),W.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",W.createElement("code",{style:l},"ErrorBoundary")," or"," ",W.createElement("code",{style:l},"errorElement")," prop on your route.")),W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:r},t):null,u)}var W_=W.createElement(q_,null),K_=class extends W.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?W.createElement(hr.Provider,{value:this.props.routeContext},W.createElement(Yp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Q_({routeContext:i,match:e,children:t}){let n=W.useContext(Dc);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),W.createElement(hr.Provider,{value:i},t)}function Z_(i,e=[],t=null,n=null,r=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let l=i,u=t?.errors;if(u!=null){let A=l.findIndex(E=>E.route.id&&u?.[E.route.id]!==void 0);Ln(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,A+1))}let f=!1,y=-1;if(t)for(let A=0;A<l.length;A++){let E=l[A];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=A),E.route.id){let{loaderData:T,errors:N}=t,M=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!N||N[E.route.id]===void 0);if(E.route.lazy||M){f=!0,y>=0?l=l.slice(0,y+1):l=[l[0]];break}}}let m=t&&n?(A,E)=>{n(A,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:j_(t.matches),errorInfo:E})}:void 0;return l.reduceRight((A,E,T)=>{let N,M=!1,R=null,L=null;t&&(N=u&&E.route.id?u[E.route.id]:void 0,R=E.route.errorElement||W_,f&&(y<0&&T===0?(Pw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,L=null):y===T&&(M=!0,L=E.route.hydrateFallbackElement||null)));let k=e.concat(l.slice(0,T+1)),P=()=>{let j;return N?j=R:M?j=L:E.route.Component?j=W.createElement(E.route.Component,null):E.route.element?j=E.route.element:j=A,W.createElement(Q_,{match:E,routeContext:{outlet:A,matches:k,isDataRoute:t!=null},children:j})};return t&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?W.createElement(K_,{location:t.location,revalidation:t.revalidation,component:R,error:N,children:P(),routeContext:{outlet:null,matches:k,isDataRoute:!0},onError:m}):P()},null)}function Xp(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $_(i){let e=W.useContext(Dc);return Ln(e,Xp(i)),e}function J_(i){let e=W.useContext(Zf);return Ln(e,Xp(i)),e}function eT(i){let e=W.useContext(hr);return Ln(e,Xp(i)),e}function qp(i){let e=eT(i),t=e.matches[e.matches.length-1];return Ln(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function tT(){return qp("useRouteId")}function nT(){let i=W.useContext(Yp),e=J_("useRouteError"),t=qp("useRouteError");return i!==void 0?i:e.errors?.[t]}function iT(){let{router:i}=$_("useNavigate"),e=qp("useNavigate"),t=W.useRef(!1);return Lw(()=>{t.current=!0}),W.useCallback(async(r,l={})=>{Ys(t.current,Ow),t.current&&(typeof r=="number"?await i.navigate(r):await i.navigate(r,{fromRouteId:e,...l}))},[i,e])}var a2={};function Pw(i,e,t){!e&&!a2[i]&&(a2[i]=!0,Ys(!1,t))}W.memo(sT);function sT({routes:i,future:e,state:t,unstable_onError:n}){return kw(i,void 0,t,n,e)}function Bw({to:i,replace:e,state:t,relative:n}){Ln(Oc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=W.useContext(Xs);Ys(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=W.useContext(hr),{pathname:u}=Hr(),f=yl(),y=Gp(i,Vp(l),u,n==="path"),m=JSON.stringify(y);return W.useEffect(()=>{f(JSON.parse(m),{replace:e,state:t,relative:n})},[f,m,n,e,t]),null}function xs(i){Ln(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function rT({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:l=!1,unstable_useTransitions:u}){Ln(!Oc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=i.replace(/^\/*/,"/"),y=W.useMemo(()=>({basename:f,navigator:r,static:l,unstable_useTransitions:u,future:{}}),[f,r,l,u]);typeof t=="string"&&(t=Mc(t));let{pathname:m="/",search:A="",hash:E="",state:T=null,key:N="default"}=t,M=W.useMemo(()=>{let R=Aa(m,f);return R==null?null:{location:{pathname:R,search:A,hash:E,state:T,key:N},navigationType:n}},[f,m,A,E,T,N,n]);return Ys(M!=null,`<Router basename="${f}"> is not able to match the URL "${m}${A}${E}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:W.createElement(Xs.Provider,{value:y},W.createElement(dh.Provider,{children:e,value:M}))}function aT({children:i,location:e}){return X_(rp(i),e)}function rp(i,e=[]){let t=[];return W.Children.forEach(i,(n,r)=>{if(!W.isValidElement(n))return;let l=[...e,r];if(n.type===W.Fragment){t.push.apply(t,rp(n.props.children,l));return}Ln(n.type===xs,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ln(!n.props.index||!n.props.children,"An index route cannot have child routes.");let u={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(u.children=rp(n.props.children,l)),t.push(u)}),t}var pf="get",mf="application/x-www-form-urlencoded";function $f(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function oT(i){return $f(i)&&i.tagName.toLowerCase()==="button"}function lT(i){return $f(i)&&i.tagName.toLowerCase()==="form"}function cT(i){return $f(i)&&i.tagName.toLowerCase()==="input"}function uT(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function hT(i,e){return i.button===0&&(!e||e==="_self")&&!uT(i)}var Jd=null;function dT(){if(Jd===null)try{new FormData(document.createElement("form"),0),Jd=!1}catch{Jd=!0}return Jd}var fT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _1(i){return i!=null&&!fT.has(i)?(Ys(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mf}"`),null):i}function gT(i,e){let t,n,r,l,u;if(lT(i)){let f=i.getAttribute("action");n=f?Aa(f,e):null,t=i.getAttribute("method")||pf,r=_1(i.getAttribute("enctype"))||mf,l=new FormData(i)}else if(oT(i)||cT(i)&&(i.type==="submit"||i.type==="image")){let f=i.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=i.getAttribute("formaction")||f.getAttribute("action");if(n=y?Aa(y,e):null,t=i.getAttribute("formmethod")||f.getAttribute("method")||pf,r=_1(i.getAttribute("formenctype"))||_1(f.getAttribute("enctype"))||mf,l=new FormData(f,i),!dT()){let{name:m,type:A,value:E}=i;if(A==="image"){let T=m?`${m}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else m&&l.append(m,E)}}else{if($f(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=pf,n=null,r=mf,u=i}return l&&r==="text/plain"&&(u=l,l=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function pT(i,e,t){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&Aa(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function mT(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yT(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function xT(i,e,t){let n=await Promise.all(i.map(async r=>{let l=e.routes[r.route.id];if(l){let u=await mT(l,t);return u.links?u.links():[]}return[]}));return ET(n.flat(1).filter(yT).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function o2(i,e,t,n,r,l){let u=(y,m)=>t[m]?y.route.id!==t[m].route.id:!0,f=(y,m)=>t[m].pathname!==y.pathname||t[m].route.path?.endsWith("*")&&t[m].params["*"]!==y.params["*"];return l==="assets"?e.filter((y,m)=>u(y,m)||f(y,m)):l==="data"?e.filter((y,m)=>{let A=n.routes[y.route.id];if(!A||!A.hasLoader)return!1;if(u(y,m)||f(y,m))return!0;if(y.route.shouldRevalidate){let E=y.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function bT(i,e,{includeHydrateFallback:t}={}){return AT(i.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let l=[r.module];return r.clientActionModule&&(l=l.concat(r.clientActionModule)),r.clientLoaderModule&&(l=l.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(l=l.concat(r.hydrateFallbackModule)),r.imports&&(l=l.concat(r.imports)),l}).flat(1))}function AT(i){return[...new Set(i)]}function wT(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function ET(i,e){let t=new Set;return new Set(e),i.reduce((n,r)=>{let l=JSON.stringify(wT(r));return t.has(l)||(t.add(l),n.push({key:l,link:r})),n},[])}function Fw(){let i=W.useContext(Dc);return Wp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function vT(){let i=W.useContext(Zf);return Wp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Kp=W.createContext(void 0);Kp.displayName="FrameworkContext";function jw(){let i=W.useContext(Kp);return Wp(i,"You must render this element inside a <HydratedRouter> element"),i}function ST(i,e){let t=W.useContext(Kp),[n,r]=W.useState(!1),[l,u]=W.useState(!1),{onFocus:f,onBlur:y,onMouseEnter:m,onMouseLeave:A,onTouchStart:E}=e,T=W.useRef(null);W.useEffect(()=>{if(i==="render"&&u(!0),i==="viewport"){let R=k=>{k.forEach(P=>{u(P.isIntersecting)})},L=new IntersectionObserver(R,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[i]),W.useEffect(()=>{if(n){let R=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(R)}}},[n]);let N=()=>{r(!0)},M=()=>{r(!1),u(!1)};return t?i!=="intent"?[l,T,{}]:[l,T,{onFocus:ku(f,N),onBlur:ku(y,M),onMouseEnter:ku(m,N),onMouseLeave:ku(A,M),onTouchStart:ku(E,N)}]:[!1,T,{}]}function ku(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function CT({page:i,...e}){let{router:t}=Fw(),n=W.useMemo(()=>Iw(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?W.createElement(TT,{page:i,matches:n,...e}):null}function _T(i){let{manifest:e,routeModules:t}=jw(),[n,r]=W.useState([]);return W.useEffect(()=>{let l=!1;return xT(i,e,t).then(u=>{l||r(u)}),()=>{l=!0}},[i,e,t]),n}function TT({page:i,matches:e,...t}){let n=Hr(),{manifest:r,routeModules:l}=jw(),{basename:u}=Fw(),{loaderData:f,matches:y}=vT(),m=W.useMemo(()=>o2(i,e,y,r,n,"data"),[i,e,y,r,n]),A=W.useMemo(()=>o2(i,e,y,r,n,"assets"),[i,e,y,r,n]),E=W.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let M=new Set,R=!1;if(e.forEach(k=>{let P=r.routes[k.route.id];!P||!P.hasLoader||(!m.some(j=>j.route.id===k.route.id)&&k.route.id in f&&l[k.route.id]?.shouldRevalidate||P.hasClientLoader?R=!0:M.add(k.route.id))}),M.size===0)return[];let L=pT(i,u,"data");return R&&M.size>0&&L.searchParams.set("_routes",e.filter(k=>M.has(k.route.id)).map(k=>k.route.id).join(",")),[L.pathname+L.search]},[u,f,n,r,m,e,i,l]),T=W.useMemo(()=>bT(A,r),[A,r]),N=_T(A);return W.createElement(W.Fragment,null,E.map(M=>W.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),T.map(M=>W.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),N.map(({key:M,link:R})=>W.createElement("link",{key:M,nonce:t.nonce,...R})))}function IT(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Uw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Uw&&(window.__reactRouterVersion="7.10.1")}catch{}function NT({basename:i,children:e,unstable_useTransitions:t,window:n}){let r=W.useRef();r.current==null&&(r.current=g_({window:n,v5Compat:!0}));let l=r.current,[u,f]=W.useState({action:l.action,location:l.location}),y=W.useCallback(m=>{t===!1?f(m):W.startTransition(()=>f(m))},[t]);return W.useLayoutEffect(()=>l.listen(y),[l,y]),W.createElement(rT,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:l,unstable_useTransitions:t===!0})}var zw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tf=W.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:l,replace:u,state:f,target:y,to:m,preventScrollReset:A,viewTransition:E,...T},N){let{basename:M,unstable_useTransitions:R}=W.useContext(Xs),L=typeof m=="string"&&zw.test(m),k,P=!1;if(typeof m=="string"&&L&&(k=m,Uw))try{let be=new URL(window.location.href),we=m.startsWith("//")?new URL(be.protocol+m):new URL(m),oe=Aa(we.pathname,M);we.origin===be.origin&&oe!=null?m=oe+we.search+we.hash:P=!0}catch{Ys(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=V_(m,{relative:r}),[U,G,Y]=ST(n,T),V=DT(m,{replace:u,state:f,target:y,preventScrollReset:A,relative:r,viewTransition:E,unstable_useTransitions:R});function ie(be){e&&e(be),be.defaultPrevented||V(be)}let Q=W.createElement("a",{...T,...Y,href:k||j,onClick:P||l?e:ie,ref:IT(N,G),target:y,"data-discover":!L&&t==="render"?"true":void 0});return U&&!L?W.createElement(W.Fragment,null,Q,W.createElement(CT,{page:j})):Q});Tf.displayName="Link";var ap=W.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:l,to:u,viewTransition:f,children:y,...m},A){let E=fh(u,{relative:m.relative}),T=Hr(),N=W.useContext(Zf),{navigator:M,basename:R}=W.useContext(Xs),L=N!=null&&BT(E)&&f===!0,k=M.encodeLocation?M.encodeLocation(E).pathname:E.pathname,P=T.pathname,j=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(P=P.toLowerCase(),j=j?j.toLowerCase():null,k=k.toLowerCase()),j&&R&&(j=Aa(j,R)||j);const U=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let G=P===k||!r&&P.startsWith(k)&&P.charAt(U)==="/",Y=j!=null&&(j===k||!r&&j.startsWith(k)&&j.charAt(k.length)==="/"),V={isActive:G,isPending:Y,isTransitioning:L},ie=G?e:void 0,Q;typeof n=="function"?Q=n(V):Q=[n,G?"active":null,Y?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let be=typeof l=="function"?l(V):l;return W.createElement(Tf,{...m,"aria-current":ie,className:Q,ref:A,style:be,to:u,viewTransition:f},typeof y=="function"?y(V):y)});ap.displayName="NavLink";var RT=W.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:l,method:u=pf,action:f,onSubmit:y,relative:m,preventScrollReset:A,viewTransition:E,...T},N)=>{let{unstable_useTransitions:M}=W.useContext(Xs),R=kT(),L=PT(f,{relative:m}),k=u.toLowerCase()==="get"?"get":"post",P=typeof f=="string"&&zw.test(f),j=U=>{if(y&&y(U),U.defaultPrevented)return;U.preventDefault();let G=U.nativeEvent.submitter,Y=G?.getAttribute("formmethod")||u,V=()=>R(G||U.currentTarget,{fetcherKey:e,method:Y,navigate:t,replace:r,state:l,relative:m,preventScrollReset:A,viewTransition:E});M&&t!==!1?W.startTransition(()=>V()):V()};return W.createElement("form",{ref:N,method:k,action:L,onSubmit:n?y:j,...T,"data-discover":!P&&i==="render"?"true":void 0})});RT.displayName="Form";function MT(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Hw(i){let e=W.useContext(Dc);return Ln(e,MT(i)),e}function DT(i,{target:e,replace:t,state:n,preventScrollReset:r,relative:l,viewTransition:u,unstable_useTransitions:f}={}){let y=yl(),m=Hr(),A=fh(i,{relative:l});return W.useCallback(E=>{if(hT(E,e)){E.preventDefault();let T=t!==void 0?t:$u(m)===$u(A),N=()=>y(i,{replace:T,state:n,preventScrollReset:r,relative:l,viewTransition:u});f?W.startTransition(()=>N()):N()}},[m,y,A,t,n,e,i,r,l,u,f])}var OT=0,LT=()=>`__${String(++OT)}__`;function kT(){let{router:i}=Hw("useSubmit"),{basename:e}=W.useContext(Xs),t=tT(),n=i.fetch,r=i.navigate;return W.useCallback(async(l,u={})=>{let{action:f,method:y,encType:m,formData:A,body:E}=gT(l,e);if(u.navigate===!1){let T=u.fetcherKey||LT();await n(T,t,u.action||f,{preventScrollReset:u.preventScrollReset,formData:A,body:E,formMethod:u.method||y,formEncType:u.encType||m,flushSync:u.flushSync})}else await r(u.action||f,{preventScrollReset:u.preventScrollReset,formData:A,body:E,formMethod:u.method||y,formEncType:u.encType||m,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[n,r,e,t])}function PT(i,{relative:e}={}){let{basename:t}=W.useContext(Xs),n=W.useContext(hr);Ln(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),l={...fh(i||".",{relative:e})},u=Hr();if(i==null){l.search=u.search;let f=new URLSearchParams(l.search),y=f.getAll("index");if(y.some(A=>A==="")){f.delete("index"),y.filter(E=>E).forEach(E=>f.append("index",E));let A=f.toString();l.search=A?`?${A}`:""}}return(!i||i===".")&&r.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:ba([t,l.pathname])),$u(l)}function BT(i,{relative:e}={}){let t=W.useContext(Dw);Ln(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Hw("useViewTransitionState"),r=fh(i,{relative:e});if(!t.isTransitioning)return!1;let l=Aa(t.currentLocation.pathname,n)||t.currentLocation.pathname,u=Aa(t.nextLocation.pathname,n)||t.nextLocation.pathname;return _f(r.pathname,u)!=null||_f(r.pathname,l)!=null}var Jf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(i){return this.listeners.add(i),this.onSubscribe(),()=>{this.listeners.delete(i),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},FT={setTimeout:(i,e)=>setTimeout(i,e),clearTimeout:i=>clearTimeout(i),setInterval:(i,e)=>setInterval(i,e),clearInterval:i=>clearInterval(i)},jT=class{#e=FT;#t=!1;setTimeoutProvider(i){this.#e=i}setTimeout(i,e){return this.#e.setTimeout(i,e)}clearTimeout(i){this.#e.clearTimeout(i)}setInterval(i,e){return this.#e.setInterval(i,e)}clearInterval(i){this.#e.clearInterval(i)}},op=new jT;function UT(i){setTimeout(i,0)}var e0=typeof window>"u"||"Deno"in globalThis;function nr(){}function zT(i,e){return typeof i=="function"?i(e):i}function HT(i){return typeof i=="number"&&i>=0&&i!==1/0}function VT(i,e){return Math.max(i+(e||0)-Date.now(),0)}function lp(i,e){return typeof i=="function"?i(e):i}function GT(i,e){return typeof i=="function"?i(e):i}function l2(i,e){const{type:t="all",exact:n,fetchStatus:r,predicate:l,queryKey:u,stale:f}=i;if(u){if(n){if(e.queryHash!==Qp(u,e.options))return!1}else if(!eh(e.queryKey,u))return!1}if(t!=="all"){const y=e.isActive();if(t==="active"&&!y||t==="inactive"&&y)return!1}return!(typeof f=="boolean"&&e.isStale()!==f||r&&r!==e.state.fetchStatus||l&&!l(e))}function c2(i,e){const{exact:t,status:n,predicate:r,mutationKey:l}=i;if(l){if(!e.options.mutationKey)return!1;if(t){if(Ju(e.options.mutationKey)!==Ju(l))return!1}else if(!eh(e.options.mutationKey,l))return!1}return!(n&&e.state.status!==n||r&&!r(e))}function Qp(i,e){return(e?.queryKeyHashFn||Ju)(i)}function Ju(i){return JSON.stringify(i,(e,t)=>cp(t)?Object.keys(t).sort().reduce((n,r)=>(n[r]=t[r],n),{}):t)}function eh(i,e){return i===e?!0:typeof i!=typeof e?!1:i&&e&&typeof i=="object"&&typeof e=="object"?Object.keys(e).every(t=>eh(i[t],e[t])):!1}var YT=Object.prototype.hasOwnProperty;function Vw(i,e){if(i===e)return i;const t=u2(i)&&u2(e);if(!t&&!(cp(i)&&cp(e)))return e;const r=(t?i:Object.keys(i)).length,l=t?e:Object.keys(e),u=l.length,f=t?new Array(u):{};let y=0;for(let m=0;m<u;m++){const A=t?m:l[m],E=i[A],T=e[A];if(E===T){f[A]=E,(t?m<r:YT.call(i,A))&&y++;continue}if(E===null||T===null||typeof E!="object"||typeof T!="object"){f[A]=T;continue}const N=Vw(E,T);f[A]=N,N===E&&y++}return r===u&&y===r?i:f}function u2(i){return Array.isArray(i)&&i.length===Object.keys(i).length}function cp(i){if(!h2(i))return!1;const e=i.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!h2(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(i)!==Object.prototype)}function h2(i){return Object.prototype.toString.call(i)==="[object Object]"}function XT(i){return new Promise(e=>{op.setTimeout(e,i)})}function qT(i,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(i,e):t.structuralSharing!==!1?Vw(i,e):e}function WT(i,e,t=0){const n=[...i,e];return t&&n.length>t?n.slice(1):n}function KT(i,e,t=0){const n=[e,...i];return t&&n.length>t?n.slice(0,-1):n}var Zp=Symbol();function Gw(i,e){return!i.queryFn&&e?.initialPromise?()=>e.initialPromise:!i.queryFn||i.queryFn===Zp?()=>Promise.reject(new Error(`Missing queryFn: '${i.queryHash}'`)):i.queryFn}var QT=class extends Jf{#e;#t;#n;constructor(){super(),this.#n=i=>{if(!e0&&window.addEventListener){const e=()=>i();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(i){this.#n=i,this.#t?.(),this.#t=i(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(i){this.#e!==i&&(this.#e=i,this.onFocus())}onFocus(){const i=this.isFocused();this.listeners.forEach(e=>{e(i)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Yw=new QT;function ZT(){let i,e;const t=new Promise((r,l)=>{i=r,e=l});t.status="pending",t.catch(()=>{});function n(r){Object.assign(t,r),delete t.resolve,delete t.reject}return t.resolve=r=>{n({status:"fulfilled",value:r}),i(r)},t.reject=r=>{n({status:"rejected",reason:r}),e(r)},t}var $T=UT;function JT(){let i=[],e=0,t=f=>{f()},n=f=>{f()},r=$T;const l=f=>{e?i.push(f):r(()=>{t(f)})},u=()=>{const f=i;i=[],f.length&&r(()=>{n(()=>{f.forEach(y=>{t(y)})})})};return{batch:f=>{let y;e++;try{y=f()}finally{e--,e||u()}return y},batchCalls:f=>(...y)=>{l(()=>{f(...y)})},schedule:l,setNotifyFunction:f=>{t=f},setBatchNotifyFunction:f=>{n=f},setScheduler:f=>{r=f}}}var Ui=JT(),e3=class extends Jf{#e=!0;#t;#n;constructor(){super(),this.#n=i=>{if(!e0&&window.addEventListener){const e=()=>i(!0),t=()=>i(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(i){this.#n=i,this.#t?.(),this.#t=i(this.setOnline.bind(this))}setOnline(i){this.#e!==i&&(this.#e=i,this.listeners.forEach(t=>{t(i)}))}isOnline(){return this.#e}},If=new e3;function t3(i){return Math.min(1e3*2**i,3e4)}function Xw(i){return(i??"online")==="online"?If.isOnline():!0}var up=class extends Error{constructor(i){super("CancelledError"),this.revert=i?.revert,this.silent=i?.silent}};function qw(i){let e=!1,t=0,n;const r=ZT(),l=()=>r.status!=="pending",u=R=>{if(!l()){const L=new up(R);T(L),i.onCancel?.(L)}},f=()=>{e=!0},y=()=>{e=!1},m=()=>Yw.isFocused()&&(i.networkMode==="always"||If.isOnline())&&i.canRun(),A=()=>Xw(i.networkMode)&&i.canRun(),E=R=>{l()||(n?.(),r.resolve(R))},T=R=>{l()||(n?.(),r.reject(R))},N=()=>new Promise(R=>{n=L=>{(l()||m())&&R(L)},i.onPause?.()}).then(()=>{n=void 0,l()||i.onContinue?.()}),M=()=>{if(l())return;let R;const L=t===0?i.initialPromise:void 0;try{R=L??i.fn()}catch(k){R=Promise.reject(k)}Promise.resolve(R).then(E).catch(k=>{if(l())return;const P=i.retry??(e0?0:3),j=i.retryDelay??t3,U=typeof j=="function"?j(t,k):j,G=P===!0||typeof P=="number"&&t<P||typeof P=="function"&&P(t,k);if(e||!G){T(k);return}t++,i.onFail?.(t,k),XT(U).then(()=>m()?void 0:N()).then(()=>{e?T(k):M()})})};return{promise:r,status:()=>r.status,cancel:u,continue:()=>(n?.(),r),cancelRetry:f,continueRetry:y,canStart:A,start:()=>(A()?M():N().then(M),r)}}var Ww=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),HT(this.gcTime)&&(this.#e=op.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(i){this.gcTime=Math.max(this.gcTime||0,i??(e0?1/0:300*1e3))}clearGcTimeout(){this.#e&&(op.clearTimeout(this.#e),this.#e=void 0)}},n3=class extends Ww{#e;#t;#n;#i;#s;#r;#a;constructor(i){super(),this.#a=!1,this.#r=i.defaultOptions,this.setOptions(i.options),this.observers=[],this.#i=i.client,this.#n=this.#i.getQueryCache(),this.queryKey=i.queryKey,this.queryHash=i.queryHash,this.#e=f2(this.options),this.state=i.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(i){if(this.options={...this.#r,...i},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=f2(this.options);e.data!==void 0&&(this.setState(d2(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(i,e){const t=qT(this.state.data,i,this.options);return this.#o({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(i,e){this.#o({type:"setState",state:i,setStateOptions:e})}cancel(i){const e=this.#s?.promise;return this.#s?.cancel(i),e?e.then(nr).catch(nr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(i=>GT(i.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Zp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(i=>lp(i.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(i=>i.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(i=0){return this.state.data===void 0?!0:i==="static"?!1:this.state.isInvalidated?!0:!VT(this.state.dataUpdatedAt,i)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(i){this.observers.includes(i)||(this.observers.push(i),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:i}))}removeObserver(i){this.observers.includes(i)&&(this.observers=this.observers.filter(e=>e!==i),this.observers.length||(this.#s&&(this.#a?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:i}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}async fetch(i,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(i&&this.setOptions(i),!this.options.queryFn){const f=this.observers.find(y=>y.options.queryFn);f&&this.setOptions(f.options)}const t=new AbortController,n=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(this.#a=!0,t.signal)})},r=()=>{const f=Gw(this.options,e),m=(()=>{const A={client:this.#i,queryKey:this.queryKey,meta:this.meta};return n(A),A})();return this.#a=!1,this.options.persister?this.options.persister(f,m,this):f(m)},u=(()=>{const f={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:r};return n(f),f})();this.options.behavior?.onFetch(u,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==u.fetchOptions?.meta)&&this.#o({type:"fetch",meta:u.fetchOptions?.meta}),this.#s=qw({initialPromise:e?.initialPromise,fn:u.fetchFn,onCancel:f=>{f instanceof up&&f.revert&&this.setState({...this.#t,fetchStatus:"idle"}),t.abort()},onFail:(f,y)=>{this.#o({type:"failed",failureCount:f,error:y})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0});try{const f=await this.#s.start();if(f===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(f),this.#n.config.onSuccess?.(f,this),this.#n.config.onSettled?.(f,this.state.error,this),f}catch(f){if(f instanceof up){if(f.silent)return this.#s.promise;if(f.revert){if(this.state.data===void 0)throw f;return this.state.data}}throw this.#o({type:"error",error:f}),this.#n.config.onError?.(f,this),this.#n.config.onSettled?.(this.state.data,f,this),f}finally{this.scheduleGc()}}#o(i){const e=t=>{switch(i.type){case"failed":return{...t,fetchFailureCount:i.failureCount,fetchFailureReason:i.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...i3(t.data,this.options),fetchMeta:i.meta??null};case"success":const n={...t,...d2(i.data,i.dataUpdatedAt),dataUpdateCount:t.dataUpdateCount+1,...!i.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=i.manual?n:void 0,n;case"error":const r=i.error;return{...t,error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...i.state}}};this.state=e(this.state),Ui.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:i})})}};function i3(i,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Xw(e.networkMode)?"fetching":"paused",...i===void 0&&{error:null,status:"pending"}}}function d2(i,e){return{data:i,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function f2(i){const e=typeof i.initialData=="function"?i.initialData():i.initialData,t=e!==void 0,n=t?typeof i.initialDataUpdatedAt=="function"?i.initialDataUpdatedAt():i.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}function g2(i){return{onFetch:(e,t)=>{const n=e.options,r=e.fetchOptions?.meta?.fetchMore?.direction,l=e.state.data?.pages||[],u=e.state.data?.pageParams||[];let f={pages:[],pageParams:[]},y=0;const m=async()=>{let A=!1;const E=M=>{Object.defineProperty(M,"signal",{enumerable:!0,get:()=>(e.signal.aborted?A=!0:e.signal.addEventListener("abort",()=>{A=!0}),e.signal)})},T=Gw(e.options,e.fetchOptions),N=async(M,R,L)=>{if(A)return Promise.reject();if(R==null&&M.pages.length)return Promise.resolve(M);const P=(()=>{const Y={client:e.client,queryKey:e.queryKey,pageParam:R,direction:L?"backward":"forward",meta:e.options.meta};return E(Y),Y})(),j=await T(P),{maxPages:U}=e.options,G=L?KT:WT;return{pages:G(M.pages,j,U),pageParams:G(M.pageParams,R,U)}};if(r&&l.length){const M=r==="backward",R=M?s3:p2,L={pages:l,pageParams:u},k=R(n,L);f=await N(L,k,M)}else{const M=i??l.length;do{const R=y===0?u[0]??n.initialPageParam:p2(n,f);if(y>0&&R==null)break;f=await N(f,R),y++}while(y<M)}return f};e.options.persister?e.fetchFn=()=>e.options.persister?.(m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=m}}}function p2(i,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?i.getNextPageParam(e[n],e,t[n],t):void 0}function s3(i,{pages:e,pageParams:t}){return e.length>0?i.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var r3=class extends Ww{#e;#t;#n;#i;constructor(i){super(),this.#e=i.client,this.mutationId=i.mutationId,this.#n=i.mutationCache,this.#t=[],this.state=i.state||a3(),this.setOptions(i.options),this.scheduleGc()}setOptions(i){this.options=i,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(i){this.#t.includes(i)||(this.#t.push(i),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:i}))}removeObserver(i){this.#t=this.#t.filter(e=>e!==i),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:i})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(i){const e=()=>{this.#s({type:"continue"})},t={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=qw({fn:()=>this.options.mutationFn?this.options.mutationFn(i,t):Promise.reject(new Error("No mutationFn found")),onFail:(l,u)=>{this.#s({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const n=this.state.status==="pending",r=!this.#i.canStart();try{if(n)e();else{this.#s({type:"pending",variables:i,isPaused:r}),await this.#n.config.onMutate?.(i,this,t);const u=await this.options.onMutate?.(i,t);u!==this.state.context&&this.#s({type:"pending",context:u,variables:i,isPaused:r})}const l=await this.#i.start();return await this.#n.config.onSuccess?.(l,i,this.state.context,this,t),await this.options.onSuccess?.(l,i,this.state.context,t),await this.#n.config.onSettled?.(l,null,this.state.variables,this.state.context,this,t),await this.options.onSettled?.(l,null,i,this.state.context,t),this.#s({type:"success",data:l}),l}catch(l){try{throw await this.#n.config.onError?.(l,i,this.state.context,this,t),await this.options.onError?.(l,i,this.state.context,t),await this.#n.config.onSettled?.(void 0,l,this.state.variables,this.state.context,this,t),await this.options.onSettled?.(void 0,l,i,this.state.context,t),l}finally{this.#s({type:"error",error:l})}}finally{this.#n.runNext(this)}}#s(i){const e=t=>{switch(i.type){case"failed":return{...t,failureCount:i.failureCount,failureReason:i.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:i.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:i.isPaused,status:"pending",variables:i.variables,submittedAt:Date.now()};case"success":return{...t,data:i.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:i.error,failureCount:t.failureCount+1,failureReason:i.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Ui.batch(()=>{this.#t.forEach(t=>{t.onMutationUpdate(i)}),this.#n.notify({mutation:this,type:"updated",action:i})})}};function a3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var o3=class extends Jf{constructor(i={}){super(),this.config=i,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(i,e,t){const n=new r3({client:i,mutationCache:this,mutationId:++this.#n,options:i.defaultMutationOptions(e),state:t});return this.add(n),n}add(i){this.#e.add(i);const e=ef(i);if(typeof e=="string"){const t=this.#t.get(e);t?t.push(i):this.#t.set(e,[i])}this.notify({type:"added",mutation:i})}remove(i){if(this.#e.delete(i)){const e=ef(i);if(typeof e=="string"){const t=this.#t.get(e);if(t)if(t.length>1){const n=t.indexOf(i);n!==-1&&t.splice(n,1)}else t[0]===i&&this.#t.delete(e)}}this.notify({type:"removed",mutation:i})}canRun(i){const e=ef(i);if(typeof e=="string"){const n=this.#t.get(e)?.find(r=>r.state.status==="pending");return!n||n===i}else return!0}runNext(i){const e=ef(i);return typeof e=="string"?this.#t.get(e)?.find(n=>n!==i&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ui.batch(()=>{this.#e.forEach(i=>{this.notify({type:"removed",mutation:i})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(i){const e={exact:!0,...i};return this.getAll().find(t=>c2(e,t))}findAll(i={}){return this.getAll().filter(e=>c2(i,e))}notify(i){Ui.batch(()=>{this.listeners.forEach(e=>{e(i)})})}resumePausedMutations(){const i=this.getAll().filter(e=>e.state.isPaused);return Ui.batch(()=>Promise.all(i.map(e=>e.continue().catch(nr))))}};function ef(i){return i.options.scope?.id}var l3=class extends Jf{constructor(i={}){super(),this.config=i,this.#e=new Map}#e;build(i,e,t){const n=e.queryKey,r=e.queryHash??Qp(n,e);let l=this.get(r);return l||(l=new n3({client:i,queryKey:n,queryHash:r,options:i.defaultQueryOptions(e),state:t,defaultOptions:i.getQueryDefaults(n)}),this.add(l)),l}add(i){this.#e.has(i.queryHash)||(this.#e.set(i.queryHash,i),this.notify({type:"added",query:i}))}remove(i){const e=this.#e.get(i.queryHash);e&&(i.destroy(),e===i&&this.#e.delete(i.queryHash),this.notify({type:"removed",query:i}))}clear(){Ui.batch(()=>{this.getAll().forEach(i=>{this.remove(i)})})}get(i){return this.#e.get(i)}getAll(){return[...this.#e.values()]}find(i){const e={exact:!0,...i};return this.getAll().find(t=>l2(e,t))}findAll(i={}){const e=this.getAll();return Object.keys(i).length>0?e.filter(t=>l2(i,t)):e}notify(i){Ui.batch(()=>{this.listeners.forEach(e=>{e(i)})})}onFocus(){Ui.batch(()=>{this.getAll().forEach(i=>{i.onFocus()})})}onOnline(){Ui.batch(()=>{this.getAll().forEach(i=>{i.onOnline()})})}},c3=class{#e;#t;#n;#i;#s;#r;#a;#o;constructor(i={}){this.#e=i.queryCache||new l3,this.#t=i.mutationCache||new o3,this.#n=i.defaultOptions||{},this.#i=new Map,this.#s=new Map,this.#r=0}mount(){this.#r++,this.#r===1&&(this.#a=Yw.subscribe(async i=>{i&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=If.subscribe(async i=>{i&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#r--,this.#r===0&&(this.#a?.(),this.#a=void 0,this.#o?.(),this.#o=void 0)}isFetching(i){return this.#e.findAll({...i,fetchStatus:"fetching"}).length}isMutating(i){return this.#t.findAll({...i,status:"pending"}).length}getQueryData(i){const e=this.defaultQueryOptions({queryKey:i});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(i){const e=this.defaultQueryOptions(i),t=this.#e.build(this,e),n=t.state.data;return n===void 0?this.fetchQuery(i):(i.revalidateIfStale&&t.isStaleByTime(lp(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(i){return this.#e.findAll(i).map(({queryKey:e,state:t})=>{const n=t.data;return[e,n]})}setQueryData(i,e,t){const n=this.defaultQueryOptions({queryKey:i}),l=this.#e.get(n.queryHash)?.state.data,u=zT(e,l);if(u!==void 0)return this.#e.build(this,n).setData(u,{...t,manual:!0})}setQueriesData(i,e,t){return Ui.batch(()=>this.#e.findAll(i).map(({queryKey:n})=>[n,this.setQueryData(n,e,t)]))}getQueryState(i){const e=this.defaultQueryOptions({queryKey:i});return this.#e.get(e.queryHash)?.state}removeQueries(i){const e=this.#e;Ui.batch(()=>{e.findAll(i).forEach(t=>{e.remove(t)})})}resetQueries(i,e){const t=this.#e;return Ui.batch(()=>(t.findAll(i).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...i},e)))}cancelQueries(i,e={}){const t={revert:!0,...e},n=Ui.batch(()=>this.#e.findAll(i).map(r=>r.cancel(t)));return Promise.all(n).then(nr).catch(nr)}invalidateQueries(i,e={}){return Ui.batch(()=>(this.#e.findAll(i).forEach(t=>{t.invalidate()}),i?.refetchType==="none"?Promise.resolve():this.refetchQueries({...i,type:i?.refetchType??i?.type??"active"},e)))}refetchQueries(i,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},n=Ui.batch(()=>this.#e.findAll(i).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let l=r.fetch(void 0,t);return t.throwOnError||(l=l.catch(nr)),r.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(n).then(nr)}fetchQuery(i){const e=this.defaultQueryOptions(i);e.retry===void 0&&(e.retry=!1);const t=this.#e.build(this,e);return t.isStaleByTime(lp(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(i){return this.fetchQuery(i).then(nr).catch(nr)}fetchInfiniteQuery(i){return i.behavior=g2(i.pages),this.fetchQuery(i)}prefetchInfiniteQuery(i){return this.fetchInfiniteQuery(i).then(nr).catch(nr)}ensureInfiniteQueryData(i){return i.behavior=g2(i.pages),this.ensureQueryData(i)}resumePausedMutations(){return If.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(i){this.#n=i}setQueryDefaults(i,e){this.#i.set(Ju(i),{queryKey:i,defaultOptions:e})}getQueryDefaults(i){const e=[...this.#i.values()],t={};return e.forEach(n=>{eh(i,n.queryKey)&&Object.assign(t,n.defaultOptions)}),t}setMutationDefaults(i,e){this.#s.set(Ju(i),{mutationKey:i,defaultOptions:e})}getMutationDefaults(i){const e=[...this.#s.values()],t={};return e.forEach(n=>{eh(i,n.mutationKey)&&Object.assign(t,n.defaultOptions)}),t}defaultQueryOptions(i){if(i._defaulted)return i;const e={...this.#n.queries,...this.getQueryDefaults(i.queryKey),...i,_defaulted:!0};return e.queryHash||(e.queryHash=Qp(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Zp&&(e.enabled=!1),e}defaultMutationOptions(i){return i?._defaulted?i:{...this.#n.mutations,...i?.mutationKey&&this.getMutationDefaults(i.mutationKey),...i,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},u3=W.createContext(void 0),h3=({client:i,children:e})=>(W.useEffect(()=>(i.mount(),()=>{i.unmount()}),[i]),S.jsx(u3.Provider,{value:i,children:e}));const d3=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),f3=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),m2=i=>{const e=f3(i);return e.charAt(0).toUpperCase()+e.slice(1)},Kw=(...i)=>i.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),g3=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var p3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const m3=W.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:l,iconNode:u,...f},y)=>W.createElement("svg",{ref:y,...p3,width:e,height:e,stroke:i,strokeWidth:n?Number(t)*24/Number(e):t,className:Kw("lucide",r),...!l&&!g3(f)&&{"aria-hidden":"true"},...f},[...u.map(([m,A])=>W.createElement(m,A)),...Array.isArray(l)?l:[l]]));const In=(i,e)=>{const t=W.forwardRef(({className:n,...r},l)=>W.createElement(m3,{ref:l,iconNode:e,className:Kw(`lucide-${d3(m2(i))}`,`lucide-${i}`,n),...r}));return t.displayName=m2(i),t};const y3=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],y2=In("activity",y3);const x3=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Qw=In("arrow-left",x3);const b3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],x2=In("arrow-right",b3);const A3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],th=In("calendar",A3);const w3=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],$p=In("camera",w3);const E3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],b2=In("check",E3);const v3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],S3=In("chevron-right",v3);const C3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],nh=In("circle-check-big",C3);const _3=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],T3=In("download",_3);const I3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ll=In("file-text",I3);const N3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],R3=In("log-out",N3);const M3=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ul=In("map-pin",M3);const D3=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],O3=In("message-square",D3);const L3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],So=In("plus",L3);const k3=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],P3=In("printer",k3);const B3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],A2=In("rotate-ccw",B3);const F3=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Zw=In("save",F3);const j3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],$w=In("search",j3);const U3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],w2=In("shield",U3);const z3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],H3=In("trash-2",z3);const V3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],t0=In("triangle-alert",V3);const G3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Jw=In("upload",G3);const Y3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],eE=In("user",Y3);const X3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hp=In("users",X3);const q3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Gs=In("x",q3),tE=W.createContext(null);function W3({children:i}){const[e,t]=W.useState([]),n=(l,u="info",f=3200)=>{const y=crypto.randomUUID();t(m=>[...m,{id:y,message:l,type:u}]),setTimeout(()=>t(m=>m.filter(A=>A.id!==y)),f)},r=W.useMemo(()=>({toasts:e,show:n}),[e]);return S.jsx(tE.Provider,{value:r,children:i})}function dr(){const i=W.useContext(tE);if(!i)throw new Error("ToastProvider  useToast   .");return i}function K3(){const{toasts:i}=dr();return S.jsx("div",{className:"toast-container",children:i.map(e=>S.jsx("div",{className:`toast toast-${e.type}`,children:e.message},e.id))})}function nE(i,e){return function(){return i.apply(e,arguments)}}const{toString:Q3}=Object.prototype,{getPrototypeOf:Jp}=Object,{iterator:n0,toStringTag:iE}=Symbol,i0=(i=>e=>{const t=Q3.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),fr=i=>(i=i.toLowerCase(),e=>i0(e)===i),s0=i=>e=>typeof e===i,{isArray:Lc}=Array,Sc=s0("undefined");function gh(i){return i!==null&&!Sc(i)&&i.constructor!==null&&!Sc(i.constructor)&&ss(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const sE=fr("ArrayBuffer");function Z3(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&sE(i.buffer),e}const $3=s0("string"),ss=s0("function"),rE=s0("number"),ph=i=>i!==null&&typeof i=="object",J3=i=>i===!0||i===!1,yf=i=>{if(i0(i)!=="object")return!1;const e=Jp(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(iE in i)&&!(n0 in i)},eI=i=>{if(!ph(i)||gh(i))return!1;try{return Object.keys(i).length===0&&Object.getPrototypeOf(i)===Object.prototype}catch{return!1}},tI=fr("Date"),nI=fr("File"),iI=fr("Blob"),sI=fr("FileList"),rI=i=>ph(i)&&ss(i.pipe),aI=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||ss(i.append)&&((e=i0(i))==="formdata"||e==="object"&&ss(i.toString)&&i.toString()==="[object FormData]"))},oI=fr("URLSearchParams"),[lI,cI,uI,hI]=["ReadableStream","Request","Response","Headers"].map(fr),dI=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function mh(i,e,{allOwnKeys:t=!1}={}){if(i===null||typeof i>"u")return;let n,r;if(typeof i!="object"&&(i=[i]),Lc(i))for(n=0,r=i.length;n<r;n++)e.call(null,i[n],n,i);else{if(gh(i))return;const l=t?Object.getOwnPropertyNames(i):Object.keys(i),u=l.length;let f;for(n=0;n<u;n++)f=l[n],e.call(null,i[f],f,i)}}function aE(i,e){if(gh(i))return null;e=e.toLowerCase();const t=Object.keys(i);let n=t.length,r;for(;n-- >0;)if(r=t[n],e===r.toLowerCase())return r;return null}const nl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,oE=i=>!Sc(i)&&i!==nl;function dp(){const{caseless:i,skipUndefined:e}=oE(this)&&this||{},t={},n=(r,l)=>{const u=i&&aE(t,l)||l;yf(t[u])&&yf(r)?t[u]=dp(t[u],r):yf(r)?t[u]=dp({},r):Lc(r)?t[u]=r.slice():(!e||!Sc(r))&&(t[u]=r)};for(let r=0,l=arguments.length;r<l;r++)arguments[r]&&mh(arguments[r],n);return t}const fI=(i,e,t,{allOwnKeys:n}={})=>(mh(e,(r,l)=>{t&&ss(r)?i[l]=nE(r,t):i[l]=r},{allOwnKeys:n}),i),gI=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),pI=(i,e,t,n)=>{i.prototype=Object.create(e.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),t&&Object.assign(i.prototype,t)},mI=(i,e,t,n)=>{let r,l,u;const f={};if(e=e||{},i==null)return e;do{for(r=Object.getOwnPropertyNames(i),l=r.length;l-- >0;)u=r[l],(!n||n(u,i,e))&&!f[u]&&(e[u]=i[u],f[u]=!0);i=t!==!1&&Jp(i)}while(i&&(!t||t(i,e))&&i!==Object.prototype);return e},yI=(i,e,t)=>{i=String(i),(t===void 0||t>i.length)&&(t=i.length),t-=e.length;const n=i.indexOf(e,t);return n!==-1&&n===t},xI=i=>{if(!i)return null;if(Lc(i))return i;let e=i.length;if(!rE(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=i[e];return t},bI=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&Jp(Uint8Array)),AI=(i,e)=>{const n=(i&&i[n0]).call(i);let r;for(;(r=n.next())&&!r.done;){const l=r.value;e.call(i,l[0],l[1])}},wI=(i,e)=>{let t;const n=[];for(;(t=i.exec(e))!==null;)n.push(t);return n},EI=fr("HTMLFormElement"),vI=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,r){return n.toUpperCase()+r}),E2=(({hasOwnProperty:i})=>(e,t)=>i.call(e,t))(Object.prototype),SI=fr("RegExp"),lE=(i,e)=>{const t=Object.getOwnPropertyDescriptors(i),n={};mh(t,(r,l)=>{let u;(u=e(r,l,i))!==!1&&(n[l]=u||r)}),Object.defineProperties(i,n)},CI=i=>{lE(i,(e,t)=>{if(ss(i)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=i[t];if(ss(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},_I=(i,e)=>{const t={},n=r=>{r.forEach(l=>{t[l]=!0})};return Lc(i)?n(i):n(String(i).split(e)),t},TI=()=>{},II=(i,e)=>i!=null&&Number.isFinite(i=+i)?i:e;function NI(i){return!!(i&&ss(i.append)&&i[iE]==="FormData"&&i[n0])}const RI=i=>{const e=new Array(10),t=(n,r)=>{if(ph(n)){if(e.indexOf(n)>=0)return;if(gh(n))return n;if(!("toJSON"in n)){e[r]=n;const l=Lc(n)?[]:{};return mh(n,(u,f)=>{const y=t(u,r+1);!Sc(y)&&(l[f]=y)}),e[r]=void 0,l}}return n};return t(i,0)},MI=fr("AsyncFunction"),DI=i=>i&&(ph(i)||ss(i))&&ss(i.then)&&ss(i.catch),cE=((i,e)=>i?setImmediate:e?((t,n)=>(nl.addEventListener("message",({source:r,data:l})=>{r===nl&&l===t&&n.length&&n.shift()()},!1),r=>{n.push(r),nl.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ss(nl.postMessage)),OI=typeof queueMicrotask<"u"?queueMicrotask.bind(nl):typeof process<"u"&&process.nextTick||cE,LI=i=>i!=null&&ss(i[n0]),ye={isArray:Lc,isArrayBuffer:sE,isBuffer:gh,isFormData:aI,isArrayBufferView:Z3,isString:$3,isNumber:rE,isBoolean:J3,isObject:ph,isPlainObject:yf,isEmptyObject:eI,isReadableStream:lI,isRequest:cI,isResponse:uI,isHeaders:hI,isUndefined:Sc,isDate:tI,isFile:nI,isBlob:iI,isRegExp:SI,isFunction:ss,isStream:rI,isURLSearchParams:oI,isTypedArray:bI,isFileList:sI,forEach:mh,merge:dp,extend:fI,trim:dI,stripBOM:gI,inherits:pI,toFlatObject:mI,kindOf:i0,kindOfTest:fr,endsWith:yI,toArray:xI,forEachEntry:AI,matchAll:wI,isHTMLForm:EI,hasOwnProperty:E2,hasOwnProp:E2,reduceDescriptors:lE,freezeMethods:CI,toObjectSet:_I,toCamelCase:vI,noop:TI,toFiniteNumber:II,findKey:aE,global:nl,isContextDefined:oE,isSpecCompliantForm:NI,toJSONObject:RI,isAsyncFn:MI,isThenable:DI,setImmediate:cE,asap:OI,isIterable:LI};function wt(i,e,t,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}ye.inherits(wt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ye.toJSONObject(this.config),code:this.code,status:this.status}}});const uE=wt.prototype,hE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{hE[i]={value:i}});Object.defineProperties(wt,hE);Object.defineProperty(uE,"isAxiosError",{value:!0});wt.from=(i,e,t,n,r,l)=>{const u=Object.create(uE);ye.toFlatObject(i,u,function(A){return A!==Error.prototype},m=>m!=="isAxiosError");const f=i&&i.message?i.message:"Error",y=e==null&&i?i.code:e;return wt.call(u,f,y,t,n,r),i&&u.cause==null&&Object.defineProperty(u,"cause",{value:i,configurable:!0}),u.name=i&&i.name||"Error",l&&Object.assign(u,l),u};const kI=null;function fp(i){return ye.isPlainObject(i)||ye.isArray(i)}function dE(i){return ye.endsWith(i,"[]")?i.slice(0,-2):i}function v2(i,e,t){return i?i.concat(e).map(function(r,l){return r=dE(r),!t&&l?"["+r+"]":r}).join(t?".":""):e}function PI(i){return ye.isArray(i)&&!i.some(fp)}const BI=ye.toFlatObject(ye,{},null,function(e){return/^is[A-Z]/.test(e)});function r0(i,e,t){if(!ye.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,t=ye.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,L){return!ye.isUndefined(L[R])});const n=t.metaTokens,r=t.visitor||A,l=t.dots,u=t.indexes,y=(t.Blob||typeof Blob<"u"&&Blob)&&ye.isSpecCompliantForm(e);if(!ye.isFunction(r))throw new TypeError("visitor must be a function");function m(M){if(M===null)return"";if(ye.isDate(M))return M.toISOString();if(ye.isBoolean(M))return M.toString();if(!y&&ye.isBlob(M))throw new wt("Blob is not supported. Use a Buffer instead.");return ye.isArrayBuffer(M)||ye.isTypedArray(M)?y&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function A(M,R,L){let k=M;if(M&&!L&&typeof M=="object"){if(ye.endsWith(R,"{}"))R=n?R:R.slice(0,-2),M=JSON.stringify(M);else if(ye.isArray(M)&&PI(M)||(ye.isFileList(M)||ye.endsWith(R,"[]"))&&(k=ye.toArray(M)))return R=dE(R),k.forEach(function(j,U){!(ye.isUndefined(j)||j===null)&&e.append(u===!0?v2([R],U,l):u===null?R:R+"[]",m(j))}),!1}return fp(M)?!0:(e.append(v2(L,R,l),m(M)),!1)}const E=[],T=Object.assign(BI,{defaultVisitor:A,convertValue:m,isVisitable:fp});function N(M,R){if(!ye.isUndefined(M)){if(E.indexOf(M)!==-1)throw Error("Circular reference detected in "+R.join("."));E.push(M),ye.forEach(M,function(k,P){(!(ye.isUndefined(k)||k===null)&&r.call(e,k,ye.isString(P)?P.trim():P,R,T))===!0&&N(k,R?R.concat(P):[P])}),E.pop()}}if(!ye.isObject(i))throw new TypeError("data must be an object");return N(i),e}function S2(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function em(i,e){this._pairs=[],i&&r0(i,this,e)}const fE=em.prototype;fE.append=function(e,t){this._pairs.push([e,t])};fE.toString=function(e){const t=e?function(n){return e.call(this,n,S2)}:S2;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function FI(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function gE(i,e,t){if(!e)return i;const n=t&&t.encode||FI;ye.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let l;if(r?l=r(e,t):l=ye.isURLSearchParams(e)?e.toString():new em(e,t).toString(n),l){const u=i.indexOf("#");u!==-1&&(i=i.slice(0,u)),i+=(i.indexOf("?")===-1?"?":"&")+l}return i}class C2{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ye.forEach(this.handlers,function(n){n!==null&&e(n)})}}const pE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jI=typeof URLSearchParams<"u"?URLSearchParams:em,UI=typeof FormData<"u"?FormData:null,zI=typeof Blob<"u"?Blob:null,HI={isBrowser:!0,classes:{URLSearchParams:jI,FormData:UI,Blob:zI},protocols:["http","https","file","blob","url","data"]},tm=typeof window<"u"&&typeof document<"u",gp=typeof navigator=="object"&&navigator||void 0,VI=tm&&(!gp||["ReactNative","NativeScript","NS"].indexOf(gp.product)<0),GI=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",YI=tm&&window.location.href||"http://localhost",XI=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:tm,hasStandardBrowserEnv:VI,hasStandardBrowserWebWorkerEnv:GI,navigator:gp,origin:YI},Symbol.toStringTag,{value:"Module"})),Ni={...XI,...HI};function qI(i,e){return r0(i,new Ni.classes.URLSearchParams,{visitor:function(t,n,r,l){return Ni.isNode&&ye.isBuffer(t)?(this.append(n,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function WI(i){return ye.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function KI(i){const e={},t=Object.keys(i);let n;const r=t.length;let l;for(n=0;n<r;n++)l=t[n],e[l]=i[l];return e}function mE(i){function e(t,n,r,l){let u=t[l++];if(u==="__proto__")return!0;const f=Number.isFinite(+u),y=l>=t.length;return u=!u&&ye.isArray(r)?r.length:u,y?(ye.hasOwnProp(r,u)?r[u]=[r[u],n]:r[u]=n,!f):((!r[u]||!ye.isObject(r[u]))&&(r[u]=[]),e(t,n,r[u],l)&&ye.isArray(r[u])&&(r[u]=KI(r[u])),!f)}if(ye.isFormData(i)&&ye.isFunction(i.entries)){const t={};return ye.forEachEntry(i,(n,r)=>{e(WI(n),r,t,0)}),t}return null}function QI(i,e,t){if(ye.isString(i))try{return(e||JSON.parse)(i),ye.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(i)}const yh={transitional:pE,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,l=ye.isObject(e);if(l&&ye.isHTMLForm(e)&&(e=new FormData(e)),ye.isFormData(e))return r?JSON.stringify(mE(e)):e;if(ye.isArrayBuffer(e)||ye.isBuffer(e)||ye.isStream(e)||ye.isFile(e)||ye.isBlob(e)||ye.isReadableStream(e))return e;if(ye.isArrayBufferView(e))return e.buffer;if(ye.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return qI(e,this.formSerializer).toString();if((f=ye.isFileList(e))||n.indexOf("multipart/form-data")>-1){const y=this.env&&this.env.FormData;return r0(f?{"files[]":e}:e,y&&new y,this.formSerializer)}}return l||r?(t.setContentType("application/json",!1),QI(e)):e}],transformResponse:[function(e){const t=this.transitional||yh.transitional,n=t&&t.forcedJSONParsing,r=this.responseType==="json";if(ye.isResponse(e)||ye.isReadableStream(e))return e;if(e&&ye.isString(e)&&(n&&!this.responseType||r)){const u=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(f){if(u)throw f.name==="SyntaxError"?wt.from(f,wt.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ni.classes.FormData,Blob:Ni.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ye.forEach(["delete","get","head","post","put","patch"],i=>{yh.headers[i]={}});const ZI=ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$I=i=>{const e={};let t,n,r;return i&&i.split(`
`).forEach(function(u){r=u.indexOf(":"),t=u.substring(0,r).trim().toLowerCase(),n=u.substring(r+1).trim(),!(!t||e[t]&&ZI[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},_2=Symbol("internals");function Pu(i){return i&&String(i).trim().toLowerCase()}function xf(i){return i===!1||i==null?i:ye.isArray(i)?i.map(xf):String(i)}function JI(i){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(i);)e[n[1]]=n[2];return e}const eN=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function T1(i,e,t,n,r){if(ye.isFunction(n))return n.call(this,e,t);if(r&&(e=t),!!ye.isString(e)){if(ye.isString(n))return e.indexOf(n)!==-1;if(ye.isRegExp(n))return n.test(e)}}function tN(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function nN(i,e){const t=ye.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+t,{value:function(r,l,u){return this[n].call(this,e,r,l,u)},configurable:!0})})}let rs=class{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function l(f,y,m){const A=Pu(y);if(!A)throw new Error("header name must be a non-empty string");const E=ye.findKey(r,A);(!E||r[E]===void 0||m===!0||m===void 0&&r[E]!==!1)&&(r[E||y]=xf(f))}const u=(f,y)=>ye.forEach(f,(m,A)=>l(m,A,y));if(ye.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(ye.isString(e)&&(e=e.trim())&&!eN(e))u($I(e),t);else if(ye.isObject(e)&&ye.isIterable(e)){let f={},y,m;for(const A of e){if(!ye.isArray(A))throw TypeError("Object iterator must return a key-value pair");f[m=A[0]]=(y=f[m])?ye.isArray(y)?[...y,A[1]]:[y,A[1]]:A[1]}u(f,t)}else e!=null&&l(t,e,n);return this}get(e,t){if(e=Pu(e),e){const n=ye.findKey(this,e);if(n){const r=this[n];if(!t)return r;if(t===!0)return JI(r);if(ye.isFunction(t))return t.call(this,r,n);if(ye.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Pu(e),e){const n=ye.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||T1(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let r=!1;function l(u){if(u=Pu(u),u){const f=ye.findKey(n,u);f&&(!t||T1(n,n[f],f,t))&&(delete n[f],r=!0)}}return ye.isArray(e)?e.forEach(l):l(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const l=t[n];(!e||T1(this,this[l],l,e,!0))&&(delete this[l],r=!0)}return r}normalize(e){const t=this,n={};return ye.forEach(this,(r,l)=>{const u=ye.findKey(n,l);if(u){t[u]=xf(r),delete t[l];return}const f=e?tN(l):String(l).trim();f!==l&&delete t[l],t[f]=xf(r),n[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ye.forEach(this,(n,r)=>{n!=null&&n!==!1&&(t[r]=e&&ye.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(r=>n.set(r)),n}static accessor(e){const n=(this[_2]=this[_2]={accessors:{}}).accessors,r=this.prototype;function l(u){const f=Pu(u);n[f]||(nN(r,u),n[f]=!0)}return ye.isArray(e)?e.forEach(l):l(e),this}};rs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ye.reduceDescriptors(rs.prototype,({value:i},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(n){this[t]=n}}});ye.freezeMethods(rs);function I1(i,e){const t=this||yh,n=e||t,r=rs.from(n.headers);let l=n.data;return ye.forEach(i,function(f){l=f.call(t,l,r.normalize(),e?e.status:void 0)}),r.normalize(),l}function yE(i){return!!(i&&i.__CANCEL__)}function kc(i,e,t){wt.call(this,i??"canceled",wt.ERR_CANCELED,e,t),this.name="CanceledError"}ye.inherits(kc,wt,{__CANCEL__:!0});function xE(i,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?i(t):e(new wt("Request failed with status code "+t.status,[wt.ERR_BAD_REQUEST,wt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function iN(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function sN(i,e){i=i||10;const t=new Array(i),n=new Array(i);let r=0,l=0,u;return e=e!==void 0?e:1e3,function(y){const m=Date.now(),A=n[l];u||(u=m),t[r]=y,n[r]=m;let E=l,T=0;for(;E!==r;)T+=t[E++],E=E%i;if(r=(r+1)%i,r===l&&(l=(l+1)%i),m-u<e)return;const N=A&&m-A;return N?Math.round(T*1e3/N):void 0}}function rN(i,e){let t=0,n=1e3/e,r,l;const u=(m,A=Date.now())=>{t=A,r=null,l&&(clearTimeout(l),l=null),i(...m)};return[(...m)=>{const A=Date.now(),E=A-t;E>=n?u(m,A):(r=m,l||(l=setTimeout(()=>{l=null,u(r)},n-E)))},()=>r&&u(r)]}const Nf=(i,e,t=3)=>{let n=0;const r=sN(50,250);return rN(l=>{const u=l.loaded,f=l.lengthComputable?l.total:void 0,y=u-n,m=r(y),A=u<=f;n=u;const E={loaded:u,total:f,progress:f?u/f:void 0,bytes:y,rate:m||void 0,estimated:m&&f&&A?(f-u)/m:void 0,event:l,lengthComputable:f!=null,[e?"download":"upload"]:!0};i(E)},t)},T2=(i,e)=>{const t=i!=null;return[n=>e[0]({lengthComputable:t,total:i,loaded:n}),e[1]]},I2=i=>(...e)=>ye.asap(()=>i(...e)),aN=Ni.hasStandardBrowserEnv?((i,e)=>t=>(t=new URL(t,Ni.origin),i.protocol===t.protocol&&i.host===t.host&&(e||i.port===t.port)))(new URL(Ni.origin),Ni.navigator&&/(msie|trident)/i.test(Ni.navigator.userAgent)):()=>!0,oN=Ni.hasStandardBrowserEnv?{write(i,e,t,n,r,l,u){if(typeof document>"u")return;const f=[`${i}=${encodeURIComponent(e)}`];ye.isNumber(t)&&f.push(`expires=${new Date(t).toUTCString()}`),ye.isString(n)&&f.push(`path=${n}`),ye.isString(r)&&f.push(`domain=${r}`),l===!0&&f.push("secure"),ye.isString(u)&&f.push(`SameSite=${u}`),document.cookie=f.join("; ")},read(i){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+i+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(i){this.write(i,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function lN(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function cN(i,e){return e?i.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):i}function bE(i,e,t){let n=!lN(e);return i&&(n||t==!1)?cN(i,e):e}const N2=i=>i instanceof rs?{...i}:i;function hl(i,e){e=e||{};const t={};function n(m,A,E,T){return ye.isPlainObject(m)&&ye.isPlainObject(A)?ye.merge.call({caseless:T},m,A):ye.isPlainObject(A)?ye.merge({},A):ye.isArray(A)?A.slice():A}function r(m,A,E,T){if(ye.isUndefined(A)){if(!ye.isUndefined(m))return n(void 0,m,E,T)}else return n(m,A,E,T)}function l(m,A){if(!ye.isUndefined(A))return n(void 0,A)}function u(m,A){if(ye.isUndefined(A)){if(!ye.isUndefined(m))return n(void 0,m)}else return n(void 0,A)}function f(m,A,E){if(E in e)return n(m,A);if(E in i)return n(void 0,m)}const y={url:l,method:l,data:l,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(m,A,E)=>r(N2(m),N2(A),E,!0)};return ye.forEach(Object.keys({...i,...e}),function(A){const E=y[A]||r,T=E(i[A],e[A],A);ye.isUndefined(T)&&E!==f||(t[A]=T)}),t}const AE=i=>{const e=hl({},i);let{data:t,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:l,headers:u,auth:f}=e;if(e.headers=u=rs.from(u),e.url=gE(bE(e.baseURL,e.url,e.allowAbsoluteUrls),i.params,i.paramsSerializer),f&&u.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):""))),ye.isFormData(t)){if(Ni.hasStandardBrowserEnv||Ni.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(ye.isFunction(t.getHeaders)){const y=t.getHeaders(),m=["content-type","content-length"];Object.entries(y).forEach(([A,E])=>{m.includes(A.toLowerCase())&&u.set(A,E)})}}if(Ni.hasStandardBrowserEnv&&(n&&ye.isFunction(n)&&(n=n(e)),n||n!==!1&&aN(e.url))){const y=r&&l&&oN.read(l);y&&u.set(r,y)}return e},uN=typeof XMLHttpRequest<"u",hN=uN&&function(i){return new Promise(function(t,n){const r=AE(i);let l=r.data;const u=rs.from(r.headers).normalize();let{responseType:f,onUploadProgress:y,onDownloadProgress:m}=r,A,E,T,N,M;function R(){N&&N(),M&&M(),r.cancelToken&&r.cancelToken.unsubscribe(A),r.signal&&r.signal.removeEventListener("abort",A)}let L=new XMLHttpRequest;L.open(r.method.toUpperCase(),r.url,!0),L.timeout=r.timeout;function k(){if(!L)return;const j=rs.from("getAllResponseHeaders"in L&&L.getAllResponseHeaders()),G={data:!f||f==="text"||f==="json"?L.responseText:L.response,status:L.status,statusText:L.statusText,headers:j,config:i,request:L};xE(function(V){t(V),R()},function(V){n(V),R()},G),L=null}"onloadend"in L?L.onloadend=k:L.onreadystatechange=function(){!L||L.readyState!==4||L.status===0&&!(L.responseURL&&L.responseURL.indexOf("file:")===0)||setTimeout(k)},L.onabort=function(){L&&(n(new wt("Request aborted",wt.ECONNABORTED,i,L)),L=null)},L.onerror=function(U){const G=U&&U.message?U.message:"Network Error",Y=new wt(G,wt.ERR_NETWORK,i,L);Y.event=U||null,n(Y),L=null},L.ontimeout=function(){let U=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const G=r.transitional||pE;r.timeoutErrorMessage&&(U=r.timeoutErrorMessage),n(new wt(U,G.clarifyTimeoutError?wt.ETIMEDOUT:wt.ECONNABORTED,i,L)),L=null},l===void 0&&u.setContentType(null),"setRequestHeader"in L&&ye.forEach(u.toJSON(),function(U,G){L.setRequestHeader(G,U)}),ye.isUndefined(r.withCredentials)||(L.withCredentials=!!r.withCredentials),f&&f!=="json"&&(L.responseType=r.responseType),m&&([T,M]=Nf(m,!0),L.addEventListener("progress",T)),y&&L.upload&&([E,N]=Nf(y),L.upload.addEventListener("progress",E),L.upload.addEventListener("loadend",N)),(r.cancelToken||r.signal)&&(A=j=>{L&&(n(!j||j.type?new kc(null,i,L):j),L.abort(),L=null)},r.cancelToken&&r.cancelToken.subscribe(A),r.signal&&(r.signal.aborted?A():r.signal.addEventListener("abort",A)));const P=iN(r.url);if(P&&Ni.protocols.indexOf(P)===-1){n(new wt("Unsupported protocol "+P+":",wt.ERR_BAD_REQUEST,i));return}L.send(l||null)})},dN=(i,e)=>{const{length:t}=i=i?i.filter(Boolean):[];if(e||t){let n=new AbortController,r;const l=function(m){if(!r){r=!0,f();const A=m instanceof Error?m:this.reason;n.abort(A instanceof wt?A:new kc(A instanceof Error?A.message:A))}};let u=e&&setTimeout(()=>{u=null,l(new wt(`timeout ${e} of ms exceeded`,wt.ETIMEDOUT))},e);const f=()=>{i&&(u&&clearTimeout(u),u=null,i.forEach(m=>{m.unsubscribe?m.unsubscribe(l):m.removeEventListener("abort",l)}),i=null)};i.forEach(m=>m.addEventListener("abort",l));const{signal:y}=n;return y.unsubscribe=()=>ye.asap(f),y}},fN=function*(i,e){let t=i.byteLength;if(t<e){yield i;return}let n=0,r;for(;n<t;)r=n+e,yield i.slice(n,r),n=r},gN=async function*(i,e){for await(const t of pN(i))yield*fN(t,e)},pN=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const e=i.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},R2=(i,e,t,n)=>{const r=gN(i,e);let l=0,u,f=y=>{u||(u=!0,n&&n(y))};return new ReadableStream({async pull(y){try{const{done:m,value:A}=await r.next();if(m){f(),y.close();return}let E=A.byteLength;if(t){let T=l+=E;t(T)}y.enqueue(new Uint8Array(A))}catch(m){throw f(m),m}},cancel(y){return f(y),r.return()}},{highWaterMark:2})},M2=64*1024,{isFunction:tf}=ye,mN=(({Request:i,Response:e})=>({Request:i,Response:e}))(ye.global),{ReadableStream:D2,TextEncoder:O2}=ye.global,L2=(i,...e)=>{try{return!!i(...e)}catch{return!1}},yN=i=>{i=ye.merge.call({skipUndefined:!0},mN,i);const{fetch:e,Request:t,Response:n}=i,r=e?tf(e):typeof fetch=="function",l=tf(t),u=tf(n);if(!r)return!1;const f=r&&tf(D2),y=r&&(typeof O2=="function"?(M=>R=>M.encode(R))(new O2):async M=>new Uint8Array(await new t(M).arrayBuffer())),m=l&&f&&L2(()=>{let M=!1;const R=new t(Ni.origin,{body:new D2,method:"POST",get duplex(){return M=!0,"half"}}).headers.has("Content-Type");return M&&!R}),A=u&&f&&L2(()=>ye.isReadableStream(new n("").body)),E={stream:A&&(M=>M.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(M=>{!E[M]&&(E[M]=(R,L)=>{let k=R&&R[M];if(k)return k.call(R);throw new wt(`Response type '${M}' is not supported`,wt.ERR_NOT_SUPPORT,L)})});const T=async M=>{if(M==null)return 0;if(ye.isBlob(M))return M.size;if(ye.isSpecCompliantForm(M))return(await new t(Ni.origin,{method:"POST",body:M}).arrayBuffer()).byteLength;if(ye.isArrayBufferView(M)||ye.isArrayBuffer(M))return M.byteLength;if(ye.isURLSearchParams(M)&&(M=M+""),ye.isString(M))return(await y(M)).byteLength},N=async(M,R)=>{const L=ye.toFiniteNumber(M.getContentLength());return L??T(R)};return async M=>{let{url:R,method:L,data:k,signal:P,cancelToken:j,timeout:U,onDownloadProgress:G,onUploadProgress:Y,responseType:V,headers:ie,withCredentials:Q="same-origin",fetchOptions:be}=AE(M),we=e||fetch;V=V?(V+"").toLowerCase():"text";let oe=dN([P,j&&j.toAbortSignal()],U),Ee=null;const Se=oe&&oe.unsubscribe&&(()=>{oe.unsubscribe()});let ae;try{if(Y&&m&&L!=="get"&&L!=="head"&&(ae=await N(ie,k))!==0){let $=new t(R,{method:"POST",body:k,duplex:"half"}),ue;if(ye.isFormData(k)&&(ue=$.headers.get("content-type"))&&ie.setContentType(ue),$.body){const[Ce,Oe]=T2(ae,Nf(I2(Y)));k=R2($.body,M2,Ce,Oe)}}ye.isString(Q)||(Q=Q?"include":"omit");const K=l&&"credentials"in t.prototype,re={...be,signal:oe,method:L.toUpperCase(),headers:ie.normalize().toJSON(),body:k,duplex:"half",credentials:K?Q:void 0};Ee=l&&new t(R,re);let Ie=await(l?we(Ee,be):we(R,re));const Ue=A&&(V==="stream"||V==="response");if(A&&(G||Ue&&Se)){const $={};["status","statusText","headers"].forEach(Ve=>{$[Ve]=Ie[Ve]});const ue=ye.toFiniteNumber(Ie.headers.get("content-length")),[Ce,Oe]=G&&T2(ue,Nf(I2(G),!0))||[];Ie=new n(R2(Ie.body,M2,Ce,()=>{Oe&&Oe(),Se&&Se()}),$)}V=V||"text";let Je=await E[ye.findKey(E,V)||"text"](Ie,M);return!Ue&&Se&&Se(),await new Promise(($,ue)=>{xE($,ue,{data:Je,headers:rs.from(Ie.headers),status:Ie.status,statusText:Ie.statusText,config:M,request:Ee})})}catch(K){throw Se&&Se(),K&&K.name==="TypeError"&&/Load failed|fetch/i.test(K.message)?Object.assign(new wt("Network Error",wt.ERR_NETWORK,M,Ee),{cause:K.cause||K}):wt.from(K,K&&K.code,M,Ee)}}},xN=new Map,wE=i=>{let e=i&&i.env||{};const{fetch:t,Request:n,Response:r}=e,l=[n,r,t];let u=l.length,f=u,y,m,A=xN;for(;f--;)y=l[f],m=A.get(y),m===void 0&&A.set(y,m=f?new Map:yN(e)),A=m;return m};wE();const nm={http:kI,xhr:hN,fetch:{get:wE}};ye.forEach(nm,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const k2=i=>`- ${i}`,bN=i=>ye.isFunction(i)||i===null||i===!1;function AN(i,e){i=ye.isArray(i)?i:[i];const{length:t}=i;let n,r;const l={};for(let u=0;u<t;u++){n=i[u];let f;if(r=n,!bN(n)&&(r=nm[(f=String(n)).toLowerCase()],r===void 0))throw new wt(`Unknown adapter '${f}'`);if(r&&(ye.isFunction(r)||(r=r.get(e))))break;l[f||"#"+u]=r}if(!r){const u=Object.entries(l).map(([y,m])=>`adapter ${y} `+(m===!1?"is not supported by the environment":"is not available in the build"));let f=t?u.length>1?`since :
`+u.map(k2).join(`
`):" "+k2(u[0]):"as no adapter specified";throw new wt("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return r}const EE={getAdapter:AN,adapters:nm};function N1(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new kc(null,i)}function P2(i){return N1(i),i.headers=rs.from(i.headers),i.data=I1.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),EE.getAdapter(i.adapter||yh.adapter,i)(i).then(function(n){return N1(i),n.data=I1.call(i,i.transformResponse,n),n.headers=rs.from(n.headers),n},function(n){return yE(n)||(N1(i),n&&n.response&&(n.response.data=I1.call(i,i.transformResponse,n.response),n.response.headers=rs.from(n.response.headers))),Promise.reject(n)})}const vE="1.13.2",a0={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{a0[i]=function(n){return typeof n===i||"a"+(e<1?"n ":" ")+i}});const B2={};a0.transitional=function(e,t,n){function r(l,u){return"[Axios v"+vE+"] Transitional option '"+l+"'"+u+(n?". "+n:"")}return(l,u,f)=>{if(e===!1)throw new wt(r(u," has been removed"+(t?" in "+t:"")),wt.ERR_DEPRECATED);return t&&!B2[u]&&(B2[u]=!0,console.warn(r(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,u,f):!0}};a0.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function wN(i,e,t){if(typeof i!="object")throw new wt("options must be an object",wt.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let r=n.length;for(;r-- >0;){const l=n[r],u=e[l];if(u){const f=i[l],y=f===void 0||u(f,l,i);if(y!==!0)throw new wt("option "+l+" must be "+y,wt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new wt("Unknown option "+l,wt.ERR_BAD_OPTION)}}const bf={assertOptions:wN,validators:a0},Nr=bf.validators;let cl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new C2,response:new C2}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const l=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=hl(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:l}=t;n!==void 0&&bf.assertOptions(n,{silentJSONParsing:Nr.transitional(Nr.boolean),forcedJSONParsing:Nr.transitional(Nr.boolean),clarifyTimeoutError:Nr.transitional(Nr.boolean)},!1),r!=null&&(ye.isFunction(r)?t.paramsSerializer={serialize:r}:bf.assertOptions(r,{encode:Nr.function,serialize:Nr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),bf.assertOptions(t,{baseUrl:Nr.spelling("baseURL"),withXsrfToken:Nr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=l&&ye.merge(l.common,l[t.method]);l&&ye.forEach(["delete","get","head","post","put","patch","common"],M=>{delete l[M]}),t.headers=rs.concat(u,l);const f=[];let y=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(t)===!1||(y=y&&R.synchronous,f.unshift(R.fulfilled,R.rejected))});const m=[];this.interceptors.response.forEach(function(R){m.push(R.fulfilled,R.rejected)});let A,E=0,T;if(!y){const M=[P2.bind(this),void 0];for(M.unshift(...f),M.push(...m),T=M.length,A=Promise.resolve(t);E<T;)A=A.then(M[E++],M[E++]);return A}T=f.length;let N=t;for(;E<T;){const M=f[E++],R=f[E++];try{N=M(N)}catch(L){R.call(this,L);break}}try{A=P2.call(this,N)}catch(M){return Promise.reject(M)}for(E=0,T=m.length;E<T;)A=A.then(m[E++],m[E++]);return A}getUri(e){e=hl(this.defaults,e);const t=bE(e.baseURL,e.url,e.allowAbsoluteUrls);return gE(t,e.params,e.paramsSerializer)}};ye.forEach(["delete","get","head","options"],function(e){cl.prototype[e]=function(t,n){return this.request(hl(n||{},{method:e,url:t,data:(n||{}).data}))}});ye.forEach(["post","put","patch"],function(e){function t(n){return function(l,u,f){return this.request(hl(f||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:u}))}}cl.prototype[e]=t(),cl.prototype[e+"Form"]=t(!0)});let EN=class SE{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const n=this;this.promise.then(r=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](r);n._listeners=null}),this.promise.then=r=>{let l;const u=new Promise(f=>{n.subscribe(f),l=f}).then(r);return u.cancel=function(){n.unsubscribe(l)},u},e(function(l,u,f){n.reason||(n.reason=new kc(l,u,f),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new SE(function(r){e=r}),cancel:e}}};function vN(i){return function(t){return i.apply(null,t)}}function SN(i){return ye.isObject(i)&&i.isAxiosError===!0}const pp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(pp).forEach(([i,e])=>{pp[e]=i});function CE(i){const e=new cl(i),t=nE(cl.prototype.request,e);return ye.extend(t,cl.prototype,e,{allOwnKeys:!0}),ye.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return CE(hl(i,r))},t}const Jn=CE(yh);Jn.Axios=cl;Jn.CanceledError=kc;Jn.CancelToken=EN;Jn.isCancel=yE;Jn.VERSION=vE;Jn.toFormData=r0;Jn.AxiosError=wt;Jn.Cancel=Jn.CanceledError;Jn.all=function(e){return Promise.all(e)};Jn.spread=vN;Jn.isAxiosError=SN;Jn.mergeConfig=hl;Jn.AxiosHeaders=rs;Jn.formToJSON=i=>mE(ye.isHTMLForm(i)?new FormData(i):i);Jn.getAdapter=EE.getAdapter;Jn.HttpStatusCode=pp;Jn.default=Jn;const{Axios:lk,AxiosError:ck,CanceledError:uk,isCancel:hk,CancelToken:dk,VERSION:fk,all:gk,Cancel:pk,isAxiosError:mk,spread:yk,toFormData:xk,AxiosHeaders:bk,HttpStatusCode:Ak,formToJSON:wk,getAdapter:Ek,mergeConfig:vk}=Jn,CN=()=>{};var F2={};const _E=function(i){const e=[];let t=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},_N=function(i){const e=[];let t=0,n=0;for(;t<i.length;){const r=i[t++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const l=i[t++];e[n++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=i[t++],u=i[t++],f=i[t++],y=((r&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[n++]=String.fromCharCode(55296+(y>>10)),e[n++]=String.fromCharCode(56320+(y&1023))}else{const l=i[t++],u=i[t++];e[n++]=String.fromCharCode((r&15)<<12|(l&63)<<6|u&63)}}return e.join("")},TE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){const l=i[r],u=r+1<i.length,f=u?i[r+1]:0,y=r+2<i.length,m=y?i[r+2]:0,A=l>>2,E=(l&3)<<4|f>>4;let T=(f&15)<<2|m>>6,N=m&63;y||(N=64,u||(T=64)),n.push(t[A],t[E],t[T],t[N])}return n.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(_E(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):_N(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){const l=t[i.charAt(r++)],f=r<i.length?t[i.charAt(r)]:0;++r;const m=r<i.length?t[i.charAt(r)]:64;++r;const E=r<i.length?t[i.charAt(r)]:64;if(++r,l==null||f==null||m==null||E==null)throw new TN;const T=l<<2|f>>4;if(n.push(T),m!==64){const N=f<<4&240|m>>2;if(n.push(N),E!==64){const M=m<<6&192|E;n.push(M)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class TN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IN=function(i){const e=_E(i);return TE.encodeByteArray(e,!0)},Rf=function(i){return IN(i).replace(/\./g,"")},IE=function(i){try{return TE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function NN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const RN=()=>NN().__FIREBASE_DEFAULTS__,MN=()=>{if(typeof process>"u"||typeof F2>"u")return;const i=F2.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},DN=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&IE(i[1]);return e&&JSON.parse(e)},im=()=>{try{return CN()||RN()||MN()||DN()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},NE=i=>im()?.emulatorHosts?.[i],ON=i=>{const e=NE(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},RE=()=>im()?.config,ME=i=>im()?.[`_${i}`];class LN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}function xh(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function DE(i){return(await fetch(i,{credentials:"include"})).ok}function kN(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",r=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Rf(JSON.stringify(t)),Rf(JSON.stringify(u)),""].join(".")}const Wu={};function PN(){const i={prod:[],emulator:[]};for(const e of Object.keys(Wu))Wu[e]?i.emulator.push(e):i.prod.push(e);return i}function BN(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let j2=!1;function OE(i,e){if(typeof window>"u"||typeof document>"u"||!xh(window.location.host)||Wu[i]===e||Wu[i]||j2)return;Wu[i]=e;function t(T){return`__firebase__banner__${T}`}const n="__firebase__banner",l=PN().prod.length>0;function u(){const T=document.getElementById(n);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function y(T,N){T.setAttribute("width","24"),T.setAttribute("id",N),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{j2=!0,u()},T}function A(T,N){T.setAttribute("id",N),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=BN(n),N=t("text"),M=document.getElementById(N)||document.createElement("span"),R=t("learnmore"),L=document.getElementById(R)||document.createElement("a"),k=t("preprendIcon"),P=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const j=T.element;f(j),A(L,R);const U=m();y(P,k),j.append(P,M,L,U),document.body.appendChild(j)}l?(M.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Hi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hi())}function jN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UN(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function zN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HN(){const i=Hi();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function VN(){try{return typeof indexedDB=="object"}catch{return!1}}function GN(){return new Promise((i,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}const YN="FirebaseError";class Ca extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=YN,Object.setPrototypeOf(this,Ca.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bh.prototype.create)}}class bh{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],u=l?XN(l,n):"Error",f=`${this.serviceName}: ${u} (${r}).`;return new Ca(r,f,n)}}function XN(i,e){return i.replace(qN,(t,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const qN=/\{\$([^}]+)}/g;function WN(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Cc(i,e){if(i===e)return!0;const t=Object.keys(i),n=Object.keys(e);for(const r of t){if(!n.includes(r))return!1;const l=i[r],u=e[r];if(U2(l)&&U2(u)){if(!Cc(l,u))return!1}else if(l!==u)return!1}for(const r of n)if(!t.includes(r))return!1;return!0}function U2(i){return i!==null&&typeof i=="object"}function Ah(i){const e=[];for(const[t,n]of Object.entries(i))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Hu(i){const e={};return i.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,l]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(l)}}),e}function Vu(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function KN(i,e){const t=new QN(i,e);return t.subscribe.bind(t)}class QN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");ZN(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:n},r.next===void 0&&(r.next=R1),r.error===void 0&&(r.error=R1),r.complete===void 0&&(r.complete=R1);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZN(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function R1(){}function Vr(i){return i&&i._delegate?i._delegate:i}class dl{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Jo="[DEFAULT]";class $N{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new LN;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eR(e))try{this.getOrInitializeService({instanceIdentifier:Jo})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});n.resolve(l)}catch{}}}}clearInstance(e=Jo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jo){return this.instances.has(e)}getOptions(e=Jo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);n===f&&u.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const l=this.instances.get(n);return l&&e(l,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:JN(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Jo){return this.component?this.component.multipleInstances?e:Jo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JN(i){return i===Jo?void 0:i}function eR(i){return i.instantiationMode==="EAGER"}class tR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $N(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var xn;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(xn||(xn={}));const nR={debug:xn.DEBUG,verbose:xn.VERBOSE,info:xn.INFO,warn:xn.WARN,error:xn.ERROR,silent:xn.SILENT},iR=xn.INFO,sR={[xn.DEBUG]:"log",[xn.VERBOSE]:"log",[xn.INFO]:"info",[xn.WARN]:"warn",[xn.ERROR]:"error"},rR=(i,e,...t)=>{if(e<i.logLevel)return;const n=new Date().toISOString(),r=sR[e];if(r)console[r](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class LE{constructor(e){this.name=e,this._logLevel=iR,this._logHandler=rR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xn.DEBUG,...e),this._logHandler(this,xn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xn.VERBOSE,...e),this._logHandler(this,xn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xn.INFO,...e),this._logHandler(this,xn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xn.WARN,...e),this._logHandler(this,xn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xn.ERROR,...e),this._logHandler(this,xn.ERROR,...e)}}const aR=(i,e)=>e.some(t=>i instanceof t);let z2,H2;function oR(){return z2||(z2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lR(){return H2||(H2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kE=new WeakMap,mp=new WeakMap,PE=new WeakMap,M1=new WeakMap,sm=new WeakMap;function cR(i){const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("success",l),i.removeEventListener("error",u)},l=()=>{t(bo(i.result)),r()},u=()=>{n(i.error),r()};i.addEventListener("success",l),i.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&kE.set(t,i)}).catch(()=>{}),sm.set(e,i),e}function uR(i){if(mp.has(i))return;const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",u),i.removeEventListener("abort",u)},l=()=>{t(),r()},u=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",l),i.addEventListener("error",u),i.addEventListener("abort",u)});mp.set(i,e)}let yp={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return mp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||PE.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bo(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function hR(i){yp=i(yp)}function dR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=i.call(D1(this),e,...t);return PE.set(n,e.sort?e.sort():[e]),bo(n)}:lR().includes(i)?function(...e){return i.apply(D1(this),e),bo(kE.get(this))}:function(...e){return bo(i.apply(D1(this),e))}}function fR(i){return typeof i=="function"?dR(i):(i instanceof IDBTransaction&&uR(i),aR(i,oR())?new Proxy(i,yp):i)}function bo(i){if(i instanceof IDBRequest)return cR(i);if(M1.has(i))return M1.get(i);const e=fR(i);return e!==i&&(M1.set(i,e),sm.set(e,i)),e}const D1=i=>sm.get(i);function gR(i,e,{blocked:t,upgrade:n,blocking:r,terminated:l}={}){const u=indexedDB.open(i,e),f=bo(u);return n&&u.addEventListener("upgradeneeded",y=>{n(bo(u.result),y.oldVersion,y.newVersion,bo(u.transaction),y)}),t&&u.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),f.then(y=>{l&&y.addEventListener("close",()=>l()),r&&y.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const pR=["get","getKey","getAll","getAllKeys","count"],mR=["put","add","delete","clear"],O1=new Map;function V2(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(O1.get(e))return O1.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=mR.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||pR.includes(t)))return;const l=async function(u,...f){const y=this.transaction(u,r?"readwrite":"readonly");let m=y.store;return n&&(m=m.index(f.shift())),(await Promise.all([m[t](...f),r&&y.done]))[0]};return O1.set(e,l),l}hR(i=>({...i,get:(e,t,n)=>V2(e,t)||i.get(e,t,n),has:(e,t)=>!!V2(e,t)||i.has(e,t)}));class yR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xR(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function xR(i){return i.getComponent()?.type==="VERSION"}const xp="@firebase/app",G2="0.14.6";const wa=new LE("@firebase/app"),bR="@firebase/app-compat",AR="@firebase/analytics-compat",wR="@firebase/analytics",ER="@firebase/app-check-compat",vR="@firebase/app-check",SR="@firebase/auth",CR="@firebase/auth-compat",_R="@firebase/database",TR="@firebase/data-connect",IR="@firebase/database-compat",NR="@firebase/functions",RR="@firebase/functions-compat",MR="@firebase/installations",DR="@firebase/installations-compat",OR="@firebase/messaging",LR="@firebase/messaging-compat",kR="@firebase/performance",PR="@firebase/performance-compat",BR="@firebase/remote-config",FR="@firebase/remote-config-compat",jR="@firebase/storage",UR="@firebase/storage-compat",zR="@firebase/firestore",HR="@firebase/ai",VR="@firebase/firestore-compat",GR="firebase",YR="12.6.0";const bp="[DEFAULT]",XR={[xp]:"fire-core",[bR]:"fire-core-compat",[wR]:"fire-analytics",[AR]:"fire-analytics-compat",[vR]:"fire-app-check",[ER]:"fire-app-check-compat",[SR]:"fire-auth",[CR]:"fire-auth-compat",[_R]:"fire-rtdb",[TR]:"fire-data-connect",[IR]:"fire-rtdb-compat",[NR]:"fire-fn",[RR]:"fire-fn-compat",[MR]:"fire-iid",[DR]:"fire-iid-compat",[OR]:"fire-fcm",[LR]:"fire-fcm-compat",[kR]:"fire-perf",[PR]:"fire-perf-compat",[BR]:"fire-rc",[FR]:"fire-rc-compat",[jR]:"fire-gcs",[UR]:"fire-gcs-compat",[zR]:"fire-fst",[VR]:"fire-fst-compat",[HR]:"fire-vertex","fire-js":"fire-js",[GR]:"fire-js-all"};const Mf=new Map,qR=new Map,Ap=new Map;function Y2(i,e){try{i.container.addComponent(e)}catch(t){wa.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function _c(i){const e=i.name;if(Ap.has(e))return wa.debug(`There were multiple attempts to register component ${e}.`),!1;Ap.set(e,i);for(const t of Mf.values())Y2(t,i);for(const t of qR.values())Y2(t,i);return!0}function rm(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function rr(i){return i==null?!1:i.settings!==void 0}const WR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ao=new bh("app","Firebase",WR);class KR{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new dl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ao.create("app-deleted",{appName:this._name})}}const Pc=YR;function BE(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const n={name:bp,automaticDataCollectionEnabled:!0,...e},r=n.name;if(typeof r!="string"||!r)throw Ao.create("bad-app-name",{appName:String(r)});if(t||(t=RE()),!t)throw Ao.create("no-options");const l=Mf.get(r);if(l){if(Cc(t,l.options)&&Cc(n,l.config))return l;throw Ao.create("duplicate-app",{appName:r})}const u=new tR(r);for(const y of Ap.values())u.addComponent(y);const f=new KR(t,n,u);return Mf.set(r,f),f}function FE(i=bp){const e=Mf.get(i);if(!e&&i===bp&&RE())return BE();if(!e)throw Ao.create("no-app",{appName:i});return e}function wo(i,e,t){let n=XR[i]??i;t&&(n+=`-${t}`);const r=n.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const u=[`Unable to register library "${n}" with version "${e}":`];r&&u.push(`library name "${n}" contains illegal characters (whitespace or "/")`),r&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wa.warn(u.join(" "));return}_c(new dl(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const QR="firebase-heartbeat-database",ZR=1,ih="firebase-heartbeat-store";let L1=null;function jE(){return L1||(L1=gR(QR,ZR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ih)}catch(t){console.warn(t)}}}}).catch(i=>{throw Ao.create("idb-open",{originalErrorMessage:i.message})})),L1}async function $R(i){try{const t=(await jE()).transaction(ih),n=await t.objectStore(ih).get(UE(i));return await t.done,n}catch(e){if(e instanceof Ca)wa.warn(e.message);else{const t=Ao.create("idb-get",{originalErrorMessage:e?.message});wa.warn(t.message)}}}async function X2(i,e){try{const n=(await jE()).transaction(ih,"readwrite");await n.objectStore(ih).put(e,UE(i)),await n.done}catch(t){if(t instanceof Ca)wa.warn(t.message);else{const n=Ao.create("idb-set",{originalErrorMessage:t?.message});wa.warn(n.message)}}}function UE(i){return`${i.name}!${i.options.appId}`}const JR=1024,eM=30;class tM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new iM(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=q2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(r=>r.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>eM){const r=sM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){wa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=q2(),{heartbeatsToSend:t,unsentEntries:n}=nM(this._heartbeatsCache.heartbeats),r=Rf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return wa.warn(e),""}}}function q2(){return new Date().toISOString().substring(0,10)}function nM(i,e=JR){const t=[];let n=i.slice();for(const r of i){const l=t.find(u=>u.agent===r.agent);if(l){if(l.dates.push(r.date),W2(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),W2(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class iM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VN()?GN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await $R(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return X2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return X2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function W2(i){return Rf(JSON.stringify({version:2,heartbeats:i})).length}function sM(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let n=1;n<i.length;n++)i[n].date<t&&(t=i[n].date,e=n);return e}function rM(i){_c(new dl("platform-logger",e=>new yR(e),"PRIVATE")),_c(new dl("heartbeat",e=>new tM(e),"PRIVATE")),wo(xp,G2,i),wo(xp,G2,"esm2020"),wo("fire-js","")}rM("");var aM="firebase",oM="12.6.0";wo(aM,oM,"app");function zE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lM=zE,HE=new bh("auth","Firebase",zE());const Df=new LE("@firebase/auth");function cM(i,...e){Df.logLevel<=xn.WARN&&Df.warn(`Auth (${Pc}): ${i}`,...e)}function Af(i,...e){Df.logLevel<=xn.ERROR&&Df.error(`Auth (${Pc}): ${i}`,...e)}function cr(i,...e){throw am(i,...e)}function jr(i,...e){return am(i,...e)}function VE(i,e,t){const n={...lM(),[e]:t};return new bh("auth","Firebase",n).create(e,{appName:i.name})}function Eo(i){return VE(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function am(i,...e){if(typeof i!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(t,...n)}return HE.create(i,...e)}function lt(i,e,...t){if(!i)throw am(e,...t)}function ma(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Af(e),new Error(e)}function Ea(i,e){i||ma(e)}function wp(){return typeof self<"u"&&self.location?.href||""}function uM(){return K2()==="http:"||K2()==="https:"}function K2(){return typeof self<"u"&&self.location?.protocol||null}function hM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uM()||UN()||"connection"in navigator)?navigator.onLine:!0}function dM(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class wh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ea(t>e,"Short delay should be less than long delay!"),this.isMobile=FN()||zN()}get(){return hM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function om(i,e){Ea(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class GE{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ma("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ma("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ma("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const gM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pM=new wh(3e4,6e4);function xl(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function To(i,e,t,n,r={}){return YE(i,r,async()=>{let l={},u={};n&&(e==="GET"?u=n:l={body:JSON.stringify(n)});const f=Ah({key:i.config.apiKey,...u}).slice(1),y=await i._getAdditionalHeaders();y["Content-Type"]="application/json",i.languageCode&&(y["X-Firebase-Locale"]=i.languageCode);const m={method:e,headers:y,...l};return jN()||(m.referrerPolicy="no-referrer"),i.emulatorConfig&&xh(i.emulatorConfig.host)&&(m.credentials="include"),GE.fetch()(await XE(i,i.config.apiHost,t,f),m)})}async function YE(i,e,t){i._canInitEmulator=!1;const n={...fM,...e};try{const r=new yM(i),l=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw nf(i,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[y,m]=f.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(i,"credential-already-in-use",u);if(y==="EMAIL_EXISTS")throw nf(i,"email-already-in-use",u);if(y==="USER_DISABLED")throw nf(i,"user-disabled",u);const A=n[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw VE(i,A,m);cr(i,A)}}catch(r){if(r instanceof Ca)throw r;cr(i,"network-request-failed",{message:String(r)})}}async function o0(i,e,t,n,r={}){const l=await To(i,e,t,n,r);return"mfaPendingCredential"in l&&cr(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function XE(i,e,t,n){const r=`${e}${t}?${n}`,l=i,u=l.config.emulator?om(i.config,r):`${i.config.apiScheme}://${r}`;return gM.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function mM(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(jr(this.auth,"network-request-failed")),pM.get())})}}function nf(i,e,t){const n={appName:i.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const r=jr(i,e,n);return r.customData._tokenResponse=t,r}function Q2(i){return i!==void 0&&i.enterprise!==void 0}class xM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return mM(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bM(i,e){return To(i,"GET","/v2/recaptchaConfig",xl(i,e))}async function AM(i,e){return To(i,"POST","/v1/accounts:delete",e)}async function Of(i,e){return To(i,"POST","/v1/accounts:lookup",e)}function Ku(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wM(i,e=!1){const t=Vr(i),n=await t.getIdToken(e),r=lm(n);lt(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const l=typeof r.firebase=="object"?r.firebase:void 0,u=l?.sign_in_provider;return{claims:r,token:n,authTime:Ku(k1(r.auth_time)),issuedAtTime:Ku(k1(r.iat)),expirationTime:Ku(k1(r.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function k1(i){return Number(i)*1e3}function lm(i){const[e,t,n]=i.split(".");if(e===void 0||t===void 0||n===void 0)return Af("JWT malformed, contained fewer than 3 sections"),null;try{const r=IE(t);return r?JSON.parse(r):(Af("Failed to decode base64 JWT payload"),null)}catch(r){return Af("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Z2(i){const e=lm(i);return lt(e,"internal-error"),lt(typeof e.exp<"u","internal-error"),lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function sh(i,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Ca&&EM(n)&&i.auth.currentUser===i&&await i.auth.signOut(),n}}function EM({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class vM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ep{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ku(this.lastLoginAt),this.creationTime=Ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Lf(i){const e=i.auth,t=await i.getIdToken(),n=await sh(i,Of(e,{idToken:t}));lt(n?.users.length,e,"internal-error");const r=n.users[0];i._notifyReloadListener(r);const l=r.providerUserInfo?.length?qE(r.providerUserInfo):[],u=CM(i.providerData,l),f=i.isAnonymous,y=!(i.email&&r.passwordHash)&&!u?.length,m=f?y:!1,A={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:u,metadata:new Ep(r.createdAt,r.lastLoginAt),isAnonymous:m};Object.assign(i,A)}async function SM(i){const e=Vr(i);await Lf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CM(i,e){return[...i.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function qE(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function _M(i,e){const t=await YE(i,{},async()=>{const n=Ah({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:l}=i.config,u=await XE(i,r,"/v1/token",`key=${l}`),f=await i._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:f,body:n};return i.emulatorConfig&&xh(i.emulatorConfig.host)&&(y.credentials="include"),GE.fetch()(u,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function TM(i,e){return To(i,"POST","/v2/accounts:revokeToken",xl(i,e))}class gc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){lt(e.idToken,"internal-error"),lt(typeof e.idToken<"u","internal-error"),lt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Z2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){lt(e.length!==0,"internal-error");const t=Z2(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(lt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:l}=await _M(e,t);this.updateTokensAndExpiration(n,r,Number(l))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:l}=t,u=new gc;return n&&(lt(typeof n=="string","internal-error",{appName:e}),u.refreshToken=n),r&&(lt(typeof r=="string","internal-error",{appName:e}),u.accessToken=r),l&&(lt(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gc,this.toJSON())}_performRefresh(){return ma("not implemented")}}function co(i,e){lt(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class or{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId="firebase",this.proactiveRefresh=new vM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Ep(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await sh(this,this.stsTokenManager.getToken(this.auth,e));return lt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return wM(this,e)}reload(){return SM(this)}_assign(e){this!==e&&(lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new or({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Lf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rr(this.auth.app))return Promise.reject(Eo(this.auth));const e=await this.getIdToken();return await sh(this,AM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,y=t._redirectEventId??void 0,m=t.createdAt??void 0,A=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:N,providerData:M,stsTokenManager:R}=t;lt(E&&R,e,"internal-error");const L=gc.fromJSON(this.name,R);lt(typeof E=="string",e,"internal-error"),co(n,e.name),co(r,e.name),lt(typeof T=="boolean",e,"internal-error"),lt(typeof N=="boolean",e,"internal-error"),co(l,e.name),co(u,e.name),co(f,e.name),co(y,e.name),co(m,e.name),co(A,e.name);const k=new or({uid:E,auth:e,email:r,emailVerified:T,displayName:n,isAnonymous:N,photoURL:u,phoneNumber:l,tenantId:f,stsTokenManager:L,createdAt:m,lastLoginAt:A});return M&&Array.isArray(M)&&(k.providerData=M.map(P=>({...P}))),y&&(k._redirectEventId=y),k}static async _fromIdTokenResponse(e,t,n=!1){const r=new gc;r.updateFromServerResponse(t);const l=new or({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Lf(l),l}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];lt(r.localId!==void 0,"internal-error");const l=r.providerUserInfo!==void 0?qE(r.providerUserInfo):[],u=!(r.email&&r.passwordHash)&&!l?.length,f=new gc;f.updateFromIdToken(n);const y=new or({uid:r.localId,auth:e,stsTokenManager:f,isAnonymous:u}),m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new Ep(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!l?.length};return Object.assign(y,m),y}}const $2=new Map;function ya(i){Ea(i instanceof Function,"Expected a class definition");let e=$2.get(i);return e?(Ea(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,$2.set(i,e),e)}class WE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}WE.type="NONE";const J2=WE;function wf(i,e,t){return`firebase:${i}:${e}:${t}`}class pc{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:l}=this.auth;this.fullUserKey=wf(this.userKey,r.apiKey,l),this.fullPersistenceKey=wf("persistence",r.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Of(this.auth,{idToken:e}).catch(()=>{});return t?or._fromGetAccountInfoResponse(this.auth,t,e):null}return or._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new pc(ya(J2),e,n);const r=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=r[0]||ya(J2);const u=wf(n,e.config.apiKey,e.name);let f=null;for(const m of t)try{const A=await m._get(u);if(A){let E;if(typeof A=="string"){const T=await Of(e,{idToken:A}).catch(()=>{});if(!T)break;E=await or._fromGetAccountInfoResponse(e,T,A)}else E=or._fromJSON(e,A);m!==l&&(f=E),l=m;break}}catch{}const y=r.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new pc(l,e,n):(l=y[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(u)}catch{}})),new pc(l,e,n))}}function eA(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($E(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ev(e))return"Blackberry";if(tv(e))return"Webos";if(QE(e))return"Safari";if((e.includes("chrome/")||ZE(e))&&!e.includes("edge/"))return"Chrome";if(JE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(t);if(n?.length===2)return n[1]}return"Other"}function KE(i=Hi()){return/firefox\//i.test(i)}function QE(i=Hi()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZE(i=Hi()){return/crios\//i.test(i)}function $E(i=Hi()){return/iemobile/i.test(i)}function JE(i=Hi()){return/android/i.test(i)}function ev(i=Hi()){return/blackberry/i.test(i)}function tv(i=Hi()){return/webos/i.test(i)}function cm(i=Hi()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function IM(i=Hi()){return cm(i)&&!!window.navigator?.standalone}function NM(){return HN()&&document.documentMode===10}function nv(i=Hi()){return cm(i)||JE(i)||tv(i)||ev(i)||/windows phone/i.test(i)||$E(i)}function iv(i,e=[]){let t;switch(i){case"Browser":t=eA(Hi());break;case"Worker":t=`${eA(Hi())}-${i}`;break;default:t=i}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pc}/${n}`}class RM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=l=>new Promise((u,f)=>{try{const y=e(l);u(y)}catch(y){f(y)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function MM(i,e={}){return To(i,"GET","/v2/passwordPolicy",xl(i,e))}const DM=6;class OM{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??DM,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class LM{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tA(this),this.idTokenSubscription=new tA(this),this.beforeStateQueue=new RM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ya(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await pc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Of(this,{idToken:e}),n=await or._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(rr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=n?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===u)&&f?.user&&(n=f.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(l){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return lt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Lf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rr(this.app))return Promise.reject(Eo(this));const t=e?Vr(e):null;return t&&lt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&lt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rr(this.app)?Promise.reject(Eo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rr(this.app)?Promise.reject(Eo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ya(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MM(this),t=new OM(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bh("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await TM(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ya(e)||this._popupRedirectResolver;lt(t,this,"argument-error"),this.redirectPersistenceManager=await pc.create(this,[ya(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(lt(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,n,r);return()=>{u=!0,y()}}else{const y=e.addObserver(t);return()=>{u=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&cM(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Bc(i){return Vr(i)}class tA{constructor(e){this.auth=e,this.observer=null,this.addObserver=KN(t=>this.observer=t)}get next(){return lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let l0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kM(i){l0=i}function sv(i){return l0.loadJS(i)}function PM(){return l0.recaptchaEnterpriseScript}function BM(){return l0.gapiScript}function FM(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class jM{constructor(){this.enterprise=new UM}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class UM{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const zM="recaptcha-enterprise",rv="NO_RECAPTCHA";class HM{constructor(e){this.type=zM,this.auth=Bc(e)}async verify(e="verify",t=!1){async function n(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,f)=>{bM(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const m=new xM(y);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,u(m.siteKey)}}).catch(y=>{f(y)})})}function r(l,u,f){const y=window.grecaptcha;Q2(y)?y.enterprise.ready(()=>{y.enterprise.execute(l,{action:e}).then(m=>{u(m)}).catch(()=>{u(rv)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jM().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{n(this.auth).then(f=>{if(!t&&Q2(window.grecaptcha))r(f,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let y=PM();y.length!==0&&(y+=f),sv(y).then(()=>{r(f,l,u)}).catch(m=>{u(m)})}}).catch(f=>{u(f)})})}}async function nA(i,e,t,n=!1,r=!1){const l=new HM(i);let u;if(r)u=rv;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const y=f.phoneEnrollmentInfo.phoneNumber,m=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const y=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return n?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function iA(i,e,t,n,r){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await nA(i,e,t,t==="getOobCode");return n(i,l)}else return n(i,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await nA(i,e,t,t==="getOobCode");return n(i,u)}else return Promise.reject(l)})}function VM(i,e){const t=rm(i,"auth");if(t.isInitialized()){const r=t.getImmediate(),l=t.getOptions();if(Cc(l,e??{}))return r;cr(r,"already-initialized")}return t.initialize({options:e})}function GM(i,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(ya);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(n,e?.popupRedirectResolver)}function YM(i,e,t){const n=Bc(i);lt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!1,l=av(e),{host:u,port:f}=XM(e),y=f===null?"":`:${f}`,m={url:`${l}//${u}${y}/`},A=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!n._canInitEmulator){lt(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),lt(Cc(m,n.config.emulator)&&Cc(A,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=m,n.emulatorConfig=A,n.settings.appVerificationDisabledForTesting=!0,xh(u)?(DE(`${l}//${u}${y}`),OE("Auth",!0)):qM()}function av(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function XM(i){const e=av(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const l=r[1];return{host:l,port:sA(n.substr(l.length+1))}}else{const[l,u]=n.split(":");return{host:l,port:sA(u)}}}function sA(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function qM(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class um{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ma("not implemented")}_getIdTokenResponse(e){return ma("not implemented")}_linkToIdToken(e,t){return ma("not implemented")}_getReauthenticationResolver(e){return ma("not implemented")}}async function WM(i,e){return To(i,"POST","/v1/accounts:signUp",e)}async function KM(i,e){return o0(i,"POST","/v1/accounts:signInWithPassword",xl(i,e))}async function QM(i,e){return o0(i,"POST","/v1/accounts:signInWithEmailLink",xl(i,e))}async function ZM(i,e){return o0(i,"POST","/v1/accounts:signInWithEmailLink",xl(i,e))}class rh extends um{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new rh(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new rh(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iA(e,t,"signInWithPassword",KM);case"emailLink":return QM(e,{email:this._email,oobCode:this._password});default:cr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iA(e,n,"signUpPassword",WM);case"emailLink":return ZM(e,{idToken:t,email:this._email,oobCode:this._password});default:cr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function mc(i,e){return o0(i,"POST","/v1/accounts:signInWithIdp",xl(i,e))}const $M="http://localhost";class fl extends um{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new fl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r,...l}=t;if(!n||!r)return null;const u=new fl(n,r);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return mc(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,mc(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,mc(e,t)}buildRequest(){const e={requestUri:$M,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ah(t)}return e}}function JM(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eD(i){const e=Hu(Vu(i)).link,t=e?Hu(Vu(e)).deep_link_id:null,n=Hu(Vu(i)).deep_link_id;return(n?Hu(Vu(n)).link:null)||n||t||e||i}class hm{constructor(e){const t=Hu(Vu(e)),n=t.apiKey??null,r=t.oobCode??null,l=JM(t.mode??null);lt(n&&r&&l,"argument-error"),this.apiKey=n,this.operation=l,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=eD(e);try{return new hm(t)}catch{return null}}}class Fc{constructor(){this.providerId=Fc.PROVIDER_ID}static credential(e,t){return rh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=hm.parseLink(t);return lt(n,"argument-error"),rh._fromEmailAndCode(e,n.code,n.tenantId)}}Fc.PROVIDER_ID="password";Fc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ov{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Eh extends ov{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fo extends Eh{constructor(){super("facebook.com")}static credential(e){return fl._fromParams({providerId:fo.PROVIDER_ID,signInMethod:fo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fo.credentialFromTaggedObject(e)}static credentialFromError(e){return fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fo.credential(e.oauthAccessToken)}catch{return null}}}fo.FACEBOOK_SIGN_IN_METHOD="facebook.com";fo.PROVIDER_ID="facebook.com";class go extends Eh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return fl._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return go.credential(t,n)}catch{return null}}}go.GOOGLE_SIGN_IN_METHOD="google.com";go.PROVIDER_ID="google.com";class po extends Eh{constructor(){super("github.com")}static credential(e){return fl._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return po.credential(e.oauthAccessToken)}catch{return null}}}po.GITHUB_SIGN_IN_METHOD="github.com";po.PROVIDER_ID="github.com";class mo extends Eh{constructor(){super("twitter.com")}static credential(e,t){return fl._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return mo.credential(t,n)}catch{return null}}}mo.TWITTER_SIGN_IN_METHOD="twitter.com";mo.PROVIDER_ID="twitter.com";class Tc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const l=await or._fromIdTokenResponse(e,n,r),u=rA(n);return new Tc({user:l,providerId:u,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=rA(n);return new Tc({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function rA(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class kf extends Ca{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,kf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new kf(e,t,n,r)}}function lv(i,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?kf._fromErrorAndOperation(i,l,e,n):l})}async function tD(i,e,t=!1){const n=await sh(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Tc._forOperation(i,"link",n)}async function nD(i,e,t=!1){const{auth:n}=i;if(rr(n.app))return Promise.reject(Eo(n));const r="reauthenticate";try{const l=await sh(i,lv(n,r,e,i),t);lt(l.idToken,n,"internal-error");const u=lm(l.idToken);lt(u,n,"internal-error");const{sub:f}=u;return lt(i.uid===f,n,"user-mismatch"),Tc._forOperation(i,r,l)}catch(l){throw l?.code==="auth/user-not-found"&&cr(n,"user-mismatch"),l}}async function cv(i,e,t=!1){if(rr(i.app))return Promise.reject(Eo(i));const n="signIn",r=await lv(i,n,e),l=await Tc._fromIdTokenResponse(i,n,r);return t||await i._updateCurrentUser(l.user),l}async function iD(i,e){return cv(Bc(i),e)}async function sD(i){const e=Bc(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function rD(i,e,t){return rr(i.app)?Promise.reject(Eo(i)):iD(Vr(i),Fc.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&sD(i),n})}function aD(i,e,t,n){return Vr(i).onIdTokenChanged(e,t,n)}function oD(i,e,t){return Vr(i).beforeAuthStateChanged(e,t)}function lD(i,e,t,n){return Vr(i).onAuthStateChanged(e,t,n)}function cD(i){return Vr(i).signOut()}const Pf="__sak";class uv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pf,"1"),this.storage.removeItem(Pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const uD=1e3,hD=10;class hv extends uv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,y)=>{this.notifyListeners(u,y)});return}const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const u=this.storage.getItem(n);!t&&this.localCache[n]===u||this.notifyListeners(n,u)},l=this.storage.getItem(n);NM()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,hD):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},uD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hv.type="LOCAL";const dD=hv;class dv extends uv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}dv.type="SESSION";const fv=dv;function fD(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class c0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const n=new c0(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:l}=t.data,u=this.handlersMap[r];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const f=Array.from(u).map(async m=>m(t.origin,l)),y=await fD(f);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}c0.receivers=[];function dm(i="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return i+t}class gD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let l,u;return new Promise((f,y)=>{const m=dm("",20);r.port1.start();const A=setTimeout(()=>{y(new Error("unsupported_event"))},n);u={messageChannel:r,onMessage(E){const T=E;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(A),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(T.data.response);break;default:clearTimeout(A),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(u),r.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[r.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Ur(){return window}function pD(i){Ur().location.href=i}function gv(){return typeof Ur().WorkerGlobalScope<"u"&&typeof Ur().importScripts=="function"}async function mD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yD(){return navigator?.serviceWorker?.controller||null}function xD(){return gv()?self:null}const pv="firebaseLocalStorageDb",bD=1,Bf="firebaseLocalStorage",mv="fbase_key";class vh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function u0(i,e){return i.transaction([Bf],e?"readwrite":"readonly").objectStore(Bf)}function AD(){const i=indexedDB.deleteDatabase(pv);return new vh(i).toPromise()}function vp(){const i=indexedDB.open(pv,bD);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const n=i.result;try{n.createObjectStore(Bf,{keyPath:mv})}catch(r){t(r)}}),i.addEventListener("success",async()=>{const n=i.result;n.objectStoreNames.contains(Bf)?e(n):(n.close(),await AD(),e(await vp()))})})}async function aA(i,e,t){const n=u0(i,!0).put({[mv]:e,value:t});return new vh(n).toPromise()}async function wD(i,e){const t=u0(i,!1).get(e),n=await new vh(t).toPromise();return n===void 0?null:n.value}function oA(i,e){const t=u0(i,!0).delete(e);return new vh(t).toPromise()}const ED=800,vD=3;class yv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>vD)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=c0._getInstance(xD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await mD(),!this.activeServiceWorker)return;this.sender=new gD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vp();return await aA(e,Pf,"1"),await oA(e,Pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>aA(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>wD(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>oA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const l=u0(r,!1).getAll();return new vh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:r,value:l}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(l)&&(this.notifyListeners(r,l),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ED)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yv.type="LOCAL";const SD=yv;new wh(3e4,6e4);function CD(i,e){return e?ya(e):(lt(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class fm extends um{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return mc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return mc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _D(i){return cv(i.auth,new fm(i),i.bypassAuthState)}function TD(i){const{auth:e,user:t}=i;return lt(t,e,"internal-error"),nD(t,new fm(i),i.bypassAuthState)}async function ID(i){const{auth:e,user:t}=i;return lt(t,e,"internal-error"),tD(t,new fm(i),i.bypassAuthState)}class xv{constructor(e,t,n,r,l=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const y={auth:this.auth,requestUri:t,sessionId:n,tenantId:l||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(y))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _D;case"linkViaPopup":case"linkViaRedirect":return ID;case"reauthViaPopup":case"reauthViaRedirect":return TD;default:cr(this.auth,"internal-error")}}resolve(e){Ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ND=new wh(2e3,1e4);class cc extends xv{constructor(e,t,n,r,l){super(e,t,r,l),this.provider=n,this.authWindow=null,this.pollId=null,cc.currentPopupAction&&cc.currentPopupAction.cancel(),cc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return lt(e,this.auth,"internal-error"),e}async onExecution(){Ea(this.filter.length===1,"Popup operations only handle one event");const e=dm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ND.get())};e()}}cc.currentPopupAction=null;const RD="pendingRedirect",Ef=new Map;class MD extends xv{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Ef.get(this.auth._key());if(!e){try{const n=await DD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Ef.set(this.auth._key(),e)}return this.bypassAuthState||Ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DD(i,e){const t=kD(e),n=LD(i);if(!await n._isAvailable())return!1;const r=await n._get(t)==="true";return await n._remove(t),r}function OD(i,e){Ef.set(i._key(),e)}function LD(i){return ya(i._redirectPersistence)}function kD(i){return wf(RD,i.config.apiKey,i.name)}async function PD(i,e,t=!1){if(rr(i.app))return Promise.reject(Eo(i));const n=Bc(i),r=CD(n,e),u=await new MD(n,r,t).execute();return u&&!t&&(delete u.user._redirectEventId,await n._persistUserIfCurrent(u.user),await n._setRedirectUser(null,e)),u}const BD=600*1e3;class FD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!bv(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(jr(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BD&&this.cachedEventUids.clear(),this.cachedEventUids.has(lA(e))}saveEventToCache(e){this.cachedEventUids.add(lA(e)),this.lastProcessedEventTime=Date.now()}}function lA(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function bv({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function jD(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bv(i);default:return!1}}async function UD(i,e={}){return To(i,"GET","/v1/projects",e)}const zD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HD=/^https?/;async function VD(i){if(i.config.emulator)return;const{authorizedDomains:e}=await UD(i);for(const t of e)try{if(GD(t))return}catch{}cr(i,"unauthorized-domain")}function GD(i){const e=wp(),{protocol:t,hostname:n}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&n===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===n}if(!HD.test(t))return!1;if(zD.test(i))return n===i;const r=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}const YD=new wh(3e4,6e4);function cA(){const i=Ur().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function XD(i){return new Promise((e,t)=>{function n(){cA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cA(),t(jr(i,"network-request-failed"))},timeout:YD.get()})}if(Ur().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ur().gapi?.load)n();else{const r=FM("iframefcb");return Ur()[r]=()=>{gapi.load?n():t(jr(i,"network-request-failed"))},sv(`${BM()}?onload=${r}`).catch(l=>t(l))}}).catch(e=>{throw vf=null,e})}let vf=null;function qD(i){return vf=vf||XD(i),vf}const WD=new wh(5e3,15e3),KD="__/auth/iframe",QD="emulator/auth/iframe",ZD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$D=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JD(i){const e=i.config;lt(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?om(e,QD):`https://${i.config.authDomain}/${KD}`,n={apiKey:e.apiKey,appName:i.name,v:Pc},r=$D.get(i.config.apiHost);r&&(n.eid=r);const l=i._getFrameworks();return l.length&&(n.fw=l.join(",")),`${t}?${Ah(n).slice(1)}`}async function eO(i){const e=await qD(i),t=Ur().gapi;return lt(t,i,"internal-error"),e.open({where:document.body,url:JD(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZD,dontclear:!0},n=>new Promise(async(r,l)=>{await n.restyle({setHideOnLeave:!1});const u=jr(i,"network-request-failed"),f=Ur().setTimeout(()=>{l(u)},WD.get());function y(){Ur().clearTimeout(f),r(n)}n.ping(y).then(y,()=>{l(u)})}))}const tO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nO=500,iO=600,sO="_blank",rO="http://localhost";class uA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aO(i,e,t,n=nO,r=iO){const l=Math.max((window.screen.availHeight-r)/2,0).toString(),u=Math.max((window.screen.availWidth-n)/2,0).toString();let f="";const y={...tO,width:n.toString(),height:r.toString(),top:l,left:u},m=Hi().toLowerCase();t&&(f=ZE(m)?sO:t),KE(m)&&(e=e||rO,y.scrollbars="yes");const A=Object.entries(y).reduce((T,[N,M])=>`${T}${N}=${M},`,"");if(IM(m)&&f!=="_self")return oO(e||"",f),new uA(null);const E=window.open(e||"",f,A);lt(E,i,"popup-blocked");try{E.focus()}catch{}return new uA(E)}function oO(i,e){const t=document.createElement("a");t.href=i,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}const lO="__/auth/handler",cO="emulator/auth/handler",uO=encodeURIComponent("fac");async function hA(i,e,t,n,r,l){lt(i.config.authDomain,i,"auth-domain-config-required"),lt(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:n,v:Pc,eventId:r};if(e instanceof ov){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",WN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[A,E]of Object.entries({}))u[A]=E}if(e instanceof Eh){const A=e.getScopes().filter(E=>E!=="");A.length>0&&(u.scopes=A.join(","))}i.tenantId&&(u.tid=i.tenantId);const f=u;for(const A of Object.keys(f))f[A]===void 0&&delete f[A];const y=await i._getAppCheckToken(),m=y?`#${uO}=${encodeURIComponent(y)}`:"";return`${hO(i)}?${Ah(f).slice(1)}${m}`}function hO({config:i}){return i.emulator?om(i,cO):`https://${i.authDomain}/${lO}`}const P1="webStorageSupport";class dO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fv,this._completeRedirectFn=PD,this._overrideRedirectResult=OD}async _openPopup(e,t,n,r){Ea(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await hA(e,t,n,wp(),r);return aO(e,l,dm())}async _openRedirect(e,t,n,r){await this._originValidation(e);const l=await hA(e,t,n,wp(),r);return pD(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:l}=this.eventManagers[t];return r?Promise.resolve(r):(Ea(l,"If manager is not set, promise should be"),l)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await eO(e),n=new FD(e);return t.register("authEvent",r=>(lt(r?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(P1,{type:P1},r=>{const l=r?.[0]?.[P1];l!==void 0&&t(!!l),cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=VD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nv()||QE()||cm()}}const fO=dO;var dA="@firebase/auth",fA="1.11.1";class gO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pO(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mO(i){_c(new dl("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=n.options;lt(u&&!u.includes(":"),"invalid-api-key",{appName:n.name});const y={apiKey:u,authDomain:f,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iv(i)},m=new LM(n,r,l,y);return GM(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),_c(new dl("auth-internal",e=>{const t=Bc(e.getProvider("auth").getImmediate());return(n=>new gO(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wo(dA,fA,pO(i)),wo(dA,fA,"esm2020")}const yO=300,xO=ME("authIdTokenMaxAge")||yO;let gA=null;const bO=i=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>xO)return;const r=t?.token;gA!==r&&(gA=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function AO(i=FE()){const e=rm(i,"auth");if(e.isInitialized())return e.getImmediate();const t=VM(i,{popupRedirectResolver:fO,persistence:[SD,dD,fv]}),n=ME("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(n,location.origin);if(location.origin===l.origin){const u=bO(l.toString());oD(t,u,()=>u(t.currentUser)),aD(t,f=>u(f))}}const r=NE("auth");return r&&YM(t,`http://${r}`),t}function wO(){return document.getElementsByTagName("head")?.[0]??document}kM({loadJS(i){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",i),n.onload=e,n.onerror=r=>{const l=jr("internal-error");l.customData=r,t(l)},n.type="text/javascript",n.charset="UTF-8",wO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mO("Browser");const Av="firebasestorage.googleapis.com",EO="storageBucket",vO=120*1e3,SO=600*1e3;class Gr extends Ca{constructor(e,t,n=0){super(B1(e),`Firebase Storage: ${t} (${B1(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return B1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zr;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zr||(zr={}));function B1(i){return"storage/"+i}function CO(){const i="An unknown error occurred, please check the error payload for server response.";return new Gr(zr.UNKNOWN,i)}function _O(){return new Gr(zr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function TO(){return new Gr(zr.CANCELED,"User canceled the upload/download.")}function IO(i){return new Gr(zr.INVALID_URL,"Invalid URL '"+i+"'.")}function NO(i){return new Gr(zr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function pA(i){return new Gr(zr.INVALID_ARGUMENT,i)}function wv(){return new Gr(zr.APP_DELETED,"The Firebase app was deleted.")}function RO(i){return new Gr(zr.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class lr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=lr.makeFromUrl(e,t)}catch{return new lr(e,"")}if(n.path==="")return n;throw NO(e)}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";function l(U){U.path.charAt(U.path.length-1)==="/"&&(U.path_=U.path_.slice(0,-1))}const u="(/(.*))?$",f=new RegExp("^gs://"+r+u,"i"),y={bucket:1,path:3};function m(U){U.path_=decodeURIComponent(U.path)}const A="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",N=new RegExp(`^https?://${E}/${A}/b/${r}/o${T}`,"i"),M={bucket:1,path:3},R=t===Av?"(?:storage.googleapis.com|storage.cloud.google.com)":t,L="([^?#]*)",k=new RegExp(`^https?://${R}/${r}/${L}`,"i"),j=[{regex:f,indices:y,postModify:l},{regex:N,indices:M,postModify:m},{regex:k,indices:{bucket:1,path:2},postModify:m}];for(let U=0;U<j.length;U++){const G=j[U],Y=G.regex.exec(e);if(Y){const V=Y[G.indices.bucket];let ie=Y[G.indices.path];ie||(ie=""),n=new lr(V,ie),G.postModify(n);break}}if(n==null)throw IO(e);return n}}class MO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function DO(i,e,t){let n=1,r=null,l=null,u=!1,f=0;function y(){return f===2}let m=!1;function A(...L){m||(m=!0,e.apply(null,L))}function E(L){r=setTimeout(()=>{r=null,i(N,y())},L)}function T(){l&&clearTimeout(l)}function N(L,...k){if(m){T();return}if(L){T(),A.call(null,L,...k);return}if(y()||u){T(),A.call(null,L,...k);return}n<64&&(n*=2);let j;f===1?(f=2,j=0):j=(n+Math.random())*1e3,E(j)}let M=!1;function R(L){M||(M=!0,T(),!m&&(r!==null?(L||(f=2),clearTimeout(r),E(0)):L||(f=1)))}return E(0),l=setTimeout(()=>{u=!0,R(!0)},t),R}function OO(i){i(!1)}function LO(i){return i!==void 0}function mA(i,e,t,n){if(n<e)throw pA(`Invalid value for '${i}'. Expected ${e} or greater.`);if(n>t)throw pA(`Invalid value for '${i}'. Expected ${t} or less.`)}function kO(i){const e=encodeURIComponent;let t="?";for(const n in i)if(i.hasOwnProperty(n)){const r=e(n)+"="+e(i[n]);t=t+r+"&"}return t=t.slice(0,-1),t}var Ff;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Ff||(Ff={}));function PO(i,e){const t=i>=500&&i<600,r=[408,429].indexOf(i)!==-1,l=e.indexOf(i)!==-1;return t||r||l}class BO{constructor(e,t,n,r,l,u,f,y,m,A,E,T=!0,N=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=y,this.timeout_=m,this.progressCallback_=A,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,R)=>{this.resolve_=M,this.reject_=R,this.start_()})}start_(){const e=(n,r)=>{if(r){n(!1,new sf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=f=>{const y=f.loaded,m=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,m)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const f=l.getErrorCode()===Ff.NO_ERROR,y=l.getStatus();if(!f||PO(y,this.additionalRetryCodes_)&&this.retry){const A=l.getErrorCode()===Ff.ABORT;n(!1,new sf(!1,null,A));return}const m=this.successCodes_.indexOf(y)!==-1;n(!0,new sf(m,l))})},t=(n,r)=>{const l=this.resolve_,u=this.reject_,f=r.connection;if(r.wasSuccessCode)try{const y=this.callback_(f,f.getResponse());LO(y)?l(y):l()}catch(y){u(y)}else if(f!==null){const y=CO();y.serverResponse=f.getErrorText(),this.errorCallback_?u(this.errorCallback_(f,y)):u(y)}else if(r.canceled){const y=this.appDelete_?wv():TO();u(y)}else{const y=_O();u(y)}};this.canceled_?t(!1,new sf(!1,null,!0)):this.backoffId_=DO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class sf{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function FO(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function jO(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function UO(i,e){e&&(i["X-Firebase-GMPID"]=e)}function zO(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function HO(i,e,t,n,r,l,u=!0,f=!1){const y=kO(i.urlParams),m=i.url+y,A=Object.assign({},i.headers);return UO(A,e),FO(A,t),jO(A,l),zO(A,n),new BO(m,i.method,A,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,r,u,f)}function VO(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function GO(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}class jf{constructor(e,t){this._service=e,t instanceof lr?this._location=t:this._location=lr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new jf(e,t)}get root(){const e=new lr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GO(this._location.path)}get storage(){return this._service}get parent(){const e=VO(this._location.path);if(e===null)return null;const t=new lr(this._location.bucket,e);return new jf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw RO(e)}}function yA(i,e){const t=e?.[EO];return t==null?null:lr.makeFromBucketSpec(t,i)}function YO(i,e,t,n={}){i.host=`${e}:${t}`;const r=xh(e);r&&(DE(`https://${i.host}/b`),OE("Storage",!0)),i._isUsingEmulator=!0,i._protocol=r?"https":"http";const{mockUserToken:l}=n;l&&(i._overrideAuthToken=typeof l=="string"?l:kN(l,i.app.options.projectId))}class XO{constructor(e,t,n,r,l,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=Av,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vO,this._maxUploadRetryTime=SO,this._requests=new Set,r!=null?this._bucket=lr.makeFromBucketSpec(r,this._host):this._bucket=yA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=lr.makeFromBucketSpec(this._url,e):this._bucket=yA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new jf(this,e)}_makeRequest(e,t,n,r,l=!0){if(this._deleted)return new MO(wv());{const u=HO(e,this._appId,n,r,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const xA="@firebase/storage",bA="0.14.0";const Ev="storage";function qO(i=FE(),e){i=Vr(i);const n=rm(i,Ev).getImmediate({identifier:e}),r=ON("storage");return r&&WO(n,...r),n}function WO(i,e,t,n={}){YO(i,e,t,n)}function KO(i,{instanceIdentifier:e}){const t=i.getProvider("app").getImmediate(),n=i.getProvider("auth-internal"),r=i.getProvider("app-check-internal");return new XO(t,n,r,e,Pc)}function QO(){_c(new dl(Ev,KO,"PUBLIC").setMultipleInstances(!0)),wo(xA,bA,""),wo(xA,bA,"esm2020")}QO();const vv={apiKey:"AIzaSyCz6gX_tWuIQDoLWaw3axANZ8o73rdbDCI",authDomain:"crossmanager-1e21c.firebaseapp.com",projectId:"crossmanager-1e21c",storageBucket:"crossmanager-1e21c.firebasestorage.app",messagingSenderId:"1062603580882",appId:"1:1062603580882:web:2d8cb5e5778e95faf8940b"},Sv=Object.entries(vv).filter(([,i])=>!i).map(([i])=>i),Uf=Sv.length===0;Uf||console.warn(`Firebase  : ${Sv.join(", ")}.   .`);const zf=Uf?BE(vv):void 0,el=zf?AO(zf):void 0;zf&&qO(zf);const ZO="https://asia-northeast3-crossmanager-1e21c.cloudfunctions.net/api/api",Ft=Jn.create({baseURL:ZO,headers:{"Content-Type":"application/json"}});Ft.interceptors.request.use(async i=>{const e=await el?.currentUser?.getIdToken?.();if(e){const t=i.headers??{};t.Authorization=`Bearer ${e}`,i.headers=t}return i},i=>Promise.reject(i));Ft.interceptors.response.use(i=>i,i=>(console.error("API Error:",i),Promise.reject(i)));const Cv=W.createContext(void 0);function $O({children:i}){const[e,t]=W.useState([]),[n,r]=W.useState("ALL"),[l,u]=W.useState(!0),f=async()=>{try{u(!0);const A=await Ft.get("/projects");t(A.data)}catch(A){console.error("Failed to fetch projects:",A)}finally{u(!1)}};W.useEffect(()=>{f()},[]);const y=n==="ALL"?null:e.find(A=>A.id===n)||null,m={projects:e,selectedProjectId:n,selectedProject:y,setSelectedProjectId:r,loading:l,refreshProjects:f};return S.jsx(Cv.Provider,{value:m,children:i})}function _a(){const i=W.useContext(Cv);if(i===void 0)throw new Error("useProject must be used within a ProjectProvider");return i}function Sh(){return S.jsxs("div",{className:"spinner-wrap",children:[S.jsx("div",{className:"spinner"}),S.jsx("p",{className:"muted",children:" ..."})]})}const F1="sms-local-user",_v=W.createContext(null),JO=()=>"https://crossmanager.web.app/login";function e4({children:i}){const[e,t]=W.useState(null),[n,r]=W.useState(!0);W.useEffect(()=>{if(!el){const m=localStorage.getItem(F1);m&&t(JSON.parse(m)),r(!1);return}const y=lD(el,m=>{t(m),r(!1)});return()=>y()},[]);const l=async(y,m)=>{if(el){await rD(el,y,m);return}const A={uid:"local-dev",email:y,displayName:"SMS local user",mock:!0};localStorage.setItem(F1,JSON.stringify(A)),t(A)},u=async()=>{el&&await cD(el),localStorage.removeItem(F1),window.location.replace(JO())},f=W.useMemo(()=>({user:e,loading:n,signIn:l,signOut:u}),[e,n]);return S.jsx(_v.Provider,{value:f,children:i})}function h0(){const i=W.useContext(_v);if(!i)throw new Error("AuthProvider must wrap useAuth.");return i}function Rr({children:i}){const{user:e,loading:t}=h0(),n=Hr();return t?S.jsx(Sh,{}):e?i:S.jsx(Bw,{to:"/login",replace:!0,state:{from:n.pathname}})}function t4(){const{selectedProjectId:i}=_a(),{show:e}=dr(),t=yl(),[n,r]=W.useState({raCount:0,driCount:0,patrolCount:0,openRisks:0}),[l,u]=W.useState([]),[f,y]=W.useState([]),[,m]=W.useState(!0);W.useEffect(()=>{Promise.all([Ft.get("/sms/risk-assessments"),Ft.get("/sms/dris"),Ft.get("/sms/patrols")]).then(([E,T,N])=>{let M=E.data,R=T.data,L=N.data;i!=="ALL"&&(M=M.filter(k=>k.project_id===i),R=R.filter(k=>k.project_id===i),L=L.filter(k=>k.project_id===i)),r({raCount:M.length,driCount:R.length,patrolCount:L.length,openRisks:L.filter(k=>k.status==="OPEN").length}),u(R.slice(0,3)),y(L.slice(0,3))}).finally(()=>m(!1))},[i]);const A=E=>T=>{i==="ALL"?(T.preventDefault(),e("  ","error")):t(E)};return S.jsxs("div",{className:"page",style:{maxWidth:"1200px"},children:[S.jsxs("header",{className:"page-header",children:[S.jsxs("div",{children:[S.jsx("p",{className:"eyebrow",children:"SMS Dashboard"}),S.jsx("h1",{children:"  "}),S.jsxs("p",{className:"muted",children:[new Date().toLocaleDateString(),"     ."]})]}),S.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:S.jsx("span",{className:"badge badge-live",children:"Live"})})]}),S.jsxs("div",{className:"grid four",children:[S.jsxs("div",{className:"card dashboard-stat",children:[S.jsx(y2,{className:"stat-icon-absolute",size:24,color:"var(--primary)"}),S.jsx("div",{className:"stat-header",children:S.jsx("span",{className:"stat-label",children:" TBM"})}),S.jsxs("p",{className:"stat-value",children:[n.driCount,S.jsx("span",{className:"stat-unit",children:""})]}),S.jsx("p",{className:"stat-desc",children:"  "})]}),S.jsxs("div",{className:"card dashboard-stat",children:[S.jsx(ll,{className:"stat-icon-absolute",size:24,color:"var(--text-secondary)"}),S.jsx("div",{className:"stat-header",children:S.jsx("span",{className:"stat-label",children:""})}),S.jsxs("p",{className:"stat-value",children:[n.raCount,S.jsx("span",{className:"stat-unit",children:""})]}),S.jsx("p",{className:"stat-desc",children:"   "})]}),S.jsxs("div",{className:"card dashboard-stat",children:[S.jsx(w2,{className:"stat-icon-absolute",size:24,color:"#58f099"}),S.jsx("div",{className:"stat-header",children:S.jsx("span",{className:"stat-label",children:" "})}),S.jsxs("p",{className:"stat-value",children:[n.patrolCount,S.jsx("span",{className:"stat-unit",children:""})]}),S.jsx("p",{className:"stat-desc",children:"  "})]}),S.jsxs("div",{className:"card dashboard-stat",children:[S.jsx(t0,{className:"stat-icon-absolute",size:24,color:n.openRisks>0?"#ff6f6f":"var(--text-tertiary)"}),S.jsx("div",{className:"stat-header",children:S.jsx("span",{className:"stat-label",children:" "})}),S.jsxs("p",{className:"stat-value",style:{color:n.openRisks>0?"#ff6f6f":"inherit"},children:[n.openRisks,S.jsx("span",{className:"stat-unit",children:""})]}),S.jsx("p",{className:"stat-desc",children:"  "})]})]}),S.jsxs("div",{className:"dashboard-grid-split",children:[S.jsxs("section",{className:"panel",children:[S.jsxs("div",{className:"section-header",children:[S.jsx("h3",{children:" TBM "}),S.jsxs(Tf,{to:"/dri",className:"btn-text",children:[" ",S.jsx(x2,{size:14})]})]}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[l.map(E=>S.jsxs("div",{className:"list-item",children:[S.jsxs("div",{style:{flex:1},children:[S.jsx("p",{style:{fontWeight:600,fontSize:"1rem"},children:E.work_content}),S.jsxs("div",{className:"milestone-meta",style:{marginTop:"0.25rem"},children:[S.jsx(ul,{size:12})," ",E.location,"  ",E.attendees_count," "]})]}),S.jsx("span",{className:"badge badge-tag",children:new Date(E.date||E.created_at).toLocaleDateString().slice(5)})]},E.id)),l.length===0&&S.jsx("p",{className:"muted",style:{padding:"1rem",textAlign:"center"},children:" ."})]})]}),S.jsxs("section",{className:"panel",children:[S.jsxs("div",{className:"section-header",children:[S.jsx("h3",{children:"  "}),S.jsxs(Tf,{to:"/patrol",className:"btn-text",children:[" ",S.jsx(x2,{size:14})]})]}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[f.map(E=>S.jsxs("div",{className:"list-item",children:[S.jsxs("div",{style:{flex:1},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[S.jsx("span",{className:`badge ${E.severity==="HIGH"?"badge-error":"badge-warning"}`,style:{fontSize:"0.75rem",padding:"2px 6px"},children:E.severity}),S.jsx("span",{style:{fontWeight:600},children:E.issue_type})]}),S.jsx("p",{style:{fontSize:"0.95rem",color:"var(--text-secondary)"},children:E.description})]}),S.jsx("div",{children:E.status==="OPEN"?S.jsx("span",{className:"status-dot error",title:" "}):S.jsx(nh,{size:16,color:"#58f099"})})]},E.id)),f.length===0&&S.jsx("p",{className:"muted",style:{padding:"1rem",textAlign:"center"},children:" ."})]})]})]}),S.jsxs("section",{className:"panel",style:{marginTop:"1.5rem"},children:[S.jsx("p",{className:"eyebrow",children:""}),i==="ALL"&&S.jsx("div",{className:"panel",style:{marginBottom:"1rem",padding:"1rem",background:"var(--bg-surface-hover)",border:"2px dashed var(--border)"},children:S.jsx("p",{style:{margin:0,textAlign:"center",color:"var(--text-secondary)"},children:"       "})}),S.jsxs("div",{className:"grid four",children:[S.jsxs("a",{href:"/ra/new",className:`card action-card ${i==="ALL"?"disabled":""}`,onClick:A("/ra/new"),style:{opacity:i==="ALL"?.5:1,cursor:i==="ALL"?"not-allowed":"pointer"},children:[S.jsx(ll,{className:"action-icon"}),S.jsx("span",{children:" "})]}),S.jsxs("a",{href:"/dri",className:`card action-card ${i==="ALL"?"disabled":""}`,onClick:A("/dri"),style:{opacity:i==="ALL"?.5:1,cursor:i==="ALL"?"not-allowed":"pointer"},children:[S.jsx(y2,{className:"action-icon"}),S.jsx("span",{children:"TBM "})]}),S.jsxs("a",{href:"/checklist",className:`card action-card ${i==="ALL"?"disabled":""}`,onClick:A("/checklist"),style:{opacity:i==="ALL"?.5:1,cursor:i==="ALL"?"not-allowed":"pointer"},children:[S.jsx(nh,{className:"action-icon"}),S.jsx("span",{children:""})]}),S.jsxs("a",{href:"/patrol",className:`card action-card ${i==="ALL"?"disabled":""}`,onClick:A("/patrol"),style:{opacity:i==="ALL"?.5:1,cursor:i==="ALL"?"not-allowed":"pointer"},children:[S.jsx(w2,{className:"action-icon"}),S.jsx("span",{children:" "})]})]})]})]})}function n4(){const i=yl(),{selectedProjectId:e}=_a(),[t,n]=W.useState([]),[r,l]=W.useState([]),[u,f]=W.useState(!0),[y,m]=W.useState("");W.useEffect(()=>{Promise.all([A(),E()]).finally(()=>f(!1))},[]);const A=async()=>{try{const{data:N}=await Ft.get("/sms/risk-assessments");n(N)}catch(N){console.error(N)}},E=async()=>{try{const{data:N}=await Ft.get("/projects");l(N)}catch(N){console.error(N)}},T=W.useMemo(()=>t.filter(N=>{const M=N.process_name.toLowerCase().includes(y.toLowerCase())||N.assessor_name&&N.assessor_name.toLowerCase().includes(y.toLowerCase()),R=e==="ALL"||N.project_id===e;return M&&R}),[t,y,e]);return u?S.jsx(Sh,{}):S.jsxs("div",{className:"page",children:[S.jsxs("header",{className:"page-header",style:{alignItems:"flex-end"},children:[S.jsxs("div",{children:[S.jsx("p",{className:"eyebrow",children:"SMS Module"}),S.jsx("h1",{children:"  (RA)"}),S.jsx("p",{className:"muted",children:"      ."})]}),S.jsxs("button",{className:"btn-primary",onClick:()=>i("/ra/new"),children:[S.jsx(So,{size:18})," "]})]}),S.jsx("section",{className:"panel",style:{padding:"1rem",marginBottom:"1.5rem"},children:S.jsxs("div",{style:{position:"relative"},children:[S.jsx($w,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)"}}),S.jsx("input",{type:"text",className:"input",placeholder:"   ...",style:{paddingLeft:"2.5rem",width:"100%"},value:y,onChange:N=>m(N.target.value)})]})}),T.length===0?S.jsxs("section",{className:"empty-state",children:[S.jsx(ll,{size:48,className:"empty-icon"}),S.jsx("h3",{children:"  ."}),S.jsx("p",{children:"     ."})]}):S.jsx("section",{className:"ra-list",children:T.map(N=>{const M=r.find(R=>R.id===N.project_id);return S.jsxs("div",{className:"ra-card",onClick:()=>i(`/ra/${N.id}`),children:[S.jsxs("div",{style:{marginBottom:"0.75rem"},children:[S.jsx("span",{className:"task-id",style:{display:"block",marginBottom:"0.25rem"},children:M?M.name:" "}),S.jsxs("div",{className:"ra-header",style:{marginBottom:0},children:[S.jsx("h3",{children:N.process_name}),S.jsx("span",{className:`badge ${N.status==="APPROVED"?"badge-live":"badge-tag"}`,children:N.status==="APPROVED"?"":""})]})]}),S.jsxs("div",{className:"ra-meta",children:[S.jsx("span",{children:new Date(N.created_at).toLocaleDateString()}),S.jsx("span",{className:"dot",children:""}),S.jsx("span",{children:N.assessor_name||"-"}),S.jsx("span",{className:"dot",children:""}),S.jsxs("span",{children:[" ",N.item_count||0]})]})]},N.id)})}),S.jsxs("section",{className:"panel",style:{marginTop:"2rem"},children:[S.jsx("div",{className:"section-header",children:S.jsxs("div",{children:[S.jsx("p",{className:"eyebrow",children:""}),S.jsx("h3",{children:"  "})]})}),S.jsxs("div",{className:"grid three",children:[S.jsxs("div",{className:"card",children:[S.jsx("div",{className:"card-icon",children:S.jsx(So,{size:24})}),S.jsx("p",{className:"card-label",children:"1.  "}),S.jsx("p",{className:"card-text",children:"PMS      ."})]}),S.jsxs("div",{className:"card",children:[S.jsx("div",{className:"card-icon",children:S.jsx(t0,{size:24})}),S.jsx("p",{className:"card-label",children:"2.  "}),S.jsx("p",{className:"card-text",children:"   / ."})]}),S.jsxs("div",{className:"card",children:[S.jsx("div",{className:"card-icon",children:S.jsx(nh,{size:24})}),S.jsx("p",{className:"card-label",children:"3.    "}),S.jsx("p",{className:"card-text",children:"      ."})]})]})]})]})}var Ch=i=>i.type==="checkbox",il=i=>i instanceof Date,ns=i=>i==null;const Tv=i=>typeof i=="object";var oi=i=>!ns(i)&&!Array.isArray(i)&&Tv(i)&&!il(i),i4=i=>oi(i)&&i.target?Ch(i.target)?i.target.checked:i.target.value:i,s4=i=>i.substring(0,i.search(/\.\d+(\.|$)/))||i,r4=(i,e)=>i.has(s4(e)),a4=i=>{const e=i.constructor&&i.constructor.prototype;return oi(e)&&e.hasOwnProperty("isPrototypeOf")},gm=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function On(i){let e;const t=Array.isArray(i),n=typeof FileList<"u"?i instanceof FileList:!1;if(i instanceof Date)e=new Date(i);else if(!(gm&&(i instanceof Blob||n))&&(t||oi(i)))if(e=t?[]:Object.create(Object.getPrototypeOf(i)),!t&&!a4(i))e=i;else for(const r in i)i.hasOwnProperty(r)&&(e[r]=On(i[r]));else return i;return e}var d0=i=>/^\w*$/.test(i),Tn=i=>i===void 0,f0=i=>Array.isArray(i)?i.filter(Boolean):[],pm=i=>f0(i.replace(/["|']|\]/g,"").split(/\.|\[/)),Xe=(i,e,t)=>{if(!e||!oi(i))return t;const n=(d0(e)?[e]:pm(e)).reduce((r,l)=>ns(r)?r:r[l],i);return Tn(n)||n===i?Tn(i[e])?t:i[e]:n},kr=i=>typeof i=="boolean",wn=(i,e,t)=>{let n=-1;const r=d0(e)?[e]:pm(e),l=r.length,u=l-1;for(;++n<l;){const f=r[n];let y=t;if(n!==u){const m=i[f];y=oi(m)||Array.isArray(m)?m:isNaN(+r[n+1])?{}:[]}if(f==="__proto__"||f==="constructor"||f==="prototype")return;i[f]=y,i=i[f]}};const AA={BLUR:"blur",FOCUS_OUT:"focusout"},Vs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},fa={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Iv=nn.createContext(null);Iv.displayName="HookFormContext";const o4=()=>nn.useContext(Iv);var l4=(i,e,t,n=!0)=>{const r={defaultValues:e._defaultValues};for(const l in i)Object.defineProperty(r,l,{get:()=>{const u=l;return e._proxyFormState[u]!==Vs.all&&(e._proxyFormState[u]=!n||Vs.all),i[u]}});return r};const Nv=typeof window<"u"?nn.useLayoutEffect:nn.useEffect;var Ss=i=>typeof i=="string",c4=(i,e,t,n,r)=>Ss(i)?(n&&e.watch.add(i),Xe(t,i,r)):Array.isArray(i)?i.map(l=>(n&&e.watch.add(l),Xe(t,l))):(n&&(e.watchAll=!0),t),Sp=i=>ns(i)||!Tv(i);function yo(i,e,t=new WeakSet){if(Sp(i)||Sp(e))return Object.is(i,e);if(il(i)&&il(e))return i.getTime()===e.getTime();const n=Object.keys(i),r=Object.keys(e);if(n.length!==r.length)return!1;if(t.has(i)||t.has(e))return!0;t.add(i),t.add(e);for(const l of n){const u=i[l];if(!r.includes(l))return!1;if(l!=="ref"){const f=e[l];if(il(u)&&il(f)||oi(u)&&oi(f)||Array.isArray(u)&&Array.isArray(f)?!yo(u,f,t):!Object.is(u,f))return!1}}return!0}var u4=(i,e,t,n,r)=>e?{...t[i],types:{...t[i]&&t[i].types?t[i].types:{},[n]:r||!0}}:{},is=i=>Array.isArray(i)?i:[i],wA=()=>{let i=[];return{get observers(){return i},next:r=>{for(const l of i)l.next&&l.next(r)},subscribe:r=>(i.push(r),{unsubscribe:()=>{i=i.filter(l=>l!==r)}}),unsubscribe:()=>{i=[]}}};function Rv(i,e){const t={};for(const n in i)if(i.hasOwnProperty(n)){const r=i[n],l=e[n];if(r&&oi(r)&&l){const u=Rv(r,l);oi(u)&&(t[n]=u)}else i[n]&&(t[n]=l)}return t}var Ti=i=>oi(i)&&!Object.keys(i).length,mm=i=>i.type==="file",ar=i=>typeof i=="function",Hf=i=>{if(!gm)return!1;const e=i?i.ownerDocument:0;return i instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Mv=i=>i.type==="select-multiple",ym=i=>i.type==="radio",h4=i=>ym(i)||Ch(i),j1=i=>Hf(i)&&i.isConnected;function d4(i,e){const t=e.slice(0,-1).length;let n=0;for(;n<t;)i=Tn(i)?n++:i[e[n++]];return i}function f4(i){for(const e in i)if(i.hasOwnProperty(e)&&!Tn(i[e]))return!1;return!0}function Qn(i,e){const t=Array.isArray(e)?e:d0(e)?[e]:pm(e),n=t.length===1?i:d4(i,t),r=t.length-1,l=t[r];return n&&delete n[l],r!==0&&(oi(n)&&Ti(n)||Array.isArray(n)&&f4(n))&&Qn(i,t.slice(0,-1)),i}var g4=i=>{for(const e in i)if(ar(i[e]))return!0;return!1};function Dv(i){return Array.isArray(i)||oi(i)&&!g4(i)}function Cp(i,e={}){for(const t in i){const n=i[t];Dv(n)?(e[t]=Array.isArray(n)?[]:{},Cp(n,e[t])):Tn(n)||(e[t]=!0)}return e}function ac(i,e,t){t||(t=Cp(e));for(const n in i){const r=i[n];if(Dv(r))Tn(e)||Sp(t[n])?t[n]=Cp(r,Array.isArray(r)?[]:{}):ac(r,ns(e)?{}:e[n],t[n]);else{const l=e[n];t[n]=!yo(r,l)}}return t}const EA={value:!1,isValid:!1},vA={value:!0,isValid:!0};var Ov=i=>{if(Array.isArray(i)){if(i.length>1){const e=i.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return i[0].checked&&!i[0].disabled?i[0].attributes&&!Tn(i[0].attributes.value)?Tn(i[0].value)||i[0].value===""?vA:{value:i[0].value,isValid:!0}:vA:EA}return EA},Lv=(i,{valueAsNumber:e,valueAsDate:t,setValueAs:n})=>Tn(i)?i:e?i===""?NaN:i&&+i:t&&Ss(i)?new Date(i):n?n(i):i;const SA={isValid:!1,value:null};var kv=i=>Array.isArray(i)?i.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,SA):SA;function CA(i){const e=i.ref;return mm(e)?e.files:ym(e)?kv(i.refs).value:Mv(e)?[...e.selectedOptions].map(({value:t})=>t):Ch(e)?Ov(i.refs).value:Lv(Tn(e.value)?i.ref.value:e.value,i)}var p4=(i,e,t,n)=>{const r={};for(const l of i){const u=Xe(e,l);u&&wn(r,l,u._f)}return{criteriaMode:t,names:[...i],fields:r,shouldUseNativeValidation:n}},Vf=i=>i instanceof RegExp,Bu=i=>Tn(i)?i:Vf(i)?i.source:oi(i)?Vf(i.value)?i.value.source:i.value:i,uc=i=>({isOnSubmit:!i||i===Vs.onSubmit,isOnBlur:i===Vs.onBlur,isOnChange:i===Vs.onChange,isOnAll:i===Vs.all,isOnTouch:i===Vs.onTouched});const _A="AsyncFunction";var m4=i=>!!i&&!!i.validate&&!!(ar(i.validate)&&i.validate.constructor.name===_A||oi(i.validate)&&Object.values(i.validate).find(e=>e.constructor.name===_A)),y4=i=>i.mount&&(i.required||i.min||i.max||i.maxLength||i.minLength||i.pattern||i.validate),_p=(i,e,t)=>!t&&(e.watchAll||e.watch.has(i)||[...e.watch].some(n=>i.startsWith(n)&&/^\.\w+/.test(i.slice(n.length))));const yc=(i,e,t,n)=>{for(const r of t||Object.keys(i)){const l=Xe(i,r);if(l){const{_f:u,...f}=l;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],r)&&!n)return!0;if(u.ref&&e(u.ref,u.name)&&!n)return!0;if(yc(f,e))break}else if(oi(f)&&yc(f,e))break}}};function TA(i,e,t){const n=Xe(i,t);if(n||d0(t))return{error:n,name:t};const r=t.split(".");for(;r.length;){const l=r.join("."),u=Xe(e,l),f=Xe(i,l);if(u&&!Array.isArray(u)&&t!==l)return{name:t};if(f&&f.type)return{name:l,error:f};if(f&&f.root&&f.root.type)return{name:`${l}.root`,error:f.root};r.pop()}return{name:t}}var x4=(i,e,t,n)=>{t(i);const{name:r,...l}=i;return Ti(l)||Object.keys(l).length>=Object.keys(e).length||Object.keys(l).find(u=>e[u]===(!n||Vs.all))},b4=(i,e,t)=>!i||!e||i===e||is(i).some(n=>n&&(t?n===e:n.startsWith(e)||e.startsWith(n))),A4=(i,e,t,n,r)=>r.isOnAll?!1:!t&&r.isOnTouch?!(e||i):(t?n.isOnBlur:r.isOnBlur)?!i:(t?n.isOnChange:r.isOnChange)?i:!0,w4=(i,e)=>!f0(Xe(i,e)).length&&Qn(i,e),Pv=(i,e,t)=>{const n=is(Xe(i,t));return wn(n,"root",e[t]),wn(i,t,n),i};function IA(i,e,t="validate"){if(Ss(i)||Array.isArray(i)&&i.every(Ss)||kr(i)&&!i)return{type:t,message:Ss(i)?i:"",ref:e}}var sc=i=>oi(i)&&!Vf(i)?i:{value:i,message:""},Tp=async(i,e,t,n,r,l)=>{const{ref:u,refs:f,required:y,maxLength:m,minLength:A,min:E,max:T,pattern:N,validate:M,name:R,valueAsNumber:L,mount:k}=i._f,P=Xe(t,R);if(!k||e.has(R))return{};const j=f?f[0]:u,U=oe=>{r&&j.reportValidity&&(j.setCustomValidity(kr(oe)?"":oe||""),j.reportValidity())},G={},Y=ym(u),V=Ch(u),ie=Y||V,Q=(L||mm(u))&&Tn(u.value)&&Tn(P)||Hf(u)&&u.value===""||P===""||Array.isArray(P)&&!P.length,be=u4.bind(null,R,n,G),we=(oe,Ee,Se,ae=fa.maxLength,K=fa.minLength)=>{const re=oe?Ee:Se;G[R]={type:oe?ae:K,message:re,ref:u,...be(oe?ae:K,re)}};if(l?!Array.isArray(P)||!P.length:y&&(!ie&&(Q||ns(P))||kr(P)&&!P||V&&!Ov(f).isValid||Y&&!kv(f).isValid)){const{value:oe,message:Ee}=Ss(y)?{value:!!y,message:y}:sc(y);if(oe&&(G[R]={type:fa.required,message:Ee,ref:j,...be(fa.required,Ee)},!n))return U(Ee),G}if(!Q&&(!ns(E)||!ns(T))){let oe,Ee;const Se=sc(T),ae=sc(E);if(!ns(P)&&!isNaN(P)){const K=u.valueAsNumber||P&&+P;ns(Se.value)||(oe=K>Se.value),ns(ae.value)||(Ee=K<ae.value)}else{const K=u.valueAsDate||new Date(P),re=Je=>new Date(new Date().toDateString()+" "+Je),Ie=u.type=="time",Ue=u.type=="week";Ss(Se.value)&&P&&(oe=Ie?re(P)>re(Se.value):Ue?P>Se.value:K>new Date(Se.value)),Ss(ae.value)&&P&&(Ee=Ie?re(P)<re(ae.value):Ue?P<ae.value:K<new Date(ae.value))}if((oe||Ee)&&(we(!!oe,Se.message,ae.message,fa.max,fa.min),!n))return U(G[R].message),G}if((m||A)&&!Q&&(Ss(P)||l&&Array.isArray(P))){const oe=sc(m),Ee=sc(A),Se=!ns(oe.value)&&P.length>+oe.value,ae=!ns(Ee.value)&&P.length<+Ee.value;if((Se||ae)&&(we(Se,oe.message,Ee.message),!n))return U(G[R].message),G}if(N&&!Q&&Ss(P)){const{value:oe,message:Ee}=sc(N);if(Vf(oe)&&!P.match(oe)&&(G[R]={type:fa.pattern,message:Ee,ref:u,...be(fa.pattern,Ee)},!n))return U(Ee),G}if(M){if(ar(M)){const oe=await M(P,t),Ee=IA(oe,j);if(Ee&&(G[R]={...Ee,...be(fa.validate,Ee.message)},!n))return U(Ee.message),G}else if(oi(M)){let oe={};for(const Ee in M){if(!Ti(oe)&&!n)break;const Se=IA(await M[Ee](P,t),j,Ee);Se&&(oe={...Se,...be(Ee,Se.message)},U(Se.message),n&&(G[R]=oe))}if(!Ti(oe)&&(G[R]={ref:j,...oe},!n))return G}}return U(!0),G};const E4={mode:Vs.onSubmit,reValidateMode:Vs.onChange,shouldFocusError:!0};function v4(i={}){let e={...E4,...i},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:ar(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},r=oi(e.defaultValues)||oi(e.values)?On(e.defaultValues||e.values)||{}:{},l=e.shouldUnregister?{}:On(r),u={action:!1,mount:!1,watch:!1},f={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},y,m=0;const A={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let E={...A};const T={array:wA(),state:wA()},N=e.criteriaMode===Vs.all,M=te=>J=>{clearTimeout(m),m=setTimeout(te,J)},R=async te=>{if(!e.disabled&&(A.isValid||E.isValid||te)){const J=e.resolver?Ti((await V()).errors):await Q(n,!0);J!==t.isValid&&T.state.next({isValid:J})}},L=(te,J)=>{!e.disabled&&(A.isValidating||A.validatingFields||E.isValidating||E.validatingFields)&&((te||Array.from(f.mount)).forEach(Ae=>{Ae&&(J?wn(t.validatingFields,Ae,J):Qn(t.validatingFields,Ae))}),T.state.next({validatingFields:t.validatingFields,isValidating:!Ti(t.validatingFields)}))},k=(te,J=[],Ae,je,Le=!0,Fe=!0)=>{if(je&&Ae&&!e.disabled){if(u.action=!0,Fe&&Array.isArray(Xe(n,te))){const ze=Ae(Xe(n,te),je.argA,je.argB);Le&&wn(n,te,ze)}if(Fe&&Array.isArray(Xe(t.errors,te))){const ze=Ae(Xe(t.errors,te),je.argA,je.argB);Le&&wn(t.errors,te,ze),w4(t.errors,te)}if((A.touchedFields||E.touchedFields)&&Fe&&Array.isArray(Xe(t.touchedFields,te))){const ze=Ae(Xe(t.touchedFields,te),je.argA,je.argB);Le&&wn(t.touchedFields,te,ze)}(A.dirtyFields||E.dirtyFields)&&(t.dirtyFields=ac(r,l)),T.state.next({name:te,isDirty:we(te,J),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else wn(l,te,J)},P=(te,J)=>{wn(t.errors,te,J),T.state.next({errors:t.errors})},j=te=>{t.errors=te,T.state.next({errors:t.errors,isValid:!1})},U=(te,J,Ae,je)=>{const Le=Xe(n,te);if(Le){const Fe=Xe(l,te,Tn(Ae)?Xe(r,te):Ae);Tn(Fe)||je&&je.defaultChecked||J?wn(l,te,J?Fe:CA(Le._f)):Se(te,Fe),u.mount&&!u.action&&R()}},G=(te,J,Ae,je,Le)=>{let Fe=!1,ze=!1;const gt={name:te};if(!e.disabled){if(!Ae||je){(A.isDirty||E.isDirty)&&(ze=t.isDirty,t.isDirty=gt.isDirty=we(),Fe=ze!==gt.isDirty);const ut=yo(Xe(r,te),J);ze=!!Xe(t.dirtyFields,te),ut?Qn(t.dirtyFields,te):wn(t.dirtyFields,te,!0),gt.dirtyFields=t.dirtyFields,Fe=Fe||(A.dirtyFields||E.dirtyFields)&&ze!==!ut}if(Ae){const ut=Xe(t.touchedFields,te);ut||(wn(t.touchedFields,te,Ae),gt.touchedFields=t.touchedFields,Fe=Fe||(A.touchedFields||E.touchedFields)&&ut!==Ae)}Fe&&Le&&T.state.next(gt)}return Fe?gt:{}},Y=(te,J,Ae,je)=>{const Le=Xe(t.errors,te),Fe=(A.isValid||E.isValid)&&kr(J)&&t.isValid!==J;if(e.delayError&&Ae?(y=M(()=>P(te,Ae)),y(e.delayError)):(clearTimeout(m),y=null,Ae?wn(t.errors,te,Ae):Qn(t.errors,te)),(Ae?!yo(Le,Ae):Le)||!Ti(je)||Fe){const ze={...je,...Fe&&kr(J)?{isValid:J}:{},errors:t.errors,name:te};t={...t,...ze},T.state.next(ze)}},V=async te=>{L(te,!0);const J=await e.resolver(l,e.context,p4(te||f.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return L(te),J},ie=async te=>{const{errors:J}=await V(te);if(te)for(const Ae of te){const je=Xe(J,Ae);je?wn(t.errors,Ae,je):Qn(t.errors,Ae)}else t.errors=J;return J},Q=async(te,J,Ae={valid:!0})=>{for(const je in te){const Le=te[je];if(Le){const{_f:Fe,...ze}=Le;if(Fe){const gt=f.array.has(Fe.name),ut=Le._f&&m4(Le._f);ut&&A.validatingFields&&L([Fe.name],!0);const _t=await Tp(Le,f.disabled,l,N,e.shouldUseNativeValidation&&!J,gt);if(ut&&A.validatingFields&&L([Fe.name]),_t[Fe.name]&&(Ae.valid=!1,J))break;!J&&(Xe(_t,Fe.name)?gt?Pv(t.errors,_t,Fe.name):wn(t.errors,Fe.name,_t[Fe.name]):Qn(t.errors,Fe.name))}!Ti(ze)&&await Q(ze,J,Ae)}}return Ae.valid},be=()=>{for(const te of f.unMount){const J=Xe(n,te);J&&(J._f.refs?J._f.refs.every(Ae=>!j1(Ae)):!j1(J._f.ref))&&Ge(te)}f.unMount=new Set},we=(te,J)=>!e.disabled&&(te&&J&&wn(l,te,J),!yo(Je(),r)),oe=(te,J,Ae)=>c4(te,f,{...u.mount?l:Tn(J)?r:Ss(te)?{[te]:J}:J},Ae,J),Ee=te=>f0(Xe(u.mount?l:r,te,e.shouldUnregister?Xe(r,te,[]):[])),Se=(te,J,Ae={})=>{const je=Xe(n,te);let Le=J;if(je){const Fe=je._f;Fe&&(!Fe.disabled&&wn(l,te,Lv(J,Fe)),Le=Hf(Fe.ref)&&ns(J)?"":J,Mv(Fe.ref)?[...Fe.ref.options].forEach(ze=>ze.selected=Le.includes(ze.value)):Fe.refs?Ch(Fe.ref)?Fe.refs.forEach(ze=>{(!ze.defaultChecked||!ze.disabled)&&(Array.isArray(Le)?ze.checked=!!Le.find(gt=>gt===ze.value):ze.checked=Le===ze.value||!!Le)}):Fe.refs.forEach(ze=>ze.checked=ze.value===Le):mm(Fe.ref)?Fe.ref.value="":(Fe.ref.value=Le,Fe.ref.type||T.state.next({name:te,values:On(l)})))}(Ae.shouldDirty||Ae.shouldTouch)&&G(te,Le,Ae.shouldTouch,Ae.shouldDirty,!0),Ae.shouldValidate&&Ue(te)},ae=(te,J,Ae)=>{for(const je in J){if(!J.hasOwnProperty(je))return;const Le=J[je],Fe=te+"."+je,ze=Xe(n,Fe);(f.array.has(te)||oi(Le)||ze&&!ze._f)&&!il(Le)?ae(Fe,Le,Ae):Se(Fe,Le,Ae)}},K=(te,J,Ae={})=>{const je=Xe(n,te),Le=f.array.has(te),Fe=On(J);wn(l,te,Fe),Le?(T.array.next({name:te,values:On(l)}),(A.isDirty||A.dirtyFields||E.isDirty||E.dirtyFields)&&Ae.shouldDirty&&T.state.next({name:te,dirtyFields:ac(r,l),isDirty:we(te,Fe)})):je&&!je._f&&!ns(Fe)?ae(te,Fe,Ae):Se(te,Fe,Ae),_p(te,f)&&T.state.next({...t,name:te}),T.state.next({name:u.mount?te:void 0,values:On(l)})},re=async te=>{u.mount=!0;const J=te.target;let Ae=J.name,je=!0;const Le=Xe(n,Ae),Fe=ut=>{je=Number.isNaN(ut)||il(ut)&&isNaN(ut.getTime())||yo(ut,Xe(l,Ae,ut))},ze=uc(e.mode),gt=uc(e.reValidateMode);if(Le){let ut,_t;const Vi=J.type?CA(Le._f):i4(te),Mi=te.type===AA.BLUR||te.type===AA.FOCUS_OUT,Hc=!y4(Le._f)&&!e.resolver&&!Xe(t.errors,Ae)&&!Le._f.deps||A4(Mi,Xe(t.touchedFields,Ae),t.isSubmitted,gt,ze),Zt=_p(Ae,f,Mi);wn(l,Ae,Vi),Mi?(!J||!J.readOnly)&&(Le._f.onBlur&&Le._f.onBlur(te),y&&y(0)):Le._f.onChange&&Le._f.onChange(te);const ke=G(Ae,Vi,Mi),$t=!Ti(ke)||Zt;if(!Mi&&T.state.next({name:Ae,type:te.type,values:On(l)}),Hc)return(A.isValid||E.isValid)&&(e.mode==="onBlur"?Mi&&R():Mi||R()),$t&&T.state.next({name:Ae,...Zt?{}:ke});if(!Mi&&Zt&&T.state.next({...t}),e.resolver){const{errors:pt}=await V([Ae]);if(Fe(Vi),je){const An=TA(t.errors,n,Ae),gr=TA(pt,n,An.name||Ae);ut=gr.error,Ae=gr.name,_t=Ti(pt)}}else L([Ae],!0),ut=(await Tp(Le,f.disabled,l,N,e.shouldUseNativeValidation))[Ae],L([Ae]),Fe(Vi),je&&(ut?_t=!1:(A.isValid||E.isValid)&&(_t=await Q(n,!0)));je&&(Le._f.deps&&(!Array.isArray(Le._f.deps)||Le._f.deps.length>0)&&Ue(Le._f.deps),Y(Ae,_t,ut,ke))}},Ie=(te,J)=>{if(Xe(t.errors,J)&&te.focus)return te.focus(),1},Ue=async(te,J={})=>{let Ae,je;const Le=is(te);if(e.resolver){const Fe=await ie(Tn(te)?te:Le);Ae=Ti(Fe),je=te?!Le.some(ze=>Xe(Fe,ze)):Ae}else te?(je=(await Promise.all(Le.map(async Fe=>{const ze=Xe(n,Fe);return await Q(ze&&ze._f?{[Fe]:ze}:ze)}))).every(Boolean),!(!je&&!t.isValid)&&R()):je=Ae=await Q(n);return T.state.next({...!Ss(te)||(A.isValid||E.isValid)&&Ae!==t.isValid?{}:{name:te},...e.resolver||!te?{isValid:Ae}:{},errors:t.errors}),J.shouldFocus&&!je&&yc(n,Ie,te?Le:f.mount),je},Je=(te,J)=>{let Ae={...u.mount?l:r};return J&&(Ae=Rv(J.dirtyFields?t.dirtyFields:t.touchedFields,Ae)),Tn(te)?Ae:Ss(te)?Xe(Ae,te):te.map(je=>Xe(Ae,je))},$=(te,J)=>({invalid:!!Xe((J||t).errors,te),isDirty:!!Xe((J||t).dirtyFields,te),error:Xe((J||t).errors,te),isValidating:!!Xe(t.validatingFields,te),isTouched:!!Xe((J||t).touchedFields,te)}),ue=te=>{te&&is(te).forEach(J=>Qn(t.errors,J)),T.state.next({errors:te?t.errors:{}})},Ce=(te,J,Ae)=>{const je=(Xe(n,te,{_f:{}})._f||{}).ref,Le=Xe(t.errors,te)||{},{ref:Fe,message:ze,type:gt,...ut}=Le;wn(t.errors,te,{...ut,...J,ref:je}),T.state.next({name:te,errors:t.errors,isValid:!1}),Ae&&Ae.shouldFocus&&je&&je.focus&&je.focus()},Oe=(te,J)=>ar(te)?T.state.subscribe({next:Ae=>"values"in Ae&&te(oe(void 0,J),Ae)}):oe(te,J,!0),Ve=te=>T.state.subscribe({next:J=>{b4(te.name,J.name,te.exact)&&x4(J,te.formState||A,ln,te.reRenderRoot)&&te.callback({values:{...l},...t,...J,defaultValues:r})}}).unsubscribe,Re=te=>(u.mount=!0,E={...E,...te.formState},Ve({...te,formState:E})),Ge=(te,J={})=>{for(const Ae of te?is(te):f.mount)f.mount.delete(Ae),f.array.delete(Ae),J.keepValue||(Qn(n,Ae),Qn(l,Ae)),!J.keepError&&Qn(t.errors,Ae),!J.keepDirty&&Qn(t.dirtyFields,Ae),!J.keepTouched&&Qn(t.touchedFields,Ae),!J.keepIsValidating&&Qn(t.validatingFields,Ae),!e.shouldUnregister&&!J.keepDefaultValue&&Qn(r,Ae);T.state.next({values:On(l)}),T.state.next({...t,...J.keepDirty?{isDirty:we()}:{}}),!J.keepIsValid&&R()},Ne=({disabled:te,name:J})=>{(kr(te)&&u.mount||te||f.disabled.has(J))&&(te?f.disabled.add(J):f.disabled.delete(J))},Qe=(te,J={})=>{let Ae=Xe(n,te);const je=kr(J.disabled)||kr(e.disabled);return wn(n,te,{...Ae||{},_f:{...Ae&&Ae._f?Ae._f:{ref:{name:te}},name:te,mount:!0,...J}}),f.mount.add(te),Ae?Ne({disabled:kr(J.disabled)?J.disabled:e.disabled,name:te}):U(te,!0,J.value),{...je?{disabled:J.disabled||e.disabled}:{},...e.progressive?{required:!!J.required,min:Bu(J.min),max:Bu(J.max),minLength:Bu(J.minLength),maxLength:Bu(J.maxLength),pattern:Bu(J.pattern)}:{},name:te,onChange:re,onBlur:re,ref:Le=>{if(Le){Qe(te,J),Ae=Xe(n,te);const Fe=Tn(Le.value)&&Le.querySelectorAll&&Le.querySelectorAll("input,select,textarea")[0]||Le,ze=h4(Fe),gt=Ae._f.refs||[];if(ze?gt.find(ut=>ut===Fe):Fe===Ae._f.ref)return;wn(n,te,{_f:{...Ae._f,...ze?{refs:[...gt.filter(j1),Fe,...Array.isArray(Xe(r,te))?[{}]:[]],ref:{type:Fe.type,name:te}}:{ref:Fe}}}),U(te,!1,void 0,Fe)}else Ae=Xe(n,te,{}),Ae._f&&(Ae._f.mount=!1),(e.shouldUnregister||J.shouldUnregister)&&!(r4(f.array,te)&&u.action)&&f.unMount.add(te)}}},ct=()=>e.shouldFocusError&&yc(n,Ie,f.mount),Ht=te=>{kr(te)&&(T.state.next({disabled:te}),yc(n,(J,Ae)=>{const je=Xe(n,Ae);je&&(J.disabled=je._f.disabled||te,Array.isArray(je._f.refs)&&je._f.refs.forEach(Le=>{Le.disabled=je._f.disabled||te}))},0,!1))},kn=(te,J)=>async Ae=>{let je;Ae&&(Ae.preventDefault&&Ae.preventDefault(),Ae.persist&&Ae.persist());let Le=On(l);if(T.state.next({isSubmitting:!0}),e.resolver){const{errors:Fe,values:ze}=await V();t.errors=Fe,Le=On(ze)}else await Q(n);if(f.disabled.size)for(const Fe of f.disabled)Qn(Le,Fe);if(Qn(t.errors,"root"),Ti(t.errors)){T.state.next({errors:{}});try{await te(Le,Ae)}catch(Fe){je=Fe}}else J&&await J({...t.errors},Ae),ct(),setTimeout(ct);if(T.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ti(t.errors)&&!je,submitCount:t.submitCount+1,errors:t.errors}),je)throw je},Ye=(te,J={})=>{Xe(n,te)&&(Tn(J.defaultValue)?K(te,On(Xe(r,te))):(K(te,J.defaultValue),wn(r,te,On(J.defaultValue))),J.keepTouched||Qn(t.touchedFields,te),J.keepDirty||(Qn(t.dirtyFields,te),t.isDirty=J.defaultValue?we(te,On(Xe(r,te))):we()),J.keepError||(Qn(t.errors,te),A.isValid&&R()),T.state.next({...t}))},bt=(te,J={})=>{const Ae=te?On(te):r,je=On(Ae),Le=Ti(te),Fe=Le?r:je;if(J.keepDefaultValues||(r=Ae),!J.keepValues){if(J.keepDirtyValues){const ze=new Set([...f.mount,...Object.keys(ac(r,l))]);for(const gt of Array.from(ze))Xe(t.dirtyFields,gt)?wn(Fe,gt,Xe(l,gt)):K(gt,Xe(Fe,gt))}else{if(gm&&Tn(te))for(const ze of f.mount){const gt=Xe(n,ze);if(gt&&gt._f){const ut=Array.isArray(gt._f.refs)?gt._f.refs[0]:gt._f.ref;if(Hf(ut)){const _t=ut.closest("form");if(_t){_t.reset();break}}}}if(J.keepFieldsRef)for(const ze of f.mount)K(ze,Xe(Fe,ze));else n={}}l=e.shouldUnregister?J.keepDefaultValues?On(r):{}:On(Fe),T.array.next({values:{...Fe}}),T.state.next({values:{...Fe}})}f={mount:J.keepDirtyValues?f.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!A.isValid||!!J.keepIsValid||!!J.keepDirtyValues||!e.shouldUnregister&&!Ti(Fe),u.watch=!!e.shouldUnregister,u.action=!1,J.keepErrors||(t.errors={}),T.state.next({submitCount:J.keepSubmitCount?t.submitCount:0,isDirty:Le?!1:J.keepDirty?t.isDirty:!!(J.keepDefaultValues&&!yo(te,r)),isSubmitted:J.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:Le?{}:J.keepDirtyValues?J.keepDefaultValues&&l?ac(r,l):t.dirtyFields:J.keepDefaultValues&&te?ac(r,te):J.keepDirty?t.dirtyFields:{},touchedFields:J.keepTouched?t.touchedFields:{},errors:J.keepErrors?t.errors:{},isSubmitSuccessful:J.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:r})},It=(te,J)=>bt(ar(te)?te(l):te,J),Qt=(te,J={})=>{const Ae=Xe(n,te),je=Ae&&Ae._f;if(je){const Le=je.refs?je.refs[0]:je.ref;Le.focus&&(Le.focus(),J.shouldSelect&&ar(Le.select)&&Le.select())}},ln=te=>{t={...t,...te}},ft={control:{register:Qe,unregister:Ge,getFieldState:$,handleSubmit:kn,setError:Ce,_subscribe:Ve,_runSchema:V,_focusError:ct,_getWatch:oe,_getDirty:we,_setValid:R,_setFieldArray:k,_setDisabledField:Ne,_setErrors:j,_getFieldArray:Ee,_reset:bt,_resetDefaultValues:()=>ar(e.defaultValues)&&e.defaultValues().then(te=>{It(te,e.resetOptions),T.state.next({isLoading:!1})}),_removeUnmounted:be,_disableForm:Ht,_subjects:T,_proxyFormState:A,get _fields(){return n},get _formValues(){return l},get _state(){return u},set _state(te){u=te},get _defaultValues(){return r},get _names(){return f},set _names(te){f=te},get _formState(){return t},get _options(){return e},set _options(te){e={...e,...te}}},subscribe:Re,trigger:Ue,register:Qe,handleSubmit:kn,watch:Oe,setValue:K,getValues:Je,reset:It,resetField:Ye,clearErrors:ue,unregister:Ge,setError:Ce,setFocus:Qt,getFieldState:$};return{...ft,formControl:ft}}var uo=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const i=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=(Math.random()*16+i)%16|0;return(e=="x"?t:t&3|8).toString(16)})},U1=(i,e,t={})=>t.shouldFocus||Tn(t.shouldFocus)?t.focusName||`${i}.${Tn(t.focusIndex)?e:t.focusIndex}.`:"",z1=(i,e)=>[...i,...is(e)],H1=i=>Array.isArray(i)?i.map(()=>{}):void 0;function V1(i,e,t){return[...i.slice(0,e),...is(t),...i.slice(e)]}var G1=(i,e,t)=>Array.isArray(i)?(Tn(i[t])&&(i[t]=void 0),i.splice(t,0,i.splice(e,1)[0]),i):[],Y1=(i,e)=>[...is(e),...is(i)];function S4(i,e){let t=0;const n=[...i];for(const r of e)n.splice(r-t,1),t++;return f0(n).length?n:[]}var X1=(i,e)=>Tn(e)?[]:S4(i,is(e).sort((t,n)=>t-n)),q1=(i,e,t)=>{[i[e],i[t]]=[i[t],i[e]]},NA=(i,e,t)=>(i[e]=t,i);function C4(i){const e=o4(),{control:t=e.control,name:n,keyName:r="id",shouldUnregister:l,rules:u}=i,[f,y]=nn.useState(t._getFieldArray(n)),m=nn.useRef(t._getFieldArray(n).map(uo)),A=nn.useRef(!1);t._names.array.add(n),nn.useMemo(()=>u&&f.length>=0&&t.register(n,u),[t,n,f.length,u]),Nv(()=>t._subjects.array.subscribe({next:({values:U,name:G})=>{if(G===n||!G){const Y=Xe(U,n);Array.isArray(Y)&&(y(Y),m.current=Y.map(uo))}}}).unsubscribe,[t,n]);const E=nn.useCallback(U=>{A.current=!0,t._setFieldArray(n,U)},[t,n]),T=(U,G)=>{const Y=is(On(U)),V=z1(t._getFieldArray(n),Y);t._names.focus=U1(n,V.length-1,G),m.current=z1(m.current,Y.map(uo)),E(V),y(V),t._setFieldArray(n,V,z1,{argA:H1(U)})},N=(U,G)=>{const Y=is(On(U)),V=Y1(t._getFieldArray(n),Y);t._names.focus=U1(n,0,G),m.current=Y1(m.current,Y.map(uo)),E(V),y(V),t._setFieldArray(n,V,Y1,{argA:H1(U)})},M=U=>{const G=X1(t._getFieldArray(n),U);m.current=X1(m.current,U),E(G),y(G),!Array.isArray(Xe(t._fields,n))&&wn(t._fields,n,void 0),t._setFieldArray(n,G,X1,{argA:U})},R=(U,G,Y)=>{const V=is(On(G)),ie=V1(t._getFieldArray(n),U,V);t._names.focus=U1(n,U,Y),m.current=V1(m.current,U,V.map(uo)),E(ie),y(ie),t._setFieldArray(n,ie,V1,{argA:U,argB:H1(G)})},L=(U,G)=>{const Y=t._getFieldArray(n);q1(Y,U,G),q1(m.current,U,G),E(Y),y(Y),t._setFieldArray(n,Y,q1,{argA:U,argB:G},!1)},k=(U,G)=>{const Y=t._getFieldArray(n);G1(Y,U,G),G1(m.current,U,G),E(Y),y(Y),t._setFieldArray(n,Y,G1,{argA:U,argB:G},!1)},P=(U,G)=>{const Y=On(G),V=NA(t._getFieldArray(n),U,Y);m.current=[...V].map((ie,Q)=>!ie||Q===U?uo():m.current[Q]),E(V),y([...V]),t._setFieldArray(n,V,NA,{argA:U,argB:Y},!0,!1)},j=U=>{const G=is(On(U));m.current=G.map(uo),E([...G]),y([...G]),t._setFieldArray(n,[...G],Y=>Y,{},!0,!1)};return nn.useEffect(()=>{if(t._state.action=!1,_p(n,t._names)&&t._subjects.state.next({...t._formState}),A.current&&(!uc(t._options.mode).isOnSubmit||t._formState.isSubmitted)&&!uc(t._options.reValidateMode).isOnSubmit)if(t._options.resolver)t._runSchema([n]).then(U=>{const G=Xe(U.errors,n),Y=Xe(t._formState.errors,n);(Y?!G&&Y.type||G&&(Y.type!==G.type||Y.message!==G.message):G&&G.type)&&(G?wn(t._formState.errors,n,G):Qn(t._formState.errors,n),t._subjects.state.next({errors:t._formState.errors}))});else{const U=Xe(t._fields,n);U&&U._f&&!(uc(t._options.reValidateMode).isOnSubmit&&uc(t._options.mode).isOnSubmit)&&Tp(U,t._names.disabled,t._formValues,t._options.criteriaMode===Vs.all,t._options.shouldUseNativeValidation,!0).then(G=>!Ti(G)&&t._subjects.state.next({errors:Pv(t._formState.errors,G,n)}))}t._subjects.state.next({name:n,values:On(t._formValues)}),t._names.focus&&yc(t._fields,(U,G)=>{if(t._names.focus&&G.startsWith(t._names.focus)&&U.focus)return U.focus(),1}),t._names.focus="",t._setValid(),A.current=!1},[f,n,t]),nn.useEffect(()=>(!Xe(t._formValues,n)&&t._setFieldArray(n),()=>{const U=(G,Y)=>{const V=Xe(t._fields,G);V&&V._f&&(V._f.mount=Y)};t._options.shouldUnregister||l?t.unregister(n):U(n,!1)}),[n,t,r,l]),{swap:nn.useCallback(L,[E,n,t]),move:nn.useCallback(k,[E,n,t]),prepend:nn.useCallback(N,[E,n,t]),append:nn.useCallback(T,[E,n,t]),remove:nn.useCallback(M,[E,n,t]),insert:nn.useCallback(R,[E,n,t]),update:nn.useCallback(P,[E,n,t]),replace:nn.useCallback(j,[E,n,t]),fields:nn.useMemo(()=>f.map((U,G)=>({...U,[r]:m.current[G]||uo()})),[f,r])}}function jc(i={}){const e=nn.useRef(void 0),t=nn.useRef(void 0),[n,r]=nn.useState({isDirty:!1,isValidating:!1,isLoading:ar(i.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:i.errors||{},disabled:i.disabled||!1,isReady:!1,defaultValues:ar(i.defaultValues)?void 0:i.defaultValues});if(!e.current)if(i.formControl)e.current={...i.formControl,formState:n},i.defaultValues&&!ar(i.defaultValues)&&i.formControl.reset(i.defaultValues,i.resetOptions);else{const{formControl:u,...f}=v4(i);e.current={...f,formState:n}}const l=e.current.control;return l._options=i,Nv(()=>{const u=l._subscribe({formState:l._proxyFormState,callback:()=>r({...l._formState}),reRenderRoot:!0});return r(f=>({...f,isReady:!0})),l._formState.isReady=!0,u},[l]),nn.useEffect(()=>l._disableForm(i.disabled),[l,i.disabled]),nn.useEffect(()=>{i.mode&&(l._options.mode=i.mode),i.reValidateMode&&(l._options.reValidateMode=i.reValidateMode)},[l,i.mode,i.reValidateMode]),nn.useEffect(()=>{i.errors&&(l._setErrors(i.errors),l._focusError())},[l,i.errors]),nn.useEffect(()=>{i.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,i.shouldUnregister]),nn.useEffect(()=>{if(l._proxyFormState.isDirty){const u=l._getDirty();u!==n.isDirty&&l._subjects.state.next({isDirty:u})}},[l,n.isDirty]),nn.useEffect(()=>{var u;i.values&&!yo(i.values,t.current)?(l._reset(i.values,{keepFieldsRef:!0,...l._options.resetOptions}),!((u=l._options.resetOptions)===null||u===void 0)&&u.keepIsValid||l._setValid(),t.current=i.values,r(f=>({...f}))):l._resetDefaultValues()},[l,i.values]),nn.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),e.current.formState=l4(n,l),e.current}function _4(){const i=yl(),{show:e}=dr(),[t,n]=W.useState([]),{register:r,control:l,handleSubmit:u,watch:f,formState:{errors:y,isSubmitting:m}}=jc({defaultValues:{projectId:"",processName:"",assessorName:"",items:[{riskFactor:"",riskType:"",frequency:1,severity:1,mitigationMeasure:"",actionManager:"",actionDeadline:""}]}}),{fields:A,append:E,remove:T}=C4({control:l,name:"items"});W.useEffect(()=>{Ft.get("/projects").then(L=>n(L.data)).catch(console.error)},[]);const N=async L=>{try{await Ft.post("/sms/risk-assessments",L),e("   .","success"),i("/ra")}catch(k){console.error(k),e("   .","error")}},M=(L,k)=>L*k,R=L=>L>=9?"badge-live":L>=4?"badge-tag":"badge";return S.jsxs("div",{className:"page",children:[S.jsxs("header",{className:"page-header",children:[S.jsxs("div",{children:[S.jsxs("button",{className:"btn-text",onClick:()=>i("/ra"),children:[S.jsx(Qw,{size:16}),"  "]}),S.jsx("h1",{style:{marginTop:"0.5rem"},children:"  "})]}),S.jsxs("button",{className:"btn-primary",onClick:u(N),disabled:m,children:[S.jsx(Zw,{size:18}),m?" ...":""]})]}),S.jsxs("form",{className:"form-layout",children:[S.jsxs("section",{className:"panel",children:[S.jsx("h3",{children:" "}),S.jsxs("div",{className:"grid two",children:[S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" "}),S.jsxs("select",{...r("projectId",{required:!0}),className:"input",children:[S.jsx("option",{value:"",children:""}),t.map(L=>S.jsx("option",{value:L.id,children:L.name},L.id))]}),y.projectId&&S.jsx("span",{className:"error-text",children:" ."})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:""}),S.jsx("input",{...r("processName",{required:!0}),className:"input",placeholder:":    "}),y.processName&&S.jsx("span",{className:"error-text",children:" ."})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:""}),S.jsx("input",{...r("assessorName",{required:!0}),className:"input",placeholder:" "})]})]})]}),S.jsxs("section",{className:"panel",children:[S.jsxs("div",{className:"section-header",children:[S.jsx("h3",{children:"  "}),S.jsxs("button",{type:"button",className:"btn-secondary",onClick:()=>E({riskFactor:"",riskType:"",frequency:1,severity:1,mitigationMeasure:"",actionManager:"",actionDeadline:""}),children:[S.jsx(So,{size:16}),"  "]})]}),S.jsx("div",{className:"risk-items-container",children:A.map((L,k)=>{const P=f(`items.${k}.frequency`),j=f(`items.${k}.severity`),U=M(P,j);return S.jsxs("div",{className:"risk-item-card",children:[S.jsxs("div",{className:"risk-item-header",children:[S.jsxs("h4",{children:["#",k+1," "]}),S.jsxs("div",{className:"risk-actions",children:[S.jsxs("span",{className:`badge ${R(U)}`,children:[" ",U," (",U>=9?"":U>=4?"":"",")"]}),S.jsx("button",{type:"button",className:"icon-btn-danger",onClick:()=>T(k),children:S.jsx(H3,{size:16})})]})]}),S.jsxs("div",{className:"grid two",children:[S.jsxs("div",{className:"form-group full",children:[S.jsx("label",{children:" "}),S.jsx("input",{...r(`items.${k}.riskFactor`,{required:!0}),className:"input",placeholder:"      (:   )"})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" "}),S.jsxs("select",{...r(`items.${k}.riskType`),className:"input",children:[S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""})]})]}),S.jsxs("div",{className:"risk-score-group",children:[S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" (1~5)"}),S.jsx("input",{type:"number",min:"1",max:"5",...r(`items.${k}.frequency`,{valueAsNumber:!0}),className:"input"})]}),S.jsx("span",{className:"x-mark",children:""}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" (1~5)"}),S.jsx("input",{type:"number",min:"1",max:"5",...r(`items.${k}.severity`,{valueAsNumber:!0}),className:"input"})]})]}),S.jsxs("div",{className:"form-group full",children:[S.jsx("label",{children:" "}),S.jsx("textarea",{...r(`items.${k}.mitigationMeasure`,{required:!0}),className:"input",rows:2,placeholder:"   "})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" "}),S.jsx("input",{...r(`items.${k}.actionManager`),className:"input"})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" "}),S.jsx("input",{type:"date",...r(`items.${k}.actionDeadline`),className:"input"})]})]})]},L.id)})})]})]})]})}function T4(){const{id:i}=Y_(),e=yl(),[t,n]=W.useState(null),[r,l]=W.useState(!0);W.useEffect(()=>{i&&u()},[i]);const u=async()=>{try{const{data:f}=await Ft.get(`/sms/risk-assessments/${i}`);n(f)}catch(f){console.error(f)}finally{l(!1)}};return r?S.jsx(Sh,{}):t?S.jsxs("div",{className:"page",children:[S.jsxs("header",{className:"page-header",children:[S.jsxs("div",{children:[S.jsxs("button",{className:"btn-text",onClick:()=>e("/ra"),children:[S.jsx(Qw,{size:16})," "]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.5rem"},children:[S.jsx("h1",{style:{margin:0},children:t.process_name}),S.jsx("span",{className:`badge ${t.status==="APPROVED"?"badge-live":"badge-tag"}`,children:t.status==="APPROVED"?"":""})]})]}),S.jsxs("button",{className:"btn-secondary",onClick:()=>window.print(),children:[S.jsx(P3,{size:18}),""]})]}),S.jsxs("div",{className:"grid two",style:{marginBottom:"2rem"},children:[S.jsxs("div",{className:"card",children:[S.jsx("p",{className:"card-label",children:" "}),S.jsxs("ul",{className:"list",children:[S.jsxs("li",{className:"milestone-meta",children:[S.jsxs("span",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[S.jsx(th,{size:14})," "]}),S.jsx("span",{children:new Date(t.created_at).toLocaleDateString()})]}),S.jsxs("li",{className:"milestone-meta",children:[S.jsxs("span",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[S.jsx(eE,{size:14})," "]}),S.jsx("span",{children:t.assessor_name||"-"})]}),S.jsxs("li",{className:"milestone-meta",children:[S.jsxs("span",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[S.jsx(nh,{size:14})," "]}),S.jsx("span",{children:t.approver_name||""})]})]})]}),S.jsxs("div",{className:"card",children:[S.jsx("p",{className:"card-label",children:" "}),S.jsxs("div",{className:"hero-card",children:[S.jsxs("div",{className:"hero-metric",children:[S.jsx("strong",{children:t.items.length}),S.jsx("span",{children:" "})]}),S.jsxs("div",{className:"hero-metric",children:[S.jsx("strong",{style:{color:"#ffc2c2"},children:t.items.filter(f=>f.frequency*f.severity>=9).length}),S.jsx("span",{children:" "})]})]})]})]}),S.jsxs("section",{className:"panel",children:[S.jsx("div",{className:"section-header",children:S.jsx("h3",{children:"   "})}),S.jsx("div",{className:"risk-items-container",children:t.items.map((f,y)=>{const m=f.frequency*f.severity;return S.jsxs("div",{className:"risk-item-card",children:[S.jsxs("div",{className:"risk-item-header",children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[S.jsx("span",{className:"badge",children:y+1}),S.jsx("h4",{style:{margin:0},children:f.risk_factor})]}),S.jsxs("span",{className:`badge ${m>=9?"badge-alert":m>=4?"badge-tag":"badge"}`,children:[" ",m," (",m>=9?"":m>=4?"":"",")"]})]}),S.jsxs("div",{className:"grid two",children:[S.jsxs("div",{children:[S.jsx("p",{className:"task-id",children:" "}),S.jsx("p",{children:f.risk_type})]}),S.jsxs("div",{children:[S.jsx("p",{className:"task-id",children:"  "}),S.jsxs("p",{children:[f.frequency,"  ",f.severity," = ",S.jsx("strong",{children:m})]})]}),S.jsxs("div",{className:"full",children:[S.jsx("p",{className:"task-id",children:" "}),S.jsx("p",{style:{color:"#9cf0c8"},children:f.mitigation_measure})]}),S.jsxs("div",{children:[S.jsx("p",{className:"task-id",children:" "}),S.jsx("p",{children:f.action_manager||"-"})]}),S.jsxs("div",{children:[S.jsx("p",{className:"task-id",children:" "}),S.jsx("p",{children:f.action_deadline?new Date(f.action_deadline).toLocaleDateString():"-"})]})]})]},f.id)})})]})]}):S.jsx("div",{className:"page",children:"   ."})}function I4(){const{user:i}=h0(),{show:e}=dr(),{selectedProjectId:t}=_a(),[n,r]=W.useState([]),[l,u]=W.useState([]),[f,y]=W.useState([]),[m,A]=W.useState(!1),[E,T]=W.useState(!0),[N,M]=W.useState([]),[R,L]=W.useState(""),{register:k,handleSubmit:P,watch:j,reset:U,formState:{isSubmitting:G}}=jc(),Y=j("raId");W.useEffect(()=>{Promise.all([ie(),Q(),be()]).finally(()=>T(!1))},[]),W.useEffect(()=>{Y?Ft.get(`/sms/risk-assessments/${Y}`).then(oe=>{const Ee=oe.data.items.filter(Se=>Se.frequency*Se.severity>=4);M(Ee)}).catch(console.error):M([])},[Y]);const V=W.useMemo(()=>n.filter(oe=>{const Ee=oe.work_content.toLowerCase().includes(R.toLowerCase())||oe.location.toLowerCase().includes(R.toLowerCase()),Se=t==="ALL"||oe.project_id===t;return Ee&&Se}),[n,R,t]),ie=async()=>{try{const{data:oe}=await Ft.get("/sms/dris");r(oe)}catch(oe){console.error(oe)}},Q=async()=>Ft.get("/projects").then(oe=>u(oe.data)),be=async()=>Ft.get("/sms/risk-assessments").then(oe=>y(oe.data)),we=async oe=>{if(!i)return;const Ee=N.map(Se=>`[${Se.risk_factor}] ${Se.mitigation_measure}`).join(`
`);try{await Ft.post("/sms/dris",{...oe,riskPoints:Ee,createdBy:i.email,photoUrl:null}),e("DRI()  .","success"),A(!1),U(),ie()}catch(Se){console.error(Se),e(" .","error")}};return E?S.jsx(Sh,{}):S.jsxs("div",{className:"page",children:[S.jsxs("header",{className:"page-header",children:[S.jsxs("div",{children:[S.jsx("p",{className:"eyebrow",children:"SMS Module"}),S.jsx("h1",{children:"  (DRI)"}),S.jsx("p",{className:"muted",children:"   TBM     ."})]}),S.jsxs("button",{className:"btn-primary",onClick:()=>A(!0),children:[S.jsx(So,{size:18}),"TBM "]})]}),S.jsx("section",{className:"panel",style:{padding:"1rem",marginBottom:"1.5rem"},children:S.jsxs("div",{style:{position:"relative"},children:[S.jsx($w,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)"}}),S.jsx("input",{type:"text",className:"input",placeholder:"    ...",style:{paddingLeft:"2.5rem",width:"100%"},value:R,onChange:oe=>L(oe.target.value)})]})}),V.length===0?S.jsxs("section",{className:"empty-state",children:[S.jsx(ll,{size:48,className:"empty-icon"}),S.jsx("h3",{children:"  ."}),S.jsx("p",{children:"   TBM  ."})]}):S.jsx("div",{className:"grid three",children:V.map(oe=>{const Ee=l.find(Se=>Se.id===oe.project_id);return S.jsxs("div",{className:"card",style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[S.jsx("div",{children:S.jsx("span",{className:"badge badge-tag",children:Ee?.name||" "})}),S.jsx("div",{style:{textAlign:"right"},children:S.jsx("span",{className:"task-id",children:new Date(oe.date||oe.created_at).toLocaleDateString()})}),S.jsx("h3",{style:{margin:"0.25rem 0",fontSize:"1.1rem"},children:oe.work_content}),S.jsxs("div",{className:"milestone-meta",children:[S.jsx(ul,{size:14})," ",oe.location]}),S.jsxs("div",{className:"milestone-meta",children:[S.jsx(hp,{size:14}),"  ",oe.attendees_count,""]}),S.jsxs("div",{style:{marginTop:"auto",paddingTop:"1rem",borderTop:"1px solid var(--border)"},children:[S.jsx("p",{className:"eyebrow",style:{marginBottom:"0.5rem"},children:" "}),S.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",whiteSpace:"pre-line"},children:oe.risk_points||"   "})]})]},oe.id)})}),m&&S.jsx("div",{className:"modal-overlay",children:S.jsxs("div",{className:"modal-content",children:[S.jsxs("header",{className:"modal-header",children:[S.jsx("h2",{children:" TBM  "}),S.jsx("button",{className:"btn-text",onClick:()=>A(!1),children:S.jsx(Gs,{size:24})})]}),S.jsxs("form",{onSubmit:P(we),className:"form-grid",children:[S.jsxs("div",{className:"form-group full",children:[S.jsx("label",{children:" "}),S.jsxs("select",{...k("projectId",{required:!0}),className:"input",children:[S.jsx("option",{value:"",children:" "}),l.map(oe=>S.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),S.jsxs("div",{className:"form-group full",children:[S.jsx("label",{children:"  (RA  )"}),S.jsxs("select",{...k("raId",{required:!0}),className:"input",children:[S.jsx("option",{value:"",children:"    "}),f.map(oe=>S.jsx("option",{value:oe.id,children:oe.process_name},oe.id))]})]}),N.length>0&&S.jsxs("div",{className:"full",style:{padding:"1rem",background:"rgba(255, 111, 111, 0.1)",borderRadius:"8px",border:"1px solid rgba(255, 111, 111, 0.3)"},children:[S.jsx("p",{className:"eyebrow",style:{color:"#ffc2c2"},children:"    "}),S.jsx("ul",{className:"list",style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"#ffc2c2"},children:N.map((oe,Ee)=>S.jsxs("li",{children:[oe.risk_factor,"  ",oe.mitigation_measure]},Ee))})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" "}),S.jsx("input",{type:"date",...k("date"),className:"input",defaultValue:new Date().toISOString().split("T")[0]})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" "}),S.jsx("input",{...k("location",{required:!0}),className:"input",placeholder:": 101 3"})]}),S.jsxs("div",{className:"form-group full",children:[S.jsx("label",{children:"  "}),S.jsx("input",{...k("workContent",{required:!0}),className:"input",placeholder:"    "})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:"  ()"}),S.jsx("input",{type:"number",...k("attendeesCount"),className:"input",defaultValue:1})]}),S.jsxs("div",{className:"full",style:{marginTop:"1rem",display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[S.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>A(!1),children:""}),S.jsx("button",{type:"submit",className:"btn-primary",disabled:G,children:G?" ...":"  "})]})]})]})})]})}const W1=[{id:"TPL001",title:"   ",items:["     ","     ","     ","     ","     "]},{id:"TPL002",title:"   ",items:["        ","     ","     ","     ","      "]},{id:"TPL003",title:"   ",items:["   ( )","    ","      ","   ( )","    "]},{id:"TPL004",title:"     ",items:["     ","      ","      ","  (,  )  ","     "]},{id:"TPL005",title:"   ",items:["      ","      ","     ","       ","     "]},{id:"TPL006",title:"   ",items:["       ","    ","     ","     ","   "]},{id:"TPL007",title:"   ",items:["    ","    ","      ","    ","      "]},{id:"TPL008",title:"    ",items:["   ","     ","   ","     ","    (30 )"]}];function N4(){const{show:i}=dr(),{selectedProjectId:e,selectedProject:t}=_a(),[n,r]=W.useState("LIST"),[l,u]=W.useState(null),[f,y]=W.useState({}),[m,A]=W.useState([]),[E,T]=W.useState(null);W.useEffect(()=>{e&&N()},[e]);const N=async()=>{try{const P=await Ft.get("/sms/checklists");A(P.data)}catch(P){console.error(P)}},M=P=>{u(P),y({}),r("FORM")},R=(P,j)=>{y(U=>({...U,[P]:U[P]===j?null:j}))},L=async()=>{if(l&&l.items.some((P,j)=>!f[j])){i("  .","error");return}if(!e){i(" .","error");return}try{await Ft.post("/sms/checklists",{projectId:e,templateId:l?.id,title:l?.title,results:f}),i("  .","success"),N(),r("LIST")}catch(P){console.error(P),i("   .","error")}},k=e==="ALL"?m:m.filter(P=>P.project_id===e);return S.jsxs("div",{className:"page",style:{maxWidth:"600px",margin:"0 auto",padding:"1rem"},children:[S.jsx("header",{className:"page-header",style:{marginBottom:"1.5rem"},children:S.jsxs("div",{children:[S.jsx("p",{className:"eyebrow",children:"SMS Mobile"}),S.jsx("h1",{children:n==="LIST"?"   ":n==="HISTORY"?" ":l?.title}),S.jsx("p",{className:"muted",children:n==="LIST"?"     .":n==="HISTORY"?`${t?.name||""}  `:new Date().toLocaleDateString()+"   "})]})}),n==="LIST"&&S.jsxs(S.Fragment,{children:[S.jsx("div",{style:{marginBottom:"1.5rem"},children:S.jsxs("button",{className:"btn-secondary",onClick:()=>r("HISTORY"),style:{width:"100%",justifyContent:"center"},children:["    (",k.length,")"]})}),S.jsx("div",{className:"grid",children:W1.map(P=>S.jsxs("div",{className:"card checklist-card",onClick:()=>M(P),style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsxs("div",{children:[S.jsx("span",{className:"badge badge-tag",style:{marginBottom:"0.5rem",display:"inline-block"},children:P.id}),S.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:P.title}),S.jsxs("p",{className:"muted",style:{fontSize:"0.9rem",marginTop:"0.25rem"},children:[" ",P.items.length,"  "]})]}),S.jsx(S3,{size:24,style:{color:"var(--text-tertiary)"}})]},P.id))})]}),n==="HISTORY"&&S.jsxs("div",{children:[S.jsxs("button",{className:"btn-secondary",onClick:()=>r("LIST"),style:{marginBottom:"1rem"},children:[S.jsx(A2,{size:18})," "]}),k.length===0?S.jsx("div",{className:"panel",style:{textAlign:"center",padding:"2rem"},children:S.jsx("p",{className:"muted",children:"    ."})}):S.jsx("div",{className:"grid",children:k.map(P=>{const j=W1.find(ie=>ie.id===P.template_id),U=typeof P.results=="string"?JSON.parse(P.results):P.results,G=j?.items.length||0,Y=Object.values(U).filter(ie=>ie==="Y").length,V=Object.values(U).filter(ie=>ie==="N").length;return S.jsxs("div",{className:"card",style:{cursor:"pointer"},onClick:()=>T(P),children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"0.75rem"},children:[S.jsx("span",{className:"badge badge-tag",children:P.template_id}),S.jsx("span",{className:"muted",style:{fontSize:"0.85rem"},children:new Date(P.created_at).toLocaleDateString()})]}),S.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1rem"},children:P.title}),S.jsxs("div",{style:{display:"flex",gap:"0.5rem",fontSize:"0.85rem"},children:[S.jsxs("span",{className:"badge badge-live",children:[" ",Y,""]}),V>0&&S.jsxs("span",{className:"badge badge-error",children:[" ",V,""]}),S.jsxs("span",{className:"muted",children:[" ",G," "]})]})]},P.id)})})]}),n==="FORM"&&l&&S.jsxs("div",{className:"checklist-form",children:[l.items.map((P,j)=>S.jsxs("div",{className:"check-item-card",children:[S.jsxs("div",{className:"check-text",children:[S.jsx("span",{className:"check-idx",children:j+1}),S.jsx("p",{children:P})]}),S.jsxs("div",{className:"check-actions",children:[S.jsxs("button",{className:`check-btn yes ${f[j]==="Y"?"active":""}`,onClick:()=>R(j,"Y"),children:[S.jsx(b2,{size:20})," "]}),S.jsxs("button",{className:`check-btn no ${f[j]==="N"?"active":""}`,onClick:()=>R(j,"N"),children:[S.jsx(Gs,{size:20})," "]})]})]},j)),S.jsxs("div",{className:"panel",style:{marginTop:"1.5rem"},children:[S.jsx("p",{className:"eyebrow",children:" "}),S.jsxs("div",{className:"form-grid",style:{marginTop:"0.5rem"},children:[S.jsxs("button",{className:"btn-secondary",style:{justifyContent:"center",height:"48px"},children:[S.jsx($p,{size:18}),"  "]}),S.jsxs("button",{className:"btn-secondary",style:{justifyContent:"center",height:"48px"},children:[S.jsx(ul,{size:18}),"   (GPS)"]})]})]}),S.jsxs("div",{className:"fixed-bottom-actions",children:[S.jsxs("button",{className:"btn-secondary",onClick:()=>r("LIST"),children:[S.jsx(A2,{size:18})," "]}),S.jsxs("button",{className:"btn-primary",style:{flex:1,justifyContent:"center"},onClick:L,children:[S.jsx(Zw,{size:18}),"  "]})]})]}),E&&S.jsx("div",{className:"modal-overlay",onClick:()=>T(null),children:S.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),style:{maxWidth:"600px"},children:[S.jsxs("header",{className:"modal-header",children:[S.jsxs("div",{children:[S.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",marginBottom:"0.5rem"},children:[S.jsx("span",{className:"badge badge-tag",children:E.template_id}),S.jsxs("span",{className:"muted",style:{fontSize:"0.9rem"},children:[new Date(E.created_at).toLocaleDateString()," ",new Date(E.created_at).toLocaleTimeString()]})]}),S.jsx("h2",{style:{margin:0},children:E.title})]}),S.jsx("button",{className:"btn-text",onClick:()=>T(null),children:S.jsx(Gs,{size:24})})]}),S.jsx("div",{className:"modal-body",children:(()=>{const P=W1.find(U=>U.id===E.template_id),j=typeof E.results=="string"?JSON.parse(E.results):E.results;return P?S.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:P.items.map((U,G)=>{const Y=j[G];return S.jsx("div",{className:"panel",style:{padding:"1rem"},children:S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",gap:"1rem"},children:[S.jsx("div",{style:{flex:1},children:S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[S.jsx("span",{className:"badge",style:{fontSize:"0.75rem"},children:G+1}),S.jsx("p",{style:{margin:0,fontSize:"0.95rem"},children:U})]})}),S.jsxs("div",{children:[Y==="Y"&&S.jsxs("span",{className:"badge badge-live",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[S.jsx(b2,{size:16})," "]}),Y==="N"&&S.jsxs("span",{className:"badge badge-error",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[S.jsx(Gs,{size:16})," "]}),Y==="NA"&&S.jsx("span",{className:"badge",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:""})]})]})},G)})}):S.jsx("p",{className:"muted",children:"   ."})})()}),S.jsx("div",{className:"modal-footer",children:S.jsx("button",{className:"btn-secondary",onClick:()=>T(null),children:""})})]})})]})}function R4(){const{show:i}=dr(),{selectedProjectId:e}=_a(),[t,n]=W.useState([]),[r,l]=W.useState([]),[u,f]=W.useState(!0),[y,m]=W.useState(!1),{register:A,handleSubmit:E,reset:T,formState:{isSubmitting:N}}=jc();W.useEffect(()=>{Promise.all([M(),R()]).finally(()=>f(!1))},[]);const M=async()=>{try{const{data:j}=await Ft.get("/sms/patrols");n(j)}catch(j){console.error(j)}},R=async()=>Ft.get("/projects").then(j=>l(j.data)),L=W.useMemo(()=>e==="ALL"?t:t.filter(j=>j.project_id===e),[t,e]),k=async j=>{try{await Ft.post("/sms/patrols",j),i("  .","success"),m(!1),T(),M()}catch{i(" ","error")}},P=j=>{switch(j){case"HIGH":return S.jsx("span",{className:"badge badge-error",children:" (High)"});case"MEDIUM":return S.jsx("span",{className:"badge badge-warning",children:" (Mid)"});default:return S.jsx("span",{className:"badge badge-primary",children:" (Low)"})}};return S.jsxs("div",{className:"page",children:[S.jsxs("header",{className:"page-header",children:[S.jsxs("div",{children:[S.jsx("p",{className:"eyebrow",children:"SMS Module"}),S.jsx("h1",{children:"  (Patrol)"}),S.jsx("p",{className:"muted",children:"         ."})]}),S.jsxs("button",{className:"btn-primary",onClick:()=>m(!0),children:[S.jsx(So,{size:18}),"  "]})]}),S.jsx("div",{className:"grid three",children:L.map(j=>S.jsxs("div",{className:"card",style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[S.jsx("span",{className:"badge badge-tag",children:j.issue_type}),P(j.severity)]}),S.jsx("h3",{style:{margin:0,fontSize:"1.1rem",lineHeight:1.4},children:j.description}),S.jsxs("div",{className:"milestone-meta",children:[S.jsx(ul,{size:14})," ",j.location]}),S.jsxs("div",{className:"milestone-meta",children:[S.jsx(t0,{size:14,color:j.status==="OPEN"?"#ff6f6f":"#58f099"}),j.status==="OPEN"?" ":" "]}),S.jsxs("div",{style:{marginTop:"auto",paddingTop:"1rem",borderTop:"1px solid var(--border)",fontSize:"0.85rem",color:"var(--text-tertiary)"},children:[new Date(j.created_at).toLocaleString(),"  ",j.created_by]})]},j.id))}),L.length===0&&!u&&S.jsxs("section",{className:"empty-state",children:[S.jsx(nh,{size:48,className:"empty-icon"}),S.jsx("h3",{children:"   ."}),S.jsx("p",{children:"      ."})]}),y&&S.jsx("div",{className:"modal-overlay",children:S.jsxs("div",{className:"modal-content",children:[S.jsxs("header",{className:"modal-header",children:[S.jsx("h2",{children:"  "}),S.jsx("button",{className:"btn-text",onClick:()=>m(!1),children:S.jsx(Gs,{size:24})})]}),S.jsxs("form",{onSubmit:E(k),className:"modal-body",children:[S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" "}),S.jsx("select",{className:"input",...A("projectId",{required:!0}),children:r.map(j=>S.jsx("option",{value:j.id,children:j.name},j.id))})]}),S.jsxs("div",{className:"form-grid",children:[S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" (/)"}),S.jsx("input",{className:"input",placeholder:": 101 3",...A("location",{required:!0})})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" "}),S.jsxs("select",{className:"input",...A("issueType"),children:[S.jsx("option",{value:"",children:" "}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""})]})]})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:"  "}),S.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[S.jsxs("select",{className:"input",style:{width:"120px"},...A("severity"),children:[S.jsx("option",{value:"LOW",children:" (Low)"}),S.jsx("option",{value:"MEDIUM",children:" (Mid)"}),S.jsx("option",{value:"HIGH",children:" (High)"})]}),S.jsx("input",{className:"input",style:{flex:1},placeholder:"   .",...A("description",{required:!0})})]})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" "}),S.jsx("textarea",{className:"input",rows:2,placeholder:"      ",...A("actionRequired")})]}),S.jsxs("div",{className:"form-actions",children:[S.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>m(!1),children:""}),S.jsx("button",{type:"submit",className:"btn-primary",disabled:N,children:N?" ...":" "})]})]})]})})]})}var qe;(function(i){i[i.QR_CODE=0]="QR_CODE",i[i.AZTEC=1]="AZTEC",i[i.CODABAR=2]="CODABAR",i[i.CODE_39=3]="CODE_39",i[i.CODE_93=4]="CODE_93",i[i.CODE_128=5]="CODE_128",i[i.DATA_MATRIX=6]="DATA_MATRIX",i[i.MAXICODE=7]="MAXICODE",i[i.ITF=8]="ITF",i[i.EAN_13=9]="EAN_13",i[i.EAN_8=10]="EAN_8",i[i.PDF_417=11]="PDF_417",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(qe||(qe={}));var RA=new Map([[qe.QR_CODE,"QR_CODE"],[qe.AZTEC,"AZTEC"],[qe.CODABAR,"CODABAR"],[qe.CODE_39,"CODE_39"],[qe.CODE_93,"CODE_93"],[qe.CODE_128,"CODE_128"],[qe.DATA_MATRIX,"DATA_MATRIX"],[qe.MAXICODE,"MAXICODE"],[qe.ITF,"ITF"],[qe.EAN_13,"EAN_13"],[qe.EAN_8,"EAN_8"],[qe.PDF_417,"PDF_417"],[qe.RSS_14,"RSS_14"],[qe.RSS_EXPANDED,"RSS_EXPANDED"],[qe.UPC_A,"UPC_A"],[qe.UPC_E,"UPC_E"],[qe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),MA;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.URL=1]="URL"})(MA||(MA={}));function M4(i){return Object.values(qe).includes(i)}var Co;(function(i){i[i.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",i[i.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Co||(Co={}));var sr=(function(){function i(){}return i.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",i.SCAN_DEFAULT_FPS=2,i.DEFAULT_DISABLE_FLIP=!1,i.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,i.DEFAULT_SUPPORTED_SCAN_TYPE=[Co.SCAN_TYPE_CAMERA,Co.SCAN_TYPE_FILE],i})(),Bv=(function(){function i(e,t){this.format=e,this.formatName=t}return i.prototype.toString=function(){return this.formatName},i.create=function(e){if(!RA.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new i(e,RA.get(e))},i})(),DA=(function(){function i(){}return i.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},i.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},i})(),Ip;(function(i){i[i.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",i[i.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",i[i.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ip||(Ip={}));var Fv=(function(){function i(){}return i.createFrom=function(e){return{errorMessage:e,type:Ip.UNKWOWN_ERROR}},i})(),jv=(function(){function i(e){this.verbose=e}return i.prototype.log=function(e){this.verbose&&console.log(e)},i.prototype.warn=function(e){this.verbose&&console.warn(e)},i.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},i.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},i})();function Or(i){return typeof i>"u"||i===null}function D4(i,e,t){return i>t?t:i<e?e:i}var hc=(function(){function i(){}return i.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},i.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},i.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},i.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},i.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},i.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},i.scannerPaused=function(){return"Scanner paused"},i})(),on=(function(){function i(){}return i.scanningStatus=function(){return"Scanning"},i.idleStatus=function(){return"Idle"},i.errorStatus=function(){return"Error"},i.permissionStatus=function(){return"Permission"},i.noCameraFoundErrorStatus=function(){return"No Cameras"},i.lastMatch=function(e){return"Last Match: ".concat(e)},i.codeScannerTitle=function(){return"Code Scanner"},i.cameraPermissionTitle=function(){return"Request Camera Permissions"},i.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},i.noCameraFound=function(){return"No camera found"},i.scanButtonStopScanningText=function(){return"Stop Scanning"},i.scanButtonStartScanningText=function(){return"Start Scanning"},i.torchOnButton=function(){return"Switch On Torch"},i.torchOffButton=function(){return"Switch Off Torch"},i.torchOnFailedMessage=function(){return"Failed to turn on torch"},i.torchOffFailedMessage=function(){return"Failed to turn off torch"},i.scanButtonScanningStarting=function(){return"Launching Camera..."},i.textIfCameraScanSelected=function(){return"Scan an Image File"},i.textIfFileScanSelected=function(){return"Scan using camera directly"},i.selectCamera=function(){return"Select Camera"},i.fileSelectionChooseImage=function(){return"Choose Image"},i.fileSelectionChooseAnother=function(){return"Choose Another"},i.fileSelectionNoImageSelected=function(){return"No image choosen"},i.anonymousCameraPrefix=function(){return"Anonymous Camera"},i.dragAndDropMessage=function(){return"Or drop an image to scan"},i.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},i.zoom=function(){return"zoom"},i.loadingImage=function(){return"Loading image..."},i.cameraScanAltText=function(){return"Camera based scan"},i.fileScanAltText=function(){return"Fule based scan"},i})(),OA=(function(){function i(){}return i.poweredBy=function(){return"Powered by "},i.reportIssues=function(){return"Report issues"},i})(),Uv=(function(){function i(){}return i.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var n=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var r=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(r),u=Object.keys(e),f=0,y=u;f<y.length;f++){var m=y[f];if(l.has(m))return t.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},i})(),Gu={exports:{}},O4=Gu.exports,LA;function L4(){return LA||(LA=1,(function(i,e){(function(t,n){n(e)})(O4,(function(t){function n(B){return B==null}var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,a){B.__proto__=a}||function(B,a){for(var c in a)a.hasOwnProperty(c)&&(B[c]=a[c])};function l(B,a){r(B,a);function c(){this.constructor=B}B.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}function u(B,a){var c=Object.setPrototypeOf;c?c(B,a):B.__proto__=a}function f(B,a){a===void 0&&(a=B.constructor);var c=Error.captureStackTrace;c&&c(B,a)}var y=(function(B){l(a,B);function a(c){var h=this.constructor,g=B.call(this,c)||this;return Object.defineProperty(g,"name",{value:h.name,enumerable:!1}),u(g,h.prototype),f(g),g}return a})(Error);class m extends y{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}m.kind="Exception";class A extends m{}A.kind="ArgumentException";class E extends m{}E.kind="IllegalArgumentException";class T{constructor(a){if(this.binarizer=a,a===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(a,c){return this.binarizer.getBlackRow(a,c)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(a,c,h,g){const p=this.binarizer.getLuminanceSource().crop(a,c,h,g);return new T(this.binarizer.createBinarizer(p))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(a))}rotateCounterClockwise45(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(a))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class N extends m{static getChecksumInstance(){return new N}}N.kind="ChecksumException";class M{constructor(a){this.source=a}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class R{static arraycopy(a,c,h,g,p){for(;p--;)h[g++]=a[c++]}static currentTimeMillis(){return Date.now()}}class L extends m{}L.kind="IndexOutOfBoundsException";class k extends L{constructor(a=void 0,c=void 0){super(c),this.index=a,this.message=c}}k.kind="ArrayIndexOutOfBoundsException";class P{static fill(a,c){for(let h=0,g=a.length;h<g;h++)a[h]=c}static fillWithin(a,c,h,g){P.rangeCheck(a.length,c,h);for(let p=c;p<h;p++)a[p]=g}static rangeCheck(a,c,h){if(c>h)throw new E("fromIndex("+c+") > toIndex("+h+")");if(c<0)throw new k(c);if(h>a)throw new k(h)}static asList(...a){return a}static create(a,c,h){return Array.from({length:a}).map(p=>Array.from({length:c}).fill(h))}static createInt32Array(a,c,h){return Array.from({length:a}).map(p=>Int32Array.from({length:c}).fill(h))}static equals(a,c){if(!a||!c||!a.length||!c.length||a.length!==c.length)return!1;for(let h=0,g=a.length;h<g;h++)if(a[h]!==c[h])return!1;return!0}static hashCode(a){if(a===null)return 0;let c=1;for(const h of a)c=31*c+h;return c}static fillUint8Array(a,c){for(let h=0;h!==a.length;h++)a[h]=c}static copyOf(a,c){return a.slice(0,c)}static copyOfUint8Array(a,c){if(a.length<=c){const h=new Uint8Array(c);return h.set(a),h}return a.slice(0,c)}static copyOfRange(a,c,h){const g=h-c,p=new Int32Array(g);return R.arraycopy(a,c,p,0,g),p}static binarySearch(a,c,h){h===void 0&&(h=P.numberComparator);let g=0,p=a.length-1;for(;g<=p;){const b=p+g>>1,w=h(c,a[b]);if(w>0)g=b+1;else if(w<0)p=b-1;else return b}return-g-1}static numberComparator(a,c){return a-c}}class j{static numberOfTrailingZeros(a){let c;if(a===0)return 32;let h=31;return c=a<<16,c!==0&&(h-=16,a=c),c=a<<8,c!==0&&(h-=8,a=c),c=a<<4,c!==0&&(h-=4,a=c),c=a<<2,c!==0&&(h-=2,a=c),h-(a<<1>>>31)}static numberOfLeadingZeros(a){if(a===0)return 32;let c=1;return a>>>16||(c+=16,a<<=16),a>>>24||(c+=8,a<<=8),a>>>28||(c+=4,a<<=4),a>>>30||(c+=2,a<<=2),c-=a>>>31,c}static toHexString(a){return a.toString(16)}static toBinaryString(a){return String(parseInt(String(a),2))}static bitCount(a){return a=a-(a>>>1&1431655765),a=(a&858993459)+(a>>>2&858993459),a=a+(a>>>4)&252645135,a=a+(a>>>8),a=a+(a>>>16),a&63}static truncDivision(a,c){return Math.trunc(a/c)}static parseInt(a,c=void 0){return parseInt(a,c)}}j.MIN_VALUE_32_BITS=-2147483648,j.MAX_VALUE=Number.MAX_SAFE_INTEGER;class U{constructor(a,c){a===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=a,c==null?this.bits=U.makeArray(a):this.bits=c)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(a){if(a>this.bits.length*32){const c=U.makeArray(a);R.arraycopy(this.bits,0,c,0,this.bits.length),this.bits=c}}get(a){return(this.bits[Math.floor(a/32)]&1<<(a&31))!==0}set(a){this.bits[Math.floor(a/32)]|=1<<(a&31)}flip(a){this.bits[Math.floor(a/32)]^=1<<(a&31)}getNextSet(a){const c=this.size;if(a>=c)return c;const h=this.bits;let g=Math.floor(a/32),p=h[g];p&=~((1<<(a&31))-1);const b=h.length;for(;p===0;){if(++g===b)return c;p=h[g]}const w=g*32+j.numberOfTrailingZeros(p);return w>c?c:w}getNextUnset(a){const c=this.size;if(a>=c)return c;const h=this.bits;let g=Math.floor(a/32),p=~h[g];p&=~((1<<(a&31))-1);const b=h.length;for(;p===0;){if(++g===b)return c;p=~h[g]}const w=g*32+j.numberOfTrailingZeros(p);return w>c?c:w}setBulk(a,c){this.bits[Math.floor(a/32)]=c}setRange(a,c){if(c<a||a<0||c>this.size)throw new E;if(c===a)return;c--;const h=Math.floor(a/32),g=Math.floor(c/32),p=this.bits;for(let b=h;b<=g;b++){const w=b>h?0:a&31,I=(2<<(b<g?31:c&31))-(1<<w);p[b]|=I}}clear(){const a=this.bits.length,c=this.bits;for(let h=0;h<a;h++)c[h]=0}isRange(a,c,h){if(c<a||a<0||c>this.size)throw new E;if(c===a)return!0;c--;const g=Math.floor(a/32),p=Math.floor(c/32),b=this.bits;for(let w=g;w<=p;w++){const C=w>g?0:a&31,D=(2<<(w<p?31:c&31))-(1<<C)&4294967295;if((b[w]&D)!==(h?D:0))return!1}return!0}appendBit(a){this.ensureCapacity(this.size+1),a&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(a,c){if(c<0||c>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+c);for(let h=c;h>0;h--)this.appendBit((a>>h-1&1)===1)}appendBitArray(a){const c=a.size;this.ensureCapacity(this.size+c);for(let h=0;h<c;h++)this.appendBit(a.get(h))}xor(a){if(this.size!==a.size)throw new E("Sizes don't match");const c=this.bits;for(let h=0,g=c.length;h<g;h++)c[h]^=a.bits[h]}toBytes(a,c,h,g){for(let p=0;p<g;p++){let b=0;for(let w=0;w<8;w++)this.get(a)&&(b|=1<<7-w),a++;c[h+p]=b}}getBitArray(){return this.bits}reverse(){const a=new Int32Array(this.bits.length),c=Math.floor((this.size-1)/32),h=c+1,g=this.bits;for(let p=0;p<h;p++){let b=g[p];b=b>>1&1431655765|(b&1431655765)<<1,b=b>>2&858993459|(b&858993459)<<2,b=b>>4&252645135|(b&252645135)<<4,b=b>>8&16711935|(b&16711935)<<8,b=b>>16&65535|(b&65535)<<16,a[c-p]=b}if(this.size!==h*32){const p=h*32-this.size;let b=a[0]>>>p;for(let w=1;w<h;w++){const C=a[w];b|=C<<32-p,a[w-1]=b,b=C>>>p}a[h-1]=b}this.bits=a}static makeArray(a){return new Int32Array(Math.floor((a+31)/32))}equals(a){if(!(a instanceof U))return!1;const c=a;return this.size===c.size&&P.equals(this.bits,c.bits)}hashCode(){return 31*this.size+P.hashCode(this.bits)}toString(){let a="";for(let c=0,h=this.size;c<h;c++)(c&7)===0&&(a+=" "),a+=this.get(c)?"X":".";return a}clone(){return new U(this.size,this.bits.slice())}}var G;(function(B){B[B.OTHER=0]="OTHER",B[B.PURE_BARCODE=1]="PURE_BARCODE",B[B.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",B[B.TRY_HARDER=3]="TRY_HARDER",B[B.CHARACTER_SET=4]="CHARACTER_SET",B[B.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",B[B.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",B[B.ASSUME_GS1=7]="ASSUME_GS1",B[B.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",B[B.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",B[B.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(G||(G={}));var Y=G;class V extends m{static getFormatInstance(){return new V}}V.kind="FormatException";var ie;(function(B){B[B.Cp437=0]="Cp437",B[B.ISO8859_1=1]="ISO8859_1",B[B.ISO8859_2=2]="ISO8859_2",B[B.ISO8859_3=3]="ISO8859_3",B[B.ISO8859_4=4]="ISO8859_4",B[B.ISO8859_5=5]="ISO8859_5",B[B.ISO8859_6=6]="ISO8859_6",B[B.ISO8859_7=7]="ISO8859_7",B[B.ISO8859_8=8]="ISO8859_8",B[B.ISO8859_9=9]="ISO8859_9",B[B.ISO8859_10=10]="ISO8859_10",B[B.ISO8859_11=11]="ISO8859_11",B[B.ISO8859_13=12]="ISO8859_13",B[B.ISO8859_14=13]="ISO8859_14",B[B.ISO8859_15=14]="ISO8859_15",B[B.ISO8859_16=15]="ISO8859_16",B[B.SJIS=16]="SJIS",B[B.Cp1250=17]="Cp1250",B[B.Cp1251=18]="Cp1251",B[B.Cp1252=19]="Cp1252",B[B.Cp1256=20]="Cp1256",B[B.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",B[B.UTF8=22]="UTF8",B[B.ASCII=23]="ASCII",B[B.Big5=24]="Big5",B[B.GB18030=25]="GB18030",B[B.EUC_KR=26]="EUC_KR"})(ie||(ie={}));class Q{constructor(a,c,h,...g){this.valueIdentifier=a,this.name=h,typeof c=="number"?this.values=Int32Array.from([c]):this.values=c,this.otherEncodingNames=g,Q.VALUE_IDENTIFIER_TO_ECI.set(a,this),Q.NAME_TO_ECI.set(h,this);const p=this.values;for(let b=0,w=p.length;b!==w;b++){const C=p[b];Q.VALUES_TO_ECI.set(C,this)}for(const b of g)Q.NAME_TO_ECI.set(b,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(a){if(a<0||a>=900)throw new V("incorect value");const c=Q.VALUES_TO_ECI.get(a);if(c===void 0)throw new V("incorect value");return c}static getCharacterSetECIByName(a){const c=Q.NAME_TO_ECI.get(a);if(c===void 0)throw new V("incorect value");return c}equals(a){if(!(a instanceof Q))return!1;const c=a;return this.getName()===c.getName()}}Q.VALUE_IDENTIFIER_TO_ECI=new Map,Q.VALUES_TO_ECI=new Map,Q.NAME_TO_ECI=new Map,Q.Cp437=new Q(ie.Cp437,Int32Array.from([0,2]),"Cp437"),Q.ISO8859_1=new Q(ie.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Q.ISO8859_2=new Q(ie.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Q.ISO8859_3=new Q(ie.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Q.ISO8859_4=new Q(ie.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Q.ISO8859_5=new Q(ie.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Q.ISO8859_6=new Q(ie.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Q.ISO8859_7=new Q(ie.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Q.ISO8859_8=new Q(ie.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Q.ISO8859_9=new Q(ie.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Q.ISO8859_10=new Q(ie.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Q.ISO8859_11=new Q(ie.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Q.ISO8859_13=new Q(ie.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Q.ISO8859_14=new Q(ie.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Q.ISO8859_15=new Q(ie.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Q.ISO8859_16=new Q(ie.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Q.SJIS=new Q(ie.SJIS,20,"SJIS","Shift_JIS"),Q.Cp1250=new Q(ie.Cp1250,21,"Cp1250","windows-1250"),Q.Cp1251=new Q(ie.Cp1251,22,"Cp1251","windows-1251"),Q.Cp1252=new Q(ie.Cp1252,23,"Cp1252","windows-1252"),Q.Cp1256=new Q(ie.Cp1256,24,"Cp1256","windows-1256"),Q.UnicodeBigUnmarked=new Q(ie.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Q.UTF8=new Q(ie.UTF8,26,"UTF8","UTF-8"),Q.ASCII=new Q(ie.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Q.Big5=new Q(ie.Big5,28,"Big5"),Q.GB18030=new Q(ie.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Q.EUC_KR=new Q(ie.EUC_KR,30,"EUC_KR","EUC-KR");class be extends m{}be.kind="UnsupportedOperationException";class we{static decode(a,c){const h=this.encodingName(c);return this.customDecoder?this.customDecoder(a,h):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(h)?this.decodeFallback(a,h):new TextDecoder(h).decode(a)}static shouldDecodeOnFallback(a){return!we.isBrowser()&&a==="ISO-8859-1"}static encode(a,c){const h=this.encodingName(c);return this.customEncoder?this.customEncoder(a,h):typeof TextEncoder>"u"?this.encodeFallback(a):new TextEncoder().encode(a)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(a){return typeof a=="string"?a:a.getName()}static encodingCharacterSet(a){return a instanceof Q?a:Q.getCharacterSetECIByName(a)}static decodeFallback(a,c){const h=this.encodingCharacterSet(c);if(we.isDecodeFallbackSupported(h)){let g="";for(let p=0,b=a.length;p<b;p++){let w=a[p].toString(16);w.length<2&&(w="0"+w),g+="%"+w}return decodeURIComponent(g)}if(h.equals(Q.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(a.buffer));throw new be(`Encoding ${this.encodingName(c)} not supported by fallback.`)}static isDecodeFallbackSupported(a){return a.equals(Q.UTF8)||a.equals(Q.ISO8859_1)||a.equals(Q.ASCII)}static encodeFallback(a){const h=btoa(unescape(encodeURIComponent(a))).split(""),g=[];for(let p=0;p<h.length;p++)g.push(h[p].charCodeAt(0));return new Uint8Array(g)}}class oe{static castAsNonUtf8Char(a,c=null){const h=c?c.getName():this.ISO88591;return we.decode(new Uint8Array([a]),h)}static guessEncoding(a,c){if(c!=null&&c.get(Y.CHARACTER_SET)!==void 0)return c.get(Y.CHARACTER_SET).toString();const h=a.length;let g=!0,p=!0,b=!0,w=0,C=0,I=0,D=0,F=0,z=0,q=0,ee=0,ne=0,ce=0,pe=0;const Be=a.length>3&&a[0]===239&&a[1]===187&&a[2]===191;for(let Pe=0;Pe<h&&(g||p||b);Pe++){const De=a[Pe]&255;b&&(w>0?(De&128)===0?b=!1:w--:(De&128)!==0&&((De&64)===0?b=!1:(w++,(De&32)===0?C++:(w++,(De&16)===0?I++:(w++,(De&8)===0?D++:b=!1))))),g&&(De>127&&De<160?g=!1:De>159&&(De<192||De===215||De===247)&&pe++),p&&(F>0?De<64||De===127||De>252?p=!1:F--:De===128||De===160||De>239?p=!1:De>160&&De<224?(z++,ee=0,q++,q>ne&&(ne=q)):De>127?(F++,q=0,ee++,ee>ce&&(ce=ee)):(q=0,ee=0))}return b&&w>0&&(b=!1),p&&F>0&&(p=!1),b&&(Be||C+I+D>0)?oe.UTF8:p&&(oe.ASSUME_SHIFT_JIS||ne>=3||ce>=3)?oe.SHIFT_JIS:g&&p?ne===2&&z===2||pe*10>=h?oe.SHIFT_JIS:oe.ISO88591:g?oe.ISO88591:p?oe.SHIFT_JIS:b?oe.UTF8:oe.PLATFORM_DEFAULT_ENCODING}static format(a,...c){let h=-1;function g(b,w,C,I,D,F){if(b==="%%")return"%";if(c[++h]===void 0)return;b=I?parseInt(I.substr(1)):void 0;let z=D?parseInt(D.substr(1)):void 0,q;switch(F){case"s":q=c[h];break;case"c":q=c[h][0];break;case"f":q=parseFloat(c[h]).toFixed(b);break;case"p":q=parseFloat(c[h]).toPrecision(b);break;case"e":q=parseFloat(c[h]).toExponential(b);break;case"x":q=parseInt(c[h]).toString(z||16);break;case"d":q=parseFloat(parseInt(c[h],z||10).toPrecision(b)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(z);let ee=parseInt(C),ne=C&&C[0]+""=="0"?"0":" ";for(;q.length<ee;)q=w!==void 0?q+ne:ne+q;return q}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(p,g)}static getBytes(a,c){return we.encode(a,c)}static getCharCode(a,c=0){return a.charCodeAt(c)}static getCharAt(a){return String.fromCharCode(a)}}oe.SHIFT_JIS=Q.SJIS.getName(),oe.GB2312="GB2312",oe.ISO88591=Q.ISO8859_1.getName(),oe.EUC_JP="EUC_JP",oe.UTF8=Q.UTF8.getName(),oe.PLATFORM_DEFAULT_ENCODING=oe.UTF8,oe.ASSUME_SHIFT_JIS=!1;class Ee{constructor(a=""){this.value=a}enableDecoding(a){return this.encoding=a,this}append(a){return typeof a=="string"?this.value+=a.toString():this.encoding?this.value+=oe.castAsNonUtf8Char(a,this.encoding):this.value+=String.fromCharCode(a),this}appendChars(a,c,h){for(let g=c;c<c+h;g++)this.append(a[g]);return this}length(){return this.value.length}charAt(a){return this.value.charAt(a)}deleteCharAt(a){this.value=this.value.substr(0,a)+this.value.substring(a+1)}setCharAt(a,c){this.value=this.value.substr(0,a)+c+this.value.substr(a+1)}substring(a,c){return this.value.substring(a,c)}setLengthToZero(){this.value=""}toString(){return this.value}insert(a,c){this.value=this.value.substr(0,a)+c+this.value.substr(a+c.length)}}class Se{constructor(a,c,h,g){if(this.width=a,this.height=c,this.rowSize=h,this.bits=g,c==null&&(c=a),this.height=c,a<1||c<1)throw new E("Both dimensions must be greater than 0");h==null&&(h=Math.floor((a+31)/32)),this.rowSize=h,g==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(a){const c=a.length,h=a[0].length,g=new Se(h,c);for(let p=0;p<c;p++){const b=a[p];for(let w=0;w<h;w++)b[w]&&g.set(w,p)}return g}static parseFromString(a,c,h){if(a===null)throw new E("stringRepresentation cannot be null");const g=new Array(a.length);let p=0,b=0,w=-1,C=0,I=0;for(;I<a.length;)if(a.charAt(I)===`
`||a.charAt(I)==="\r"){if(p>b){if(w===-1)w=p-b;else if(p-b!==w)throw new E("row lengths do not match");b=p,C++}I++}else if(a.substring(I,I+c.length)===c)I+=c.length,g[p]=!0,p++;else if(a.substring(I,I+h.length)===h)I+=h.length,g[p]=!1,p++;else throw new E("illegal character encountered: "+a.substring(I));if(p>b){if(w===-1)w=p-b;else if(p-b!==w)throw new E("row lengths do not match");C++}const D=new Se(w,C);for(let F=0;F<p;F++)g[F]&&D.set(Math.floor(F%w),Math.floor(F/w));return D}get(a,c){const h=c*this.rowSize+Math.floor(a/32);return(this.bits[h]>>>(a&31)&1)!==0}set(a,c){const h=c*this.rowSize+Math.floor(a/32);this.bits[h]|=1<<(a&31)&4294967295}unset(a,c){const h=c*this.rowSize+Math.floor(a/32);this.bits[h]&=~(1<<(a&31)&4294967295)}flip(a,c){const h=c*this.rowSize+Math.floor(a/32);this.bits[h]^=1<<(a&31)&4294967295}xor(a){if(this.width!==a.getWidth()||this.height!==a.getHeight()||this.rowSize!==a.getRowSize())throw new E("input matrix dimensions do not match");const c=new U(Math.floor(this.width/32)+1),h=this.rowSize,g=this.bits;for(let p=0,b=this.height;p<b;p++){const w=p*h,C=a.getRow(p,c).getBitArray();for(let I=0;I<h;I++)g[w+I]^=C[I]}}clear(){const a=this.bits,c=a.length;for(let h=0;h<c;h++)a[h]=0}setRegion(a,c,h,g){if(c<0||a<0)throw new E("Left and top must be nonnegative");if(g<1||h<1)throw new E("Height and width must be at least 1");const p=a+h,b=c+g;if(b>this.height||p>this.width)throw new E("The region must fit inside the matrix");const w=this.rowSize,C=this.bits;for(let I=c;I<b;I++){const D=I*w;for(let F=a;F<p;F++)C[D+Math.floor(F/32)]|=1<<(F&31)&4294967295}}getRow(a,c){c==null||c.getSize()<this.width?c=new U(this.width):c.clear();const h=this.rowSize,g=this.bits,p=a*h;for(let b=0;b<h;b++)c.setBulk(b*32,g[p+b]);return c}setRow(a,c){R.arraycopy(c.getBitArray(),0,this.bits,a*this.rowSize,this.rowSize)}rotate180(){const a=this.getWidth(),c=this.getHeight();let h=new U(a),g=new U(a);for(let p=0,b=Math.floor((c+1)/2);p<b;p++)h=this.getRow(p,h),g=this.getRow(c-1-p,g),h.reverse(),g.reverse(),this.setRow(p,g),this.setRow(c-1-p,h)}getEnclosingRectangle(){const a=this.width,c=this.height,h=this.rowSize,g=this.bits;let p=a,b=c,w=-1,C=-1;for(let I=0;I<c;I++)for(let D=0;D<h;D++){const F=g[I*h+D];if(F!==0){if(I<b&&(b=I),I>C&&(C=I),D*32<p){let z=0;for(;(F<<31-z&4294967295)===0;)z++;D*32+z<p&&(p=D*32+z)}if(D*32+31>w){let z=31;for(;!(F>>>z);)z--;D*32+z>w&&(w=D*32+z)}}}return w<p||C<b?null:Int32Array.from([p,b,w-p+1,C-b+1])}getTopLeftOnBit(){const a=this.rowSize,c=this.bits;let h=0;for(;h<c.length&&c[h]===0;)h++;if(h===c.length)return null;const g=h/a;let p=h%a*32;const b=c[h];let w=0;for(;(b<<31-w&4294967295)===0;)w++;return p+=w,Int32Array.from([p,g])}getBottomRightOnBit(){const a=this.rowSize,c=this.bits;let h=c.length-1;for(;h>=0&&c[h]===0;)h--;if(h<0)return null;const g=Math.floor(h/a);let p=Math.floor(h%a)*32;const b=c[h];let w=31;for(;!(b>>>w);)w--;return p+=w,Int32Array.from([p,g])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(a){if(!(a instanceof Se))return!1;const c=a;return this.width===c.width&&this.height===c.height&&this.rowSize===c.rowSize&&P.equals(this.bits,c.bits)}hashCode(){let a=this.width;return a=31*a+this.width,a=31*a+this.height,a=31*a+this.rowSize,a=31*a+P.hashCode(this.bits),a}toString(a="X ",c="  ",h=`
`){return this.buildToString(a,c,h)}buildToString(a,c,h){let g=new Ee;for(let p=0,b=this.height;p<b;p++){for(let w=0,C=this.width;w<C;w++)g.append(this.get(w,p)?a:c);g.append(h)}return g.toString()}clone(){return new Se(this.width,this.height,this.rowSize,this.bits.slice())}}class ae extends m{static getNotFoundInstance(){return new ae}}ae.kind="NotFoundException";class K extends M{constructor(a){super(a),this.luminances=K.EMPTY,this.buckets=new Int32Array(K.LUMINANCE_BUCKETS)}getBlackRow(a,c){const h=this.getLuminanceSource(),g=h.getWidth();c==null||c.getSize()<g?c=new U(g):c.clear(),this.initArrays(g);const p=h.getRow(a,this.luminances),b=this.buckets;for(let C=0;C<g;C++)b[(p[C]&255)>>K.LUMINANCE_SHIFT]++;const w=K.estimateBlackPoint(b);if(g<3)for(let C=0;C<g;C++)(p[C]&255)<w&&c.set(C);else{let C=p[0]&255,I=p[1]&255;for(let D=1;D<g-1;D++){const F=p[D+1]&255;(I*4-C-F)/2<w&&c.set(D),C=I,I=F}}return c}getBlackMatrix(){const a=this.getLuminanceSource(),c=a.getWidth(),h=a.getHeight(),g=new Se(c,h);this.initArrays(c);const p=this.buckets;for(let C=1;C<5;C++){const I=Math.floor(h*C/5),D=a.getRow(I,this.luminances),F=Math.floor(c*4/5);for(let z=Math.floor(c/5);z<F;z++){const q=D[z]&255;p[q>>K.LUMINANCE_SHIFT]++}}const b=K.estimateBlackPoint(p),w=a.getMatrix();for(let C=0;C<h;C++){const I=C*c;for(let D=0;D<c;D++)(w[I+D]&255)<b&&g.set(D,C)}return g}createBinarizer(a){return new K(a)}initArrays(a){this.luminances.length<a&&(this.luminances=new Uint8ClampedArray(a));const c=this.buckets;for(let h=0;h<K.LUMINANCE_BUCKETS;h++)c[h]=0}static estimateBlackPoint(a){const c=a.length;let h=0,g=0,p=0;for(let D=0;D<c;D++)a[D]>p&&(g=D,p=a[D]),a[D]>h&&(h=a[D]);let b=0,w=0;for(let D=0;D<c;D++){const F=D-g,z=a[D]*F*F;z>w&&(b=D,w=z)}if(g>b){const D=g;g=b,b=D}if(b-g<=c/16)throw new ae;let C=b-1,I=-1;for(let D=b-1;D>g;D--){const F=D-g,z=F*F*(b-D)*(h-a[D]);z>I&&(C=D,I=z)}return C<<K.LUMINANCE_SHIFT}}K.LUMINANCE_BITS=5,K.LUMINANCE_SHIFT=8-K.LUMINANCE_BITS,K.LUMINANCE_BUCKETS=1<<K.LUMINANCE_BITS,K.EMPTY=Uint8ClampedArray.from([0]);class re extends K{constructor(a){super(a),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const a=this.getLuminanceSource(),c=a.getWidth(),h=a.getHeight();if(c>=re.MINIMUM_DIMENSION&&h>=re.MINIMUM_DIMENSION){const g=a.getMatrix();let p=c>>re.BLOCK_SIZE_POWER;(c&re.BLOCK_SIZE_MASK)!==0&&p++;let b=h>>re.BLOCK_SIZE_POWER;(h&re.BLOCK_SIZE_MASK)!==0&&b++;const w=re.calculateBlackPoints(g,p,b,c,h),C=new Se(c,h);re.calculateThresholdForBlock(g,p,b,c,h,w,C),this.matrix=C}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(a){return new re(a)}static calculateThresholdForBlock(a,c,h,g,p,b,w){const C=p-re.BLOCK_SIZE,I=g-re.BLOCK_SIZE;for(let D=0;D<h;D++){let F=D<<re.BLOCK_SIZE_POWER;F>C&&(F=C);const z=re.cap(D,2,h-3);for(let q=0;q<c;q++){let ee=q<<re.BLOCK_SIZE_POWER;ee>I&&(ee=I);const ne=re.cap(q,2,c-3);let ce=0;for(let Be=-2;Be<=2;Be++){const Pe=b[z+Be];ce+=Pe[ne-2]+Pe[ne-1]+Pe[ne]+Pe[ne+1]+Pe[ne+2]}const pe=ce/25;re.thresholdBlock(a,ee,F,pe,g,w)}}}static cap(a,c,h){return a<c?c:a>h?h:a}static thresholdBlock(a,c,h,g,p,b){for(let w=0,C=h*p+c;w<re.BLOCK_SIZE;w++,C+=p)for(let I=0;I<re.BLOCK_SIZE;I++)(a[C+I]&255)<=g&&b.set(c+I,h+w)}static calculateBlackPoints(a,c,h,g,p){const b=p-re.BLOCK_SIZE,w=g-re.BLOCK_SIZE,C=new Array(h);for(let I=0;I<h;I++){C[I]=new Int32Array(c);let D=I<<re.BLOCK_SIZE_POWER;D>b&&(D=b);for(let F=0;F<c;F++){let z=F<<re.BLOCK_SIZE_POWER;z>w&&(z=w);let q=0,ee=255,ne=0;for(let pe=0,Be=D*g+z;pe<re.BLOCK_SIZE;pe++,Be+=g){for(let Pe=0;Pe<re.BLOCK_SIZE;Pe++){const De=a[Be+Pe]&255;q+=De,De<ee&&(ee=De),De>ne&&(ne=De)}if(ne-ee>re.MIN_DYNAMIC_RANGE)for(pe++,Be+=g;pe<re.BLOCK_SIZE;pe++,Be+=g)for(let Pe=0;Pe<re.BLOCK_SIZE;Pe++)q+=a[Be+Pe]&255}let ce=q>>re.BLOCK_SIZE_POWER*2;if(ne-ee<=re.MIN_DYNAMIC_RANGE&&(ce=ee/2,I>0&&F>0)){const pe=(C[I-1][F]+2*C[I][F-1]+C[I-1][F-1])/4;ee<pe&&(ce=pe)}C[I][F]=ce}}return C}}re.BLOCK_SIZE_POWER=3,re.BLOCK_SIZE=1<<re.BLOCK_SIZE_POWER,re.BLOCK_SIZE_MASK=re.BLOCK_SIZE-1,re.MINIMUM_DIMENSION=re.BLOCK_SIZE*5,re.MIN_DYNAMIC_RANGE=24;class Ie{constructor(a,c){this.width=a,this.height=c}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(a,c,h,g){throw new be("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new be("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new be("This luminance source does not support rotation by 45 degrees.")}toString(){const a=new Uint8ClampedArray(this.width);let c=new Ee;for(let h=0;h<this.height;h++){const g=this.getRow(h,a);for(let p=0;p<this.width;p++){const b=g[p]&255;let w;b<64?w="#":b<128?w="+":b<192?w=".":w=" ",c.append(w)}c.append(`
`)}return c.toString()}}class Ue extends Ie{constructor(a){super(a.getWidth(),a.getHeight()),this.delegate=a}getRow(a,c){const h=this.delegate.getRow(a,c),g=this.getWidth();for(let p=0;p<g;p++)h[p]=255-(h[p]&255);return h}getMatrix(){const a=this.delegate.getMatrix(),c=this.getWidth()*this.getHeight(),h=new Uint8ClampedArray(c);for(let g=0;g<c;g++)h[g]=255-(a[g]&255);return h}isCropSupported(){return this.delegate.isCropSupported()}crop(a,c,h,g){return new Ue(this.delegate.crop(a,c,h,g))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ue(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ue(this.delegate.rotateCounterClockwise45())}}class Je extends Ie{constructor(a){super(a.width,a.height),this.canvas=a,this.tempCanvasElement=null,this.buffer=Je.makeBufferFromCanvasImageData(a)}static makeBufferFromCanvasImageData(a){const c=a.getContext("2d").getImageData(0,0,a.width,a.height);return Je.toGrayscaleBuffer(c.data,a.width,a.height)}static toGrayscaleBuffer(a,c,h){const g=new Uint8ClampedArray(c*h);for(let p=0,b=0,w=a.length;p<w;p+=4,b++){let C;if(a[p+3]===0)C=255;else{const D=a[p],F=a[p+1],z=a[p+2];C=306*D+601*F+117*z+512>>10}g[b]=C}return g}getRow(a,c){if(a<0||a>=this.getHeight())throw new E("Requested row is outside the image: "+a);const h=this.getWidth(),g=a*h;return c===null?c=this.buffer.slice(g,g+h):(c.length<h&&(c=new Uint8ClampedArray(h)),c.set(this.buffer.slice(g,g+h))),c}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(a,c,h,g){return super.crop(a,c,h,g),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const a=this.canvas.ownerDocument.createElement("canvas");a.width=this.canvas.width,a.height=this.canvas.height,this.tempCanvasElement=a}return this.tempCanvasElement}rotate(a){const c=this.getTempCanvasElement(),h=c.getContext("2d"),g=a*Je.DEGREE_TO_RADIANS,p=this.canvas.width,b=this.canvas.height,w=Math.ceil(Math.abs(Math.cos(g))*p+Math.abs(Math.sin(g))*b),C=Math.ceil(Math.abs(Math.sin(g))*p+Math.abs(Math.cos(g))*b);return c.width=w,c.height=C,h.translate(w/2,C/2),h.rotate(g),h.drawImage(this.canvas,p/-2,b/-2),this.buffer=Je.makeBufferFromCanvasImageData(c),this}invert(){return new Ue(this)}}Je.DEGREE_TO_RADIANS=Math.PI/180;class ${constructor(a,c,h){this.deviceId=a,this.label=c,this.kind="videoinput",this.groupId=h||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ue=(globalThis||$d||self||window||void 0)&&(globalThis||$d||self||window||void 0).__awaiter||function(B,a,c,h){function g(p){return p instanceof c?p:new c(function(b){b(p)})}return new(c||(c=Promise))(function(p,b){function w(D){try{I(h.next(D))}catch(F){b(F)}}function C(D){try{I(h.throw(D))}catch(F){b(F)}}function I(D){D.done?p(D.value):g(D.value).then(w,C)}I((h=h.apply(B,a||[])).next())})};class Ce{constructor(a,c=500,h){this.reader=a,this.timeBetweenScansMillis=c,this._hints=h,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(a){this._timeBetweenDecodingAttempts=a<0?0:a}set hints(a){this._hints=a||null}get hints(){return this._hints}listVideoInputDevices(){return ue(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const a=yield navigator.mediaDevices.enumerateDevices(),c=[];for(const h of a){const g=h.kind==="video"?"videoinput":h.kind;if(g!=="videoinput")continue;const p=h.deviceId||h.id,b=h.label||`Video device ${c.length+1}`,w=h.groupId,C={deviceId:p,label:b,kind:g,groupId:w};c.push(C)}return c})}getVideoInputDevices(){return ue(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(c=>new $(c.deviceId,c.label))})}findDeviceById(a){return ue(this,void 0,void 0,function*(){const c=yield this.listVideoInputDevices();return c?c.find(h=>h.deviceId===a):null})}decodeFromInputVideoDevice(a,c){return ue(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(a,c)})}decodeOnceFromVideoDevice(a,c){return ue(this,void 0,void 0,function*(){this.reset();let h;a?h={deviceId:{exact:a}}:h={facingMode:"environment"};const g={video:h};return yield this.decodeOnceFromConstraints(g,c)})}decodeOnceFromConstraints(a,c){return ue(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeOnceFromStream(h,c)})}decodeOnceFromStream(a,c){return ue(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(a,c);return yield this.decodeOnce(h)})}decodeFromInputVideoDeviceContinuously(a,c,h){return ue(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(a,c,h)})}decodeFromVideoDevice(a,c,h){return ue(this,void 0,void 0,function*(){let g;a?g={deviceId:{exact:a}}:g={facingMode:"environment"};const p={video:g};return yield this.decodeFromConstraints(p,c,h)})}decodeFromConstraints(a,c,h){return ue(this,void 0,void 0,function*(){const g=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeFromStream(g,c,h)})}decodeFromStream(a,c,h){return ue(this,void 0,void 0,function*(){this.reset();const g=yield this.attachStreamToVideo(a,c);return yield this.decodeContinuously(g,h)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(a,c){return ue(this,void 0,void 0,function*(){const h=this.prepareVideoElement(c);return this.addVideoSource(h,a),this.videoElement=h,this.stream=a,yield this.playVideoOnLoadAsync(h),h})}playVideoOnLoadAsync(a){return new Promise((c,h)=>this.playVideoOnLoad(a,()=>c()))}playVideoOnLoad(a,c){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(a),a.addEventListener("ended",this.videoEndedListener),a.addEventListener("canplay",this.videoCanPlayListener),a.addEventListener("playing",c),this.tryPlayVideo(a)}isVideoPlaying(a){return a.currentTime>0&&!a.paused&&!a.ended&&a.readyState>2}tryPlayVideo(a){return ue(this,void 0,void 0,function*(){if(this.isVideoPlaying(a)){console.warn("Trying to play video that is already playing.");return}try{yield a.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(a,c){const h=document.getElementById(a);if(!h)throw new A(`element with id '${a}' not found`);if(h.nodeName.toLowerCase()!==c.toLowerCase())throw new A(`element with id '${a}' must be an ${c} element`);return h}decodeFromImage(a,c){if(!a&&!c)throw new A("either imageElement with a src set or an url must be provided");return c&&!a?this.decodeFromImageUrl(c):this.decodeFromImageElement(a)}decodeFromVideo(a,c){if(!a&&!c)throw new A("Either an element with a src set or an URL must be provided");return c&&!a?this.decodeFromVideoUrl(c):this.decodeFromVideoElement(a)}decodeFromVideoContinuously(a,c,h){if(a===void 0&&c===void 0)throw new A("Either an element with a src set or an URL must be provided");return c&&!a?this.decodeFromVideoUrlContinuously(c,h):this.decodeFromVideoElementContinuously(a,h)}decodeFromImageElement(a){if(!a)throw new A("An image element must be provided.");this.reset();const c=this.prepareImageElement(a);this.imageElement=c;let h;return this.isImageLoaded(c)?h=this.decodeOnce(c,!1,!0):h=this._decodeOnLoadImage(c),h}decodeFromVideoElement(a){const c=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideo(c)}decodeFromVideoElementContinuously(a,c){const h=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideoContinuously(h,c)}_decodeFromVideoElementSetup(a){if(!a)throw new A("A video element must be provided.");this.reset();const c=this.prepareVideoElement(a);return this.videoElement=c,c}decodeFromImageUrl(a){if(!a)throw new A("An URL must be provided.");this.reset();const c=this.prepareImageElement();this.imageElement=c;const h=this._decodeOnLoadImage(c);return c.src=a,h}decodeFromVideoUrl(a){if(!a)throw new A("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),h=this.decodeFromVideoElement(c);return c.src=a,h}decodeFromVideoUrlContinuously(a,c){if(!a)throw new A("An URL must be provided.");this.reset();const h=this.prepareVideoElement(),g=this.decodeFromVideoElementContinuously(h,c);return h.src=a,g}_decodeOnLoadImage(a){return new Promise((c,h)=>{this.imageLoadedListener=()=>this.decodeOnce(a,!1,!0).then(c,h),a.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(a){return ue(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(a),yield this.decodeOnce(a)})}_decodeOnLoadVideoContinuously(a,c){return ue(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(a),this.decodeContinuously(a,c)})}isImageLoaded(a){return!(!a.complete||a.naturalWidth===0)}prepareImageElement(a){let c;return typeof a>"u"&&(c=document.createElement("img"),c.width=200,c.height=200),typeof a=="string"&&(c=this.getMediaElement(a,"img")),a instanceof HTMLImageElement&&(c=a),c}prepareVideoElement(a){let c;return!a&&typeof document<"u"&&(c=document.createElement("video"),c.width=200,c.height=200),typeof a=="string"&&(c=this.getMediaElement(a,"video")),a instanceof HTMLVideoElement&&(c=a),c.setAttribute("autoplay","true"),c.setAttribute("muted","true"),c.setAttribute("playsinline","true"),c}decodeOnce(a,c=!0,h=!0){this._stopAsyncDecode=!1;const g=(p,b)=>{if(this._stopAsyncDecode){b(new ae("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const w=this.decode(a);p(w)}catch(w){const C=c&&w instanceof ae,D=(w instanceof N||w instanceof V)&&h;if(C||D)return setTimeout(g,this._timeBetweenDecodingAttempts,p,b);b(w)}};return new Promise((p,b)=>g(p,b))}decodeContinuously(a,c){this._stopContinuousDecode=!1;const h=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const g=this.decode(a);c(g,null),setTimeout(h,this.timeBetweenScansMillis)}catch(g){c(null,g);const p=g instanceof N||g instanceof V,b=g instanceof ae;(p||b)&&setTimeout(h,this._timeBetweenDecodingAttempts)}};h()}decode(a){const c=this.createBinaryBitmap(a);return this.decodeBitmap(c)}_isHTMLVideoElement(a){return a.videoWidth!==0}drawFrameOnCanvas(a,c,h){c||(c={sx:0,sy:0,sWidth:a.videoWidth,sHeight:a.videoHeight,dx:0,dy:0,dWidth:a.videoWidth,dHeight:a.videoHeight}),h||(h=this.captureCanvasContext),h.drawImage(a,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}drawImageOnCanvas(a,c,h=this.captureCanvasContext){c||(c={sx:0,sy:0,sWidth:a.naturalWidth,sHeight:a.naturalHeight,dx:0,dy:0,dWidth:a.naturalWidth,dHeight:a.naturalHeight}),h||(h=this.captureCanvasContext),h.drawImage(a,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}createBinaryBitmap(a){this.getCaptureCanvasContext(a),this._isHTMLVideoElement(a)?this.drawFrameOnCanvas(a):this.drawImageOnCanvas(a);const c=this.getCaptureCanvas(a),h=new Je(c),g=new re(h);return new T(g)}getCaptureCanvasContext(a){if(!this.captureCanvasContext){const h=this.getCaptureCanvas(a).getContext("2d");this.captureCanvasContext=h}return this.captureCanvasContext}getCaptureCanvas(a){if(!this.captureCanvas){const c=this.createCaptureCanvas(a);this.captureCanvas=c}return this.captureCanvas}decodeBitmap(a){return this.reader.decode(a,this._hints)}createCaptureCanvas(a){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const c=document.createElement("canvas");let h,g;return typeof a<"u"&&(a instanceof HTMLVideoElement?(h=a.videoWidth,g=a.videoHeight):a instanceof HTMLImageElement&&(h=a.naturalWidth||a.width,g=a.naturalHeight||a.height)),c.style.width=h+"px",c.style.height=g+"px",c.width=h,c.height=g,c}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(a=>a.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(a,c){try{a.srcObject=c}catch{a.src=URL.createObjectURL(c)}}cleanVideoSource(a){try{a.srcObject=null}catch{a.src=""}this.videoElement.removeAttribute("src")}}class Oe{constructor(a,c,h=c==null?0:8*c.length,g,p,b=R.currentTimeMillis()){this.text=a,this.rawBytes=c,this.numBits=h,this.resultPoints=g,this.format=p,this.timestamp=b,this.text=a,this.rawBytes=c,h==null?this.numBits=c==null?0:8*c.length:this.numBits=h,this.resultPoints=g,this.format=p,this.resultMetadata=null,b==null?this.timestamp=R.currentTimeMillis():this.timestamp=b}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(a,c){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(a,c)}putAllMetadata(a){a!==null&&(this.resultMetadata===null?this.resultMetadata=a:this.resultMetadata=new Map(a))}addResultPoints(a){const c=this.resultPoints;if(c===null)this.resultPoints=a;else if(a!==null&&a.length>0){const h=new Array(c.length+a.length);R.arraycopy(c,0,h,0,c.length),R.arraycopy(a,0,h,c.length,a.length),this.resultPoints=h}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ve;(function(B){B[B.AZTEC=0]="AZTEC",B[B.CODABAR=1]="CODABAR",B[B.CODE_39=2]="CODE_39",B[B.CODE_93=3]="CODE_93",B[B.CODE_128=4]="CODE_128",B[B.DATA_MATRIX=5]="DATA_MATRIX",B[B.EAN_8=6]="EAN_8",B[B.EAN_13=7]="EAN_13",B[B.ITF=8]="ITF",B[B.MAXICODE=9]="MAXICODE",B[B.PDF_417=10]="PDF_417",B[B.QR_CODE=11]="QR_CODE",B[B.RSS_14=12]="RSS_14",B[B.RSS_EXPANDED=13]="RSS_EXPANDED",B[B.UPC_A=14]="UPC_A",B[B.UPC_E=15]="UPC_E",B[B.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ve||(Ve={}));var Re=Ve,Ge;(function(B){B[B.OTHER=0]="OTHER",B[B.ORIENTATION=1]="ORIENTATION",B[B.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",B[B.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",B[B.ISSUE_NUMBER=4]="ISSUE_NUMBER",B[B.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",B[B.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",B[B.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",B[B.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",B[B.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",B[B.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ge||(Ge={}));var Ne=Ge;class Qe{constructor(a,c,h,g,p=-1,b=-1){this.rawBytes=a,this.text=c,this.byteSegments=h,this.ecLevel=g,this.structuredAppendSequenceNumber=p,this.structuredAppendParity=b,this.numBits=a==null?0:8*a.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(a){this.numBits=a}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(a){this.errorsCorrected=a}getErasures(){return this.erasures}setErasures(a){this.erasures=a}getOther(){return this.other}setOther(a){this.other=a}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ct{exp(a){return this.expTable[a]}log(a){if(a===0)throw new E;return this.logTable[a]}static addOrSubtract(a,c){return a^c}}class Ht{constructor(a,c){if(c.length===0)throw new E;this.field=a;const h=c.length;if(h>1&&c[0]===0){let g=1;for(;g<h&&c[g]===0;)g++;g===h?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(h-g),R.arraycopy(c,g,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);const c=this.coefficients;let h;if(a===1){h=0;for(let b=0,w=c.length;b!==w;b++){const C=c[b];h=ct.addOrSubtract(h,C)}return h}h=c[0];const g=c.length,p=this.field;for(let b=1;b<g;b++)h=ct.addOrSubtract(p.multiply(a,h),c[b]);return h}addOrSubtract(a){if(!this.field.equals(a.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return a;if(a.isZero())return this;let c=this.coefficients,h=a.coefficients;if(c.length>h.length){const b=c;c=h,h=b}let g=new Int32Array(h.length);const p=h.length-c.length;R.arraycopy(h,0,g,0,p);for(let b=p;b<h.length;b++)g[b]=ct.addOrSubtract(c[b-p],h[b]);return new Ht(this.field,g)}multiply(a){if(!this.field.equals(a.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||a.isZero())return this.field.getZero();const c=this.coefficients,h=c.length,g=a.coefficients,p=g.length,b=new Int32Array(h+p-1),w=this.field;for(let C=0;C<h;C++){const I=c[C];for(let D=0;D<p;D++)b[C+D]=ct.addOrSubtract(b[C+D],w.multiply(I,g[D]))}return new Ht(w,b)}multiplyScalar(a){if(a===0)return this.field.getZero();if(a===1)return this;const c=this.coefficients.length,h=this.field,g=new Int32Array(c),p=this.coefficients;for(let b=0;b<c;b++)g[b]=h.multiply(p[b],a);return new Ht(h,g)}multiplyByMonomial(a,c){if(a<0)throw new E;if(c===0)return this.field.getZero();const h=this.coefficients,g=h.length,p=new Int32Array(g+a),b=this.field;for(let w=0;w<g;w++)p[w]=b.multiply(h[w],c);return new Ht(b,p)}divide(a){if(!this.field.equals(a.field))throw new E("GenericGFPolys do not have same GenericGF field");if(a.isZero())throw new E("Divide by 0");const c=this.field;let h=c.getZero(),g=this;const p=a.getCoefficient(a.getDegree()),b=c.inverse(p);for(;g.getDegree()>=a.getDegree()&&!g.isZero();){const w=g.getDegree()-a.getDegree(),C=c.multiply(g.getCoefficient(g.getDegree()),b),I=a.multiplyByMonomial(w,C),D=c.buildMonomial(w,C);h=h.addOrSubtract(D),g=g.addOrSubtract(I)}return[h,g]}toString(){let a="";for(let c=this.getDegree();c>=0;c--){let h=this.getCoefficient(c);if(h!==0){if(h<0?(a+=" - ",h=-h):a.length>0&&(a+=" + "),c===0||h!==1){const g=this.field.log(h);g===0?a+="1":g===1?a+="a":(a+="a^",a+=g)}c!==0&&(c===1?a+="x":(a+="x^",a+=c))}}return a}}class kn extends m{}kn.kind="ArithmeticException";class Ye extends ct{constructor(a,c,h){super(),this.primitive=a,this.size=c,this.generatorBase=h;const g=new Int32Array(c);let p=1;for(let w=0;w<c;w++)g[w]=p,p*=2,p>=c&&(p^=a,p&=c-1);this.expTable=g;const b=new Int32Array(c);for(let w=0;w<c-1;w++)b[g[w]]=w;this.logTable=b,this.zero=new Ht(this,Int32Array.from([0])),this.one=new Ht(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,c){if(a<0)throw new E;if(c===0)return this.zero;const h=new Int32Array(a+1);return h[0]=c,new Ht(this,h)}inverse(a){if(a===0)throw new kn;return this.expTable[this.size-this.logTable[a]-1]}multiply(a,c){return a===0||c===0?0:this.expTable[(this.logTable[a]+this.logTable[c])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+j.toHexString(this.primitive)+","+this.size+")"}equals(a){return a===this}}Ye.AZTEC_DATA_12=new Ye(4201,4096,1),Ye.AZTEC_DATA_10=new Ye(1033,1024,1),Ye.AZTEC_DATA_6=new Ye(67,64,1),Ye.AZTEC_PARAM=new Ye(19,16,1),Ye.QR_CODE_FIELD_256=new Ye(285,256,0),Ye.DATA_MATRIX_FIELD_256=new Ye(301,256,1),Ye.AZTEC_DATA_8=Ye.DATA_MATRIX_FIELD_256,Ye.MAXICODE_FIELD_64=Ye.AZTEC_DATA_6;class bt extends m{}bt.kind="ReedSolomonException";class It extends m{}It.kind="IllegalStateException";class Qt{constructor(a){this.field=a}decode(a,c){const h=this.field,g=new Ht(h,a),p=new Int32Array(c);let b=!0;for(let q=0;q<c;q++){const ee=g.evaluateAt(h.exp(q+h.getGeneratorBase()));p[p.length-1-q]=ee,ee!==0&&(b=!1)}if(b)return;const w=new Ht(h,p),C=this.runEuclideanAlgorithm(h.buildMonomial(c,1),w,c),I=C[0],D=C[1],F=this.findErrorLocations(I),z=this.findErrorMagnitudes(D,F);for(let q=0;q<F.length;q++){const ee=a.length-1-h.log(F[q]);if(ee<0)throw new bt("Bad error location");a[ee]=Ye.addOrSubtract(a[ee],z[q])}}runEuclideanAlgorithm(a,c,h){if(a.getDegree()<c.getDegree()){const q=a;a=c,c=q}const g=this.field;let p=a,b=c,w=g.getZero(),C=g.getOne();for(;b.getDegree()>=(h/2|0);){let q=p,ee=w;if(p=b,w=C,p.isZero())throw new bt("r_{i-1} was zero");b=q;let ne=g.getZero();const ce=p.getCoefficient(p.getDegree()),pe=g.inverse(ce);for(;b.getDegree()>=p.getDegree()&&!b.isZero();){const Be=b.getDegree()-p.getDegree(),Pe=g.multiply(b.getCoefficient(b.getDegree()),pe);ne=ne.addOrSubtract(g.buildMonomial(Be,Pe)),b=b.addOrSubtract(p.multiplyByMonomial(Be,Pe))}if(C=ne.multiply(w).addOrSubtract(ee),b.getDegree()>=p.getDegree())throw new It("Division algorithm failed to reduce polynomial?")}const I=C.getCoefficient(0);if(I===0)throw new bt("sigmaTilde(0) was zero");const D=g.inverse(I),F=C.multiplyScalar(D),z=b.multiplyScalar(D);return[F,z]}findErrorLocations(a){const c=a.getDegree();if(c===1)return Int32Array.from([a.getCoefficient(1)]);const h=new Int32Array(c);let g=0;const p=this.field;for(let b=1;b<p.getSize()&&g<c;b++)a.evaluateAt(b)===0&&(h[g]=p.inverse(b),g++);if(g!==c)throw new bt("Error locator degree does not match number of roots");return h}findErrorMagnitudes(a,c){const h=c.length,g=new Int32Array(h),p=this.field;for(let b=0;b<h;b++){const w=p.inverse(c[b]);let C=1;for(let I=0;I<h;I++)if(b!==I){const D=p.multiply(c[I],w),F=(D&1)===0?D|1:D&-2;C=p.multiply(C,F)}g[b]=p.multiply(a.evaluateAt(w),p.inverse(C)),p.getGeneratorBase()!==0&&(g[b]=p.multiply(g[b],w))}return g}}var ln;(function(B){B[B.UPPER=0]="UPPER",B[B.LOWER=1]="LOWER",B[B.MIXED=2]="MIXED",B[B.DIGIT=3]="DIGIT",B[B.PUNCT=4]="PUNCT",B[B.BINARY=5]="BINARY"})(ln||(ln={}));class Dt{decode(a){this.ddata=a;let c=a.getBits(),h=this.extractBits(c),g=this.correctBits(h),p=Dt.convertBoolArrayToByteArray(g),b=Dt.getEncodedData(g),w=new Qe(p,b,null,null);return w.setNumBits(g.length),w}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let c=a.length,h=ln.UPPER,g=ln.UPPER,p="",b=0;for(;b<c;)if(g===ln.BINARY){if(c-b<5)break;let w=Dt.readCode(a,b,5);if(b+=5,w===0){if(c-b<11)break;w=Dt.readCode(a,b,11)+31,b+=11}for(let C=0;C<w;C++){if(c-b<8){b=c;break}const I=Dt.readCode(a,b,8);p+=oe.castAsNonUtf8Char(I),b+=8}g=h}else{let w=g===ln.DIGIT?4:5;if(c-b<w)break;let C=Dt.readCode(a,b,w);b+=w;let I=Dt.getCharacter(g,C);I.startsWith("CTRL_")?(h=g,g=Dt.getTable(I.charAt(5)),I.charAt(6)==="L"&&(h=g)):(p+=I,g=h)}return p}static getTable(a){switch(a){case"L":return ln.LOWER;case"P":return ln.PUNCT;case"M":return ln.MIXED;case"D":return ln.DIGIT;case"B":return ln.BINARY;case"U":default:return ln.UPPER}}static getCharacter(a,c){switch(a){case ln.UPPER:return Dt.UPPER_TABLE[c];case ln.LOWER:return Dt.LOWER_TABLE[c];case ln.MIXED:return Dt.MIXED_TABLE[c];case ln.PUNCT:return Dt.PUNCT_TABLE[c];case ln.DIGIT:return Dt.DIGIT_TABLE[c];default:throw new It("Bad table")}}correctBits(a){let c,h;this.ddata.getNbLayers()<=2?(h=6,c=Ye.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(h=8,c=Ye.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(h=10,c=Ye.AZTEC_DATA_10):(h=12,c=Ye.AZTEC_DATA_12);let g=this.ddata.getNbDatablocks(),p=a.length/h;if(p<g)throw new V;let b=a.length%h,w=new Int32Array(p);for(let z=0;z<p;z++,b+=h)w[z]=Dt.readCode(a,b,h);try{new Qt(c).decode(w,p-g)}catch(z){throw new V(z)}let C=(1<<h)-1,I=0;for(let z=0;z<g;z++){let q=w[z];if(q===0||q===C)throw new V;(q===1||q===C-1)&&I++}let D=new Array(g*h-I),F=0;for(let z=0;z<g;z++){let q=w[z];if(q===1||q===C-1)D.fill(q>1,F,F+h-1),F+=h-1;else for(let ee=h-1;ee>=0;--ee)D[F++]=(q&1<<ee)!==0}return D}extractBits(a){let c=this.ddata.isCompact(),h=this.ddata.getNbLayers(),g=(c?11:14)+h*4,p=new Int32Array(g),b=new Array(this.totalBitsInLayer(h,c));if(c)for(let w=0;w<p.length;w++)p[w]=w;else{let w=g+1+2*j.truncDivision(j.truncDivision(g,2)-1,15),C=g/2,I=j.truncDivision(w,2);for(let D=0;D<C;D++){let F=D+j.truncDivision(D,15);p[C-D-1]=I-F-1,p[C+D]=I+F+1}}for(let w=0,C=0;w<h;w++){let I=(h-w)*4+(c?9:12),D=w*2,F=g-1-D;for(let z=0;z<I;z++){let q=z*2;for(let ee=0;ee<2;ee++)b[C+q+ee]=a.get(p[D+ee],p[D+z]),b[C+2*I+q+ee]=a.get(p[D+z],p[F-ee]),b[C+4*I+q+ee]=a.get(p[F-ee],p[F-z]),b[C+6*I+q+ee]=a.get(p[F-z],p[D+ee])}C+=I*8}return b}static readCode(a,c,h){let g=0;for(let p=c;p<c+h;p++)g<<=1,a[p]&&(g|=1);return g}static readByte(a,c){let h=a.length-c;return h>=8?Dt.readCode(a,c,8):Dt.readCode(a,c,h)<<8-h}static convertBoolArrayToByteArray(a){let c=new Uint8Array((a.length+7)/8);for(let h=0;h<c.length;h++)c[h]=Dt.readByte(a,8*h);return c}totalBitsInLayer(a,c){return((c?88:112)+16*a)*a}}Dt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Dt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Dt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Dt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Dt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ft{constructor(){}static round(a){return a===NaN?0:a<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:a>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a+(a<0?-.5:.5)|0}static distance(a,c,h,g){const p=a-h,b=c-g;return Math.sqrt(p*p+b*b)}static sum(a){let c=0;for(let h=0,g=a.length;h!==g;h++){const p=a[h];c+=p}return c}}class te{static floatToIntBits(a){return a}}te.MAX_VALUE=Number.MAX_SAFE_INTEGER;class J{constructor(a,c){this.x=a,this.y=c}getX(){return this.x}getY(){return this.y}equals(a){if(a instanceof J){const c=a;return this.x===c.x&&this.y===c.y}return!1}hashCode(){return 31*te.floatToIntBits(this.x)+te.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(a){const c=this.distance(a[0],a[1]),h=this.distance(a[1],a[2]),g=this.distance(a[0],a[2]);let p,b,w;if(h>=c&&h>=g?(b=a[0],p=a[1],w=a[2]):g>=h&&g>=c?(b=a[1],p=a[0],w=a[2]):(b=a[2],p=a[0],w=a[1]),this.crossProductZ(p,b,w)<0){const C=p;p=w,w=C}a[0]=p,a[1]=b,a[2]=w}static distance(a,c){return ft.distance(a.x,a.y,c.x,c.y)}static crossProductZ(a,c,h){const g=c.x,p=c.y;return(h.x-g)*(a.y-p)-(h.y-p)*(a.x-g)}}class Ae{constructor(a,c){this.bits=a,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class je extends Ae{constructor(a,c,h,g,p){super(a,c),this.compact=h,this.nbDatablocks=g,this.nbLayers=p}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Le{constructor(a,c,h,g){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),c==null&&(c=Le.INIT_SIZE),h==null&&(h=a.getWidth()/2|0),g==null&&(g=a.getHeight()/2|0);const p=c/2|0;if(this.leftInit=h-p,this.rightInit=h+p,this.upInit=g-p,this.downInit=g+p,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ae}detect(){let a=this.leftInit,c=this.rightInit,h=this.upInit,g=this.downInit,p=!1,b=!0,w=!1,C=!1,I=!1,D=!1,F=!1;const z=this.width,q=this.height;for(;b;){b=!1;let ee=!0;for(;(ee||!C)&&c<z;)ee=this.containsBlackPoint(h,g,c,!1),ee?(c++,b=!0,C=!0):C||c++;if(c>=z){p=!0;break}let ne=!0;for(;(ne||!I)&&g<q;)ne=this.containsBlackPoint(a,c,g,!0),ne?(g++,b=!0,I=!0):I||g++;if(g>=q){p=!0;break}let ce=!0;for(;(ce||!D)&&a>=0;)ce=this.containsBlackPoint(h,g,a,!1),ce?(a--,b=!0,D=!0):D||a--;if(a<0){p=!0;break}let pe=!0;for(;(pe||!F)&&h>=0;)pe=this.containsBlackPoint(a,c,h,!0),pe?(h--,b=!0,F=!0):F||h--;if(h<0){p=!0;break}b&&(w=!0)}if(!p&&w){const ee=c-a;let ne=null;for(let Pe=1;ne===null&&Pe<ee;Pe++)ne=this.getBlackPointOnSegment(a,g-Pe,a+Pe,g);if(ne==null)throw new ae;let ce=null;for(let Pe=1;ce===null&&Pe<ee;Pe++)ce=this.getBlackPointOnSegment(a,h+Pe,a+Pe,h);if(ce==null)throw new ae;let pe=null;for(let Pe=1;pe===null&&Pe<ee;Pe++)pe=this.getBlackPointOnSegment(c,h+Pe,c-Pe,h);if(pe==null)throw new ae;let Be=null;for(let Pe=1;Be===null&&Pe<ee;Pe++)Be=this.getBlackPointOnSegment(c,g-Pe,c-Pe,g);if(Be==null)throw new ae;return this.centerEdges(Be,ne,pe,ce)}else throw new ae}getBlackPointOnSegment(a,c,h,g){const p=ft.round(ft.distance(a,c,h,g)),b=(h-a)/p,w=(g-c)/p,C=this.image;for(let I=0;I<p;I++){const D=ft.round(a+I*b),F=ft.round(c+I*w);if(C.get(D,F))return new J(D,F)}return null}centerEdges(a,c,h,g){const p=a.getX(),b=a.getY(),w=c.getX(),C=c.getY(),I=h.getX(),D=h.getY(),F=g.getX(),z=g.getY(),q=Le.CORR;return p<this.width/2?[new J(F-q,z+q),new J(w+q,C+q),new J(I-q,D-q),new J(p+q,b-q)]:[new J(F+q,z+q),new J(w+q,C-q),new J(I-q,D+q),new J(p-q,b-q)]}containsBlackPoint(a,c,h,g){const p=this.image;if(g){for(let b=a;b<=c;b++)if(p.get(b,h))return!0}else for(let b=a;b<=c;b++)if(p.get(h,b))return!0;return!1}}Le.INIT_SIZE=10,Le.CORR=1;class Fe{static checkAndNudgePoints(a,c){const h=a.getWidth(),g=a.getHeight();let p=!0;for(let b=0;b<c.length&&p;b+=2){const w=Math.floor(c[b]),C=Math.floor(c[b+1]);if(w<-1||w>h||C<-1||C>g)throw new ae;p=!1,w===-1?(c[b]=0,p=!0):w===h&&(c[b]=h-1,p=!0),C===-1?(c[b+1]=0,p=!0):C===g&&(c[b+1]=g-1,p=!0)}p=!0;for(let b=c.length-2;b>=0&&p;b-=2){const w=Math.floor(c[b]),C=Math.floor(c[b+1]);if(w<-1||w>h||C<-1||C>g)throw new ae;p=!1,w===-1?(c[b]=0,p=!0):w===h&&(c[b]=h-1,p=!0),C===-1?(c[b+1]=0,p=!0):C===g&&(c[b+1]=g-1,p=!0)}}}class ze{constructor(a,c,h,g,p,b,w,C,I){this.a11=a,this.a21=c,this.a31=h,this.a12=g,this.a22=p,this.a32=b,this.a13=w,this.a23=C,this.a33=I}static quadrilateralToQuadrilateral(a,c,h,g,p,b,w,C,I,D,F,z,q,ee,ne,ce){const pe=ze.quadrilateralToSquare(a,c,h,g,p,b,w,C);return ze.squareToQuadrilateral(I,D,F,z,q,ee,ne,ce).times(pe)}transformPoints(a){const c=a.length,h=this.a11,g=this.a12,p=this.a13,b=this.a21,w=this.a22,C=this.a23,I=this.a31,D=this.a32,F=this.a33;for(let z=0;z<c;z+=2){const q=a[z],ee=a[z+1],ne=p*q+C*ee+F;a[z]=(h*q+b*ee+I)/ne,a[z+1]=(g*q+w*ee+D)/ne}}transformPointsWithValues(a,c){const h=this.a11,g=this.a12,p=this.a13,b=this.a21,w=this.a22,C=this.a23,I=this.a31,D=this.a32,F=this.a33,z=a.length;for(let q=0;q<z;q++){const ee=a[q],ne=c[q],ce=p*ee+C*ne+F;a[q]=(h*ee+b*ne+I)/ce,c[q]=(g*ee+w*ne+D)/ce}}static squareToQuadrilateral(a,c,h,g,p,b,w,C){const I=a-h+p-w,D=c-g+b-C;if(I===0&&D===0)return new ze(h-a,p-h,a,g-c,b-g,c,0,0,1);{const F=h-p,z=w-p,q=g-b,ee=C-b,ne=F*ee-z*q,ce=(I*ee-z*D)/ne,pe=(F*D-I*q)/ne;return new ze(h-a+ce*h,w-a+pe*w,a,g-c+ce*g,C-c+pe*C,c,ce,pe,1)}}static quadrilateralToSquare(a,c,h,g,p,b,w,C){return ze.squareToQuadrilateral(a,c,h,g,p,b,w,C).buildAdjoint()}buildAdjoint(){return new ze(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(a){return new ze(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)}}class gt extends Fe{sampleGrid(a,c,h,g,p,b,w,C,I,D,F,z,q,ee,ne,ce,pe,Be,Pe){const De=ze.quadrilateralToQuadrilateral(g,p,b,w,C,I,D,F,z,q,ee,ne,ce,pe,Be,Pe);return this.sampleGridWithTransform(a,c,h,De)}sampleGridWithTransform(a,c,h,g){if(c<=0||h<=0)throw new ae;const p=new Se(c,h),b=new Float32Array(2*c);for(let w=0;w<h;w++){const C=b.length,I=w+.5;for(let D=0;D<C;D+=2)b[D]=D/2+.5,b[D+1]=I;g.transformPoints(b),Fe.checkAndNudgePoints(a,b);try{for(let D=0;D<C;D+=2)a.get(Math.floor(b[D]),Math.floor(b[D+1]))&&p.set(D/2,w)}catch{throw new ae}}return p}}class ut{static setGridSampler(a){ut.gridSampler=a}static getInstance(){return ut.gridSampler}}ut.gridSampler=new gt;class _t{constructor(a,c){this.x=a,this.y=c}toResultPoint(){return new J(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Vi{constructor(a){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=a}detect(){return this.detectMirror(!1)}detectMirror(a){let c=this.getMatrixCenter(),h=this.getBullsEyeCorners(c);if(a){let b=h[0];h[0]=h[2],h[2]=b}this.extractParameters(h);let g=this.sampleGrid(this.image,h[this.shift%4],h[(this.shift+1)%4],h[(this.shift+2)%4],h[(this.shift+3)%4]),p=this.getMatrixCornerPoints(h);return new je(g,p,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(a){if(!this.isValidPoint(a[0])||!this.isValidPoint(a[1])||!this.isValidPoint(a[2])||!this.isValidPoint(a[3]))throw new ae;let c=2*this.nbCenterLayers,h=new Int32Array([this.sampleLine(a[0],a[1],c),this.sampleLine(a[1],a[2],c),this.sampleLine(a[2],a[3],c),this.sampleLine(a[3],a[0],c)]);this.shift=this.getRotation(h,c);let g=0;for(let b=0;b<4;b++){let w=h[(this.shift+b)%4];this.compact?(g<<=7,g+=w>>1&127):(g<<=10,g+=(w>>2&992)+(w>>1&31))}let p=this.getCorrectedParameterData(g,this.compact);this.compact?(this.nbLayers=(p>>6)+1,this.nbDataBlocks=(p&63)+1):(this.nbLayers=(p>>11)+1,this.nbDataBlocks=(p&2047)+1)}getRotation(a,c){let h=0;a.forEach((g,p,b)=>{let w=(g>>c-2<<1)+(g&1);h=(h<<3)+w}),h=((h&1)<<11)+(h>>1);for(let g=0;g<4;g++)if(j.bitCount(h^this.EXPECTED_CORNER_BITS[g])<=2)return g;throw new ae}getCorrectedParameterData(a,c){let h,g;c?(h=7,g=2):(h=10,g=4);let p=h-g,b=new Int32Array(h);for(let C=h-1;C>=0;--C)b[C]=a&15,a>>=4;try{new Qt(Ye.AZTEC_PARAM).decode(b,p)}catch{throw new ae}let w=0;for(let C=0;C<g;C++)w=(w<<4)+b[C];return w}getBullsEyeCorners(a){let c=a,h=a,g=a,p=a,b=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let F=this.getFirstDifferent(c,b,1,-1),z=this.getFirstDifferent(h,b,1,1),q=this.getFirstDifferent(g,b,-1,1),ee=this.getFirstDifferent(p,b,-1,-1);if(this.nbCenterLayers>2){let ne=this.distancePoint(ee,F)*this.nbCenterLayers/(this.distancePoint(p,c)*(this.nbCenterLayers+2));if(ne<.75||ne>1.25||!this.isWhiteOrBlackRectangle(F,z,q,ee))break}c=F,h=z,g=q,p=ee,b=!b}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ae;this.compact=this.nbCenterLayers===5;let w=new J(c.getX()+.5,c.getY()-.5),C=new J(h.getX()+.5,h.getY()+.5),I=new J(g.getX()-.5,g.getY()+.5),D=new J(p.getX()-.5,p.getY()-.5);return this.expandSquare([w,C,I,D],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let a,c,h,g;try{let w=new Le(this.image).detect();a=w[0],c=w[1],h=w[2],g=w[3]}catch{let C=this.image.getWidth()/2,I=this.image.getHeight()/2;a=this.getFirstDifferent(new _t(C+7,I-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new _t(C+7,I+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new _t(C-7,I+7),!1,-1,1).toResultPoint(),g=this.getFirstDifferent(new _t(C-7,I-7),!1,-1,-1).toResultPoint()}let p=ft.round((a.getX()+g.getX()+c.getX()+h.getX())/4),b=ft.round((a.getY()+g.getY()+c.getY()+h.getY())/4);try{let w=new Le(this.image,15,p,b).detect();a=w[0],c=w[1],h=w[2],g=w[3]}catch{a=this.getFirstDifferent(new _t(p+7,b-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new _t(p+7,b+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new _t(p-7,b+7),!1,-1,1).toResultPoint(),g=this.getFirstDifferent(new _t(p-7,b-7),!1,-1,-1).toResultPoint()}return p=ft.round((a.getX()+g.getX()+c.getX()+h.getX())/4),b=ft.round((a.getY()+g.getY()+c.getY()+h.getY())/4),new _t(p,b)}getMatrixCornerPoints(a){return this.expandSquare(a,2*this.nbCenterLayers,this.getDimension())}sampleGrid(a,c,h,g,p){let b=ut.getInstance(),w=this.getDimension(),C=w/2-this.nbCenterLayers,I=w/2+this.nbCenterLayers;return b.sampleGrid(a,w,w,C,C,I,C,I,I,C,I,c.getX(),c.getY(),h.getX(),h.getY(),g.getX(),g.getY(),p.getX(),p.getY())}sampleLine(a,c,h){let g=0,p=this.distanceResultPoint(a,c),b=p/h,w=a.getX(),C=a.getY(),I=b*(c.getX()-a.getX())/p,D=b*(c.getY()-a.getY())/p;for(let F=0;F<h;F++)this.image.get(ft.round(w+F*I),ft.round(C+F*D))&&(g|=1<<h-F-1);return g}isWhiteOrBlackRectangle(a,c,h,g){let p=3;a=new _t(a.getX()-p,a.getY()+p),c=new _t(c.getX()-p,c.getY()-p),h=new _t(h.getX()+p,h.getY()-p),g=new _t(g.getX()+p,g.getY()+p);let b=this.getColor(g,a);if(b===0)return!1;let w=this.getColor(a,c);return w!==b||(w=this.getColor(c,h),w!==b)?!1:(w=this.getColor(h,g),w===b)}getColor(a,c){let h=this.distancePoint(a,c),g=(c.getX()-a.getX())/h,p=(c.getY()-a.getY())/h,b=0,w=a.getX(),C=a.getY(),I=this.image.get(a.getX(),a.getY()),D=Math.ceil(h);for(let z=0;z<D;z++)w+=g,C+=p,this.image.get(ft.round(w),ft.round(C))!==I&&b++;let F=b/h;return F>.1&&F<.9?0:F<=.1===I?1:-1}getFirstDifferent(a,c,h,g){let p=a.getX()+h,b=a.getY()+g;for(;this.isValid(p,b)&&this.image.get(p,b)===c;)p+=h,b+=g;for(p-=h,b-=g;this.isValid(p,b)&&this.image.get(p,b)===c;)p+=h;for(p-=h;this.isValid(p,b)&&this.image.get(p,b)===c;)b+=g;return b-=g,new _t(p,b)}expandSquare(a,c,h){let g=h/(2*c),p=a[0].getX()-a[2].getX(),b=a[0].getY()-a[2].getY(),w=(a[0].getX()+a[2].getX())/2,C=(a[0].getY()+a[2].getY())/2,I=new J(w+g*p,C+g*b),D=new J(w-g*p,C-g*b);p=a[1].getX()-a[3].getX(),b=a[1].getY()-a[3].getY(),w=(a[1].getX()+a[3].getX())/2,C=(a[1].getY()+a[3].getY())/2;let F=new J(w+g*p,C+g*b),z=new J(w-g*p,C-g*b);return[I,F,D,z]}isValid(a,c){return a>=0&&a<this.image.getWidth()&&c>0&&c<this.image.getHeight()}isValidPoint(a){let c=ft.round(a.getX()),h=ft.round(a.getY());return this.isValid(c,h)}distancePoint(a,c){return ft.distance(a.getX(),a.getY(),c.getX(),c.getY())}distanceResultPoint(a,c){return ft.distance(a.getX(),a.getY(),c.getX(),c.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(j.truncDivision(this.nbLayers-4,8)+1)+15}}class Mi{decode(a,c=null){let h=null,g=new Vi(a.getBlackMatrix()),p=null,b=null;try{let D=g.detectMirror(!1);p=D.getPoints(),this.reportFoundResultPoints(c,p),b=new Dt().decode(D)}catch(D){h=D}if(b==null)try{let D=g.detectMirror(!0);p=D.getPoints(),this.reportFoundResultPoints(c,p),b=new Dt().decode(D)}catch(D){throw h??D}let w=new Oe(b.getText(),b.getRawBytes(),b.getNumBits(),p,Re.AZTEC,R.currentTimeMillis()),C=b.getByteSegments();C!=null&&w.putMetadata(Ne.BYTE_SEGMENTS,C);let I=b.getECLevel();return I!=null&&w.putMetadata(Ne.ERROR_CORRECTION_LEVEL,I),w}reportFoundResultPoints(a,c){if(a!=null){let h=a.get(Y.NEED_RESULT_POINT_CALLBACK);h!=null&&c.forEach((g,p,b)=>{h.foundPossibleResultPoint(g)})}}reset(){}}class Hc extends Ce{constructor(a=500){super(new Mi,a)}}class Zt{decode(a,c){try{return this.doDecode(a,c)}catch{if(c&&c.get(Y.TRY_HARDER)===!0&&a.isRotateSupported()){const p=a.rotateCounterClockwise(),b=this.doDecode(p,c),w=b.getResultMetadata();let C=270;w!==null&&w.get(Ne.ORIENTATION)===!0&&(C=C+w.get(Ne.ORIENTATION)%360),b.putMetadata(Ne.ORIENTATION,C);const I=b.getResultPoints();if(I!==null){const D=p.getHeight();for(let F=0;F<I.length;F++)I[F]=new J(D-I[F].getY()-1,I[F].getX())}return b}else throw new ae}}reset(){}doDecode(a,c){const h=a.getWidth(),g=a.getHeight();let p=new U(h);const b=c&&c.get(Y.TRY_HARDER)===!0,w=Math.max(1,g>>(b?8:5));let C;b?C=g:C=15;const I=Math.trunc(g/2);for(let D=0;D<C;D++){const F=Math.trunc((D+1)/2),z=(D&1)===0,q=I+w*(z?F:-F);if(q<0||q>=g)break;try{p=a.getBlackRow(q,p)}catch{continue}for(let ee=0;ee<2;ee++){if(ee===1&&(p.reverse(),c&&c.get(Y.NEED_RESULT_POINT_CALLBACK)===!0)){const ne=new Map;c.forEach((ce,pe)=>ne.set(pe,ce)),ne.delete(Y.NEED_RESULT_POINT_CALLBACK),c=ne}try{const ne=this.decodeRow(q,p,c);if(ee===1){ne.putMetadata(Ne.ORIENTATION,180);const ce=ne.getResultPoints();ce!==null&&(ce[0]=new J(h-ce[0].getX()-1,ce[0].getY()),ce[1]=new J(h-ce[1].getX()-1,ce[1].getY()))}return ne}catch{}}}throw new ae}static recordPattern(a,c,h){const g=h.length;for(let I=0;I<g;I++)h[I]=0;const p=a.getSize();if(c>=p)throw new ae;let b=!a.get(c),w=0,C=c;for(;C<p;){if(a.get(C)!==b)h[w]++;else{if(++w===g)break;h[w]=1,b=!b}C++}if(!(w===g||w===g-1&&C===p))throw new ae}static recordPatternInReverse(a,c,h){let g=h.length,p=a.get(c);for(;c>0&&g>=0;)a.get(--c)!==p&&(g--,p=!p);if(g>=0)throw new ae;Zt.recordPattern(a,c+1,h)}static patternMatchVariance(a,c,h){const g=a.length;let p=0,b=0;for(let I=0;I<g;I++)p+=a[I],b+=c[I];if(p<b)return Number.POSITIVE_INFINITY;const w=p/b;h*=w;let C=0;for(let I=0;I<g;I++){const D=a[I],F=c[I]*w,z=D>F?D-F:F-D;if(z>h)return Number.POSITIVE_INFINITY;C+=z}return C/p}}class ke extends Zt{static findStartPattern(a){const c=a.getSize(),h=a.getNextSet(0);let g=0,p=Int32Array.from([0,0,0,0,0,0]),b=h,w=!1;const C=6;for(let I=h;I<c;I++)if(a.get(I)!==w)p[g]++;else{if(g===C-1){let D=ke.MAX_AVG_VARIANCE,F=-1;for(let z=ke.CODE_START_A;z<=ke.CODE_START_C;z++){const q=Zt.patternMatchVariance(p,ke.CODE_PATTERNS[z],ke.MAX_INDIVIDUAL_VARIANCE);q<D&&(D=q,F=z)}if(F>=0&&a.isRange(Math.max(0,b-(I-b)/2),b,!1))return Int32Array.from([b,I,F]);b+=p[0]+p[1],p=p.slice(2,p.length-1),p[g-1]=0,p[g]=0,g--}else g++;p[g]=1,w=!w}throw new ae}static decodeCode(a,c,h){Zt.recordPattern(a,h,c);let g=ke.MAX_AVG_VARIANCE,p=-1;for(let b=0;b<ke.CODE_PATTERNS.length;b++){const w=ke.CODE_PATTERNS[b],C=this.patternMatchVariance(c,w,ke.MAX_INDIVIDUAL_VARIANCE);C<g&&(g=C,p=b)}if(p>=0)return p;throw new ae}decodeRow(a,c,h){const g=h&&h.get(Y.ASSUME_GS1)===!0,p=ke.findStartPattern(c),b=p[2];let w=0;const C=new Uint8Array(20);C[w++]=b;let I;switch(b){case ke.CODE_START_A:I=ke.CODE_CODE_A;break;case ke.CODE_START_B:I=ke.CODE_CODE_B;break;case ke.CODE_START_C:I=ke.CODE_CODE_C;break;default:throw new V}let D=!1,F=!1,z="",q=p[0],ee=p[1];const ne=Int32Array.from([0,0,0,0,0,0]);let ce=0,pe=0,Be=b,Pe=0,De=!0,Ct=!1,dt=!1;for(;!D;){const Zr=F;switch(F=!1,ce=pe,pe=ke.decodeCode(c,ne,ee),C[w++]=pe,pe!==ke.CODE_STOP&&(De=!0),pe!==ke.CODE_STOP&&(Pe++,Be+=Pe*pe),q=ee,ee+=ne.reduce((Kh,eu)=>Kh+eu,0),pe){case ke.CODE_START_A:case ke.CODE_START_B:case ke.CODE_START_C:throw new V}switch(I){case ke.CODE_CODE_A:if(pe<64)dt===Ct?z+=String.fromCharCode(32+pe):z+=String.fromCharCode(32+pe+128),dt=!1;else if(pe<96)dt===Ct?z+=String.fromCharCode(pe-64):z+=String.fromCharCode(pe+64),dt=!1;else switch(pe!==ke.CODE_STOP&&(De=!1),pe){case ke.CODE_FNC_1:g&&(z.length===0?z+="]C1":z+="");break;case ke.CODE_FNC_2:case ke.CODE_FNC_3:break;case ke.CODE_FNC_4_A:!Ct&&dt?(Ct=!0,dt=!1):Ct&&dt?(Ct=!1,dt=!1):dt=!0;break;case ke.CODE_SHIFT:F=!0,I=ke.CODE_CODE_B;break;case ke.CODE_CODE_B:I=ke.CODE_CODE_B;break;case ke.CODE_CODE_C:I=ke.CODE_CODE_C;break;case ke.CODE_STOP:D=!0;break}break;case ke.CODE_CODE_B:if(pe<96)dt===Ct?z+=String.fromCharCode(32+pe):z+=String.fromCharCode(32+pe+128),dt=!1;else switch(pe!==ke.CODE_STOP&&(De=!1),pe){case ke.CODE_FNC_1:g&&(z.length===0?z+="]C1":z+="");break;case ke.CODE_FNC_2:case ke.CODE_FNC_3:break;case ke.CODE_FNC_4_B:!Ct&&dt?(Ct=!0,dt=!1):Ct&&dt?(Ct=!1,dt=!1):dt=!0;break;case ke.CODE_SHIFT:F=!0,I=ke.CODE_CODE_A;break;case ke.CODE_CODE_A:I=ke.CODE_CODE_A;break;case ke.CODE_CODE_C:I=ke.CODE_CODE_C;break;case ke.CODE_STOP:D=!0;break}break;case ke.CODE_CODE_C:if(pe<100)pe<10&&(z+="0"),z+=pe;else switch(pe!==ke.CODE_STOP&&(De=!1),pe){case ke.CODE_FNC_1:g&&(z.length===0?z+="]C1":z+="");break;case ke.CODE_CODE_A:I=ke.CODE_CODE_A;break;case ke.CODE_CODE_B:I=ke.CODE_CODE_B;break;case ke.CODE_STOP:D=!0;break}break}Zr&&(I=I===ke.CODE_CODE_A?ke.CODE_CODE_B:ke.CODE_CODE_A)}const zn=ee-q;if(ee=c.getNextUnset(ee),!c.isRange(ee,Math.min(c.getSize(),ee+(ee-q)/2),!1))throw new ae;if(Be-=Pe*ce,Be%103!==ce)throw new N;const qi=z.length;if(qi===0)throw new ae;qi>0&&De&&(I===ke.CODE_CODE_C?z=z.substring(0,qi-2):z=z.substring(0,qi-1));const bi=(p[1]+p[0])/2,tn=q+zn/2,hi=C.length,Bi=new Uint8Array(hi);for(let Zr=0;Zr<hi;Zr++)Bi[Zr]=C[Zr];const Ua=[new J(bi,a),new J(tn,a)];return new Oe(z,Bi,0,Ua,Re.CODE_128,new Date().getTime())}}ke.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ke.MAX_AVG_VARIANCE=.25,ke.MAX_INDIVIDUAL_VARIANCE=.7,ke.CODE_SHIFT=98,ke.CODE_CODE_C=99,ke.CODE_CODE_B=100,ke.CODE_CODE_A=101,ke.CODE_FNC_1=102,ke.CODE_FNC_2=97,ke.CODE_FNC_3=96,ke.CODE_FNC_4_A=101,ke.CODE_FNC_4_B=100,ke.CODE_START_A=103,ke.CODE_START_B=104,ke.CODE_START_C=105,ke.CODE_STOP=106;class $t extends Zt{constructor(a=!1,c=!1){super(),this.usingCheckDigit=a,this.extendedMode=c,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,c,h){let g=this.counters;g.fill(0),this.decodeRowResult="";let p=$t.findAsteriskPattern(c,g),b=c.getNextSet(p[1]),w=c.getSize(),C,I;do{$t.recordPattern(c,b,g);let ne=$t.toNarrowWidePattern(g);if(ne<0)throw new ae;C=$t.patternToChar(ne),this.decodeRowResult+=C,I=b;for(let ce of g)b+=ce;b=c.getNextSet(b)}while(C!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let D=0;for(let ne of g)D+=ne;let F=b-I-D;if(b!==w&&F*2<D)throw new ae;if(this.usingCheckDigit){let ne=this.decodeRowResult.length-1,ce=0;for(let pe=0;pe<ne;pe++)ce+=$t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(pe));if(this.decodeRowResult.charAt(ne)!==$t.ALPHABET_STRING.charAt(ce%43))throw new N;this.decodeRowResult=this.decodeRowResult.substring(0,ne)}if(this.decodeRowResult.length===0)throw new ae;let z;this.extendedMode?z=$t.decodeExtended(this.decodeRowResult):z=this.decodeRowResult;let q=(p[1]+p[0])/2,ee=I+D/2;return new Oe(z,null,0,[new J(q,a),new J(ee,a)],Re.CODE_39,new Date().getTime())}static findAsteriskPattern(a,c){let h=a.getSize(),g=a.getNextSet(0),p=0,b=g,w=!1,C=c.length;for(let I=g;I<h;I++)if(a.get(I)!==w)c[p]++;else{if(p===C-1){if(this.toNarrowWidePattern(c)===$t.ASTERISK_ENCODING&&a.isRange(Math.max(0,b-Math.floor((I-b)/2)),b,!1))return[b,I];b+=c[0]+c[1],c.copyWithin(0,2,2+p-1),c[p-1]=0,c[p]=0,p--}else p++;c[p]=1,w=!w}throw new ae}static toNarrowWidePattern(a){let c=a.length,h=0,g;do{let p=2147483647;for(let C of a)C<p&&C>h&&(p=C);h=p,g=0;let b=0,w=0;for(let C=0;C<c;C++){let I=a[C];I>h&&(w|=1<<c-1-C,g++,b+=I)}if(g===3){for(let C=0;C<c&&g>0;C++){let I=a[C];if(I>h&&(g--,I*2>=b))return-1}return w}}while(g>3);return-1}static patternToChar(a){for(let c=0;c<$t.CHARACTER_ENCODINGS.length;c++)if($t.CHARACTER_ENCODINGS[c]===a)return $t.ALPHABET_STRING.charAt(c);if(a===$t.ASTERISK_ENCODING)return"*";throw new ae}static decodeExtended(a){let c=a.length,h="";for(let g=0;g<c;g++){let p=a.charAt(g);if(p==="+"||p==="$"||p==="%"||p==="/"){let b=a.charAt(g+1),w="\0";switch(p){case"+":if(b>="A"&&b<="Z")w=String.fromCharCode(b.charCodeAt(0)+32);else throw new V;break;case"$":if(b>="A"&&b<="Z")w=String.fromCharCode(b.charCodeAt(0)-64);else throw new V;break;case"%":if(b>="A"&&b<="E")w=String.fromCharCode(b.charCodeAt(0)-38);else if(b>="F"&&b<="J")w=String.fromCharCode(b.charCodeAt(0)-11);else if(b>="K"&&b<="O")w=String.fromCharCode(b.charCodeAt(0)+16);else if(b>="P"&&b<="T")w=String.fromCharCode(b.charCodeAt(0)+43);else if(b==="U")w="\0";else if(b==="V")w="@";else if(b==="W")w="`";else if(b==="X"||b==="Y"||b==="Z")w="";else throw new V;break;case"/":if(b>="A"&&b<="O")w=String.fromCharCode(b.charCodeAt(0)-32);else if(b==="Z")w=":";else throw new V;break}h+=w,g++}else h+=p}return h}}$t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",$t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],$t.ASTERISK_ENCODING=148;class pt extends Zt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(a,c,h){let g=this.decodeStart(c),p=this.decodeEnd(c),b=new Ee;pt.decodeMiddle(c,g[1],p[0],b);let w=b.toString(),C=null;h!=null&&(C=h.get(Y.ALLOWED_LENGTHS)),C==null&&(C=pt.DEFAULT_ALLOWED_LENGTHS);let I=w.length,D=!1,F=0;for(let ee of C){if(I===ee){D=!0;break}ee>F&&(F=ee)}if(!D&&I>F&&(D=!0),!D)throw new V;const z=[new J(g[1],a),new J(p[0],a)];return new Oe(w,null,0,z,Re.ITF,new Date().getTime())}static decodeMiddle(a,c,h,g){let p=new Int32Array(10),b=new Int32Array(5),w=new Int32Array(5);for(p.fill(0),b.fill(0),w.fill(0);c<h;){Zt.recordPattern(a,c,p);for(let I=0;I<5;I++){let D=2*I;b[I]=p[D],w[I]=p[D+1]}let C=pt.decodeDigit(b);g.append(C.toString()),C=this.decodeDigit(w),g.append(C.toString()),p.forEach(function(I){c+=I})}}decodeStart(a){let c=pt.skipWhiteSpace(a),h=pt.findGuardPattern(a,c,pt.START_PATTERN);return this.narrowLineWidth=(h[1]-h[0])/4,this.validateQuietZone(a,h[0]),h}validateQuietZone(a,c){let h=this.narrowLineWidth*10;h=h<c?h:c;for(let g=c-1;h>0&&g>=0&&!a.get(g);g--)h--;if(h!==0)throw new ae}static skipWhiteSpace(a){const c=a.getSize(),h=a.getNextSet(0);if(h===c)throw new ae;return h}decodeEnd(a){a.reverse();try{let c=pt.skipWhiteSpace(a),h;try{h=pt.findGuardPattern(a,c,pt.END_PATTERN_REVERSED[0])}catch(p){p instanceof ae&&(h=pt.findGuardPattern(a,c,pt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(a,h[0]);let g=h[0];return h[0]=a.getSize()-h[1],h[1]=a.getSize()-g,h}finally{a.reverse()}}static findGuardPattern(a,c,h){let g=h.length,p=new Int32Array(g),b=a.getSize(),w=!1,C=0,I=c;p.fill(0);for(let D=c;D<b;D++)if(a.get(D)!==w)p[C]++;else{if(C===g-1){if(Zt.patternMatchVariance(p,h,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE)return[I,D];I+=p[0]+p[1],R.arraycopy(p,2,p,0,C-1),p[C-1]=0,p[C]=0,C--}else C++;p[C]=1,w=!w}throw new ae}static decodeDigit(a){let c=pt.MAX_AVG_VARIANCE,h=-1,g=pt.PATTERNS.length;for(let p=0;p<g;p++){let b=pt.PATTERNS[p],w=Zt.patternMatchVariance(a,b,pt.MAX_INDIVIDUAL_VARIANCE);w<c?(c=w,h=p):w===c&&(h=-1)}if(h>=0)return h%10;throw new ae}}pt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],pt.MAX_AVG_VARIANCE=.38,pt.MAX_INDIVIDUAL_VARIANCE=.5,pt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],pt.START_PATTERN=Int32Array.from([1,1,1,1]),pt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class An extends Zt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(a){let c=!1,h,g=0,p=Int32Array.from([0,0,0]);for(;!c;){p=Int32Array.from([0,0,0]),h=An.findGuardPattern(a,g,!1,this.START_END_PATTERN,p);let b=h[0];g=h[1];let w=b-(g-b);w>=0&&(c=a.isRange(w,b,!1))}return h}static checkChecksum(a){return An.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let c=a.length;if(c===0)return!1;let h=parseInt(a.charAt(c-1),10);return An.getStandardUPCEANChecksum(a.substring(0,c-1))===h}static getStandardUPCEANChecksum(a){let c=a.length,h=0;for(let g=c-1;g>=0;g-=2){let p=a.charAt(g).charCodeAt(0)-48;if(p<0||p>9)throw new V;h+=p}h*=3;for(let g=c-2;g>=0;g-=2){let p=a.charAt(g).charCodeAt(0)-48;if(p<0||p>9)throw new V;h+=p}return(1e3-h)%10}static decodeEnd(a,c){return An.findGuardPattern(a,c,!1,An.START_END_PATTERN,new Int32Array(An.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(a,c,h,g){return this.findGuardPattern(a,c,h,g,new Int32Array(g.length))}static findGuardPattern(a,c,h,g,p){let b=a.getSize();c=h?a.getNextUnset(c):a.getNextSet(c);let w=0,C=c,I=g.length,D=h;for(let F=c;F<b;F++)if(a.get(F)!==D)p[w]++;else{if(w===I-1){if(Zt.patternMatchVariance(p,g,An.MAX_INDIVIDUAL_VARIANCE)<An.MAX_AVG_VARIANCE)return Int32Array.from([C,F]);C+=p[0]+p[1];let z=p.slice(2,p.length-1);for(let q=0;q<w-1;q++)p[q]=z[q];p[w-1]=0,p[w]=0,w--}else w++;p[w]=1,D=!D}throw new ae}static decodeDigit(a,c,h,g){this.recordPattern(a,h,c);let p=this.MAX_AVG_VARIANCE,b=-1,w=g.length;for(let C=0;C<w;C++){let I=g[C],D=Zt.patternMatchVariance(c,I,An.MAX_INDIVIDUAL_VARIANCE);D<p&&(p=D,b=C)}if(b>=0)return b;throw new ae}}An.MAX_AVG_VARIANCE=.48,An.MAX_INDIVIDUAL_VARIANCE=.7,An.START_END_PATTERN=Int32Array.from([1,1,1]),An.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),An.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),An.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class gr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,c,h){let g=this.decodeRowStringBuffer,p=this.decodeMiddle(c,h,g),b=g.toString(),w=gr.parseExtensionString(b),C=[new J((h[0]+h[1])/2,a),new J(p,a)],I=new Oe(b,null,0,C,Re.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&I.putAllMetadata(w),I}decodeMiddle(a,c,h){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let p=a.getSize(),b=c[1],w=0;for(let I=0;I<5&&b<p;I++){let D=An.decodeDigit(a,g,b,An.L_AND_G_PATTERNS);h+=String.fromCharCode(48+D%10);for(let F of g)b+=F;D>=10&&(w|=1<<4-I),I!==4&&(b=a.getNextSet(b),b=a.getNextUnset(b))}if(h.length!==5)throw new ae;let C=this.determineCheckDigit(w);if(gr.extensionChecksum(h.toString())!==C)throw new ae;return b}static extensionChecksum(a){let c=a.length,h=0;for(let g=c-2;g>=0;g-=2)h+=a.charAt(g).charCodeAt(0)-48;h*=3;for(let g=c-1;g>=0;g-=2)h+=a.charAt(g).charCodeAt(0)-48;return h*=3,h%10}determineCheckDigit(a){for(let c=0;c<10;c++)if(a===this.CHECK_DIGIT_ENCODINGS[c])return c;throw new ae}static parseExtensionString(a){if(a.length!==5)return null;let c=gr.parseExtension5String(a);return c==null?null:new Map([[Ne.SUGGESTED_PRICE,c]])}static parseExtension5String(a){let c;switch(a.charAt(0)){case"0":c="";break;case"5":c="$";break;case"9":switch(a){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}c="";break;default:c="";break}let h=parseInt(a.substring(1)),g=(h/100).toString(),p=h%100,b=p<10?"0"+p:p.toString();return c+g+"."+b}}class Vc{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,c,h){let g=this.decodeRowStringBuffer,p=this.decodeMiddle(c,h,g),b=g.toString(),w=Vc.parseExtensionString(b),C=[new J((h[0]+h[1])/2,a),new J(p,a)],I=new Oe(b,null,0,C,Re.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&I.putAllMetadata(w),I}decodeMiddle(a,c,h){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let p=a.getSize(),b=c[1],w=0;for(let C=0;C<2&&b<p;C++){let I=An.decodeDigit(a,g,b,An.L_AND_G_PATTERNS);h+=String.fromCharCode(48+I%10);for(let D of g)b+=D;I>=10&&(w|=1<<1-C),C!==1&&(b=a.getNextSet(b),b=a.getNextUnset(b))}if(h.length!==2)throw new ae;if(parseInt(h.toString())%4!==w)throw new ae;return b}static parseExtensionString(a){return a.length!==2?null:new Map([[Ne.ISSUE_NUMBER,parseInt(a)]])}}class Io{static decodeRow(a,c,h){let g=An.findGuardPattern(c,h,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new gr().decodeRow(a,c,g)}catch{return new Vc().decodeRow(a,c,g)}}}Io.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ot extends An{constructor(){super(),this.decodeRowStringBuffer="",Ot.L_AND_G_PATTERNS=Ot.L_PATTERNS.map(a=>Int32Array.from(a));for(let a=10;a<20;a++){let c=Ot.L_PATTERNS[a-10],h=new Int32Array(c.length);for(let g=0;g<c.length;g++)h[g]=c[c.length-g-1];Ot.L_AND_G_PATTERNS[a]=h}}decodeRow(a,c,h){let g=Ot.findStartGuardPattern(c),p=h==null?null:h.get(Y.NEED_RESULT_POINT_CALLBACK);if(p!=null){const De=new J((g[0]+g[1])/2,a);p.foundPossibleResultPoint(De)}let b=this.decodeMiddle(c,g,this.decodeRowStringBuffer),w=b.rowOffset,C=b.resultString;if(p!=null){const De=new J(w,a);p.foundPossibleResultPoint(De)}let I=this.decodeEnd(c,w);if(p!=null){const De=new J((I[0]+I[1])/2,a);p.foundPossibleResultPoint(De)}let D=I[1],F=D+(D-I[0]);if(F>=c.getSize()||!c.isRange(D,F,!1))throw new ae;let z=C.toString();if(z.length<8)throw new V;if(!Ot.checkChecksum(z))throw new N;let q=(g[1]+g[0])/2,ee=(I[1]+I[0])/2,ne=this.getBarcodeFormat(),ce=[new J(q,a),new J(ee,a)],pe=new Oe(z,null,0,ce,ne,new Date().getTime()),Be=0;try{let De=Io.decodeRow(a,c,I[1]);pe.putMetadata(Ne.UPC_EAN_EXTENSION,De.getText()),pe.putAllMetadata(De.getResultMetadata()),pe.addResultPoints(De.getResultPoints()),Be=De.getText().length}catch{}let Pe=h==null?null:h.get(Y.ALLOWED_EAN_EXTENSIONS);if(Pe!=null){let De=!1;for(let Ct in Pe)if(Be.toString()===Ct){De=!0;break}if(!De)throw new ae}return pe}decodeEnd(a,c){return Ot.findGuardPattern(a,c,!1,Ot.START_END_PATTERN,new Int32Array(Ot.START_END_PATTERN.length).fill(0))}static checkChecksum(a){return Ot.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let c=a.length;if(c===0)return!1;let h=parseInt(a.charAt(c-1),10);return Ot.getStandardUPCEANChecksum(a.substring(0,c-1))===h}static getStandardUPCEANChecksum(a){let c=a.length,h=0;for(let g=c-1;g>=0;g-=2){let p=a.charAt(g).charCodeAt(0)-48;if(p<0||p>9)throw new V;h+=p}h*=3;for(let g=c-2;g>=0;g-=2){let p=a.charAt(g).charCodeAt(0)-48;if(p<0||p>9)throw new V;h+=p}return(1e3-h)%10}}class Ts extends Ot{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,c,h){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let p=a.getSize(),b=c[1],w=0;for(let I=0;I<6&&b<p;I++){let D=Ot.decodeDigit(a,g,b,Ot.L_AND_G_PATTERNS);h+=String.fromCharCode(48+D%10);for(let F of g)b+=F;D>=10&&(w|=1<<5-I)}h=Ts.determineFirstDigit(h,w),b=Ot.findGuardPattern(a,b,!0,Ot.MIDDLE_PATTERN,new Int32Array(Ot.MIDDLE_PATTERN.length).fill(0))[1];for(let I=0;I<6&&b<p;I++){let D=Ot.decodeDigit(a,g,b,Ot.L_PATTERNS);h+=String.fromCharCode(48+D);for(let F of g)b+=F}return{rowOffset:b,resultString:h}}getBarcodeFormat(){return Re.EAN_13}static determineFirstDigit(a,c){for(let h=0;h<10;h++)if(c===this.FIRST_DIGIT_ENCODINGS[h])return a=String.fromCharCode(48+h)+a,a;throw new ae}}Ts.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class pr extends Ot{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,c,h){const g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let p=a.getSize(),b=c[1];for(let C=0;C<4&&b<p;C++){let I=Ot.decodeDigit(a,g,b,Ot.L_PATTERNS);h+=String.fromCharCode(48+I);for(let D of g)b+=D}b=Ot.findGuardPattern(a,b,!0,Ot.MIDDLE_PATTERN,new Int32Array(Ot.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<4&&b<p;C++){let I=Ot.decodeDigit(a,g,b,Ot.L_PATTERNS);h+=String.fromCharCode(48+I);for(let D of g)b+=D}return{rowOffset:b,resultString:h}}getBarcodeFormat(){return Re.EAN_8}}class No extends Ot{constructor(){super(...arguments),this.ean13Reader=new Ts}getBarcodeFormat(){return Re.UPC_A}decode(a,c){return this.maybeReturnResult(this.ean13Reader.decode(a))}decodeRow(a,c,h){return this.maybeReturnResult(this.ean13Reader.decodeRow(a,c,h))}decodeMiddle(a,c,h){return this.ean13Reader.decodeMiddle(a,c,h)}maybeReturnResult(a){let c=a.getText();if(c.charAt(0)==="0"){let h=new Oe(c.substring(1),null,null,a.getResultPoints(),Re.UPC_A);return a.getResultMetadata()!=null&&h.putAllMetadata(a.getResultMetadata()),h}else throw new ae}reset(){this.ean13Reader.reset()}}class xi extends Ot{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(a,c,h){const g=this.decodeMiddleCounters.map(I=>I);g[0]=0,g[1]=0,g[2]=0,g[3]=0;const p=a.getSize();let b=c[1],w=0;for(let I=0;I<6&&b<p;I++){const D=xi.decodeDigit(a,g,b,xi.L_AND_G_PATTERNS);h+=String.fromCharCode(48+D%10);for(let F of g)b+=F;D>=10&&(w|=1<<5-I)}let C=xi.determineNumSysAndCheckDigit(h,w);return{rowOffset:b,resultString:C}}decodeEnd(a,c){return xi.findGuardPatternWithoutCounters(a,c,!0,xi.MIDDLE_END_PATTERN)}checkChecksum(a){return Ot.checkChecksum(xi.convertUPCEtoUPCA(a))}static determineNumSysAndCheckDigit(a,c){for(let h=0;h<=1;h++)for(let g=0;g<10;g++)if(c===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[h][g]){let p=String.fromCharCode(48+h),b=String.fromCharCode(48+g);return p+a+b}throw ae.getNotFoundInstance()}getBarcodeFormat(){return Re.UPC_E}static convertUPCEtoUPCA(a){const c=a.slice(1,7).split("").map(p=>p.charCodeAt(0)),h=new Ee;h.append(a.charAt(0));let g=c[5];switch(g){case 0:case 1:case 2:h.appendChars(c,0,2),h.append(g),h.append("0000"),h.appendChars(c,2,3);break;case 3:h.appendChars(c,0,3),h.append("00000"),h.appendChars(c,3,2);break;case 4:h.appendChars(c,0,4),h.append("00000"),h.append(c[4]);break;default:h.appendChars(c,0,5),h.append("0000"),h.append(g);break}return a.length>=8&&h.append(a.charAt(7)),h.toString()}}xi.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),xi.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Gc extends Zt{constructor(a){super();let c=a==null?null:a.get(Y.POSSIBLE_FORMATS),h=[];n(c)?(h.push(new Ts),h.push(new No),h.push(new pr),h.push(new xi)):(c.indexOf(Re.EAN_13)>-1&&h.push(new Ts),c.indexOf(Re.UPC_A)>-1&&h.push(new No),c.indexOf(Re.EAN_8)>-1&&h.push(new pr),c.indexOf(Re.UPC_E)>-1&&h.push(new xi)),this.readers=h}decodeRow(a,c,h){for(let g of this.readers)try{const p=g.decodeRow(a,c,h),b=p.getBarcodeFormat()===Re.EAN_13&&p.getText().charAt(0)==="0",w=h==null?null:h.get(Y.POSSIBLE_FORMATS),C=w==null||w.includes(Re.UPC_A);if(b&&C){const I=p.getRawBytes(),D=new Oe(p.getText().substring(1),I,I?I.length:null,p.getResultPoints(),Re.UPC_A);return D.putAllMetadata(p.getResultMetadata()),D}return p}catch{}throw new ae}reset(){for(let a of this.readers)a.reset()}}class li extends Zt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,c){for(let h=0;h<c.length;h++)if(Zt.patternMatchVariance(a,c[h],li.MAX_INDIVIDUAL_VARIANCE)<li.MAX_AVG_VARIANCE)return h;throw new ae}static count(a){return ft.sum(new Int32Array(a))}static increment(a,c){let h=0,g=c[0];for(let p=1;p<a.length;p++)c[p]>g&&(g=c[p],h=p);a[h]++}static decrement(a,c){let h=0,g=c[0];for(let p=1;p<a.length;p++)c[p]<g&&(g=c[p],h=p);a[h]--}static isFinderPattern(a){let c=a[0]+a[1],h=c+a[2]+a[3],g=c/h;if(g>=li.MIN_FINDER_PATTERN_RATIO&&g<=li.MAX_FINDER_PATTERN_RATIO){let p=Number.MAX_SAFE_INTEGER,b=Number.MIN_SAFE_INTEGER;for(let w of a)w>b&&(b=w),w<p&&(p=w);return b<10*p}return!1}}li.MAX_AVG_VARIANCE=.2,li.MAX_INDIVIDUAL_VARIANCE=.45,li.MIN_FINDER_PATTERN_RATIO=9.5/12,li.MAX_FINDER_PATTERN_RATIO=12.5/14;class mr{constructor(a,c){this.value=a,this.checksumPortion=c}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(a){if(!(a instanceof mr))return!1;const c=a;return this.value===c.value&&this.checksumPortion===c.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class yr{constructor(a,c,h,g,p){this.value=a,this.startEnd=c,this.value=a,this.startEnd=c,this.resultPoints=new Array,this.resultPoints.push(new J(h,p)),this.resultPoints.push(new J(g,p))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(a){if(!(a instanceof yr))return!1;const c=a;return this.value===c.value}hashCode(){return this.value}}class Is{constructor(){}static getRSSvalue(a,c,h){let g=0;for(let C of a)g+=C;let p=0,b=0,w=a.length;for(let C=0;C<w-1;C++){let I;for(I=1,b|=1<<C;I<a[C];I++,b&=~(1<<C)){let D=Is.combins(g-I-1,w-C-2);if(h&&b===0&&g-I-(w-C-1)>=w-C-1&&(D-=Is.combins(g-I-(w-C),w-C-2)),w-C-1>1){let F=0;for(let z=g-I-(w-C-2);z>c;z--)F+=Is.combins(g-I-z-1,w-C-3);D-=F*(w-1-C)}else g-I>c&&D--;p+=D}g-=I}return p}static combins(a,c){let h,g;a-c>c?(g=c,h=a-c):(g=a-c,h=c);let p=1,b=1;for(let w=a;w>h;w--)p*=w,b<=g&&(p/=b,b++);for(;b<=g;)p/=b,b++;return p}}class kh{static buildBitArray(a){let c=a.length*2-1;a[a.length-1].getRightChar()==null&&(c-=1);let h=12*c,g=new U(h),p=0,w=a[0].getRightChar().getValue();for(let C=11;C>=0;--C)(w&1<<C)!=0&&g.set(p),p++;for(let C=1;C<a.length;++C){let I=a[C],D=I.getLeftChar().getValue();for(let F=11;F>=0;--F)(D&1<<F)!=0&&g.set(p),p++;if(I.getRightChar()!=null){let F=I.getRightChar().getValue();for(let z=11;z>=0;--z)(F&1<<z)!=0&&g.set(p),p++}}return g}}class xr{constructor(a,c){c?this.decodedInformation=null:(this.finished=a,this.decodedInformation=c)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class wl{constructor(a){this.newPosition=a}getNewPosition(){return this.newPosition}}class fi extends wl{constructor(a,c){super(a),this.value=c}getValue(){return this.value}isFNC1(){return this.value===fi.FNC1}}fi.FNC1="$";class qs extends wl{constructor(a,c,h){super(a),h?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=c}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Di extends wl{constructor(a,c,h){if(super(a),c<0||c>10||h<0||h>10)throw new V;this.firstDigit=c,this.secondDigit=h}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Di.FNC1}isSecondDigitFNC1(){return this.secondDigit===Di.FNC1}isAnyFNC1(){return this.firstDigit===Di.FNC1||this.secondDigit===Di.FNC1}}Di.FNC1=10;class He{constructor(){}static parseFieldsInGeneralPurpose(a){if(!a)return null;if(a.length<2)throw new ae;let c=a.substring(0,2);for(let p of He.TWO_DIGIT_DATA_LENGTH)if(p[0]===c)return p[1]===He.VARIABLE_LENGTH?He.processVariableAI(2,p[2],a):He.processFixedAI(2,p[1],a);if(a.length<3)throw new ae;let h=a.substring(0,3);for(let p of He.THREE_DIGIT_DATA_LENGTH)if(p[0]===h)return p[1]===He.VARIABLE_LENGTH?He.processVariableAI(3,p[2],a):He.processFixedAI(3,p[1],a);for(let p of He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(p[0]===h)return p[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,p[2],a):He.processFixedAI(4,p[1],a);if(a.length<4)throw new ae;let g=a.substring(0,4);for(let p of He.FOUR_DIGIT_DATA_LENGTH)if(p[0]===g)return p[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,p[2],a):He.processFixedAI(4,p[1],a);throw new ae}static processFixedAI(a,c,h){if(h.length<a)throw new ae;let g=h.substring(0,a);if(h.length<a+c)throw new ae;let p=h.substring(a,a+c),b=h.substring(a+c),w="("+g+")"+p,C=He.parseFieldsInGeneralPurpose(b);return C==null?w:w+C}static processVariableAI(a,c,h){let g=h.substring(0,a),p;h.length<a+c?p=h.length:p=a+c;let b=h.substring(a,p),w=h.substring(p),C="("+g+")"+b,I=He.parseFieldsInGeneralPurpose(w);return I==null?C:C+I}}He.VARIABLE_LENGTH=[],He.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",He.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",He.VARIABLE_LENGTH,20],["22",He.VARIABLE_LENGTH,29],["30",He.VARIABLE_LENGTH,8],["37",He.VARIABLE_LENGTH,8],["90",He.VARIABLE_LENGTH,30],["91",He.VARIABLE_LENGTH,30],["92",He.VARIABLE_LENGTH,30],["93",He.VARIABLE_LENGTH,30],["94",He.VARIABLE_LENGTH,30],["95",He.VARIABLE_LENGTH,30],["96",He.VARIABLE_LENGTH,30],["97",He.VARIABLE_LENGTH,3],["98",He.VARIABLE_LENGTH,30],["99",He.VARIABLE_LENGTH,30]],He.THREE_DIGIT_DATA_LENGTH=[["240",He.VARIABLE_LENGTH,30],["241",He.VARIABLE_LENGTH,30],["242",He.VARIABLE_LENGTH,6],["250",He.VARIABLE_LENGTH,30],["251",He.VARIABLE_LENGTH,30],["253",He.VARIABLE_LENGTH,17],["254",He.VARIABLE_LENGTH,20],["400",He.VARIABLE_LENGTH,30],["401",He.VARIABLE_LENGTH,30],["402",17],["403",He.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",He.VARIABLE_LENGTH,20],["421",He.VARIABLE_LENGTH,15],["422",3],["423",He.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",He.VARIABLE_LENGTH,15],["391",He.VARIABLE_LENGTH,18],["392",He.VARIABLE_LENGTH,15],["393",He.VARIABLE_LENGTH,18],["703",He.VARIABLE_LENGTH,30]],He.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",He.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",He.VARIABLE_LENGTH,20],["8003",He.VARIABLE_LENGTH,30],["8004",He.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",He.VARIABLE_LENGTH,30],["8008",He.VARIABLE_LENGTH,12],["8018",18],["8020",He.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",He.VARIABLE_LENGTH,70],["8200",He.VARIABLE_LENGTH,70]];class Oi{constructor(a){this.buffer=new Ee,this.information=a}decodeAllCodes(a,c){let h=c,g=null;do{let p=this.decodeGeneralPurposeField(h,g),b=He.parseFieldsInGeneralPurpose(p.getNewString());if(b!=null&&a.append(b),p.isRemaining()?g=""+p.getRemainingValue():g=null,h===p.getNewPosition())break;h=p.getNewPosition()}while(!0);return a.toString()}isStillNumeric(a){if(a+7>this.information.getSize())return a+4<=this.information.getSize();for(let c=a;c<a+3;++c)if(this.information.get(c))return!0;return this.information.get(a+3)}decodeNumeric(a){if(a+7>this.information.getSize()){let p=this.extractNumericValueFromBitArray(a,4);return p===0?new Di(this.information.getSize(),Di.FNC1,Di.FNC1):new Di(this.information.getSize(),p-1,Di.FNC1)}let c=this.extractNumericValueFromBitArray(a,7),h=(c-8)/11,g=(c-8)%11;return new Di(a+7,h,g)}extractNumericValueFromBitArray(a,c){return Oi.extractNumericValueFromBitArray(this.information,a,c)}static extractNumericValueFromBitArray(a,c,h){let g=0;for(let p=0;p<h;++p)a.get(c+p)&&(g|=1<<h-p-1);return g}decodeGeneralPurposeField(a,c){this.buffer.setLengthToZero(),c!=null&&this.buffer.append(c),this.current.setPosition(a);let h=this.parseBlocks();return h!=null&&h.isRemaining()?new qs(this.current.getPosition(),this.buffer.toString(),h.getRemainingValue()):new qs(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let a,c;do{let h=this.current.getPosition();if(this.current.isAlpha()?(c=this.parseAlphaBlock(),a=c.isFinished()):this.current.isIsoIec646()?(c=this.parseIsoIec646Block(),a=c.isFinished()):(c=this.parseNumericBlock(),a=c.isFinished()),!(h!==this.current.getPosition())&&!a)break}while(!a);return c.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let a=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFirstDigitFNC1()){let c;return a.isSecondDigitFNC1()?c=new qs(this.current.getPosition(),this.buffer.toString()):c=new qs(this.current.getPosition(),this.buffer.toString(),a.getSecondDigit()),new xr(!0,c)}if(this.buffer.append(a.getFirstDigit()),a.isSecondDigitFNC1()){let c=new qs(this.current.getPosition(),this.buffer.toString());return new xr(!0,c)}this.buffer.append(a.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new xr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let a=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let c=new qs(this.current.getPosition(),this.buffer.toString());return new xr(!0,c)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new xr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let a=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let c=new qs(this.current.getPosition(),this.buffer.toString());return new xr(!0,c)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new xr(!1)}isStillIsoIec646(a){if(a+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(a,5);if(c>=5&&c<16)return!0;if(a+7>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(a,7);if(h>=64&&h<116)return!0;if(a+8>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(a,8);return g>=232&&g<253}decodeIsoIec646(a){let c=this.extractNumericValueFromBitArray(a,5);if(c===15)return new fi(a+5,fi.FNC1);if(c>=5&&c<15)return new fi(a+5,"0"+(c-5));let h=this.extractNumericValueFromBitArray(a,7);if(h>=64&&h<90)return new fi(a+7,""+(h+1));if(h>=90&&h<116)return new fi(a+7,""+(h+7));let g=this.extractNumericValueFromBitArray(a,8),p;switch(g){case 232:p="!";break;case 233:p='"';break;case 234:p="%";break;case 235:p="&";break;case 236:p="'";break;case 237:p="(";break;case 238:p=")";break;case 239:p="*";break;case 240:p="+";break;case 241:p=",";break;case 242:p="-";break;case 243:p=".";break;case 244:p="/";break;case 245:p=":";break;case 246:p=";";break;case 247:p="<";break;case 248:p="=";break;case 249:p=">";break;case 250:p="?";break;case 251:p="_";break;case 252:p=" ";break;default:throw new V}return new fi(a+8,p)}isStillAlpha(a){if(a+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(a,5);if(c>=5&&c<16)return!0;if(a+6>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(a,6);return h>=16&&h<63}decodeAlphanumeric(a){let c=this.extractNumericValueFromBitArray(a,5);if(c===15)return new fi(a+5,fi.FNC1);if(c>=5&&c<15)return new fi(a+5,"0"+(c-5));let h=this.extractNumericValueFromBitArray(a,6);if(h>=32&&h<58)return new fi(a+6,""+(h+33));let g;switch(h){case 58:g="*";break;case 59:g=",";break;case 60:g="-";break;case 61:g=".";break;case 62:g="/";break;default:throw new It("Decoding invalid alphanumeric value: "+h)}return new fi(a+6,g)}isAlphaTo646ToAlphaLatch(a){if(a+1>this.information.getSize())return!1;for(let c=0;c<5&&c+a<this.information.getSize();++c)if(c===2){if(!this.information.get(a+2))return!1}else if(this.information.get(a+c))return!1;return!0}isAlphaOr646ToNumericLatch(a){if(a+3>this.information.getSize())return!1;for(let c=a;c<a+3;++c)if(this.information.get(c))return!1;return!0}isNumericToAlphaNumericLatch(a){if(a+1>this.information.getSize())return!1;for(let c=0;c<4&&c+a<this.information.getSize();++c)if(this.information.get(a+c))return!1;return!0}}class Yn{constructor(a){this.information=a,this.generalDecoder=new Oi(a)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class sn extends Yn{constructor(a){super(a)}encodeCompressedGtin(a,c){a.append("(01)");let h=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,c,h)}encodeCompressedGtinWithoutAI(a,c,h){for(let g=0;g<4;++g){let p=this.getGeneralDecoder().extractNumericValueFromBitArray(c+10*g,10);p/100===0&&a.append("0"),p/10===0&&a.append("0"),a.append(p)}sn.appendCheckDigit(a,h)}static appendCheckDigit(a,c){let h=0;for(let g=0;g<13;g++){let p=a.charAt(g+c).charCodeAt(0)-48;h+=(g&1)===0?3*p:p}h=10-h%10,h===10&&(h=0),a.append(h)}}sn.GTIN_SIZE=40;class as extends sn{constructor(a){super(a)}parseInformation(){let a=new Ee;a.append("(01)");let c=a.length(),h=this.getGeneralDecoder().extractNumericValueFromBitArray(as.HEADER_SIZE,4);return a.append(h),this.encodeCompressedGtinWithoutAI(a,as.HEADER_SIZE+4,c),this.getGeneralDecoder().decodeAllCodes(a,as.HEADER_SIZE+44)}}as.HEADER_SIZE=4;class Ta extends Yn{constructor(a){super(a)}parseInformation(){let a=new Ee;return this.getGeneralDecoder().decodeAllCodes(a,Ta.HEADER_SIZE)}}Ta.HEADER_SIZE=5;class El extends sn{constructor(a){super(a)}encodeCompressedWeight(a,c,h){let g=this.getGeneralDecoder().extractNumericValueFromBitArray(c,h);this.addWeightCode(a,g);let p=this.checkWeight(g),b=1e5;for(let w=0;w<5;++w)p/b===0&&a.append("0"),b/=10;a.append(p)}}class Ns extends El{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=Ns.HEADER_SIZE+El.GTIN_SIZE+Ns.WEIGHT_SIZE)throw new ae;let a=new Ee;return this.encodeCompressedGtin(a,Ns.HEADER_SIZE),this.encodeCompressedWeight(a,Ns.HEADER_SIZE+El.GTIN_SIZE,Ns.WEIGHT_SIZE),a.toString()}}Ns.HEADER_SIZE=5,Ns.WEIGHT_SIZE=15;class Ph extends Ns{constructor(a){super(a)}addWeightCode(a,c){a.append("(3103)")}checkWeight(a){return a}}class Ro extends Ns{constructor(a){super(a)}addWeightCode(a,c){c<1e4?a.append("(3202)"):a.append("(3203)")}checkWeight(a){return a<1e4?a:a-1e4}}class Gi extends sn{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<Gi.HEADER_SIZE+sn.GTIN_SIZE)throw new ae;let a=new Ee;this.encodeCompressedGtin(a,Gi.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(Gi.HEADER_SIZE+sn.GTIN_SIZE,Gi.LAST_DIGIT_SIZE);a.append("(392"),a.append(c),a.append(")");let h=this.getGeneralDecoder().decodeGeneralPurposeField(Gi.HEADER_SIZE+sn.GTIN_SIZE+Gi.LAST_DIGIT_SIZE,null);return a.append(h.getNewString()),a.toString()}}Gi.HEADER_SIZE=8,Gi.LAST_DIGIT_SIZE=2;class jn extends sn{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<jn.HEADER_SIZE+sn.GTIN_SIZE)throw new ae;let a=new Ee;this.encodeCompressedGtin(a,jn.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(jn.HEADER_SIZE+sn.GTIN_SIZE,jn.LAST_DIGIT_SIZE);a.append("(393"),a.append(c),a.append(")");let h=this.getGeneralDecoder().extractNumericValueFromBitArray(jn.HEADER_SIZE+sn.GTIN_SIZE+jn.LAST_DIGIT_SIZE,jn.FIRST_THREE_DIGITS_SIZE);h/100==0&&a.append("0"),h/10==0&&a.append("0"),a.append(h);let g=this.getGeneralDecoder().decodeGeneralPurposeField(jn.HEADER_SIZE+sn.GTIN_SIZE+jn.LAST_DIGIT_SIZE+jn.FIRST_THREE_DIGITS_SIZE,null);return a.append(g.getNewString()),a.toString()}}jn.HEADER_SIZE=8,jn.LAST_DIGIT_SIZE=2,jn.FIRST_THREE_DIGITS_SIZE=10;class qt extends El{constructor(a,c,h){super(a),this.dateCode=h,this.firstAIdigits=c}parseInformation(){if(this.getInformation().getSize()!=qt.HEADER_SIZE+qt.GTIN_SIZE+qt.WEIGHT_SIZE+qt.DATE_SIZE)throw new ae;let a=new Ee;return this.encodeCompressedGtin(a,qt.HEADER_SIZE),this.encodeCompressedWeight(a,qt.HEADER_SIZE+qt.GTIN_SIZE,qt.WEIGHT_SIZE),this.encodeCompressedDate(a,qt.HEADER_SIZE+qt.GTIN_SIZE+qt.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,c){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(c,qt.DATE_SIZE);if(h==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let g=h%32;h/=32;let p=h%12+1;h/=12;let b=h;b/10==0&&a.append("0"),a.append(b),p/10==0&&a.append("0"),a.append(p),g/10==0&&a.append("0"),a.append(g)}addWeightCode(a,c){a.append("("),a.append(this.firstAIdigits),a.append(c/1e5),a.append(")")}checkWeight(a){return a%1e5}}qt.HEADER_SIZE=8,qt.WEIGHT_SIZE=20,qt.DATE_SIZE=16;function Ia(B){try{if(B.get(1))return new as(B);if(!B.get(2))return new Ta(B);switch(Oi.extractNumericValueFromBitArray(B,1,4)){case 4:return new Ph(B);case 5:return new Ro(B)}switch(Oi.extractNumericValueFromBitArray(B,1,5)){case 12:return new Gi(B);case 13:return new jn(B)}switch(Oi.extractNumericValueFromBitArray(B,1,7)){case 56:return new qt(B,"310","11");case 57:return new qt(B,"320","11");case 58:return new qt(B,"310","13");case 59:return new qt(B,"320","13");case 60:return new qt(B,"310","15");case 61:return new qt(B,"320","15");case 62:return new qt(B,"310","17");case 63:return new qt(B,"320","17")}}catch(a){throw console.log(a),new It("unknown decoder: "+B)}}class Li{constructor(a,c,h,g){this.leftchar=a,this.rightchar=c,this.finderpattern=h,this.maybeLast=g}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(a,c){return a instanceof Li?Li.equalsOrNull(a.leftchar,c.leftchar)&&Li.equalsOrNull(a.rightchar,c.rightchar)&&Li.equalsOrNull(a.finderpattern,c.finderpattern):!1}static equalsOrNull(a,c){return a===null?c===null:Li.equals(a,c)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Un{constructor(a,c,h){this.pairs=a,this.rowNumber=c,this.wasReversed=h}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(a){return this.checkEqualitity(this,a)}toString(){return"{ "+this.pairs+" }"}equals(a,c){return a instanceof Un?this.checkEqualitity(a,c)&&a.wasReversed===c.wasReversed:!1}checkEqualitity(a,c){if(!a||!c)return;let h;return a.forEach((g,p)=>{c.forEach(b=>{g.getLeftChar().getValue()===b.getLeftChar().getValue()&&g.getRightChar().getValue()===b.getRightChar().getValue()&&g.getFinderPatter().getValue()===b.getFinderPatter().getValue()&&(h=!0)})}),h}}class Me extends li{constructor(a){super(...arguments),this.pairs=new Array(Me.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=a===!0}decodeRow(a,c,h){this.pairs.length=0,this.startFromEven=!1;try{return Me.constructResult(this.decodeRow2pairs(a,c))}catch(g){this.verbose&&console.log(g)}return this.pairs.length=0,this.startFromEven=!0,Me.constructResult(this.decodeRow2pairs(a,c))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(a,c){let h=!1;for(;!h;)try{this.pairs.push(this.retrieveNextPair(c,this.pairs,a))}catch(p){if(p instanceof ae){if(!this.pairs.length)throw new ae;h=!0}}if(this.checkChecksum())return this.pairs;let g;if(this.rows.length?g=!0:g=!1,this.storeRow(a,!1),g){let p=this.checkRowsBoolean(!1);if(p!=null||(p=this.checkRowsBoolean(!0),p!=null))return p}throw new ae}checkRowsBoolean(a){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,a&&(this.rows=this.rows.reverse());let c=null;try{c=this.checkRows(new Array,0)}catch(h){this.verbose&&console.log(h)}return a&&(this.rows=this.rows.reverse()),c}checkRows(a,c){for(let h=c;h<this.rows.length;h++){let g=this.rows[h];this.pairs.length=0;for(let b of a)this.pairs.push(b.getPairs());if(this.pairs.push(g.getPairs()),!Me.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let p=new Array(a);p.push(g);try{return this.checkRows(p,h+1)}catch(b){this.verbose&&console.log(b)}}throw new ae}static isValidSequence(a){for(let c of Me.FINDER_PATTERN_SEQUENCES){if(a.length>c.length)continue;let h=!0;for(let g=0;g<a.length;g++)if(a[g].getFinderPattern().getValue()!=c[g]){h=!1;break}if(h)return!0}return!1}storeRow(a,c){let h=0,g=!1,p=!1;for(;h<this.rows.length;){let b=this.rows[h];if(b.getRowNumber()>a){p=b.isEquivalent(this.pairs);break}g=b.isEquivalent(this.pairs),h++}p||g||Me.isPartialRow(this.pairs,this.rows)||(this.rows.push(h,new Un(this.pairs,a,c)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(a,c){for(let h of c)if(h.getPairs().length!==a.length){for(let g of h.getPairs())for(let p of a)if(Li.equals(g,p))break}}static isPartialRow(a,c){for(let h of c){let g=!0;for(let p of a){let b=!1;for(let w of h.getPairs())if(p.equals(w)){b=!0;break}if(!b){g=!1;break}}if(g)return!0}return!1}getRows(){return this.rows}static constructResult(a){let c=kh.buildBitArray(a),g=Ia(c).parseInformation(),p=a[0].getFinderPattern().getResultPoints(),b=a[a.length-1].getFinderPattern().getResultPoints(),w=[p[0],p[1],b[0],b[1]];return new Oe(g,null,null,w,Re.RSS_EXPANDED,null)}checkChecksum(){let a=this.pairs.get(0),c=a.getLeftChar(),h=a.getRightChar();if(h==null)return!1;let g=h.getChecksumPortion(),p=2;for(let w=1;w<this.pairs.size();++w){let C=this.pairs.get(w);g+=C.getLeftChar().getChecksumPortion(),p++;let I=C.getRightChar();I!=null&&(g+=I.getChecksumPortion(),p++)}return g%=211,211*(p-4)+g==c.getValue()}static getNextSecondBar(a,c){let h;return a.get(c)?(h=a.getNextUnset(c),h=a.getNextSet(h)):(h=a.getNextSet(c),h=a.getNextUnset(h)),h}retrieveNextPair(a,c,h){let g=c.length%2==0;this.startFromEven&&(g=!g);let p,b=!0,w=-1;do this.findNextPair(a,c,w),p=this.parseFoundFinderPattern(a,h,g),p==null?w=Me.getNextSecondBar(a,this.startEnd[0]):b=!1;while(b);let C=this.decodeDataCharacter(a,p,g,!0);if(!this.isEmptyPair(c)&&c[c.length-1].mustBeLast())throw new ae;let I;try{I=this.decodeDataCharacter(a,p,g,!1)}catch(D){I=null,this.verbose&&console.log(D)}return new Li(C,I,p,!0)}isEmptyPair(a){return a.length===0}findNextPair(a,c,h){let g=this.getDecodeFinderCounters();g[0]=0,g[1]=0,g[2]=0,g[3]=0;let p=a.getSize(),b;h>=0?b=h:this.isEmptyPair(c)?b=0:b=c[c.length-1].getFinderPattern().getStartEnd()[1];let w=c.length%2!=0;this.startFromEven&&(w=!w);let C=!1;for(;b<p&&(C=!a.get(b),!!C);)b++;let I=0,D=b;for(let F=b;F<p;F++)if(a.get(F)!=C)g[I]++;else{if(I==3){if(w&&Me.reverseCounters(g),Me.isFinderPattern(g)){this.startEnd[0]=D,this.startEnd[1]=F;return}w&&Me.reverseCounters(g),D+=g[0]+g[1],g[0]=g[2],g[1]=g[3],g[2]=0,g[3]=0,I--}else I++;g[I]=1,C=!C}throw new ae}static reverseCounters(a){let c=a.length;for(let h=0;h<c/2;++h){let g=a[h];a[h]=a[c-h-1],a[c-h-1]=g}}parseFoundFinderPattern(a,c,h){let g,p,b;if(h){let I=this.startEnd[0]-1;for(;I>=0&&!a.get(I);)I--;I++,g=this.startEnd[0]-I,p=I,b=this.startEnd[1]}else p=this.startEnd[0],b=a.getNextUnset(this.startEnd[1]+1),g=b-this.startEnd[1];let w=this.getDecodeFinderCounters();R.arraycopy(w,0,w,1,w.length-1),w[0]=g;let C;try{C=this.parseFinderValue(w,Me.FINDER_PATTERNS)}catch{return null}return new yr(C,[p,b],p,b,c)}decodeDataCharacter(a,c,h,g){let p=this.getDataCharacterCounters();for(let tn=0;tn<p.length;tn++)p[tn]=0;if(g)Me.recordPatternInReverse(a,c.getStartEnd()[0],p);else{Me.recordPattern(a,c.getStartEnd()[1],p);for(let tn=0,hi=p.length-1;tn<hi;tn++,hi--){let Bi=p[tn];p[tn]=p[hi],p[hi]=Bi}}let b=17,w=ft.sum(new Int32Array(p))/b,C=(c.getStartEnd()[1]-c.getStartEnd()[0])/15;if(Math.abs(w-C)/C>.3)throw new ae;let I=this.getOddCounts(),D=this.getEvenCounts(),F=this.getOddRoundingErrors(),z=this.getEvenRoundingErrors();for(let tn=0;tn<p.length;tn++){let hi=1*p[tn]/w,Bi=hi+.5;if(Bi<1){if(hi<.3)throw new ae;Bi=1}else if(Bi>8){if(hi>8.7)throw new ae;Bi=8}let Ua=tn/2;(tn&1)==0?(I[Ua]=Bi,F[Ua]=hi-Bi):(D[Ua]=Bi,z[Ua]=hi-Bi)}this.adjustOddEvenCounts(b);let q=4*c.getValue()+(h?0:2)+(g?0:1)-1,ee=0,ne=0;for(let tn=I.length-1;tn>=0;tn--){if(Me.isNotA1left(c,h,g)){let hi=Me.WEIGHTS[q][2*tn];ne+=I[tn]*hi}ee+=I[tn]}let ce=0;for(let tn=D.length-1;tn>=0;tn--)if(Me.isNotA1left(c,h,g)){let hi=Me.WEIGHTS[q][2*tn+1];ce+=D[tn]*hi}let pe=ne+ce;if((ee&1)!=0||ee>13||ee<4)throw new ae;let Be=(13-ee)/2,Pe=Me.SYMBOL_WIDEST[Be],De=9-Pe,Ct=Is.getRSSvalue(I,Pe,!0),dt=Is.getRSSvalue(D,De,!1),zn=Me.EVEN_TOTAL_SUBSET[Be],qi=Me.GSUM[Be],bi=Ct*zn+dt+qi;return new mr(bi,pe)}static isNotA1left(a,c,h){return!(a.getValue()==0&&c&&h)}adjustOddEvenCounts(a){let c=ft.sum(new Int32Array(this.getOddCounts())),h=ft.sum(new Int32Array(this.getEvenCounts())),g=!1,p=!1;c>13?p=!0:c<4&&(g=!0);let b=!1,w=!1;h>13?w=!0:h<4&&(b=!0);let C=c+h-a,I=(c&1)==1,D=(h&1)==0;if(C==1)if(I){if(D)throw new ae;p=!0}else{if(!D)throw new ae;w=!0}else if(C==-1)if(I){if(D)throw new ae;g=!0}else{if(!D)throw new ae;b=!0}else if(C==0){if(I){if(!D)throw new ae;c<h?(g=!0,w=!0):(p=!0,b=!0)}else if(D)throw new ae}else throw new ae;if(g){if(p)throw new ae;Me.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&Me.decrement(this.getOddCounts(),this.getOddRoundingErrors()),b){if(w)throw new ae;Me.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Me.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Me.SYMBOL_WIDEST=[7,5,4,3,1],Me.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Me.GSUM=[0,348,1388,2948,3988],Me.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Me.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Me.FINDER_PAT_A=0,Me.FINDER_PAT_B=1,Me.FINDER_PAT_C=2,Me.FINDER_PAT_D=3,Me.FINDER_PAT_E=4,Me.FINDER_PAT_F=5,Me.FINDER_PATTERN_SEQUENCES=[[Me.FINDER_PAT_A,Me.FINDER_PAT_A],[Me.FINDER_PAT_A,Me.FINDER_PAT_B,Me.FINDER_PAT_B],[Me.FINDER_PAT_A,Me.FINDER_PAT_C,Me.FINDER_PAT_B,Me.FINDER_PAT_D],[Me.FINDER_PAT_A,Me.FINDER_PAT_E,Me.FINDER_PAT_B,Me.FINDER_PAT_D,Me.FINDER_PAT_C],[Me.FINDER_PAT_A,Me.FINDER_PAT_E,Me.FINDER_PAT_B,Me.FINDER_PAT_D,Me.FINDER_PAT_D,Me.FINDER_PAT_F],[Me.FINDER_PAT_A,Me.FINDER_PAT_E,Me.FINDER_PAT_B,Me.FINDER_PAT_D,Me.FINDER_PAT_E,Me.FINDER_PAT_F,Me.FINDER_PAT_F],[Me.FINDER_PAT_A,Me.FINDER_PAT_A,Me.FINDER_PAT_B,Me.FINDER_PAT_B,Me.FINDER_PAT_C,Me.FINDER_PAT_C,Me.FINDER_PAT_D,Me.FINDER_PAT_D],[Me.FINDER_PAT_A,Me.FINDER_PAT_A,Me.FINDER_PAT_B,Me.FINDER_PAT_B,Me.FINDER_PAT_C,Me.FINDER_PAT_C,Me.FINDER_PAT_D,Me.FINDER_PAT_E,Me.FINDER_PAT_E],[Me.FINDER_PAT_A,Me.FINDER_PAT_A,Me.FINDER_PAT_B,Me.FINDER_PAT_B,Me.FINDER_PAT_C,Me.FINDER_PAT_C,Me.FINDER_PAT_D,Me.FINDER_PAT_E,Me.FINDER_PAT_F,Me.FINDER_PAT_F],[Me.FINDER_PAT_A,Me.FINDER_PAT_A,Me.FINDER_PAT_B,Me.FINDER_PAT_B,Me.FINDER_PAT_C,Me.FINDER_PAT_D,Me.FINDER_PAT_D,Me.FINDER_PAT_E,Me.FINDER_PAT_E,Me.FINDER_PAT_F,Me.FINDER_PAT_F]],Me.MAX_PAIRS=11;class Bh extends mr{constructor(a,c,h){super(a,c),this.count=0,this.finderPattern=h}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Jt extends li{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(a,c,h){const g=this.decodePair(c,!1,a,h);Jt.addOrTally(this.possibleLeftPairs,g),c.reverse();let p=this.decodePair(c,!0,a,h);Jt.addOrTally(this.possibleRightPairs,p),c.reverse();for(let b of this.possibleLeftPairs)if(b.getCount()>1){for(let w of this.possibleRightPairs)if(w.getCount()>1&&Jt.checkChecksum(b,w))return Jt.constructResult(b,w)}throw new ae}static addOrTally(a,c){if(c==null)return;let h=!1;for(let g of a)if(g.getValue()===c.getValue()){g.incrementCount(),h=!0;break}h||a.push(c)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(a,c){let h=4537077*a.getValue()+c.getValue(),g=new String(h).toString(),p=new Ee;for(let I=13-g.length;I>0;I--)p.append("0");p.append(g);let b=0;for(let I=0;I<13;I++){let D=p.charAt(I).charCodeAt(0)-48;b+=(I&1)===0?3*D:D}b=10-b%10,b===10&&(b=0),p.append(b.toString());let w=a.getFinderPattern().getResultPoints(),C=c.getFinderPattern().getResultPoints();return new Oe(p.toString(),null,0,[w[0],w[1],C[0],C[1]],Re.RSS_14,new Date().getTime())}static checkChecksum(a,c){let h=(a.getChecksumPortion()+16*c.getChecksumPortion())%79,g=9*a.getFinderPattern().getValue()+c.getFinderPattern().getValue();return g>72&&g--,g>8&&g--,h===g}decodePair(a,c,h,g){try{let p=this.findFinderPattern(a,c),b=this.parseFoundFinderPattern(a,h,c,p),w=g==null?null:g.get(Y.NEED_RESULT_POINT_CALLBACK);if(w!=null){let D=(p[0]+p[1])/2;c&&(D=a.getSize()-1-D),w.foundPossibleResultPoint(new J(D,h))}let C=this.decodeDataCharacter(a,b,!0),I=this.decodeDataCharacter(a,b,!1);return new Bh(1597*C.getValue()+I.getValue(),C.getChecksumPortion()+4*I.getChecksumPortion(),b)}catch{return null}}decodeDataCharacter(a,c,h){let g=this.getDataCharacterCounters();for(let ce=0;ce<g.length;ce++)g[ce]=0;if(h)Zt.recordPatternInReverse(a,c.getStartEnd()[0],g);else{Zt.recordPattern(a,c.getStartEnd()[1]+1,g);for(let ce=0,pe=g.length-1;ce<pe;ce++,pe--){let Be=g[ce];g[ce]=g[pe],g[pe]=Be}}let p=h?16:15,b=ft.sum(new Int32Array(g))/p,w=this.getOddCounts(),C=this.getEvenCounts(),I=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let ce=0;ce<g.length;ce++){let pe=g[ce]/b,Be=Math.floor(pe+.5);Be<1?Be=1:Be>8&&(Be=8);let Pe=Math.floor(ce/2);(ce&1)===0?(w[Pe]=Be,I[Pe]=pe-Be):(C[Pe]=Be,D[Pe]=pe-Be)}this.adjustOddEvenCounts(h,p);let F=0,z=0;for(let ce=w.length-1;ce>=0;ce--)z*=9,z+=w[ce],F+=w[ce];let q=0,ee=0;for(let ce=C.length-1;ce>=0;ce--)q*=9,q+=C[ce],ee+=C[ce];let ne=z+3*q;if(h){if((F&1)!==0||F>12||F<4)throw new ae;let ce=(12-F)/2,pe=Jt.OUTSIDE_ODD_WIDEST[ce],Be=9-pe,Pe=Is.getRSSvalue(w,pe,!1),De=Is.getRSSvalue(C,Be,!0),Ct=Jt.OUTSIDE_EVEN_TOTAL_SUBSET[ce],dt=Jt.OUTSIDE_GSUM[ce];return new mr(Pe*Ct+De+dt,ne)}else{if((ee&1)!==0||ee>10||ee<4)throw new ae;let ce=(10-ee)/2,pe=Jt.INSIDE_ODD_WIDEST[ce],Be=9-pe,Pe=Is.getRSSvalue(w,pe,!0),De=Is.getRSSvalue(C,Be,!1),Ct=Jt.INSIDE_ODD_TOTAL_SUBSET[ce],dt=Jt.INSIDE_GSUM[ce];return new mr(De*Ct+Pe+dt,ne)}}findFinderPattern(a,c){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let g=a.getSize(),p=!1,b=0;for(;b<g&&(p=!a.get(b),c!==p);)b++;let w=0,C=b;for(let I=b;I<g;I++)if(a.get(I)!==p)h[w]++;else{if(w===3){if(li.isFinderPattern(h))return[C,I];C+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,w--}else w++;h[w]=1,p=!p}throw new ae}parseFoundFinderPattern(a,c,h,g){let p=a.get(g[0]),b=g[0]-1;for(;b>=0&&p!==a.get(b);)b--;b++;const w=g[0]-b,C=this.getDecodeFinderCounters(),I=new Int32Array(C.length);R.arraycopy(C,0,I,1,C.length-1),I[0]=w;const D=this.parseFinderValue(I,Jt.FINDER_PATTERNS);let F=b,z=g[1];return h&&(F=a.getSize()-1-F,z=a.getSize()-1-z),new yr(D,[b,g[1]],F,z,c)}adjustOddEvenCounts(a,c){let h=ft.sum(new Int32Array(this.getOddCounts())),g=ft.sum(new Int32Array(this.getEvenCounts())),p=!1,b=!1,w=!1,C=!1;a?(h>12?b=!0:h<4&&(p=!0),g>12?C=!0:g<4&&(w=!0)):(h>11?b=!0:h<5&&(p=!0),g>10?C=!0:g<4&&(w=!0));let I=h+g-c,D=(h&1)===(a?1:0),F=(g&1)===1;if(I===1)if(D){if(F)throw new ae;b=!0}else{if(!F)throw new ae;C=!0}else if(I===-1)if(D){if(F)throw new ae;p=!0}else{if(!F)throw new ae;w=!0}else if(I===0){if(D){if(!F)throw new ae;h<g?(p=!0,C=!0):(b=!0,w=!0)}else if(F)throw new ae}else throw new ae;if(p){if(b)throw new ae;li.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(b&&li.decrement(this.getOddCounts(),this.getOddRoundingErrors()),w){if(C)throw new ae;li.increment(this.getEvenCounts(),this.getOddRoundingErrors())}C&&li.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Jt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Jt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Jt.OUTSIDE_GSUM=[0,161,961,2015,2715],Jt.INSIDE_GSUM=[0,336,1036,1516],Jt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Jt.INSIDE_ODD_WIDEST=[2,4,6,8],Jt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class os extends Zt{constructor(a,c){super(),this.readers=[],this.verbose=c===!0;const h=a?a.get(Y.POSSIBLE_FORMATS):null,g=a&&a.get(Y.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;h?((h.includes(Re.EAN_13)||h.includes(Re.UPC_A)||h.includes(Re.EAN_8)||h.includes(Re.UPC_E))&&this.readers.push(new Gc(a)),h.includes(Re.CODE_39)&&this.readers.push(new $t(g)),h.includes(Re.CODE_128)&&this.readers.push(new ke),h.includes(Re.ITF)&&this.readers.push(new pt),h.includes(Re.RSS_14)&&this.readers.push(new Jt),h.includes(Re.RSS_EXPANDED)&&this.readers.push(new Me(this.verbose))):(this.readers.push(new Gc(a)),this.readers.push(new $t),this.readers.push(new Gc(a)),this.readers.push(new ke),this.readers.push(new pt),this.readers.push(new Jt),this.readers.push(new Me(this.verbose)))}decodeRow(a,c,h){for(let g=0;g<this.readers.length;g++)try{return this.readers[g].decodeRow(a,c,h)}catch{}throw new ae}reset(){this.readers.forEach(a=>a.reset())}}class S0 extends Ce{constructor(a=500,c){super(new os(c),a,c)}}class Vt{constructor(a,c,h){this.ecCodewords=a,this.ecBlocks=[c],h&&this.ecBlocks.push(h)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class zt{constructor(a,c){this.count=a,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Nt{constructor(a,c,h,g,p,b){this.versionNumber=a,this.symbolSizeRows=c,this.symbolSizeColumns=h,this.dataRegionSizeRows=g,this.dataRegionSizeColumns=p,this.ecBlocks=b;let w=0;const C=b.getECCodewords(),I=b.getECBlocks();for(let D of I)w+=D.getCount()*(D.getDataCodewords()+C);this.totalCodewords=w}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(a,c){if((a&1)!==0||(c&1)!==0)throw new V;for(let h of Nt.VERSIONS)if(h.symbolSizeRows===a&&h.symbolSizeColumns===c)return h;throw new V}toString(){return""+this.versionNumber}static buildVersions(){return[new Nt(1,10,10,8,8,new Vt(5,new zt(1,3))),new Nt(2,12,12,10,10,new Vt(7,new zt(1,5))),new Nt(3,14,14,12,12,new Vt(10,new zt(1,8))),new Nt(4,16,16,14,14,new Vt(12,new zt(1,12))),new Nt(5,18,18,16,16,new Vt(14,new zt(1,18))),new Nt(6,20,20,18,18,new Vt(18,new zt(1,22))),new Nt(7,22,22,20,20,new Vt(20,new zt(1,30))),new Nt(8,24,24,22,22,new Vt(24,new zt(1,36))),new Nt(9,26,26,24,24,new Vt(28,new zt(1,44))),new Nt(10,32,32,14,14,new Vt(36,new zt(1,62))),new Nt(11,36,36,16,16,new Vt(42,new zt(1,86))),new Nt(12,40,40,18,18,new Vt(48,new zt(1,114))),new Nt(13,44,44,20,20,new Vt(56,new zt(1,144))),new Nt(14,48,48,22,22,new Vt(68,new zt(1,174))),new Nt(15,52,52,24,24,new Vt(42,new zt(2,102))),new Nt(16,64,64,14,14,new Vt(56,new zt(2,140))),new Nt(17,72,72,16,16,new Vt(36,new zt(4,92))),new Nt(18,80,80,18,18,new Vt(48,new zt(4,114))),new Nt(19,88,88,20,20,new Vt(56,new zt(4,144))),new Nt(20,96,96,22,22,new Vt(68,new zt(4,174))),new Nt(21,104,104,24,24,new Vt(56,new zt(6,136))),new Nt(22,120,120,18,18,new Vt(68,new zt(6,175))),new Nt(23,132,132,20,20,new Vt(62,new zt(8,163))),new Nt(24,144,144,22,22,new Vt(62,new zt(8,156),new zt(2,155))),new Nt(25,8,18,6,16,new Vt(7,new zt(1,5))),new Nt(26,8,32,6,14,new Vt(11,new zt(1,10))),new Nt(27,12,26,10,24,new Vt(14,new zt(1,16))),new Nt(28,12,36,10,16,new Vt(18,new zt(1,22))),new Nt(29,16,36,14,16,new Vt(24,new zt(1,32))),new Nt(30,16,48,14,22,new Vt(28,new zt(1,49)))]}}Nt.VERSIONS=Nt.buildVersions();class Na{constructor(a){const c=a.getHeight();if(c<8||c>144||(c&1)!==0)throw new V;this.version=Na.readVersion(a),this.mappingBitMatrix=this.extractDataRegion(a),this.readMappingMatrix=new Se(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(a){const c=a.getHeight(),h=a.getWidth();return Nt.getVersionForDimensions(c,h)}readCodewords(){const a=new Int8Array(this.version.getTotalCodewords());let c=0,h=4,g=0;const p=this.mappingBitMatrix.getHeight(),b=this.mappingBitMatrix.getWidth();let w=!1,C=!1,I=!1,D=!1;do if(h===p&&g===0&&!w)a[c++]=this.readCorner1(p,b)&255,h-=2,g+=2,w=!0;else if(h===p-2&&g===0&&(b&3)!==0&&!C)a[c++]=this.readCorner2(p,b)&255,h-=2,g+=2,C=!0;else if(h===p+4&&g===2&&(b&7)===0&&!I)a[c++]=this.readCorner3(p,b)&255,h-=2,g+=2,I=!0;else if(h===p-2&&g===0&&(b&7)===4&&!D)a[c++]=this.readCorner4(p,b)&255,h-=2,g+=2,D=!0;else{do h<p&&g>=0&&!this.readMappingMatrix.get(g,h)&&(a[c++]=this.readUtah(h,g,p,b)&255),h-=2,g+=2;while(h>=0&&g<b);h+=1,g+=3;do h>=0&&g<b&&!this.readMappingMatrix.get(g,h)&&(a[c++]=this.readUtah(h,g,p,b)&255),h+=2,g-=2;while(h<p&&g>=0);h+=3,g+=1}while(h<p||g<b);if(c!==this.version.getTotalCodewords())throw new V;return a}readModule(a,c,h,g){return a<0&&(a+=h,c+=4-(h+4&7)),c<0&&(c+=g,a+=4-(g+4&7)),this.readMappingMatrix.set(c,a),this.mappingBitMatrix.get(c,a)}readUtah(a,c,h,g){let p=0;return this.readModule(a-2,c-2,h,g)&&(p|=1),p<<=1,this.readModule(a-2,c-1,h,g)&&(p|=1),p<<=1,this.readModule(a-1,c-2,h,g)&&(p|=1),p<<=1,this.readModule(a-1,c-1,h,g)&&(p|=1),p<<=1,this.readModule(a-1,c,h,g)&&(p|=1),p<<=1,this.readModule(a,c-2,h,g)&&(p|=1),p<<=1,this.readModule(a,c-1,h,g)&&(p|=1),p<<=1,this.readModule(a,c,h,g)&&(p|=1),p}readCorner1(a,c){let h=0;return this.readModule(a-1,0,a,c)&&(h|=1),h<<=1,this.readModule(a-1,1,a,c)&&(h|=1),h<<=1,this.readModule(a-1,2,a,c)&&(h|=1),h<<=1,this.readModule(0,c-2,a,c)&&(h|=1),h<<=1,this.readModule(0,c-1,a,c)&&(h|=1),h<<=1,this.readModule(1,c-1,a,c)&&(h|=1),h<<=1,this.readModule(2,c-1,a,c)&&(h|=1),h<<=1,this.readModule(3,c-1,a,c)&&(h|=1),h}readCorner2(a,c){let h=0;return this.readModule(a-3,0,a,c)&&(h|=1),h<<=1,this.readModule(a-2,0,a,c)&&(h|=1),h<<=1,this.readModule(a-1,0,a,c)&&(h|=1),h<<=1,this.readModule(0,c-4,a,c)&&(h|=1),h<<=1,this.readModule(0,c-3,a,c)&&(h|=1),h<<=1,this.readModule(0,c-2,a,c)&&(h|=1),h<<=1,this.readModule(0,c-1,a,c)&&(h|=1),h<<=1,this.readModule(1,c-1,a,c)&&(h|=1),h}readCorner3(a,c){let h=0;return this.readModule(a-1,0,a,c)&&(h|=1),h<<=1,this.readModule(a-1,c-1,a,c)&&(h|=1),h<<=1,this.readModule(0,c-3,a,c)&&(h|=1),h<<=1,this.readModule(0,c-2,a,c)&&(h|=1),h<<=1,this.readModule(0,c-1,a,c)&&(h|=1),h<<=1,this.readModule(1,c-3,a,c)&&(h|=1),h<<=1,this.readModule(1,c-2,a,c)&&(h|=1),h<<=1,this.readModule(1,c-1,a,c)&&(h|=1),h}readCorner4(a,c){let h=0;return this.readModule(a-3,0,a,c)&&(h|=1),h<<=1,this.readModule(a-2,0,a,c)&&(h|=1),h<<=1,this.readModule(a-1,0,a,c)&&(h|=1),h<<=1,this.readModule(0,c-2,a,c)&&(h|=1),h<<=1,this.readModule(0,c-1,a,c)&&(h|=1),h<<=1,this.readModule(1,c-1,a,c)&&(h|=1),h<<=1,this.readModule(2,c-1,a,c)&&(h|=1),h<<=1,this.readModule(3,c-1,a,c)&&(h|=1),h}extractDataRegion(a){const c=this.version.getSymbolSizeRows(),h=this.version.getSymbolSizeColumns();if(a.getHeight()!==c)throw new E("Dimension of bitMatrix must match the version size");const g=this.version.getDataRegionSizeRows(),p=this.version.getDataRegionSizeColumns(),b=c/g|0,w=h/p|0,C=b*g,I=w*p,D=new Se(I,C);for(let F=0;F<b;++F){const z=F*g;for(let q=0;q<w;++q){const ee=q*p;for(let ne=0;ne<g;++ne){const ce=F*(g+2)+1+ne,pe=z+ne;for(let Be=0;Be<p;++Be){const Pe=q*(p+2)+1+Be;if(a.get(Pe,ce)){const De=ee+Be;D.set(De,pe)}}}}}return D}}class Ra{constructor(a,c){this.numDataCodewords=a,this.codewords=c}static getDataBlocks(a,c){const h=c.getECBlocks();let g=0;const p=h.getECBlocks();for(let ne of p)g+=ne.getCount();const b=new Array(g);let w=0;for(let ne of p)for(let ce=0;ce<ne.getCount();ce++){const pe=ne.getDataCodewords(),Be=h.getECCodewords()+pe;b[w++]=new Ra(pe,new Uint8Array(Be))}const I=b[0].codewords.length-h.getECCodewords(),D=I-1;let F=0;for(let ne=0;ne<D;ne++)for(let ce=0;ce<w;ce++)b[ce].codewords[ne]=a[F++];const z=c.getVersionNumber()===24,q=z?8:w;for(let ne=0;ne<q;ne++)b[ne].codewords[I-1]=a[F++];const ee=b[0].codewords.length;for(let ne=I;ne<ee;ne++)for(let ce=0;ce<w;ce++){const pe=z?(ce+8)%w:ce,Be=z&&pe>7?ne-1:ne;b[pe].codewords[Be]=a[F++]}if(F!==a.length)throw new E;return b}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ls{constructor(a){this.bytes=a,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(a){if(a<1||a>32||a>this.available())throw new E(""+a);let c=0,h=this.bitOffset,g=this.byteOffset;const p=this.bytes;if(h>0){const b=8-h,w=a<b?a:b,C=b-w,I=255>>8-w<<C;c=(p[g]&I)>>C,a-=w,h+=w,h===8&&(h=0,g++)}if(a>0){for(;a>=8;)c=c<<8|p[g]&255,g++,a-=8;if(a>0){const b=8-a,w=255>>b<<b;c=c<<a|(p[g]&w)>>b,h+=a}}return this.bitOffset=h,this.byteOffset=g,c}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Gt;(function(B){B[B.PAD_ENCODE=0]="PAD_ENCODE",B[B.ASCII_ENCODE=1]="ASCII_ENCODE",B[B.C40_ENCODE=2]="C40_ENCODE",B[B.TEXT_ENCODE=3]="TEXT_ENCODE",B[B.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",B[B.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",B[B.BASE256_ENCODE=6]="BASE256_ENCODE"})(Gt||(Gt={}));class Ws{static decode(a){const c=new ls(a),h=new Ee,g=new Ee,p=new Array;let b=Gt.ASCII_ENCODE;do if(b===Gt.ASCII_ENCODE)b=this.decodeAsciiSegment(c,h,g);else{switch(b){case Gt.C40_ENCODE:this.decodeC40Segment(c,h);break;case Gt.TEXT_ENCODE:this.decodeTextSegment(c,h);break;case Gt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(c,h);break;case Gt.EDIFACT_ENCODE:this.decodeEdifactSegment(c,h);break;case Gt.BASE256_ENCODE:this.decodeBase256Segment(c,h,p);break;default:throw new V}b=Gt.ASCII_ENCODE}while(b!==Gt.PAD_ENCODE&&c.available()>0);return g.length()>0&&h.append(g.toString()),new Qe(a,h.toString(),p.length===0?null:p,null)}static decodeAsciiSegment(a,c,h){let g=!1;do{let p=a.readBits(8);if(p===0)throw new V;if(p<=128)return g&&(p+=128),c.append(String.fromCharCode(p-1)),Gt.ASCII_ENCODE;if(p===129)return Gt.PAD_ENCODE;if(p<=229){const b=p-130;b<10&&c.append("0"),c.append(""+b)}else switch(p){case 230:return Gt.C40_ENCODE;case 231:return Gt.BASE256_ENCODE;case 232:c.append("");break;case 233:case 234:break;case 235:g=!0;break;case 236:c.append("[)>05"),h.insert(0,"");break;case 237:c.append("[)>06"),h.insert(0,"");break;case 238:return Gt.ANSIX12_ENCODE;case 239:return Gt.TEXT_ENCODE;case 240:return Gt.EDIFACT_ENCODE;case 241:break;default:if(p!==254||a.available()!==0)throw new V;break}}while(a.available()>0);return Gt.ASCII_ENCODE}static decodeC40Segment(a,c){let h=!1;const g=[];let p=0;do{if(a.available()===8)return;const b=a.readBits(8);if(b===254)return;this.parseTwoBytes(b,a.readBits(8),g);for(let w=0;w<3;w++){const C=g[w];switch(p){case 0:if(C<3)p=C+1;else if(C<this.C40_BASIC_SET_CHARS.length){const I=this.C40_BASIC_SET_CHARS[C];h?(c.append(String.fromCharCode(I.charCodeAt(0)+128)),h=!1):c.append(I)}else throw new V;break;case 1:h?(c.append(String.fromCharCode(C+128)),h=!1):c.append(String.fromCharCode(C)),p=0;break;case 2:if(C<this.C40_SHIFT2_SET_CHARS.length){const I=this.C40_SHIFT2_SET_CHARS[C];h?(c.append(String.fromCharCode(I.charCodeAt(0)+128)),h=!1):c.append(I)}else switch(C){case 27:c.append("");break;case 30:h=!0;break;default:throw new V}p=0;break;case 3:h?(c.append(String.fromCharCode(C+224)),h=!1):c.append(String.fromCharCode(C+96)),p=0;break;default:throw new V}}}while(a.available()>0)}static decodeTextSegment(a,c){let h=!1,g=[],p=0;do{if(a.available()===8)return;const b=a.readBits(8);if(b===254)return;this.parseTwoBytes(b,a.readBits(8),g);for(let w=0;w<3;w++){const C=g[w];switch(p){case 0:if(C<3)p=C+1;else if(C<this.TEXT_BASIC_SET_CHARS.length){const I=this.TEXT_BASIC_SET_CHARS[C];h?(c.append(String.fromCharCode(I.charCodeAt(0)+128)),h=!1):c.append(I)}else throw new V;break;case 1:h?(c.append(String.fromCharCode(C+128)),h=!1):c.append(String.fromCharCode(C)),p=0;break;case 2:if(C<this.TEXT_SHIFT2_SET_CHARS.length){const I=this.TEXT_SHIFT2_SET_CHARS[C];h?(c.append(String.fromCharCode(I.charCodeAt(0)+128)),h=!1):c.append(I)}else switch(C){case 27:c.append("");break;case 30:h=!0;break;default:throw new V}p=0;break;case 3:if(C<this.TEXT_SHIFT3_SET_CHARS.length){const I=this.TEXT_SHIFT3_SET_CHARS[C];h?(c.append(String.fromCharCode(I.charCodeAt(0)+128)),h=!1):c.append(I),p=0}else throw new V;break;default:throw new V}}}while(a.available()>0)}static decodeAnsiX12Segment(a,c){const h=[];do{if(a.available()===8)return;const g=a.readBits(8);if(g===254)return;this.parseTwoBytes(g,a.readBits(8),h);for(let p=0;p<3;p++){const b=h[p];switch(b){case 0:c.append("\r");break;case 1:c.append("*");break;case 2:c.append(">");break;case 3:c.append(" ");break;default:if(b<14)c.append(String.fromCharCode(b+44));else if(b<40)c.append(String.fromCharCode(b+51));else throw new V;break}}}while(a.available()>0)}static parseTwoBytes(a,c,h){let g=(a<<8)+c-1,p=Math.floor(g/1600);h[0]=p,g-=p*1600,p=Math.floor(g/40),h[1]=p,h[2]=g-p*40}static decodeEdifactSegment(a,c){do{if(a.available()<=16)return;for(let h=0;h<4;h++){let g=a.readBits(6);if(g===31){const p=8-a.getBitOffset();p!==8&&a.readBits(p);return}(g&32)===0&&(g|=64),c.append(String.fromCharCode(g))}}while(a.available()>0)}static decodeBase256Segment(a,c,h){let g=1+a.getByteOffset();const p=this.unrandomize255State(a.readBits(8),g++);let b;if(p===0?b=a.available()/8|0:p<250?b=p:b=250*(p-249)+this.unrandomize255State(a.readBits(8),g++),b<0)throw new V;const w=new Uint8Array(b);for(let C=0;C<b;C++){if(a.available()<8)throw new V;w[C]=this.unrandomize255State(a.readBits(8),g++)}h.push(w);try{c.append(we.decode(w,oe.ISO88591))}catch(C){throw new It("Platform does not support required encoding: "+C.message)}}static unrandomize255State(a,c){const h=149*c%255+1,g=a-h;return g>=0?g:g+256}}Ws.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ws.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ws.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ws.TEXT_SHIFT2_SET_CHARS=Ws.C40_SHIFT2_SET_CHARS,Ws.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class C0{constructor(){this.rsDecoder=new Qt(Ye.DATA_MATRIX_FIELD_256)}decode(a){const c=new Na(a),h=c.getVersion(),g=c.readCodewords(),p=Ra.getDataBlocks(g,h);let b=0;for(let I of p)b+=I.getNumDataCodewords();const w=new Uint8Array(b),C=p.length;for(let I=0;I<C;I++){const D=p[I],F=D.getCodewords(),z=D.getNumDataCodewords();this.correctErrors(F,z);for(let q=0;q<z;q++)w[q*C+I]=F[q]}return Ws.decode(w)}correctErrors(a,c){const h=new Int32Array(a);try{this.rsDecoder.decode(h,a.length-c)}catch{throw new N}for(let g=0;g<c;g++)a[g]=h[g]}}class En{constructor(a){this.image=a,this.rectangleDetector=new Le(this.image)}detect(){const a=this.rectangleDetector.detect();let c=this.detectSolid1(a);if(c=this.detectSolid2(c),c[3]=this.correctTopRight(c),!c[3])throw new ae;c=this.shiftToModuleCenter(c);const h=c[0],g=c[1],p=c[2],b=c[3];let w=this.transitionsBetween(h,b)+1,C=this.transitionsBetween(p,b)+1;(w&1)===1&&(w+=1),(C&1)===1&&(C+=1),4*w<7*C&&4*C<7*w&&(w=C=Math.max(w,C));let I=En.sampleGrid(this.image,h,g,p,b,w,C);return new Ae(I,[h,g,p,b])}static shiftPoint(a,c,h){let g=(c.getX()-a.getX())/(h+1),p=(c.getY()-a.getY())/(h+1);return new J(a.getX()+g,a.getY()+p)}static moveAway(a,c,h){let g=a.getX(),p=a.getY();return g<c?g-=1:g+=1,p<h?p-=1:p+=1,new J(g,p)}detectSolid1(a){let c=a[0],h=a[1],g=a[3],p=a[2],b=this.transitionsBetween(c,h),w=this.transitionsBetween(h,g),C=this.transitionsBetween(g,p),I=this.transitionsBetween(p,c),D=b,F=[p,c,h,g];return D>w&&(D=w,F[0]=c,F[1]=h,F[2]=g,F[3]=p),D>C&&(D=C,F[0]=h,F[1]=g,F[2]=p,F[3]=c),D>I&&(F[0]=g,F[1]=p,F[2]=c,F[3]=h),F}detectSolid2(a){let c=a[0],h=a[1],g=a[2],p=a[3],b=this.transitionsBetween(c,p),w=En.shiftPoint(h,g,(b+1)*4),C=En.shiftPoint(g,h,(b+1)*4),I=this.transitionsBetween(w,c),D=this.transitionsBetween(C,p);return I<D?(a[0]=c,a[1]=h,a[2]=g,a[3]=p):(a[0]=h,a[1]=g,a[2]=p,a[3]=c),a}correctTopRight(a){let c=a[0],h=a[1],g=a[2],p=a[3],b=this.transitionsBetween(c,p),w=this.transitionsBetween(h,p),C=En.shiftPoint(c,h,(w+1)*4),I=En.shiftPoint(g,h,(b+1)*4);b=this.transitionsBetween(C,p),w=this.transitionsBetween(I,p);let D=new J(p.getX()+(g.getX()-h.getX())/(b+1),p.getY()+(g.getY()-h.getY())/(b+1)),F=new J(p.getX()+(c.getX()-h.getX())/(w+1),p.getY()+(c.getY()-h.getY())/(w+1));if(!this.isValid(D))return this.isValid(F)?F:null;if(!this.isValid(F))return D;let z=this.transitionsBetween(C,D)+this.transitionsBetween(I,D),q=this.transitionsBetween(C,F)+this.transitionsBetween(I,F);return z>q?D:F}shiftToModuleCenter(a){let c=a[0],h=a[1],g=a[2],p=a[3],b=this.transitionsBetween(c,p)+1,w=this.transitionsBetween(g,p)+1,C=En.shiftPoint(c,h,w*4),I=En.shiftPoint(g,h,b*4);b=this.transitionsBetween(C,p)+1,w=this.transitionsBetween(I,p)+1,(b&1)===1&&(b+=1),(w&1)===1&&(w+=1);let D=(c.getX()+h.getX()+g.getX()+p.getX())/4,F=(c.getY()+h.getY()+g.getY()+p.getY())/4;c=En.moveAway(c,D,F),h=En.moveAway(h,D,F),g=En.moveAway(g,D,F),p=En.moveAway(p,D,F);let z,q;return C=En.shiftPoint(c,h,w*4),C=En.shiftPoint(C,p,b*4),z=En.shiftPoint(h,c,w*4),z=En.shiftPoint(z,g,b*4),I=En.shiftPoint(g,p,w*4),I=En.shiftPoint(I,h,b*4),q=En.shiftPoint(p,g,w*4),q=En.shiftPoint(q,c,b*4),[C,z,I,q]}isValid(a){return a.getX()>=0&&a.getX()<this.image.getWidth()&&a.getY()>0&&a.getY()<this.image.getHeight()}static sampleGrid(a,c,h,g,p,b,w){return ut.getInstance().sampleGrid(a,b,w,.5,.5,b-.5,.5,b-.5,w-.5,.5,w-.5,c.getX(),c.getY(),p.getX(),p.getY(),g.getX(),g.getY(),h.getX(),h.getY())}transitionsBetween(a,c){let h=Math.trunc(a.getX()),g=Math.trunc(a.getY()),p=Math.trunc(c.getX()),b=Math.trunc(c.getY()),w=Math.abs(b-g)>Math.abs(p-h);if(w){let ne=h;h=g,g=ne,ne=p,p=b,b=ne}let C=Math.abs(p-h),I=Math.abs(b-g),D=-C/2,F=g<b?1:-1,z=h<p?1:-1,q=0,ee=this.image.get(w?g:h,w?h:g);for(let ne=h,ce=g;ne!==p;ne+=z){let pe=this.image.get(w?ce:ne,w?ne:ce);if(pe!==ee&&(q++,ee=pe),D+=I,D>0){if(ce===b)break;ce+=F,D-=C}}return q}}class Ks{constructor(){this.decoder=new C0}decode(a,c=null){let h,g;if(c!=null&&c.has(Y.PURE_BARCODE)){const I=Ks.extractPureBits(a.getBlackMatrix());h=this.decoder.decode(I),g=Ks.NO_POINTS}else{const I=new En(a.getBlackMatrix()).detect();h=this.decoder.decode(I.getBits()),g=I.getPoints()}const p=h.getRawBytes(),b=new Oe(h.getText(),p,8*p.length,g,Re.DATA_MATRIX,R.currentTimeMillis()),w=h.getByteSegments();w!=null&&b.putMetadata(Ne.BYTE_SEGMENTS,w);const C=h.getECLevel();return C!=null&&b.putMetadata(Ne.ERROR_CORRECTION_LEVEL,C),b}reset(){}static extractPureBits(a){const c=a.getTopLeftOnBit(),h=a.getBottomRightOnBit();if(c==null||h==null)throw new ae;const g=this.moduleSize(c,a);let p=c[1];const b=h[1];let w=c[0];const I=(h[0]-w+1)/g,D=(b-p+1)/g;if(I<=0||D<=0)throw new ae;const F=g/2;p+=F,w+=F;const z=new Se(I,D);for(let q=0;q<D;q++){const ee=p+q*g;for(let ne=0;ne<I;ne++)a.get(w+ne*g,ee)&&z.set(ne,q)}return z}static moduleSize(a,c){const h=c.getWidth();let g=a[0];const p=a[1];for(;g<h&&c.get(g,p);)g++;if(g===h)throw new ae;const b=g-a[0];if(b===0)throw new ae;return b}}Ks.NO_POINTS=[];class vl extends Ce{constructor(a=500){super(new Ks,a)}}var Ma;(function(B){B[B.L=0]="L",B[B.M=1]="M",B[B.Q=2]="Q",B[B.H=3]="H"})(Ma||(Ma={}));class Tt{constructor(a,c,h){this.value=a,this.stringValue=c,this.bits=h,Tt.FOR_BITS.set(h,this),Tt.FOR_VALUE.set(a,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(a){switch(a){case"L":return Tt.L;case"M":return Tt.M;case"Q":return Tt.Q;case"H":return Tt.H;default:throw new A(a+"not available")}}toString(){return this.stringValue}equals(a){if(!(a instanceof Tt))return!1;const c=a;return this.value===c.value}static forBits(a){if(a<0||a>=Tt.FOR_BITS.size)throw new E;return Tt.FOR_BITS.get(a)}}Tt.FOR_BITS=new Map,Tt.FOR_VALUE=new Map,Tt.L=new Tt(Ma.L,"L",1),Tt.M=new Tt(Ma.M,"M",0),Tt.Q=new Tt(Ma.Q,"Q",3),Tt.H=new Tt(Ma.H,"H",2);class ei{constructor(a){this.errorCorrectionLevel=Tt.forBits(a>>3&3),this.dataMask=a&7}static numBitsDiffering(a,c){return j.bitCount(a^c)}static decodeFormatInformation(a,c){const h=ei.doDecodeFormatInformation(a,c);return h!==null?h:ei.doDecodeFormatInformation(a^ei.FORMAT_INFO_MASK_QR,c^ei.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(a,c){let h=Number.MAX_SAFE_INTEGER,g=0;for(const p of ei.FORMAT_INFO_DECODE_LOOKUP){const b=p[0];if(b===a||b===c)return new ei(p[1]);let w=ei.numBitsDiffering(a,b);w<h&&(g=p[1],h=w),a!==c&&(w=ei.numBitsDiffering(c,b),w<h&&(g=p[1],h=w))}return h<=3?new ei(g):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(a){if(!(a instanceof ei))return!1;const c=a;return this.errorCorrectionLevel===c.errorCorrectionLevel&&this.dataMask===c.dataMask}}ei.FORMAT_INFO_MASK_QR=21522,ei.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class he{constructor(a,...c){this.ecCodewordsPerBlock=a,this.ecBlocks=c}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let a=0;const c=this.ecBlocks;for(const h of c)a+=h.getCount();return a}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class X{constructor(a,c){this.count=a,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class $e{constructor(a,c,...h){this.versionNumber=a,this.alignmentPatternCenters=c,this.ecBlocks=h;let g=0;const p=h[0].getECCodewordsPerBlock(),b=h[0].getECBlocks();for(const w of b)g+=w.getCount()*(w.getDataCodewords()+p);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(a){return this.ecBlocks[a.getValue()]}static getProvisionalVersionForDimension(a){if(a%4!==1)throw new V;try{return this.getVersionForNumber((a-17)/4)}catch{throw new V}}static getVersionForNumber(a){if(a<1||a>40)throw new E;return $e.VERSIONS[a-1]}static decodeVersionInformation(a){let c=Number.MAX_SAFE_INTEGER,h=0;for(let g=0;g<$e.VERSION_DECODE_INFO.length;g++){const p=$e.VERSION_DECODE_INFO[g];if(p===a)return $e.getVersionForNumber(g+7);const b=ei.numBitsDiffering(a,p);b<c&&(h=g+7,c=b)}return c<=3?$e.getVersionForNumber(h):null}buildFunctionPattern(){const a=this.getDimensionForVersion(),c=new Se(a);c.setRegion(0,0,9,9),c.setRegion(a-8,0,8,9),c.setRegion(0,a-8,9,8);const h=this.alignmentPatternCenters.length;for(let g=0;g<h;g++){const p=this.alignmentPatternCenters[g]-2;for(let b=0;b<h;b++)g===0&&(b===0||b===h-1)||g===h-1&&b===0||c.setRegion(this.alignmentPatternCenters[b]-2,p,5,5)}return c.setRegion(6,9,1,a-17),c.setRegion(9,6,a-17,1),this.versionNumber>6&&(c.setRegion(a-11,0,3,6),c.setRegion(0,a-11,6,3)),c}toString(){return""+this.versionNumber}}$e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),$e.VERSIONS=[new $e(1,new Int32Array(0),new he(7,new X(1,19)),new he(10,new X(1,16)),new he(13,new X(1,13)),new he(17,new X(1,9))),new $e(2,Int32Array.from([6,18]),new he(10,new X(1,34)),new he(16,new X(1,28)),new he(22,new X(1,22)),new he(28,new X(1,16))),new $e(3,Int32Array.from([6,22]),new he(15,new X(1,55)),new he(26,new X(1,44)),new he(18,new X(2,17)),new he(22,new X(2,13))),new $e(4,Int32Array.from([6,26]),new he(20,new X(1,80)),new he(18,new X(2,32)),new he(26,new X(2,24)),new he(16,new X(4,9))),new $e(5,Int32Array.from([6,30]),new he(26,new X(1,108)),new he(24,new X(2,43)),new he(18,new X(2,15),new X(2,16)),new he(22,new X(2,11),new X(2,12))),new $e(6,Int32Array.from([6,34]),new he(18,new X(2,68)),new he(16,new X(4,27)),new he(24,new X(4,19)),new he(28,new X(4,15))),new $e(7,Int32Array.from([6,22,38]),new he(20,new X(2,78)),new he(18,new X(4,31)),new he(18,new X(2,14),new X(4,15)),new he(26,new X(4,13),new X(1,14))),new $e(8,Int32Array.from([6,24,42]),new he(24,new X(2,97)),new he(22,new X(2,38),new X(2,39)),new he(22,new X(4,18),new X(2,19)),new he(26,new X(4,14),new X(2,15))),new $e(9,Int32Array.from([6,26,46]),new he(30,new X(2,116)),new he(22,new X(3,36),new X(2,37)),new he(20,new X(4,16),new X(4,17)),new he(24,new X(4,12),new X(4,13))),new $e(10,Int32Array.from([6,28,50]),new he(18,new X(2,68),new X(2,69)),new he(26,new X(4,43),new X(1,44)),new he(24,new X(6,19),new X(2,20)),new he(28,new X(6,15),new X(2,16))),new $e(11,Int32Array.from([6,30,54]),new he(20,new X(4,81)),new he(30,new X(1,50),new X(4,51)),new he(28,new X(4,22),new X(4,23)),new he(24,new X(3,12),new X(8,13))),new $e(12,Int32Array.from([6,32,58]),new he(24,new X(2,92),new X(2,93)),new he(22,new X(6,36),new X(2,37)),new he(26,new X(4,20),new X(6,21)),new he(28,new X(7,14),new X(4,15))),new $e(13,Int32Array.from([6,34,62]),new he(26,new X(4,107)),new he(22,new X(8,37),new X(1,38)),new he(24,new X(8,20),new X(4,21)),new he(22,new X(12,11),new X(4,12))),new $e(14,Int32Array.from([6,26,46,66]),new he(30,new X(3,115),new X(1,116)),new he(24,new X(4,40),new X(5,41)),new he(20,new X(11,16),new X(5,17)),new he(24,new X(11,12),new X(5,13))),new $e(15,Int32Array.from([6,26,48,70]),new he(22,new X(5,87),new X(1,88)),new he(24,new X(5,41),new X(5,42)),new he(30,new X(5,24),new X(7,25)),new he(24,new X(11,12),new X(7,13))),new $e(16,Int32Array.from([6,26,50,74]),new he(24,new X(5,98),new X(1,99)),new he(28,new X(7,45),new X(3,46)),new he(24,new X(15,19),new X(2,20)),new he(30,new X(3,15),new X(13,16))),new $e(17,Int32Array.from([6,30,54,78]),new he(28,new X(1,107),new X(5,108)),new he(28,new X(10,46),new X(1,47)),new he(28,new X(1,22),new X(15,23)),new he(28,new X(2,14),new X(17,15))),new $e(18,Int32Array.from([6,30,56,82]),new he(30,new X(5,120),new X(1,121)),new he(26,new X(9,43),new X(4,44)),new he(28,new X(17,22),new X(1,23)),new he(28,new X(2,14),new X(19,15))),new $e(19,Int32Array.from([6,30,58,86]),new he(28,new X(3,113),new X(4,114)),new he(26,new X(3,44),new X(11,45)),new he(26,new X(17,21),new X(4,22)),new he(26,new X(9,13),new X(16,14))),new $e(20,Int32Array.from([6,34,62,90]),new he(28,new X(3,107),new X(5,108)),new he(26,new X(3,41),new X(13,42)),new he(30,new X(15,24),new X(5,25)),new he(28,new X(15,15),new X(10,16))),new $e(21,Int32Array.from([6,28,50,72,94]),new he(28,new X(4,116),new X(4,117)),new he(26,new X(17,42)),new he(28,new X(17,22),new X(6,23)),new he(30,new X(19,16),new X(6,17))),new $e(22,Int32Array.from([6,26,50,74,98]),new he(28,new X(2,111),new X(7,112)),new he(28,new X(17,46)),new he(30,new X(7,24),new X(16,25)),new he(24,new X(34,13))),new $e(23,Int32Array.from([6,30,54,78,102]),new he(30,new X(4,121),new X(5,122)),new he(28,new X(4,47),new X(14,48)),new he(30,new X(11,24),new X(14,25)),new he(30,new X(16,15),new X(14,16))),new $e(24,Int32Array.from([6,28,54,80,106]),new he(30,new X(6,117),new X(4,118)),new he(28,new X(6,45),new X(14,46)),new he(30,new X(11,24),new X(16,25)),new he(30,new X(30,16),new X(2,17))),new $e(25,Int32Array.from([6,32,58,84,110]),new he(26,new X(8,106),new X(4,107)),new he(28,new X(8,47),new X(13,48)),new he(30,new X(7,24),new X(22,25)),new he(30,new X(22,15),new X(13,16))),new $e(26,Int32Array.from([6,30,58,86,114]),new he(28,new X(10,114),new X(2,115)),new he(28,new X(19,46),new X(4,47)),new he(28,new X(28,22),new X(6,23)),new he(30,new X(33,16),new X(4,17))),new $e(27,Int32Array.from([6,34,62,90,118]),new he(30,new X(8,122),new X(4,123)),new he(28,new X(22,45),new X(3,46)),new he(30,new X(8,23),new X(26,24)),new he(30,new X(12,15),new X(28,16))),new $e(28,Int32Array.from([6,26,50,74,98,122]),new he(30,new X(3,117),new X(10,118)),new he(28,new X(3,45),new X(23,46)),new he(30,new X(4,24),new X(31,25)),new he(30,new X(11,15),new X(31,16))),new $e(29,Int32Array.from([6,30,54,78,102,126]),new he(30,new X(7,116),new X(7,117)),new he(28,new X(21,45),new X(7,46)),new he(30,new X(1,23),new X(37,24)),new he(30,new X(19,15),new X(26,16))),new $e(30,Int32Array.from([6,26,52,78,104,130]),new he(30,new X(5,115),new X(10,116)),new he(28,new X(19,47),new X(10,48)),new he(30,new X(15,24),new X(25,25)),new he(30,new X(23,15),new X(25,16))),new $e(31,Int32Array.from([6,30,56,82,108,134]),new he(30,new X(13,115),new X(3,116)),new he(28,new X(2,46),new X(29,47)),new he(30,new X(42,24),new X(1,25)),new he(30,new X(23,15),new X(28,16))),new $e(32,Int32Array.from([6,34,60,86,112,138]),new he(30,new X(17,115)),new he(28,new X(10,46),new X(23,47)),new he(30,new X(10,24),new X(35,25)),new he(30,new X(19,15),new X(35,16))),new $e(33,Int32Array.from([6,30,58,86,114,142]),new he(30,new X(17,115),new X(1,116)),new he(28,new X(14,46),new X(21,47)),new he(30,new X(29,24),new X(19,25)),new he(30,new X(11,15),new X(46,16))),new $e(34,Int32Array.from([6,34,62,90,118,146]),new he(30,new X(13,115),new X(6,116)),new he(28,new X(14,46),new X(23,47)),new he(30,new X(44,24),new X(7,25)),new he(30,new X(59,16),new X(1,17))),new $e(35,Int32Array.from([6,30,54,78,102,126,150]),new he(30,new X(12,121),new X(7,122)),new he(28,new X(12,47),new X(26,48)),new he(30,new X(39,24),new X(14,25)),new he(30,new X(22,15),new X(41,16))),new $e(36,Int32Array.from([6,24,50,76,102,128,154]),new he(30,new X(6,121),new X(14,122)),new he(28,new X(6,47),new X(34,48)),new he(30,new X(46,24),new X(10,25)),new he(30,new X(2,15),new X(64,16))),new $e(37,Int32Array.from([6,28,54,80,106,132,158]),new he(30,new X(17,122),new X(4,123)),new he(28,new X(29,46),new X(14,47)),new he(30,new X(49,24),new X(10,25)),new he(30,new X(24,15),new X(46,16))),new $e(38,Int32Array.from([6,32,58,84,110,136,162]),new he(30,new X(4,122),new X(18,123)),new he(28,new X(13,46),new X(32,47)),new he(30,new X(48,24),new X(14,25)),new he(30,new X(42,15),new X(32,16))),new $e(39,Int32Array.from([6,26,54,82,110,138,166]),new he(30,new X(20,117),new X(4,118)),new he(28,new X(40,47),new X(7,48)),new he(30,new X(43,24),new X(22,25)),new he(30,new X(10,15),new X(67,16))),new $e(40,Int32Array.from([6,30,58,86,114,142,170]),new he(30,new X(19,118),new X(6,119)),new he(28,new X(18,47),new X(31,48)),new he(30,new X(34,24),new X(34,25)),new he(30,new X(20,15),new X(61,16)))];var Xn;(function(B){B[B.DATA_MASK_000=0]="DATA_MASK_000",B[B.DATA_MASK_001=1]="DATA_MASK_001",B[B.DATA_MASK_010=2]="DATA_MASK_010",B[B.DATA_MASK_011=3]="DATA_MASK_011",B[B.DATA_MASK_100=4]="DATA_MASK_100",B[B.DATA_MASK_101=5]="DATA_MASK_101",B[B.DATA_MASK_110=6]="DATA_MASK_110",B[B.DATA_MASK_111=7]="DATA_MASK_111"})(Xn||(Xn={}));class ki{constructor(a,c){this.value=a,this.isMasked=c}unmaskBitMatrix(a,c){for(let h=0;h<c;h++)for(let g=0;g<c;g++)this.isMasked(h,g)&&a.flip(g,h)}}ki.values=new Map([[Xn.DATA_MASK_000,new ki(Xn.DATA_MASK_000,(B,a)=>(B+a&1)===0)],[Xn.DATA_MASK_001,new ki(Xn.DATA_MASK_001,(B,a)=>(B&1)===0)],[Xn.DATA_MASK_010,new ki(Xn.DATA_MASK_010,(B,a)=>a%3===0)],[Xn.DATA_MASK_011,new ki(Xn.DATA_MASK_011,(B,a)=>(B+a)%3===0)],[Xn.DATA_MASK_100,new ki(Xn.DATA_MASK_100,(B,a)=>(Math.floor(B/2)+Math.floor(a/3)&1)===0)],[Xn.DATA_MASK_101,new ki(Xn.DATA_MASK_101,(B,a)=>B*a%6===0)],[Xn.DATA_MASK_110,new ki(Xn.DATA_MASK_110,(B,a)=>B*a%6<3)],[Xn.DATA_MASK_111,new ki(Xn.DATA_MASK_111,(B,a)=>(B+a+B*a%3&1)===0)]]);class Da{constructor(a){const c=a.getHeight();if(c<21||(c&3)!==1)throw new V;this.bitMatrix=a}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let a=0;for(let p=0;p<6;p++)a=this.copyBit(p,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(let p=5;p>=0;p--)a=this.copyBit(8,p,a);const c=this.bitMatrix.getHeight();let h=0;const g=c-7;for(let p=c-1;p>=g;p--)h=this.copyBit(8,p,h);for(let p=c-8;p<c;p++)h=this.copyBit(p,8,h);if(this.parsedFormatInfo=ei.decodeFormatInformation(a,h),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new V}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const a=this.bitMatrix.getHeight(),c=Math.floor((a-17)/4);if(c<=6)return $e.getVersionForNumber(c);let h=0;const g=a-11;for(let b=5;b>=0;b--)for(let w=a-9;w>=g;w--)h=this.copyBit(w,b,h);let p=$e.decodeVersionInformation(h);if(p!==null&&p.getDimensionForVersion()===a)return this.parsedVersion=p,p;h=0;for(let b=5;b>=0;b--)for(let w=a-9;w>=g;w--)h=this.copyBit(b,w,h);if(p=$e.decodeVersionInformation(h),p!==null&&p.getDimensionForVersion()===a)return this.parsedVersion=p,p;throw new V}copyBit(a,c,h){return(this.isMirror?this.bitMatrix.get(c,a):this.bitMatrix.get(a,c))?h<<1|1:h<<1}readCodewords(){const a=this.readFormatInformation(),c=this.readVersion(),h=ki.values.get(a.getDataMask()),g=this.bitMatrix.getHeight();h.unmaskBitMatrix(this.bitMatrix,g);const p=c.buildFunctionPattern();let b=!0;const w=new Uint8Array(c.getTotalCodewords());let C=0,I=0,D=0;for(let F=g-1;F>0;F-=2){F===6&&F--;for(let z=0;z<g;z++){const q=b?g-1-z:z;for(let ee=0;ee<2;ee++)p.get(F-ee,q)||(D++,I<<=1,this.bitMatrix.get(F-ee,q)&&(I|=1),D===8&&(w[C++]=I,D=0,I=0))}b=!b}if(C!==c.getTotalCodewords())throw new V;return w}remask(){if(this.parsedFormatInfo===null)return;const a=ki.values[this.parsedFormatInfo.getDataMask()],c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c)}setMirror(a){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=a}mirror(){const a=this.bitMatrix;for(let c=0,h=a.getWidth();c<h;c++)for(let g=c+1,p=a.getHeight();g<p;g++)a.get(c,g)!==a.get(g,c)&&(a.flip(g,c),a.flip(c,g))}}class Yc{constructor(a,c){this.numDataCodewords=a,this.codewords=c}static getDataBlocks(a,c,h){if(a.length!==c.getTotalCodewords())throw new E;const g=c.getECBlocksForLevel(h);let p=0;const b=g.getECBlocks();for(const ee of b)p+=ee.getCount();const w=new Array(p);let C=0;for(const ee of b)for(let ne=0;ne<ee.getCount();ne++){const ce=ee.getDataCodewords(),pe=g.getECCodewordsPerBlock()+ce;w[C++]=new Yc(ce,new Uint8Array(pe))}const I=w[0].codewords.length;let D=w.length-1;for(;D>=0&&w[D].codewords.length!==I;)D--;D++;const F=I-g.getECCodewordsPerBlock();let z=0;for(let ee=0;ee<F;ee++)for(let ne=0;ne<C;ne++)w[ne].codewords[ee]=a[z++];for(let ee=D;ee<C;ee++)w[ee].codewords[F]=a[z++];const q=w[0].codewords.length;for(let ee=F;ee<q;ee++)for(let ne=0;ne<C;ne++){const ce=ne<D?ee:ee+1;w[ne].codewords[ce]=a[z++]}return w}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Pi;(function(B){B[B.TERMINATOR=0]="TERMINATOR",B[B.NUMERIC=1]="NUMERIC",B[B.ALPHANUMERIC=2]="ALPHANUMERIC",B[B.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",B[B.BYTE=4]="BYTE",B[B.ECI=5]="ECI",B[B.KANJI=6]="KANJI",B[B.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",B[B.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",B[B.HANZI=9]="HANZI"})(Pi||(Pi={}));class tt{constructor(a,c,h,g){this.value=a,this.stringValue=c,this.characterCountBitsForVersions=h,this.bits=g,tt.FOR_BITS.set(g,this),tt.FOR_VALUE.set(a,this)}static forBits(a){const c=tt.FOR_BITS.get(a);if(c===void 0)throw new E;return c}getCharacterCountBits(a){const c=a.getVersionNumber();let h;return c<=9?h=0:c<=26?h=1:h=2,this.characterCountBitsForVersions[h]}getValue(){return this.value}getBits(){return this.bits}equals(a){if(!(a instanceof tt))return!1;const c=a;return this.value===c.value}toString(){return this.stringValue}}tt.FOR_BITS=new Map,tt.FOR_VALUE=new Map,tt.TERMINATOR=new tt(Pi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),tt.NUMERIC=new tt(Pi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),tt.ALPHANUMERIC=new tt(Pi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),tt.STRUCTURED_APPEND=new tt(Pi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),tt.BYTE=new tt(Pi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),tt.ECI=new tt(Pi.ECI,"ECI",Int32Array.from([0,0,0]),7),tt.KANJI=new tt(Pi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),tt.FNC1_FIRST_POSITION=new tt(Pi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),tt.FNC1_SECOND_POSITION=new tt(Pi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),tt.HANZI=new tt(Pi.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class fn{static decode(a,c,h,g){const p=new ls(a);let b=new Ee;const w=new Array;let C=-1,I=-1;try{let D=null,F=!1,z;do{if(p.available()<4)z=tt.TERMINATOR;else{const q=p.readBits(4);z=tt.forBits(q)}switch(z){case tt.TERMINATOR:break;case tt.FNC1_FIRST_POSITION:case tt.FNC1_SECOND_POSITION:F=!0;break;case tt.STRUCTURED_APPEND:if(p.available()<16)throw new V;C=p.readBits(8),I=p.readBits(8);break;case tt.ECI:const q=fn.parseECIValue(p);if(D=Q.getCharacterSetECIByValue(q),D===null)throw new V;break;case tt.HANZI:const ee=p.readBits(4),ne=p.readBits(z.getCharacterCountBits(c));ee===fn.GB2312_SUBSET&&fn.decodeHanziSegment(p,b,ne);break;default:const ce=p.readBits(z.getCharacterCountBits(c));switch(z){case tt.NUMERIC:fn.decodeNumericSegment(p,b,ce);break;case tt.ALPHANUMERIC:fn.decodeAlphanumericSegment(p,b,ce,F);break;case tt.BYTE:fn.decodeByteSegment(p,b,ce,D,w,g);break;case tt.KANJI:fn.decodeKanjiSegment(p,b,ce);break;default:throw new V}break}}while(z!==tt.TERMINATOR)}catch{throw new V}return new Qe(a,b.toString(),w.length===0?null:w,h===null?null:h.toString(),C,I)}static decodeHanziSegment(a,c,h){if(h*13>a.available())throw new V;const g=new Uint8Array(2*h);let p=0;for(;h>0;){const b=a.readBits(13);let w=b/96<<8&4294967295|b%96;w<959?w+=41377:w+=42657,g[p]=w>>8&255,g[p+1]=w&255,p+=2,h--}try{c.append(we.decode(g,oe.GB2312))}catch(b){throw new V(b)}}static decodeKanjiSegment(a,c,h){if(h*13>a.available())throw new V;const g=new Uint8Array(2*h);let p=0;for(;h>0;){const b=a.readBits(13);let w=b/192<<8&4294967295|b%192;w<7936?w+=33088:w+=49472,g[p]=w>>8,g[p+1]=w,p+=2,h--}try{c.append(we.decode(g,oe.SHIFT_JIS))}catch(b){throw new V(b)}}static decodeByteSegment(a,c,h,g,p,b){if(8*h>a.available())throw new V;const w=new Uint8Array(h);for(let I=0;I<h;I++)w[I]=a.readBits(8);let C;g===null?C=oe.guessEncoding(w,b):C=g.getName();try{c.append(we.decode(w,C))}catch(I){throw new V(I)}p.push(w)}static toAlphaNumericChar(a){if(a>=fn.ALPHANUMERIC_CHARS.length)throw new V;return fn.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,c,h,g){const p=c.length();for(;h>1;){if(a.available()<11)throw new V;const b=a.readBits(11);c.append(fn.toAlphaNumericChar(Math.floor(b/45))),c.append(fn.toAlphaNumericChar(b%45)),h-=2}if(h===1){if(a.available()<6)throw new V;c.append(fn.toAlphaNumericChar(a.readBits(6)))}if(g)for(let b=p;b<c.length();b++)c.charAt(b)==="%"&&(b<c.length()-1&&c.charAt(b+1)==="%"?c.deleteCharAt(b+1):c.setCharAt(b,""))}static decodeNumericSegment(a,c,h){for(;h>=3;){if(a.available()<10)throw new V;const g=a.readBits(10);if(g>=1e3)throw new V;c.append(fn.toAlphaNumericChar(Math.floor(g/100))),c.append(fn.toAlphaNumericChar(Math.floor(g/10)%10)),c.append(fn.toAlphaNumericChar(g%10)),h-=3}if(h===2){if(a.available()<7)throw new V;const g=a.readBits(7);if(g>=100)throw new V;c.append(fn.toAlphaNumericChar(Math.floor(g/10))),c.append(fn.toAlphaNumericChar(g%10))}else if(h===1){if(a.available()<4)throw new V;const g=a.readBits(4);if(g>=10)throw new V;c.append(fn.toAlphaNumericChar(g))}}static parseECIValue(a){const c=a.readBits(8);if((c&128)===0)return c&127;if((c&192)===128){const h=a.readBits(8);return(c&63)<<8&4294967295|h}if((c&224)===192){const h=a.readBits(16);return(c&31)<<16&4294967295|h}throw new V}}fn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",fn.GB2312_SUBSET=1;class Fh{constructor(a){this.mirrored=a}isMirrored(){return this.mirrored}applyMirroredCorrection(a){if(!this.mirrored||a===null||a.length<3)return;const c=a[0];a[0]=a[2],a[2]=c}}class _0{constructor(){this.rsDecoder=new Qt(Ye.QR_CODE_FIELD_256)}decodeBooleanArray(a,c){return this.decodeBitMatrix(Se.parseFromBooleanArray(a),c)}decodeBitMatrix(a,c){const h=new Da(a);let g=null;try{return this.decodeBitMatrixParser(h,c)}catch(p){g=p}try{h.remask(),h.setMirror(!0),h.readVersion(),h.readFormatInformation(),h.mirror();const p=this.decodeBitMatrixParser(h,c);return p.setOther(new Fh(!0)),p}catch(p){throw g!==null?g:p}}decodeBitMatrixParser(a,c){const h=a.readVersion(),g=a.readFormatInformation().getErrorCorrectionLevel(),p=a.readCodewords(),b=Yc.getDataBlocks(p,h,g);let w=0;for(const D of b)w+=D.getNumDataCodewords();const C=new Uint8Array(w);let I=0;for(const D of b){const F=D.getCodewords(),z=D.getNumDataCodewords();this.correctErrors(F,z);for(let q=0;q<z;q++)C[I++]=F[q]}return fn.decode(C,h,g,c)}correctErrors(a,c){const h=new Int32Array(a);try{this.rsDecoder.decode(h,a.length-c)}catch{throw new N}for(let g=0;g<c;g++)a[g]=h[g]}}class Oa extends J{constructor(a,c,h){super(a,c),this.estimatedModuleSize=h}aboutEquals(a,c,h){if(Math.abs(c-this.getY())<=a&&Math.abs(h-this.getX())<=a){const g=Math.abs(a-this.estimatedModuleSize);return g<=1||g<=this.estimatedModuleSize}return!1}combineEstimate(a,c,h){const g=(this.getX()+c)/2,p=(this.getY()+a)/2,b=(this.estimatedModuleSize+h)/2;return new Oa(g,p,b)}}class Yi{constructor(a,c,h,g,p,b,w){this.image=a,this.startX=c,this.startY=h,this.width=g,this.height=p,this.moduleSize=b,this.resultPointCallback=w,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const a=this.startX,c=this.height,h=this.width,g=a+h,p=this.startY+c/2,b=new Int32Array(3),w=this.image;for(let C=0;C<c;C++){const I=p+((C&1)===0?Math.floor((C+1)/2):-Math.floor((C+1)/2));b[0]=0,b[1]=0,b[2]=0;let D=a;for(;D<g&&!w.get(D,I);)D++;let F=0;for(;D<g;){if(w.get(D,I))if(F===1)b[1]++;else if(F===2){if(this.foundPatternCross(b)){const z=this.handlePossibleCenter(b,I,D);if(z!==null)return z}b[0]=b[2],b[1]=1,b[2]=0,F=1}else b[++F]++;else F===1&&F++,b[F]++;D++}if(this.foundPatternCross(b)){const z=this.handlePossibleCenter(b,I,g);if(z!==null)return z}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ae}static centerFromEnd(a,c){return c-a[2]-a[1]/2}foundPatternCross(a){const c=this.moduleSize,h=c/2;for(let g=0;g<3;g++)if(Math.abs(c-a[g])>=h)return!1;return!0}crossCheckVertical(a,c,h,g){const p=this.image,b=p.getHeight(),w=this.crossCheckStateCount;w[0]=0,w[1]=0,w[2]=0;let C=a;for(;C>=0&&p.get(c,C)&&w[1]<=h;)w[1]++,C--;if(C<0||w[1]>h)return NaN;for(;C>=0&&!p.get(c,C)&&w[0]<=h;)w[0]++,C--;if(w[0]>h)return NaN;for(C=a+1;C<b&&p.get(c,C)&&w[1]<=h;)w[1]++,C++;if(C===b||w[1]>h)return NaN;for(;C<b&&!p.get(c,C)&&w[2]<=h;)w[2]++,C++;if(w[2]>h)return NaN;const I=w[0]+w[1]+w[2];return 5*Math.abs(I-g)>=2*g?NaN:this.foundPatternCross(w)?Yi.centerFromEnd(w,C):NaN}handlePossibleCenter(a,c,h){const g=a[0]+a[1]+a[2],p=Yi.centerFromEnd(a,h),b=this.crossCheckVertical(c,p,2*a[1],g);if(!isNaN(b)){const w=(a[0]+a[1]+a[2])/3;for(const I of this.possibleCenters)if(I.aboutEquals(w,b,p))return I.combineEstimate(b,p,w);const C=new Oa(p,b,w);this.possibleCenters.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return null}}class Mo extends J{constructor(a,c,h,g){super(a,c),this.estimatedModuleSize=h,this.count=g,g===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(a,c,h){if(Math.abs(c-this.getY())<=a&&Math.abs(h-this.getX())<=a){const g=Math.abs(a-this.estimatedModuleSize);return g<=1||g<=this.estimatedModuleSize}return!1}combineEstimate(a,c,h){const g=this.count+1,p=(this.count*this.getX()+c)/g,b=(this.count*this.getY()+a)/g,w=(this.count*this.estimatedModuleSize+h)/g;return new Mo(p,b,w,g)}}class Xc{constructor(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class vn{constructor(a,c){this.image=a,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=c}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){const c=a!=null&&a.get(Y.TRY_HARDER)!==void 0,h=a!=null&&a.get(Y.PURE_BARCODE)!==void 0,g=this.image,p=g.getHeight(),b=g.getWidth();let w=Math.floor(3*p/(4*vn.MAX_MODULES));(w<vn.MIN_SKIP||c)&&(w=vn.MIN_SKIP);let C=!1;const I=new Int32Array(5);for(let F=w-1;F<p&&!C;F+=w){I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0;let z=0;for(let q=0;q<b;q++)if(g.get(q,F))(z&1)===1&&z++,I[z]++;else if((z&1)===0)if(z===4)if(vn.foundPatternCross(I)){if(this.handlePossibleCenter(I,F,q,h)===!0)if(w=2,this.hasSkipped===!0)C=this.haveMultiplyConfirmedCenters();else{const ne=this.findRowSkip();ne>I[2]&&(F+=ne-I[2]-w,q=b-1)}else{I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,z=3;continue}z=0,I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0}else I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,z=3;else I[++z]++;else I[z]++;vn.foundPatternCross(I)&&this.handlePossibleCenter(I,F,b,h)===!0&&(w=I[0],this.hasSkipped&&(C=this.haveMultiplyConfirmedCenters()))}const D=this.selectBestPatterns();return J.orderBestPatterns(D),new Xc(D)}static centerFromEnd(a,c){return c-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let c=0;for(let p=0;p<5;p++){const b=a[p];if(b===0)return!1;c+=b}if(c<7)return!1;const h=c/7,g=h/2;return Math.abs(h-a[0])<g&&Math.abs(h-a[1])<g&&Math.abs(3*h-a[2])<3*g&&Math.abs(h-a[3])<g&&Math.abs(h-a[4])<g}getCrossCheckStateCount(){const a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,c,h,g){const p=this.getCrossCheckStateCount();let b=0;const w=this.image;for(;a>=b&&c>=b&&w.get(c-b,a-b);)p[2]++,b++;if(a<b||c<b)return!1;for(;a>=b&&c>=b&&!w.get(c-b,a-b)&&p[1]<=h;)p[1]++,b++;if(a<b||c<b||p[1]>h)return!1;for(;a>=b&&c>=b&&w.get(c-b,a-b)&&p[0]<=h;)p[0]++,b++;if(p[0]>h)return!1;const C=w.getHeight(),I=w.getWidth();for(b=1;a+b<C&&c+b<I&&w.get(c+b,a+b);)p[2]++,b++;if(a+b>=C||c+b>=I)return!1;for(;a+b<C&&c+b<I&&!w.get(c+b,a+b)&&p[3]<h;)p[3]++,b++;if(a+b>=C||c+b>=I||p[3]>=h)return!1;for(;a+b<C&&c+b<I&&w.get(c+b,a+b)&&p[4]<h;)p[4]++,b++;if(p[4]>=h)return!1;const D=p[0]+p[1]+p[2]+p[3]+p[4];return Math.abs(D-g)<2*g&&vn.foundPatternCross(p)}crossCheckVertical(a,c,h,g){const p=this.image,b=p.getHeight(),w=this.getCrossCheckStateCount();let C=a;for(;C>=0&&p.get(c,C);)w[2]++,C--;if(C<0)return NaN;for(;C>=0&&!p.get(c,C)&&w[1]<=h;)w[1]++,C--;if(C<0||w[1]>h)return NaN;for(;C>=0&&p.get(c,C)&&w[0]<=h;)w[0]++,C--;if(w[0]>h)return NaN;for(C=a+1;C<b&&p.get(c,C);)w[2]++,C++;if(C===b)return NaN;for(;C<b&&!p.get(c,C)&&w[3]<h;)w[3]++,C++;if(C===b||w[3]>=h)return NaN;for(;C<b&&p.get(c,C)&&w[4]<h;)w[4]++,C++;if(w[4]>=h)return NaN;const I=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(I-g)>=2*g?NaN:vn.foundPatternCross(w)?vn.centerFromEnd(w,C):NaN}crossCheckHorizontal(a,c,h,g){const p=this.image,b=p.getWidth(),w=this.getCrossCheckStateCount();let C=a;for(;C>=0&&p.get(C,c);)w[2]++,C--;if(C<0)return NaN;for(;C>=0&&!p.get(C,c)&&w[1]<=h;)w[1]++,C--;if(C<0||w[1]>h)return NaN;for(;C>=0&&p.get(C,c)&&w[0]<=h;)w[0]++,C--;if(w[0]>h)return NaN;for(C=a+1;C<b&&p.get(C,c);)w[2]++,C++;if(C===b)return NaN;for(;C<b&&!p.get(C,c)&&w[3]<h;)w[3]++,C++;if(C===b||w[3]>=h)return NaN;for(;C<b&&p.get(C,c)&&w[4]<h;)w[4]++,C++;if(w[4]>=h)return NaN;const I=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(I-g)>=g?NaN:vn.foundPatternCross(w)?vn.centerFromEnd(w,C):NaN}handlePossibleCenter(a,c,h,g){const p=a[0]+a[1]+a[2]+a[3]+a[4];let b=vn.centerFromEnd(a,h),w=this.crossCheckVertical(c,Math.floor(b),a[2],p);if(!isNaN(w)&&(b=this.crossCheckHorizontal(Math.floor(b),Math.floor(w),a[2],p),!isNaN(b)&&(!g||this.crossCheckDiagonal(Math.floor(w),Math.floor(b),a[2],p)))){const C=p/7;let I=!1;const D=this.possibleCenters;for(let F=0,z=D.length;F<z;F++){const q=D[F];if(q.aboutEquals(C,w,b)){D[F]=q.combineEstimate(w,b,C),I=!0;break}}if(!I){const F=new Mo(b,w,C);D.push(F),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(F)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let c=null;for(const h of this.possibleCenters)if(h.getCount()>=vn.CENTER_QUORUM)if(c==null)c=h;else return this.hasSkipped=!0,Math.floor((Math.abs(c.getX()-h.getX())-Math.abs(c.getY()-h.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,c=0;const h=this.possibleCenters.length;for(const b of this.possibleCenters)b.getCount()>=vn.CENTER_QUORUM&&(a++,c+=b.getEstimatedModuleSize());if(a<3)return!1;const g=c/h;let p=0;for(const b of this.possibleCenters)p+=Math.abs(b.getEstimatedModuleSize()-g);return p<=.05*c}selectBestPatterns(){const a=this.possibleCenters.length;if(a<3)throw new ae;const c=this.possibleCenters;let h;if(a>3){let g=0,p=0;for(const C of this.possibleCenters){const I=C.getEstimatedModuleSize();g+=I,p+=I*I}h=g/a;let b=Math.sqrt(p/a-h*h);c.sort((C,I)=>{const D=Math.abs(I.getEstimatedModuleSize()-h),F=Math.abs(C.getEstimatedModuleSize()-h);return D<F?-1:D>F?1:0});const w=Math.max(.2*h,b);for(let C=0;C<c.length&&c.length>3;C++){const I=c[C];Math.abs(I.getEstimatedModuleSize()-h)>w&&(c.splice(C,1),C--)}}if(c.length>3){let g=0;for(const p of c)g+=p.getEstimatedModuleSize();h=g/c.length,c.sort((p,b)=>{if(b.getCount()===p.getCount()){const w=Math.abs(b.getEstimatedModuleSize()-h),C=Math.abs(p.getEstimatedModuleSize()-h);return w<C?1:w>C?-1:0}else return b.getCount()-p.getCount()}),c.splice(3)}return[c[0],c[1],c[2]]}}vn.CENTER_QUORUM=2,vn.MIN_SKIP=3,vn.MAX_MODULES=57;class Rs{constructor(a){this.image=a}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(a){this.resultPointCallback=a==null?null:a.get(Y.NEED_RESULT_POINT_CALLBACK);const h=new vn(this.image,this.resultPointCallback).find(a);return this.processFinderPatternInfo(h)}processFinderPatternInfo(a){const c=a.getTopLeft(),h=a.getTopRight(),g=a.getBottomLeft(),p=this.calculateModuleSize(c,h,g);if(p<1)throw new ae("No pattern found in proccess finder.");const b=Rs.computeDimension(c,h,g,p),w=$e.getProvisionalVersionForDimension(b),C=w.getDimensionForVersion()-7;let I=null;if(w.getAlignmentPatternCenters().length>0){const q=h.getX()-c.getX()+g.getX(),ee=h.getY()-c.getY()+g.getY(),ne=1-3/C,ce=Math.floor(c.getX()+ne*(q-c.getX())),pe=Math.floor(c.getY()+ne*(ee-c.getY()));for(let Be=4;Be<=16;Be<<=1)try{I=this.findAlignmentInRegion(p,ce,pe,Be);break}catch(Pe){if(!(Pe instanceof ae))throw Pe}}const D=Rs.createTransform(c,h,g,I,b),F=Rs.sampleGrid(this.image,D,b);let z;return I===null?z=[g,c,h]:z=[g,c,h,I],new Ae(F,z)}static createTransform(a,c,h,g,p){const b=p-3.5;let w,C,I,D;return g!==null?(w=g.getX(),C=g.getY(),I=b-3,D=I):(w=c.getX()-a.getX()+h.getX(),C=c.getY()-a.getY()+h.getY(),I=b,D=b),ze.quadrilateralToQuadrilateral(3.5,3.5,b,3.5,I,D,3.5,b,a.getX(),a.getY(),c.getX(),c.getY(),w,C,h.getX(),h.getY())}static sampleGrid(a,c,h){return ut.getInstance().sampleGridWithTransform(a,h,h,c)}static computeDimension(a,c,h,g){const p=ft.round(J.distance(a,c)/g),b=ft.round(J.distance(a,h)/g);let w=Math.floor((p+b)/2)+7;switch(w&3){case 0:w++;break;case 2:w--;break;case 3:throw new ae("Dimensions could be not found.")}return w}calculateModuleSize(a,c,h){return(this.calculateModuleSizeOneWay(a,c)+this.calculateModuleSizeOneWay(a,h))/2}calculateModuleSizeOneWay(a,c){const h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(c.getX()),Math.floor(c.getY())),g=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(c.getX()),Math.floor(c.getY()),Math.floor(a.getX()),Math.floor(a.getY()));return isNaN(h)?g/7:isNaN(g)?h/7:(h+g)/14}sizeOfBlackWhiteBlackRunBothWays(a,c,h,g){let p=this.sizeOfBlackWhiteBlackRun(a,c,h,g),b=1,w=a-(h-a);w<0?(b=a/(a-w),w=0):w>=this.image.getWidth()&&(b=(this.image.getWidth()-1-a)/(w-a),w=this.image.getWidth()-1);let C=Math.floor(c-(g-c)*b);return b=1,C<0?(b=c/(c-C),C=0):C>=this.image.getHeight()&&(b=(this.image.getHeight()-1-c)/(C-c),C=this.image.getHeight()-1),w=Math.floor(a+(w-a)*b),p+=this.sizeOfBlackWhiteBlackRun(a,c,w,C),p-1}sizeOfBlackWhiteBlackRun(a,c,h,g){const p=Math.abs(g-c)>Math.abs(h-a);if(p){let q=a;a=c,c=q,q=h,h=g,g=q}const b=Math.abs(h-a),w=Math.abs(g-c);let C=-b/2;const I=a<h?1:-1,D=c<g?1:-1;let F=0;const z=h+I;for(let q=a,ee=c;q!==z;q+=I){const ne=p?ee:q,ce=p?q:ee;if(F===1===this.image.get(ne,ce)){if(F===2)return ft.distance(q,ee,a,c);F++}if(C+=w,C>0){if(ee===g)break;ee+=D,C-=b}}return F===2?ft.distance(h+I,g,a,c):NaN}findAlignmentInRegion(a,c,h,g){const p=Math.floor(g*a),b=Math.max(0,c-p),w=Math.min(this.image.getWidth()-1,c+p);if(w-b<a*3)throw new ae("Alignment top exceeds estimated module size.");const C=Math.max(0,h-p),I=Math.min(this.image.getHeight()-1,h+p);if(I-C<a*3)throw new ae("Alignment bottom exceeds estimated module size.");return new Yi(this.image,b,C,w-b,I-C,a,this.resultPointCallback).find()}}class Qs{constructor(){this.decoder=new _0}getDecoder(){return this.decoder}decode(a,c){let h,g;if(c!=null&&c.get(Y.PURE_BARCODE)!==void 0){const C=Qs.extractPureBits(a.getBlackMatrix());h=this.decoder.decodeBitMatrix(C,c),g=Qs.NO_POINTS}else{const C=new Rs(a.getBlackMatrix()).detect(c);h=this.decoder.decodeBitMatrix(C.getBits(),c),g=C.getPoints()}h.getOther()instanceof Fh&&h.getOther().applyMirroredCorrection(g);const p=new Oe(h.getText(),h.getRawBytes(),void 0,g,Re.QR_CODE,void 0),b=h.getByteSegments();b!==null&&p.putMetadata(Ne.BYTE_SEGMENTS,b);const w=h.getECLevel();return w!==null&&p.putMetadata(Ne.ERROR_CORRECTION_LEVEL,w),h.hasStructuredAppend()&&(p.putMetadata(Ne.STRUCTURED_APPEND_SEQUENCE,h.getStructuredAppendSequenceNumber()),p.putMetadata(Ne.STRUCTURED_APPEND_PARITY,h.getStructuredAppendParity())),p}reset(){}static extractPureBits(a){const c=a.getTopLeftOnBit(),h=a.getBottomRightOnBit();if(c===null||h===null)throw new ae;const g=this.moduleSize(c,a);let p=c[1],b=h[1],w=c[0],C=h[0];if(w>=C||p>=b)throw new ae;if(b-p!==C-w&&(C=w+(b-p),C>=a.getWidth()))throw new ae;const I=Math.round((C-w+1)/g),D=Math.round((b-p+1)/g);if(I<=0||D<=0)throw new ae;if(D!==I)throw new ae;const F=Math.floor(g/2);p+=F,w+=F;const z=w+Math.floor((I-1)*g)-C;if(z>0){if(z>F)throw new ae;w-=z}const q=p+Math.floor((D-1)*g)-b;if(q>0){if(q>F)throw new ae;p-=q}const ee=new Se(I,D);for(let ne=0;ne<D;ne++){const ce=p+Math.floor(ne*g);for(let pe=0;pe<I;pe++)a.get(w+Math.floor(pe*g),ce)&&ee.set(pe,ne)}return ee}static moduleSize(a,c){const h=c.getHeight(),g=c.getWidth();let p=a[0],b=a[1],w=!0,C=0;for(;p<g&&b<h;){if(w!==c.get(p,b)){if(++C===5)break;w=!w}p++,b++}if(p===g||b===h)throw new ae;return(p-a[0])/7}}Qs.NO_POINTS=new Array;class st{PDF417Common(){}static getBitCountSum(a){return ft.sum(a)}static toIntArray(a){if(a==null||!a.length)return st.EMPTY_INT_ARRAY;const c=new Int32Array(a.length);let h=0;for(const g of a)c[h++]=g;return c}static getCodeword(a){const c=P.binarySearch(st.SYMBOL_TABLE,a&262143);return c<0?-1:(st.CODEWORD_TABLE[c]-1)%st.NUMBER_OF_CODEWORDS}}st.NUMBER_OF_CODEWORDS=929,st.MAX_CODEWORDS_IN_BARCODE=st.NUMBER_OF_CODEWORDS-1,st.MIN_ROWS_IN_BARCODE=3,st.MAX_ROWS_IN_BARCODE=90,st.MODULES_IN_CODEWORD=17,st.MODULES_IN_STOP_PATTERN=18,st.BARS_IN_MODULE=8,st.EMPTY_INT_ARRAY=new Int32Array([]),st.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),st.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class jh{constructor(a,c){this.bits=a,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class ht{static detectMultiple(a,c,h){let g=a.getBlackMatrix(),p=ht.detect(h,g);return p.length||(g=g.clone(),g.rotate180(),p=ht.detect(h,g)),new jh(g,p)}static detect(a,c){const h=new Array;let g=0,p=0,b=!1;for(;g<c.getHeight();){const w=ht.findVertices(c,g,p);if(w[0]==null&&w[3]==null){if(!b)break;b=!1,p=0;for(const C of h)C[1]!=null&&(g=Math.trunc(Math.max(g,C[1].getY()))),C[3]!=null&&(g=Math.max(g,Math.trunc(C[3].getY())));g+=ht.ROW_STEP;continue}if(b=!0,h.push(w),!a)break;w[2]!=null?(p=Math.trunc(w[2].getX()),g=Math.trunc(w[2].getY())):(p=Math.trunc(w[4].getX()),g=Math.trunc(w[4].getY()))}return h}static findVertices(a,c,h){const g=a.getHeight(),p=a.getWidth(),b=new Array(8);return ht.copyToResult(b,ht.findRowsWithPattern(a,g,p,c,h,ht.START_PATTERN),ht.INDEXES_START_PATTERN),b[4]!=null&&(h=Math.trunc(b[4].getX()),c=Math.trunc(b[4].getY())),ht.copyToResult(b,ht.findRowsWithPattern(a,g,p,c,h,ht.STOP_PATTERN),ht.INDEXES_STOP_PATTERN),b}static copyToResult(a,c,h){for(let g=0;g<h.length;g++)a[h[g]]=c[g]}static findRowsWithPattern(a,c,h,g,p,b){const w=new Array(4);let C=!1;const I=new Int32Array(b.length);for(;g<c;g+=ht.ROW_STEP){let F=ht.findGuardPattern(a,p,g,h,!1,b,I);if(F!=null){for(;g>0;){const z=ht.findGuardPattern(a,p,--g,h,!1,b,I);if(z!=null)F=z;else{g++;break}}w[0]=new J(F[0],g),w[1]=new J(F[1],g),C=!0;break}}let D=g+1;if(C){let F=0,z=Int32Array.from([Math.trunc(w[0].getX()),Math.trunc(w[1].getX())]);for(;D<c;D++){const q=ht.findGuardPattern(a,z[0],D,h,!1,b,I);if(q!=null&&Math.abs(z[0]-q[0])<ht.MAX_PATTERN_DRIFT&&Math.abs(z[1]-q[1])<ht.MAX_PATTERN_DRIFT)z=q,F=0;else{if(F>ht.SKIPPED_ROW_COUNT_MAX)break;F++}}D-=F+1,w[2]=new J(z[0],D),w[3]=new J(z[1],D)}return D-g<ht.BARCODE_MIN_HEIGHT&&P.fill(w,null),w}static findGuardPattern(a,c,h,g,p,b,w){P.fillWithin(w,0,w.length,0);let C=c,I=0;for(;a.get(C,h)&&C>0&&I++<ht.MAX_PIXEL_DRIFT;)C--;let D=C,F=0,z=b.length;for(let q=p;D<g;D++)if(a.get(D,h)!==q)w[F]++;else{if(F===z-1){if(ht.patternMatchVariance(w,b,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE)return new Int32Array([C,D]);C+=w[0]+w[1],R.arraycopy(w,2,w,0,F-1),w[F-1]=0,w[F]=0,F--}else F++;w[F]=1,q=!q}return F===z-1&&ht.patternMatchVariance(w,b,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE?new Int32Array([C,D-1]):null}static patternMatchVariance(a,c,h){let g=a.length,p=0,b=0;for(let I=0;I<g;I++)p+=a[I],b+=c[I];if(p<b)return 1/0;let w=p/b;h*=w;let C=0;for(let I=0;I<g;I++){let D=a[I],F=c[I]*w,z=D>F?D-F:F-D;if(z>h)return 1/0;C+=z}return C/p}}ht.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ht.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ht.MAX_AVG_VARIANCE=.42,ht.MAX_INDIVIDUAL_VARIANCE=.8,ht.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ht.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ht.MAX_PIXEL_DRIFT=3,ht.MAX_PATTERN_DRIFT=5,ht.SKIPPED_ROW_COUNT_MAX=25,ht.ROW_STEP=5,ht.BARCODE_MIN_HEIGHT=10;class gn{constructor(a,c){if(c.length===0)throw new E;this.field=a;let h=c.length;if(h>1&&c[0]===0){let g=1;for(;g<h&&c[g]===0;)g++;g===h?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(h-g),R.arraycopy(c,g,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);if(a===1){let g=0;for(let p of this.coefficients)g=this.field.add(g,p);return g}let c=this.coefficients[0],h=this.coefficients.length;for(let g=1;g<h;g++)c=this.field.add(this.field.multiply(a,c),this.coefficients[g]);return c}add(a){if(!this.field.equals(a.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return a;if(a.isZero())return this;let c=this.coefficients,h=a.coefficients;if(c.length>h.length){let b=c;c=h,h=b}let g=new Int32Array(h.length),p=h.length-c.length;R.arraycopy(h,0,g,0,p);for(let b=p;b<h.length;b++)g[b]=this.field.add(c[b-p],h[b]);return new gn(this.field,g)}subtract(a){if(!this.field.equals(a.field))throw new E("ModulusPolys do not have same ModulusGF field");return a.isZero()?this:this.add(a.negative())}multiply(a){return a instanceof gn?this.multiplyOther(a):this.multiplyScalar(a)}multiplyOther(a){if(!this.field.equals(a.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||a.isZero())return new gn(this.field,new Int32Array([0]));let c=this.coefficients,h=c.length,g=a.coefficients,p=g.length,b=new Int32Array(h+p-1);for(let w=0;w<h;w++){let C=c[w];for(let I=0;I<p;I++)b[w+I]=this.field.add(b[w+I],this.field.multiply(C,g[I]))}return new gn(this.field,b)}negative(){let a=this.coefficients.length,c=new Int32Array(a);for(let h=0;h<a;h++)c[h]=this.field.subtract(0,this.coefficients[h]);return new gn(this.field,c)}multiplyScalar(a){if(a===0)return new gn(this.field,new Int32Array([0]));if(a===1)return this;let c=this.coefficients.length,h=new Int32Array(c);for(let g=0;g<c;g++)h[g]=this.field.multiply(this.coefficients[g],a);return new gn(this.field,h)}multiplyByMonomial(a,c){if(a<0)throw new E;if(c===0)return new gn(this.field,new Int32Array([0]));let h=this.coefficients.length,g=new Int32Array(h+a);for(let p=0;p<h;p++)g[p]=this.field.multiply(this.coefficients[p],c);return new gn(this.field,g)}toString(){let a=new Ee;for(let c=this.getDegree();c>=0;c--){let h=this.getCoefficient(c);h!==0&&(h<0?(a.append(" - "),h=-h):a.length()>0&&a.append(" + "),(c===0||h!==1)&&a.append(h),c!==0&&(c===1?a.append("x"):(a.append("x^"),a.append(c))))}return a.toString()}}class qc{add(a,c){return(a+c)%this.modulus}subtract(a,c){return(this.modulus+a-c)%this.modulus}exp(a){return this.expTable[a]}log(a){if(a===0)throw new E;return this.logTable[a]}inverse(a){if(a===0)throw new kn;return this.expTable[this.modulus-this.logTable[a]-1]}multiply(a,c){return a===0||c===0?0:this.expTable[(this.logTable[a]+this.logTable[c])%(this.modulus-1)]}getSize(){return this.modulus}equals(a){return a===this}}class Yr extends qc{constructor(a,c){super(),this.modulus=a,this.expTable=new Int32Array(a),this.logTable=new Int32Array(a);let h=1;for(let g=0;g<a;g++)this.expTable[g]=h,h=h*c%a;for(let g=0;g<a-1;g++)this.logTable[this.expTable[g]]=g;this.zero=new gn(this,new Int32Array([0])),this.one=new gn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,c){if(a<0)throw new E;if(c===0)return this.zero;let h=new Int32Array(a+1);return h[0]=c,new gn(this,h)}}Yr.PDF417_GF=new Yr(st.NUMBER_OF_CODEWORDS,3);class Zs{constructor(){this.field=Yr.PDF417_GF}decode(a,c,h){let g=new gn(this.field,a),p=new Int32Array(c),b=!1;for(let ee=c;ee>0;ee--){let ne=g.evaluateAt(this.field.exp(ee));p[c-ee]=ne,ne!==0&&(b=!0)}if(!b)return 0;let w=this.field.getOne();if(h!=null)for(const ee of h){let ne=this.field.exp(a.length-1-ee),ce=new gn(this.field,new Int32Array([this.field.subtract(0,ne),1]));w=w.multiply(ce)}let C=new gn(this.field,p),I=this.runEuclideanAlgorithm(this.field.buildMonomial(c,1),C,c),D=I[0],F=I[1],z=this.findErrorLocations(D),q=this.findErrorMagnitudes(F,D,z);for(let ee=0;ee<z.length;ee++){let ne=a.length-1-this.field.log(z[ee]);if(ne<0)throw N.getChecksumInstance();a[ne]=this.field.subtract(a[ne],q[ee])}return z.length}runEuclideanAlgorithm(a,c,h){if(a.getDegree()<c.getDegree()){let z=a;a=c,c=z}let g=a,p=c,b=this.field.getZero(),w=this.field.getOne();for(;p.getDegree()>=Math.round(h/2);){let z=g,q=b;if(g=p,b=w,g.isZero())throw N.getChecksumInstance();p=z;let ee=this.field.getZero(),ne=g.getCoefficient(g.getDegree()),ce=this.field.inverse(ne);for(;p.getDegree()>=g.getDegree()&&!p.isZero();){let pe=p.getDegree()-g.getDegree(),Be=this.field.multiply(p.getCoefficient(p.getDegree()),ce);ee=ee.add(this.field.buildMonomial(pe,Be)),p=p.subtract(g.multiplyByMonomial(pe,Be))}w=ee.multiply(b).subtract(q).negative()}let C=w.getCoefficient(0);if(C===0)throw N.getChecksumInstance();let I=this.field.inverse(C),D=w.multiply(I),F=p.multiply(I);return[D,F]}findErrorLocations(a){let c=a.getDegree(),h=new Int32Array(c),g=0;for(let p=1;p<this.field.getSize()&&g<c;p++)a.evaluateAt(p)===0&&(h[g]=this.field.inverse(p),g++);if(g!==c)throw N.getChecksumInstance();return h}findErrorMagnitudes(a,c,h){let g=c.getDegree(),p=new Int32Array(g);for(let I=1;I<=g;I++)p[g-I]=this.field.multiply(I,c.getCoefficient(I));let b=new gn(this.field,p),w=h.length,C=new Int32Array(w);for(let I=0;I<w;I++){let D=this.field.inverse(h[I]),F=this.field.subtract(0,a.evaluateAt(D)),z=this.field.inverse(b.evaluateAt(D));C[I]=this.field.multiply(F,z)}return C}}class $s{constructor(a,c,h,g,p){a instanceof $s?this.constructor_2(a):this.constructor_1(a,c,h,g,p)}constructor_1(a,c,h,g,p){const b=c==null||h==null,w=g==null||p==null;if(b&&w)throw new ae;b?(c=new J(0,g.getY()),h=new J(0,p.getY())):w&&(g=new J(a.getWidth()-1,c.getY()),p=new J(a.getWidth()-1,h.getY())),this.image=a,this.topLeft=c,this.bottomLeft=h,this.topRight=g,this.bottomRight=p,this.minX=Math.trunc(Math.min(c.getX(),h.getX())),this.maxX=Math.trunc(Math.max(g.getX(),p.getX())),this.minY=Math.trunc(Math.min(c.getY(),g.getY())),this.maxY=Math.trunc(Math.max(h.getY(),p.getY()))}constructor_2(a){this.image=a.image,this.topLeft=a.getTopLeft(),this.bottomLeft=a.getBottomLeft(),this.topRight=a.getTopRight(),this.bottomRight=a.getBottomRight(),this.minX=a.getMinX(),this.maxX=a.getMaxX(),this.minY=a.getMinY(),this.maxY=a.getMaxY()}static merge(a,c){return a==null?c:c==null?a:new $s(a.image,a.topLeft,a.bottomLeft,c.topRight,c.bottomRight)}addMissingRows(a,c,h){let g=this.topLeft,p=this.bottomLeft,b=this.topRight,w=this.bottomRight;if(a>0){let C=h?this.topLeft:this.topRight,I=Math.trunc(C.getY()-a);I<0&&(I=0);let D=new J(C.getX(),I);h?g=D:b=D}if(c>0){let C=h?this.bottomLeft:this.bottomRight,I=Math.trunc(C.getY()+c);I>=this.image.getHeight()&&(I=this.image.getHeight()-1);let D=new J(C.getX(),I);h?p=D:w=D}return new $s(this.image,g,p,b,w)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Sl{constructor(a,c,h,g){this.columnCount=a,this.errorCorrectionLevel=g,this.rowCountUpperPart=c,this.rowCountLowerPart=h,this.rowCount=c+h}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class La{constructor(){this.buffer=""}static form(a,c){let h=-1;function g(b,w,C,I,D,F){if(b==="%%")return"%";if(c[++h]===void 0)return;b=I?parseInt(I.substr(1)):void 0;let z=D?parseInt(D.substr(1)):void 0,q;switch(F){case"s":q=c[h];break;case"c":q=c[h][0];break;case"f":q=parseFloat(c[h]).toFixed(b);break;case"p":q=parseFloat(c[h]).toPrecision(b);break;case"e":q=parseFloat(c[h]).toExponential(b);break;case"x":q=parseInt(c[h]).toString(z||16);break;case"d":q=parseFloat(parseInt(c[h],z||10).toPrecision(b)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(z);let ee=parseInt(C),ne=C&&C[0]+""=="0"?"0":" ";for(;q.length<ee;)q=w!==void 0?q+ne:ne+q;return q}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(p,g)}format(a,...c){this.buffer+=La.form(a,c)}toString(){return this.buffer}}class br{constructor(a){this.boundingBox=new $s(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let c=this.getCodeword(a);if(c!=null)return c;for(let h=1;h<br.MAX_NEARBY_DISTANCE;h++){let g=this.imageRowToCodewordIndex(a)-h;if(g>=0&&(c=this.codewords[g],c!=null)||(g=this.imageRowToCodewordIndex(a)+h,g<this.codewords.length&&(c=this.codewords[g],c!=null)))return c}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,c){this.codewords[this.imageRowToCodewordIndex(a)]=c}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const a=new La;let c=0;for(const h of this.codewords){if(h==null){a.format("%3d:    |   %n",c++);continue}a.format("%3d: %3d|%3d%n",c++,h.getRowNumber(),h.getValue())}return a.toString()}}br.MAX_NEARBY_DISTANCE=5;class Ar{constructor(){this.values=new Map}setValue(a){a=Math.trunc(a);let c=this.values.get(a);c==null&&(c=0),c++,this.values.set(a,c)}getValue(){let a=-1,c=new Array;for(const[h,g]of this.values.entries()){const p={getKey:()=>h,getValue:()=>g};p.getValue()>a?(a=p.getValue(),c=[],c.push(p.getKey())):p.getValue()===a&&c.push(p.getKey())}return st.toIntArray(c)}getConfidence(a){return this.values.get(a)}}class Wc extends br{constructor(a,c){super(a),this._isLeft=c}setRowNumbers(){for(let a of this.getCodewords())a?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(a){let c=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(c,a);let h=this.getBoundingBox(),g=this._isLeft?h.getTopLeft():h.getTopRight(),p=this._isLeft?h.getBottomLeft():h.getBottomRight(),b=this.imageRowToCodewordIndex(Math.trunc(g.getY())),w=this.imageRowToCodewordIndex(Math.trunc(p.getY())),C=-1,I=1,D=0;for(let F=b;F<w;F++){if(c[F]==null)continue;let z=c[F],q=z.getRowNumber()-C;if(q===0)D++;else if(q===1)I=Math.max(I,D),D=1,C=z.getRowNumber();else if(q<0||z.getRowNumber()>=a.getRowCount()||q>F)c[F]=null;else{let ee;I>2?ee=(I-2)*q:ee=q;let ne=ee>=F;for(let ce=1;ce<=ee&&!ne;ce++)ne=c[F-ce]!=null;ne?c[F]=null:(C=z.getRowNumber(),D=1)}}}getRowHeights(){let a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);let c=new Int32Array(a.getRowCount());for(let h of this.getCodewords())if(h!=null){let g=h.getRowNumber();if(g>=c.length)continue;c[g]++}return c}adjustIncompleteIndicatorColumnRowNumbers(a){let c=this.getBoundingBox(),h=this._isLeft?c.getTopLeft():c.getTopRight(),g=this._isLeft?c.getBottomLeft():c.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(h.getY())),b=this.imageRowToCodewordIndex(Math.trunc(g.getY())),w=this.getCodewords(),C=-1;for(let I=p;I<b;I++){if(w[I]==null)continue;let D=w[I];D.setRowNumberAsRowIndicatorColumn();let F=D.getRowNumber()-C;F===0||(F===1?C=D.getRowNumber():D.getRowNumber()>=a.getRowCount()?w[I]=null:C=D.getRowNumber())}}getBarcodeMetadata(){let a=this.getCodewords(),c=new Ar,h=new Ar,g=new Ar,p=new Ar;for(let w of a){if(w==null)continue;w.setRowNumberAsRowIndicatorColumn();let C=w.getValue()%30,I=w.getRowNumber();switch(this._isLeft||(I+=2),I%3){case 0:h.setValue(C*3+1);break;case 1:p.setValue(C/3),g.setValue(C%3);break;case 2:c.setValue(C+1);break}}if(c.getValue().length===0||h.getValue().length===0||g.getValue().length===0||p.getValue().length===0||c.getValue()[0]<1||h.getValue()[0]+g.getValue()[0]<st.MIN_ROWS_IN_BARCODE||h.getValue()[0]+g.getValue()[0]>st.MAX_ROWS_IN_BARCODE)return null;let b=new Sl(c.getValue()[0],h.getValue()[0],g.getValue()[0],p.getValue()[0]);return this.removeIncorrectCodewords(a,b),b}removeIncorrectCodewords(a,c){for(let h=0;h<a.length;h++){let g=a[h];if(a[h]==null)continue;let p=g.getValue()%30,b=g.getRowNumber();if(b>c.getRowCount()){a[h]=null;continue}switch(this._isLeft||(b+=2),b%3){case 0:p*3+1!==c.getRowCountUpperPart()&&(a[h]=null);break;case 1:(Math.trunc(p/3)!==c.getErrorCorrectionLevel()||p%3!==c.getRowCountLowerPart())&&(a[h]=null);break;case 2:p+1!==c.getColumnCount()&&(a[h]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ti{constructor(a,c){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=a,this.barcodeColumnCount=a.getColumnCount(),this.boundingBox=c,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let a=st.MAX_CODEWORDS_IN_BARCODE,c;do c=a,a=this.adjustRowNumbersAndGetCount();while(a>0&&a<c);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(a){a?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let a=this.adjustRowNumbersByRow();if(a===0)return 0;for(let c=1;c<this.barcodeColumnCount+1;c++){let h=this.detectionResultColumns[c].getCodewords();for(let g=0;g<h.length;g++)h[g]!=null&&(h[g].hasValidRowNumber()||this.adjustRowNumbers(c,g,h))}return a}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let a=this.detectionResultColumns[0].getCodewords(),c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<a.length;h++)if(a[h]!=null&&c[h]!=null&&a[h].getRowNumber()===c[h].getRowNumber())for(let g=1;g<=this.barcodeColumnCount;g++){let p=this.detectionResultColumns[g].getCodewords()[h];p!=null&&(p.setRowNumber(a[h].getRowNumber()),p.hasValidRowNumber()||(this.detectionResultColumns[g].getCodewords()[h]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let a=0,c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<c.length;h++){if(c[h]==null)continue;let g=c[h].getRowNumber(),p=0;for(let b=this.barcodeColumnCount+1;b>0&&p<this.ADJUST_ROW_NUMBER_SKIP;b--){let w=this.detectionResultColumns[b].getCodewords()[h];w!=null&&(p=ti.adjustRowNumberIfValid(g,p,w),w.hasValidRowNumber()||a++)}}return a}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let a=0,c=this.detectionResultColumns[0].getCodewords();for(let h=0;h<c.length;h++){if(c[h]==null)continue;let g=c[h].getRowNumber(),p=0;for(let b=1;b<this.barcodeColumnCount+1&&p<this.ADJUST_ROW_NUMBER_SKIP;b++){let w=this.detectionResultColumns[b].getCodewords()[h];w!=null&&(p=ti.adjustRowNumberIfValid(g,p,w),w.hasValidRowNumber()||a++)}}return a}static adjustRowNumberIfValid(a,c,h){return h==null||h.hasValidRowNumber()||(h.isValidRowNumber(a)?(h.setRowNumber(a),c=0):++c),c}adjustRowNumbers(a,c,h){if(!this.detectionResultColumns[a-1])return;let g=h[c],p=this.detectionResultColumns[a-1].getCodewords(),b=p;this.detectionResultColumns[a+1]!=null&&(b=this.detectionResultColumns[a+1].getCodewords());let w=new Array(14);w[2]=p[c],w[3]=b[c],c>0&&(w[0]=h[c-1],w[4]=p[c-1],w[5]=b[c-1]),c>1&&(w[8]=h[c-2],w[10]=p[c-2],w[11]=b[c-2]),c<h.length-1&&(w[1]=h[c+1],w[6]=p[c+1],w[7]=b[c+1]),c<h.length-2&&(w[9]=h[c+2],w[12]=p[c+2],w[13]=b[c+2]);for(let C of w)if(ti.adjustRowNumber(g,C))return}static adjustRowNumber(a,c){return c==null?!1:c.hasValidRowNumber()&&c.getBucket()===a.getBucket()?(a.setRowNumber(c.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(a){this.boundingBox=a}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(a,c){this.detectionResultColumns[a]=c}getDetectionResultColumn(a){return this.detectionResultColumns[a]}toString(){let a=this.detectionResultColumns[0];a==null&&(a=this.detectionResultColumns[this.barcodeColumnCount+1]);let c=new La;for(let h=0;h<a.getCodewords().length;h++){c.format("CW %3d:",h);for(let g=0;g<this.barcodeColumnCount+2;g++){if(this.detectionResultColumns[g]==null){c.format("    |   ");continue}let p=this.detectionResultColumns[g].getCodewords()[h];if(p==null){c.format("    |   ");continue}c.format(" %3d|%3d",p.getRowNumber(),p.getValue())}c.format("%n")}return c.toString()}}class cs{constructor(a,c,h,g){this.rowNumber=cs.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(c),this.bucket=Math.trunc(h),this.value=Math.trunc(g)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==cs.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}cs.BARCODE_ROW_UNKNOWN=-1;class ci{static initialize(){for(let a=0;a<st.SYMBOL_TABLE.length;a++){let c=st.SYMBOL_TABLE[a],h=c&1;for(let g=0;g<st.BARS_IN_MODULE;g++){let p=0;for(;(c&1)===h;)p+=1,c>>=1;h=c&1,ci.RATIOS_TABLE[a]||(ci.RATIOS_TABLE[a]=new Array(st.BARS_IN_MODULE)),ci.RATIOS_TABLE[a][st.BARS_IN_MODULE-g-1]=Math.fround(p/st.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(a){let c=ci.getDecodedCodewordValue(ci.sampleBitCounts(a));return c!==-1?c:ci.getClosestDecodedValue(a)}static sampleBitCounts(a){let c=ft.sum(a),h=new Int32Array(st.BARS_IN_MODULE),g=0,p=0;for(let b=0;b<st.MODULES_IN_CODEWORD;b++){let w=c/(2*st.MODULES_IN_CODEWORD)+b*c/st.MODULES_IN_CODEWORD;p+a[g]<=w&&(p+=a[g],g++),h[g]++}return h}static getDecodedCodewordValue(a){let c=ci.getBitValue(a);return st.getCodeword(c)===-1?-1:c}static getBitValue(a){let c=0;for(let h=0;h<a.length;h++)for(let g=0;g<a[h];g++)c=c<<1|(h%2===0?1:0);return Math.trunc(c)}static getClosestDecodedValue(a){let c=ft.sum(a),h=new Array(st.BARS_IN_MODULE);if(c>1)for(let b=0;b<h.length;b++)h[b]=Math.fround(a[b]/c);let g=te.MAX_VALUE,p=-1;this.bSymbolTableReady||ci.initialize();for(let b=0;b<ci.RATIOS_TABLE.length;b++){let w=0,C=ci.RATIOS_TABLE[b];for(let I=0;I<st.BARS_IN_MODULE;I++){let D=Math.fround(C[I]-h[I]);if(w+=Math.fround(D*D),w>=g)break}w<g&&(g=w,p=st.SYMBOL_TABLE[b])}return p}}ci.bSymbolTableReady=!1,ci.RATIOS_TABLE=new Array(st.SYMBOL_TABLE.length).map(B=>new Array(st.BARS_IN_MODULE));class ka{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(a){this.segmentIndex=a}getFileId(){return this.fileId}setFileId(a){this.fileId=a}getOptionalData(){return this.optionalData}setOptionalData(a){this.optionalData=a}isLastSegment(){return this.lastSegment}setLastSegment(a){this.lastSegment=a}getSegmentCount(){return this.segmentCount}setSegmentCount(a){this.segmentCount=a}getSender(){return this.sender||null}setSender(a){this.sender=a}getAddressee(){return this.addressee||null}setAddressee(a){this.addressee=a}getFileName(){return this.fileName}setFileName(a){this.fileName=a}getFileSize(){return this.fileSize}setFileSize(a){this.fileSize=a}getChecksum(){return this.checksum}setChecksum(a){this.checksum=a}getTimestamp(){return this.timestamp}setTimestamp(a){this.timestamp=a}}class Uh{static parseLong(a,c=void 0){return parseInt(a,c)}}class Cl extends m{}Cl.kind="NullPointerException";class Kc{writeBytes(a){this.writeBytesOffset(a,0,a.length)}writeBytesOffset(a,c,h){if(a==null)throw new Cl;if(c<0||c>a.length||h<0||c+h>a.length||c+h<0)throw new L;if(h===0)return;for(let g=0;g<h;g++)this.write(a[c+g])}flush(){}close(){}}class Do extends m{}class _l extends Kc{constructor(a=32){if(super(),this.count=0,a<0)throw new E("Negative initial size: "+a);this.buf=new Uint8Array(a)}ensureCapacity(a){a-this.buf.length>0&&this.grow(a)}grow(a){let h=this.buf.length<<1;if(h-a<0&&(h=a),h<0){if(a<0)throw new Do;h=j.MAX_VALUE}this.buf=P.copyOfUint8Array(this.buf,h)}write(a){this.ensureCapacity(this.count+1),this.buf[this.count]=a,this.count+=1}writeBytesOffset(a,c,h){if(c<0||c>a.length||h<0||c+h-a.length>0)throw new L;this.ensureCapacity(this.count+h),R.arraycopy(a,c,this.buf,this.count,h),this.count+=h}writeTo(a){a.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return P.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(a){return a?typeof a=="string"?this.toString_string(a):this.toString_number(a):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(a){return new String(this.buf).toString()}toString_number(a){return new String(this.buf).toString()}close(){}}var Wt;(function(B){B[B.ALPHA=0]="ALPHA",B[B.LOWER=1]="LOWER",B[B.MIXED=2]="MIXED",B[B.PUNCT=3]="PUNCT",B[B.ALPHA_SHIFT=4]="ALPHA_SHIFT",B[B.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Wt||(Wt={}));function zh(){if(typeof window<"u")return window.BigInt||null;if(typeof $d<"u")return $d.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Tl;function wr(B){if(typeof Tl>"u"&&(Tl=zh()),Tl===null)throw new Error("BigInt is not supported!");return Tl(B)}function Qc(){let B=[];B[0]=wr(1);let a=wr(900);B[1]=a;for(let c=2;c<16;c++)B[c]=B[c-1]*a;return B}class me{static decode(a,c){let h=new Ee(""),g=Q.ISO8859_1;h.enableDecoding(g);let p=1,b=a[p++],w=new ka;for(;p<a[0];){switch(b){case me.TEXT_COMPACTION_MODE_LATCH:p=me.textCompaction(a,p,h);break;case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:p=me.byteCompaction(b,a,g,p,h);break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[p++]);break;case me.NUMERIC_COMPACTION_MODE_LATCH:p=me.numericCompaction(a,p,h);break;case me.ECI_CHARSET:Q.getCharacterSetECIByValue(a[p++]);break;case me.ECI_GENERAL_PURPOSE:p+=2;break;case me.ECI_USER_DEFINED:p++;break;case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:p=me.decodeMacroBlock(a,p,w);break;case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:throw new V;default:p--,p=me.textCompaction(a,p,h);break}if(p<a.length)b=a[p++];else throw V.getFormatInstance()}if(h.length()===0)throw V.getFormatInstance();let C=new Qe(null,h.toString(),null,c);return C.setOther(w),C}static decodeMacroBlock(a,c,h){if(c+me.NUMBER_OF_SEQUENCE_CODEWORDS>a[0])throw V.getFormatInstance();let g=new Int32Array(me.NUMBER_OF_SEQUENCE_CODEWORDS);for(let w=0;w<me.NUMBER_OF_SEQUENCE_CODEWORDS;w++,c++)g[w]=a[c];h.setSegmentIndex(j.parseInt(me.decodeBase900toBase10(g,me.NUMBER_OF_SEQUENCE_CODEWORDS)));let p=new Ee;c=me.textCompaction(a,c,p),h.setFileId(p.toString());let b=-1;for(a[c]===me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(b=c+1);c<a[0];)switch(a[c]){case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(c++,a[c]){case me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let w=new Ee;c=me.textCompaction(a,c+1,w),h.setFileName(w.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let C=new Ee;c=me.textCompaction(a,c+1,C),h.setSender(C.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let I=new Ee;c=me.textCompaction(a,c+1,I),h.setAddressee(I.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let D=new Ee;c=me.numericCompaction(a,c+1,D),h.setSegmentCount(j.parseInt(D.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let F=new Ee;c=me.numericCompaction(a,c+1,F),h.setTimestamp(Uh.parseLong(F.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let z=new Ee;c=me.numericCompaction(a,c+1,z),h.setChecksum(j.parseInt(z.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let q=new Ee;c=me.numericCompaction(a,c+1,q),h.setFileSize(Uh.parseLong(q.toString()));break;default:throw V.getFormatInstance()}break;case me.MACRO_PDF417_TERMINATOR:c++,h.setLastSegment(!0);break;default:throw V.getFormatInstance()}if(b!==-1){let w=c-b;h.isLastSegment()&&w--,h.setOptionalData(P.copyOfRange(a,b,b+w))}return c}static textCompaction(a,c,h){let g=new Int32Array((a[0]-c)*2),p=new Int32Array((a[0]-c)*2),b=0,w=!1;for(;c<a[0]&&!w;){let C=a[c++];if(C<me.TEXT_COMPACTION_MODE_LATCH)g[b]=C/30,g[b+1]=C%30,b+=2;else switch(C){case me.TEXT_COMPACTION_MODE_LATCH:g[b++]=me.TEXT_COMPACTION_MODE_LATCH;break;case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:c--,w=!0;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g[b]=me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,C=a[c++],p[b]=C,b++;break}}return me.decodeTextCompaction(g,p,b,h),c}static decodeTextCompaction(a,c,h,g){let p=Wt.ALPHA,b=Wt.ALPHA,w=0;for(;w<h;){let C=a[w],I="";switch(p){case Wt.ALPHA:if(C<26)I=String.fromCharCode(65+C);else switch(C){case 26:I=" ";break;case me.LL:p=Wt.LOWER;break;case me.ML:p=Wt.MIXED;break;case me.PS:b=p,p=Wt.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(c[w]);break;case me.TEXT_COMPACTION_MODE_LATCH:p=Wt.ALPHA;break}break;case Wt.LOWER:if(C<26)I=String.fromCharCode(97+C);else switch(C){case 26:I=" ";break;case me.AS:b=p,p=Wt.ALPHA_SHIFT;break;case me.ML:p=Wt.MIXED;break;case me.PS:b=p,p=Wt.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(c[w]);break;case me.TEXT_COMPACTION_MODE_LATCH:p=Wt.ALPHA;break}break;case Wt.MIXED:if(C<me.PL)I=me.MIXED_CHARS[C];else switch(C){case me.PL:p=Wt.PUNCT;break;case 26:I=" ";break;case me.LL:p=Wt.LOWER;break;case me.AL:p=Wt.ALPHA;break;case me.PS:b=p,p=Wt.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(c[w]);break;case me.TEXT_COMPACTION_MODE_LATCH:p=Wt.ALPHA;break}break;case Wt.PUNCT:if(C<me.PAL)I=me.PUNCT_CHARS[C];else switch(C){case me.PAL:p=Wt.ALPHA;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(c[w]);break;case me.TEXT_COMPACTION_MODE_LATCH:p=Wt.ALPHA;break}break;case Wt.ALPHA_SHIFT:if(p=b,C<26)I=String.fromCharCode(65+C);else switch(C){case 26:I=" ";break;case me.TEXT_COMPACTION_MODE_LATCH:p=Wt.ALPHA;break}break;case Wt.PUNCT_SHIFT:if(p=b,C<me.PAL)I=me.PUNCT_CHARS[C];else switch(C){case me.PAL:p=Wt.ALPHA;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(c[w]);break;case me.TEXT_COMPACTION_MODE_LATCH:p=Wt.ALPHA;break}break}I!==""&&g.append(I),w++}}static byteCompaction(a,c,h,g,p){let b=new _l,w=0,C=0,I=!1;switch(a){case me.BYTE_COMPACTION_MODE_LATCH:let D=new Int32Array(6),F=c[g++];for(;g<c[0]&&!I;)switch(D[w++]=F,C=900*C+F,F=c[g++],F){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:g--,I=!0;break;default:if(w%5===0&&w>0){for(let z=0;z<6;++z)b.write(Number(wr(C)>>wr(8*(5-z))));C=0,w=0}break}g===c[0]&&F<me.TEXT_COMPACTION_MODE_LATCH&&(D[w++]=F);for(let z=0;z<w;z++)b.write(D[z]);break;case me.BYTE_COMPACTION_MODE_LATCH_6:for(;g<c[0]&&!I;){let z=c[g++];if(z<me.TEXT_COMPACTION_MODE_LATCH)w++,C=900*C+z;else switch(z){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:g--,I=!0;break}if(w%5===0&&w>0){for(let q=0;q<6;++q)b.write(Number(wr(C)>>wr(8*(5-q))));C=0,w=0}}break}return p.append(we.decode(b.toByteArray(),h)),g}static numericCompaction(a,c,h){let g=0,p=!1,b=new Int32Array(me.MAX_NUMERIC_CODEWORDS);for(;c<a[0]&&!p;){let w=a[c++];if(c===a[0]&&(p=!0),w<me.TEXT_COMPACTION_MODE_LATCH)b[g]=w,g++;else switch(w){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:c--,p=!0;break}(g%me.MAX_NUMERIC_CODEWORDS===0||w===me.NUMERIC_COMPACTION_MODE_LATCH||p)&&g>0&&(h.append(me.decodeBase900toBase10(b,g)),g=0)}return c}static decodeBase900toBase10(a,c){let h=wr(0);for(let p=0;p<c;p++)h+=me.EXP900[c-p-1]*wr(a[p]);let g=h.toString();if(g.charAt(0)!=="1")throw new V;return g.substring(1)}}me.TEXT_COMPACTION_MODE_LATCH=900,me.BYTE_COMPACTION_MODE_LATCH=901,me.NUMERIC_COMPACTION_MODE_LATCH=902,me.BYTE_COMPACTION_MODE_LATCH_6=924,me.ECI_USER_DEFINED=925,me.ECI_GENERAL_PURPOSE=926,me.ECI_CHARSET=927,me.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,me.MACRO_PDF417_TERMINATOR=922,me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,me.MAX_NUMERIC_CODEWORDS=15,me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,me.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,me.PL=25,me.LL=27,me.AS=27,me.ML=28,me.AL=28,me.PS=29,me.PAL=29,me.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,me.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",me.EXP900=zh()?Qc():[],me.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Et{constructor(){}static decode(a,c,h,g,p,b,w){let C=new $s(a,c,h,g,p),I=null,D=null,F;for(let ee=!0;;ee=!1){if(c!=null&&(I=Et.getRowIndicatorColumn(a,C,c,!0,b,w)),g!=null&&(D=Et.getRowIndicatorColumn(a,C,g,!1,b,w)),F=Et.merge(I,D),F==null)throw ae.getNotFoundInstance();let ne=F.getBoundingBox();if(ee&&ne!=null&&(ne.getMinY()<C.getMinY()||ne.getMaxY()>C.getMaxY()))C=ne;else break}F.setBoundingBox(C);let z=F.getBarcodeColumnCount()+1;F.setDetectionResultColumn(0,I),F.setDetectionResultColumn(z,D);let q=I!=null;for(let ee=1;ee<=z;ee++){let ne=q?ee:z-ee;if(F.getDetectionResultColumn(ne)!==void 0)continue;let ce;ne===0||ne===z?ce=new Wc(C,ne===0):ce=new br(C),F.setDetectionResultColumn(ne,ce);let pe=-1,Be=pe;for(let Pe=C.getMinY();Pe<=C.getMaxY();Pe++){if(pe=Et.getStartColumn(F,ne,Pe,q),pe<0||pe>C.getMaxX()){if(Be===-1)continue;pe=Be}let De=Et.detectCodeword(a,C.getMinX(),C.getMaxX(),q,pe,Pe,b,w);De!=null&&(ce.setCodeword(Pe,De),Be=pe,b=Math.min(b,De.getWidth()),w=Math.max(w,De.getWidth()))}}return Et.createDecoderResult(F)}static merge(a,c){if(a==null&&c==null)return null;let h=Et.getBarcodeMetadata(a,c);if(h==null)return null;let g=$s.merge(Et.adjustBoundingBox(a),Et.adjustBoundingBox(c));return new ti(h,g)}static adjustBoundingBox(a){if(a==null)return null;let c=a.getRowHeights();if(c==null)return null;let h=Et.getMax(c),g=0;for(let w of c)if(g+=h-w,w>0)break;let p=a.getCodewords();for(let w=0;g>0&&p[w]==null;w++)g--;let b=0;for(let w=c.length-1;w>=0&&(b+=h-c[w],!(c[w]>0));w--);for(let w=p.length-1;b>0&&p[w]==null;w--)b--;return a.getBoundingBox().addMissingRows(g,b,a.isLeft())}static getMax(a){let c=-1;for(let h of a)c=Math.max(c,h);return c}static getBarcodeMetadata(a,c){let h;if(a==null||(h=a.getBarcodeMetadata())==null)return c==null?null:c.getBarcodeMetadata();let g;return c==null||(g=c.getBarcodeMetadata())==null?h:h.getColumnCount()!==g.getColumnCount()&&h.getErrorCorrectionLevel()!==g.getErrorCorrectionLevel()&&h.getRowCount()!==g.getRowCount()?null:h}static getRowIndicatorColumn(a,c,h,g,p,b){let w=new Wc(c,g);for(let C=0;C<2;C++){let I=C===0?1:-1,D=Math.trunc(Math.trunc(h.getX()));for(let F=Math.trunc(Math.trunc(h.getY()));F<=c.getMaxY()&&F>=c.getMinY();F+=I){let z=Et.detectCodeword(a,0,a.getWidth(),g,D,F,p,b);z!=null&&(w.setCodeword(F,z),g?D=z.getStartX():D=z.getEndX())}}return w}static adjustCodewordCount(a,c){let h=c[0][1],g=h.getValue(),p=a.getBarcodeColumnCount()*a.getBarcodeRowCount()-Et.getNumberOfECCodeWords(a.getBarcodeECLevel());if(g.length===0){if(p<1||p>st.MAX_CODEWORDS_IN_BARCODE)throw ae.getNotFoundInstance();h.setValue(p)}else g[0]!==p&&h.setValue(p)}static createDecoderResult(a){let c=Et.createBarcodeMatrix(a);Et.adjustCodewordCount(a,c);let h=new Array,g=new Int32Array(a.getBarcodeRowCount()*a.getBarcodeColumnCount()),p=[],b=new Array;for(let C=0;C<a.getBarcodeRowCount();C++)for(let I=0;I<a.getBarcodeColumnCount();I++){let D=c[C][I+1].getValue(),F=C*a.getBarcodeColumnCount()+I;D.length===0?h.push(F):D.length===1?g[F]=D[0]:(b.push(F),p.push(D))}let w=new Array(p.length);for(let C=0;C<w.length;C++)w[C]=p[C];return Et.createDecoderResultFromAmbiguousValues(a.getBarcodeECLevel(),g,st.toIntArray(h),st.toIntArray(b),w)}static createDecoderResultFromAmbiguousValues(a,c,h,g,p){let b=new Int32Array(g.length),w=100;for(;w-- >0;){for(let C=0;C<b.length;C++)c[g[C]]=p[C][b[C]];try{return Et.decodeCodewords(c,a,h)}catch(C){if(!(C instanceof N))throw C}if(b.length===0)throw N.getChecksumInstance();for(let C=0;C<b.length;C++)if(b[C]<p[C].length-1){b[C]++;break}else if(b[C]=0,C===b.length-1)throw N.getChecksumInstance()}throw N.getChecksumInstance()}static createBarcodeMatrix(a){let c=Array.from({length:a.getBarcodeRowCount()},()=>new Array(a.getBarcodeColumnCount()+2));for(let g=0;g<c.length;g++)for(let p=0;p<c[g].length;p++)c[g][p]=new Ar;let h=0;for(let g of a.getDetectionResultColumns()){if(g!=null){for(let p of g.getCodewords())if(p!=null){let b=p.getRowNumber();if(b>=0){if(b>=c.length)continue;c[b][h].setValue(p.getValue())}}}h++}return c}static isValidBarcodeColumn(a,c){return c>=0&&c<=a.getBarcodeColumnCount()+1}static getStartColumn(a,c,h,g){let p=g?1:-1,b=null;if(Et.isValidBarcodeColumn(a,c-p)&&(b=a.getDetectionResultColumn(c-p).getCodeword(h)),b!=null)return g?b.getEndX():b.getStartX();if(b=a.getDetectionResultColumn(c).getCodewordNearby(h),b!=null)return g?b.getStartX():b.getEndX();if(Et.isValidBarcodeColumn(a,c-p)&&(b=a.getDetectionResultColumn(c-p).getCodewordNearby(h)),b!=null)return g?b.getEndX():b.getStartX();let w=0;for(;Et.isValidBarcodeColumn(a,c-p);){c-=p;for(let C of a.getDetectionResultColumn(c).getCodewords())if(C!=null)return(g?C.getEndX():C.getStartX())+p*w*(C.getEndX()-C.getStartX());w++}return g?a.getBoundingBox().getMinX():a.getBoundingBox().getMaxX()}static detectCodeword(a,c,h,g,p,b,w,C){p=Et.adjustCodewordStartColumn(a,c,h,g,p,b);let I=Et.getModuleBitCount(a,c,h,g,p,b);if(I==null)return null;let D,F=ft.sum(I);if(g)D=p+F;else{for(let ee=0;ee<I.length/2;ee++){let ne=I[ee];I[ee]=I[I.length-1-ee],I[I.length-1-ee]=ne}D=p,p=D-F}if(!Et.checkCodewordSkew(F,w,C))return null;let z=ci.getDecodedValue(I),q=st.getCodeword(z);return q===-1?null:new cs(p,D,Et.getCodewordBucketNumber(z),q)}static getModuleBitCount(a,c,h,g,p,b){let w=p,C=new Int32Array(8),I=0,D=g?1:-1,F=g;for(;(g?w<h:w>=c)&&I<C.length;)a.get(w,b)===F?(C[I]++,w+=D):(I++,F=!F);return I===C.length||w===(g?h:c)&&I===C.length-1?C:null}static getNumberOfECCodeWords(a){return 2<<a}static adjustCodewordStartColumn(a,c,h,g,p,b){let w=p,C=g?-1:1;for(let I=0;I<2;I++){for(;(g?w>=c:w<h)&&g===a.get(w,b);){if(Math.abs(p-w)>Et.CODEWORD_SKEW_SIZE)return p;w+=C}C=-C,g=!g}return w}static checkCodewordSkew(a,c,h){return c-Et.CODEWORD_SKEW_SIZE<=a&&a<=h+Et.CODEWORD_SKEW_SIZE}static decodeCodewords(a,c,h){if(a.length===0)throw V.getFormatInstance();let g=1<<c+1,p=Et.correctErrors(a,h,g);Et.verifyCodewordCount(a,g);let b=me.decode(a,""+c);return b.setErrorsCorrected(p),b.setErasures(h.length),b}static correctErrors(a,c,h){if(c!=null&&c.length>h/2+Et.MAX_ERRORS||h<0||h>Et.MAX_EC_CODEWORDS)throw N.getChecksumInstance();return Et.errorCorrection.decode(a,h,c)}static verifyCodewordCount(a,c){if(a.length<4)throw V.getFormatInstance();let h=a[0];if(h>a.length)throw V.getFormatInstance();if(h===0)if(c<a.length)a[0]=a.length-c;else throw V.getFormatInstance()}static getBitCountForCodeword(a){let c=new Int32Array(8),h=0,g=c.length-1;for(;!((a&1)!==h&&(h=a&1,g--,g<0));)c[g]++,a>>=1;return c}static getCodewordBucketNumber(a){return a instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(a):this.getCodewordBucketNumber_number(a)}static getCodewordBucketNumber_number(a){return Et.getCodewordBucketNumber(Et.getBitCountForCodeword(a))}static getCodewordBucketNumber_Int32Array(a){return(a[0]-a[2]+a[4]-a[6]+9)%9}static toString(a){let c=new La;for(let h=0;h<a.length;h++){c.format("Row %2d: ",h);for(let g=0;g<a[h].length;g++){let p=a[h][g];p.getValue().length===0?c.format("        ",null):c.format("%4d(%2d)",p.getValue()[0],p.getConfidence(p.getValue()[0]))}c.format("%n")}return c.toString()}}Et.CODEWORD_SKEW_SIZE=2,Et.MAX_ERRORS=3,Et.MAX_EC_CODEWORDS=512,Et.errorCorrection=new Zs;class ui{decode(a,c=null){let h=ui.decode(a,c,!1);if(h==null||h.length===0||h[0]==null)throw ae.getNotFoundInstance();return h[0]}decodeMultiple(a,c=null){try{return ui.decode(a,c,!0)}catch(h){throw h instanceof V||h instanceof N?ae.getNotFoundInstance():h}}static decode(a,c,h){const g=new Array,p=ht.detectMultiple(a,c,h);for(const b of p.getPoints()){const w=Et.decode(p.getBits(),b[4],b[5],b[6],b[7],ui.getMinCodewordWidth(b),ui.getMaxCodewordWidth(b)),C=new Oe(w.getText(),w.getRawBytes(),void 0,b,Re.PDF_417);C.putMetadata(Ne.ERROR_CORRECTION_LEVEL,w.getECLevel());const I=w.getOther();I!=null&&C.putMetadata(Ne.PDF417_EXTRA_METADATA,I),g.push(C)}return g.map(b=>b)}static getMaxWidth(a,c){return a==null||c==null?0:Math.trunc(Math.abs(a.getX()-c.getX()))}static getMinWidth(a,c){return a==null||c==null?j.MAX_VALUE:Math.trunc(Math.abs(a.getX()-c.getX()))}static getMaxCodewordWidth(a){return Math.floor(Math.max(Math.max(ui.getMaxWidth(a[0],a[4]),ui.getMaxWidth(a[6],a[2])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN),Math.max(ui.getMaxWidth(a[1],a[5]),ui.getMaxWidth(a[7],a[3])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(a){return Math.floor(Math.min(Math.min(ui.getMinWidth(a[0],a[4]),ui.getMinWidth(a[6],a[2])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN),Math.min(ui.getMinWidth(a[1],a[5]),ui.getMinWidth(a[7],a[3])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN)))}reset(){}}class Il extends m{}Il.kind="ReaderException";class Hh{constructor(a,c){this.verbose=a===!0,c&&this.setHints(c)}decode(a,c){return c&&this.setHints(c),this.decodeInternal(a)}decodeWithState(a){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(a)}setHints(a){this.hints=a;const c=!n(a)&&a.get(Y.TRY_HARDER)===!0,h=n(a)?null:a.get(Y.POSSIBLE_FORMATS),g=new Array;if(!n(h)){const p=h.some(b=>b===Re.UPC_A||b===Re.UPC_E||b===Re.EAN_13||b===Re.EAN_8||b===Re.CODABAR||b===Re.CODE_39||b===Re.CODE_93||b===Re.CODE_128||b===Re.ITF||b===Re.RSS_14||b===Re.RSS_EXPANDED);p&&!c&&g.push(new os(a,this.verbose)),h.includes(Re.QR_CODE)&&g.push(new Qs),h.includes(Re.DATA_MATRIX)&&g.push(new Ks),h.includes(Re.AZTEC)&&g.push(new Mi),h.includes(Re.PDF_417)&&g.push(new ui),p&&c&&g.push(new os(a,this.verbose))}g.length===0&&(c||g.push(new os(a,this.verbose)),g.push(new Qs),g.push(new Ks),g.push(new Mi),g.push(new ui),c&&g.push(new os(a,this.verbose))),this.readers=g}reset(){if(this.readers!==null)for(const a of this.readers)a.reset()}decodeInternal(a){if(this.readers===null)throw new Il("No readers where selected, nothing can be read.");for(const c of this.readers)try{return c.decode(a,this.hints)}catch(h){if(h instanceof Il)continue}throw new ae("No MultiFormat Readers were able to detect the code.")}}class Vh extends Ce{constructor(a=null,c=500){const h=new Hh;h.setHints(a),super(h,c)}decodeBitmap(a){return this.reader.decodeWithState(a)}}class T0 extends Ce{constructor(a=500){super(new ui,a)}}class I0 extends Ce{constructor(a=500){super(new Qs,a)}}var Zc;(function(B){B[B.ERROR_CORRECTION=0]="ERROR_CORRECTION",B[B.CHARACTER_SET=1]="CHARACTER_SET",B[B.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",B[B.MIN_SIZE=3]="MIN_SIZE",B[B.MAX_SIZE=4]="MAX_SIZE",B[B.MARGIN=5]="MARGIN",B[B.PDF417_COMPACT=6]="PDF417_COMPACT",B[B.PDF417_COMPACTION=7]="PDF417_COMPACTION",B[B.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",B[B.AZTEC_LAYERS=9]="AZTEC_LAYERS",B[B.QR_VERSION=10]="QR_VERSION"})(Zc||(Zc={}));var qn=Zc;class Oo{constructor(a){this.field=a,this.cachedGenerators=[],this.cachedGenerators.push(new Ht(a,Int32Array.from([1])))}buildGenerator(a){const c=this.cachedGenerators;if(a>=c.length){let h=c[c.length-1];const g=this.field;for(let p=c.length;p<=a;p++){const b=h.multiply(new Ht(g,Int32Array.from([1,g.exp(p-1+g.getGeneratorBase())])));c.push(b),h=b}}return c[a]}encode(a,c){if(c===0)throw new E("No error correction bytes");const h=a.length-c;if(h<=0)throw new E("No data bytes provided");const g=this.buildGenerator(c),p=new Int32Array(h);R.arraycopy(a,0,p,0,h);let b=new Ht(this.field,p);b=b.multiplyByMonomial(c,1);const C=b.divide(g)[1].getCoefficients(),I=c-C.length;for(let D=0;D<I;D++)a[h+D]=0;R.arraycopy(C,0,a,h+I,C.length)}}class Nn{constructor(){}static applyMaskPenaltyRule1(a){return Nn.applyMaskPenaltyRule1Internal(a,!0)+Nn.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let c=0;const h=a.getArray(),g=a.getWidth(),p=a.getHeight();for(let b=0;b<p-1;b++){const w=h[b];for(let C=0;C<g-1;C++){const I=w[C];I===w[C+1]&&I===h[b+1][C]&&I===h[b+1][C+1]&&c++}}return Nn.N2*c}static applyMaskPenaltyRule3(a){let c=0;const h=a.getArray(),g=a.getWidth(),p=a.getHeight();for(let b=0;b<p;b++)for(let w=0;w<g;w++){const C=h[b];w+6<g&&C[w]===1&&C[w+1]===0&&C[w+2]===1&&C[w+3]===1&&C[w+4]===1&&C[w+5]===0&&C[w+6]===1&&(Nn.isWhiteHorizontal(C,w-4,w)||Nn.isWhiteHorizontal(C,w+7,w+11))&&c++,b+6<p&&h[b][w]===1&&h[b+1][w]===0&&h[b+2][w]===1&&h[b+3][w]===1&&h[b+4][w]===1&&h[b+5][w]===0&&h[b+6][w]===1&&(Nn.isWhiteVertical(h,w,b-4,b)||Nn.isWhiteVertical(h,w,b+7,b+11))&&c++}return c*Nn.N3}static isWhiteHorizontal(a,c,h){c=Math.max(c,0),h=Math.min(h,a.length);for(let g=c;g<h;g++)if(a[g]===1)return!1;return!0}static isWhiteVertical(a,c,h,g){h=Math.max(h,0),g=Math.min(g,a.length);for(let p=h;p<g;p++)if(a[p][c]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let c=0;const h=a.getArray(),g=a.getWidth(),p=a.getHeight();for(let C=0;C<p;C++){const I=h[C];for(let D=0;D<g;D++)I[D]===1&&c++}const b=a.getHeight()*a.getWidth();return Math.floor(Math.abs(c*2-b)*10/b)*Nn.N4}static getDataMaskBit(a,c,h){let g,p;switch(a){case 0:g=h+c&1;break;case 1:g=h&1;break;case 2:g=c%3;break;case 3:g=(h+c)%3;break;case 4:g=Math.floor(h/2)+Math.floor(c/3)&1;break;case 5:p=h*c,g=(p&1)+p%3;break;case 6:p=h*c,g=(p&1)+p%3&1;break;case 7:p=h*c,g=p%3+(h+c&1)&1;break;default:throw new E("Invalid mask pattern: "+a)}return g===0}static applyMaskPenaltyRule1Internal(a,c){let h=0;const g=c?a.getHeight():a.getWidth(),p=c?a.getWidth():a.getHeight(),b=a.getArray();for(let w=0;w<g;w++){let C=0,I=-1;for(let D=0;D<p;D++){const F=c?b[w][D]:b[D][w];F===I?C++:(C>=5&&(h+=Nn.N1+(C-5)),C=1,I=F)}C>=5&&(h+=Nn.N1+(C-5))}return h}}Nn.N1=3,Nn.N2=3,Nn.N3=40,Nn.N4=10;class Nl{constructor(a,c){this.width=a,this.height=c;const h=new Array(c);for(let g=0;g!==c;g++)h[g]=new Uint8Array(a);this.bytes=h}getHeight(){return this.height}getWidth(){return this.width}get(a,c){return this.bytes[c][a]}getArray(){return this.bytes}setNumber(a,c,h){this.bytes[c][a]=h}setBoolean(a,c,h){this.bytes[c][a]=h?1:0}clear(a){for(const c of this.bytes)P.fill(c,a)}equals(a){if(!(a instanceof Nl))return!1;const c=a;if(this.width!==c.width||this.height!==c.height)return!1;for(let h=0,g=this.height;h<g;++h){const p=this.bytes[h],b=c.bytes[h];for(let w=0,C=this.width;w<C;++w)if(p[w]!==b[w])return!1}return!0}toString(){const a=new Ee;for(let c=0,h=this.height;c<h;++c){const g=this.bytes[c];for(let p=0,b=this.width;p<b;++p)switch(g[p]){case 0:a.append(" 0");break;case 1:a.append(" 1");break;default:a.append("  ");break}a.append(`
`)}return a.toString()}}class Xr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const a=new Ee;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<Xr.NUM_MASK_PATTERNS}}Xr.NUM_MASK_PATTERNS=8;class en extends m{}en.kind="WriterException";class rt{constructor(){}static clearMatrix(a){a.clear(255)}static buildMatrix(a,c,h,g,p){rt.clearMatrix(p),rt.embedBasicPatterns(h,p),rt.embedTypeInfo(c,g,p),rt.maybeEmbedVersionInfo(h,p),rt.embedDataBits(a,g,p)}static embedBasicPatterns(a,c){rt.embedPositionDetectionPatternsAndSeparators(c),rt.embedDarkDotAtLeftBottomCorner(c),rt.maybeEmbedPositionAdjustmentPatterns(a,c),rt.embedTimingPatterns(c)}static embedTypeInfo(a,c,h){const g=new U;rt.makeTypeInfoBits(a,c,g);for(let p=0,b=g.getSize();p<b;++p){const w=g.get(g.getSize()-1-p),C=rt.TYPE_INFO_COORDINATES[p],I=C[0],D=C[1];if(h.setBoolean(I,D,w),p<8){const F=h.getWidth()-p-1;h.setBoolean(F,8,w)}else{const z=h.getHeight()-7+(p-8);h.setBoolean(8,z,w)}}}static maybeEmbedVersionInfo(a,c){if(a.getVersionNumber()<7)return;const h=new U;rt.makeVersionInfoBits(a,h);let g=17;for(let p=0;p<6;++p)for(let b=0;b<3;++b){const w=h.get(g);g--,c.setBoolean(p,c.getHeight()-11+b,w),c.setBoolean(c.getHeight()-11+b,p,w)}}static embedDataBits(a,c,h){let g=0,p=-1,b=h.getWidth()-1,w=h.getHeight()-1;for(;b>0;){for(b===6&&(b-=1);w>=0&&w<h.getHeight();){for(let C=0;C<2;++C){const I=b-C;if(!rt.isEmpty(h.get(I,w)))continue;let D;g<a.getSize()?(D=a.get(g),++g):D=!1,c!==255&&Nn.getDataMaskBit(c,I,w)&&(D=!D),h.setBoolean(I,w,D)}w+=p}p=-p,w+=p,b-=2}if(g!==a.getSize())throw new en("Not all bits consumed: "+g+"/"+a.getSize())}static findMSBSet(a){return 32-j.numberOfLeadingZeros(a)}static calculateBCHCode(a,c){if(c===0)throw new E("0 polynomial");const h=rt.findMSBSet(c);for(a<<=h-1;rt.findMSBSet(a)>=h;)a^=c<<rt.findMSBSet(a)-h;return a}static makeTypeInfoBits(a,c,h){if(!Xr.isValidMaskPattern(c))throw new en("Invalid mask pattern");const g=a.getBits()<<3|c;h.appendBits(g,5);const p=rt.calculateBCHCode(g,rt.TYPE_INFO_POLY);h.appendBits(p,10);const b=new U;if(b.appendBits(rt.TYPE_INFO_MASK_PATTERN,15),h.xor(b),h.getSize()!==15)throw new en("should not happen but we got: "+h.getSize())}static makeVersionInfoBits(a,c){c.appendBits(a.getVersionNumber(),6);const h=rt.calculateBCHCode(a.getVersionNumber(),rt.VERSION_INFO_POLY);if(c.appendBits(h,12),c.getSize()!==18)throw new en("should not happen but we got: "+c.getSize())}static isEmpty(a){return a===255}static embedTimingPatterns(a){for(let c=8;c<a.getWidth()-8;++c){const h=(c+1)%2;rt.isEmpty(a.get(c,6))&&a.setNumber(c,6,h),rt.isEmpty(a.get(6,c))&&a.setNumber(6,c,h)}}static embedDarkDotAtLeftBottomCorner(a){if(a.get(8,a.getHeight()-8)===0)throw new en;a.setNumber(8,a.getHeight()-8,1)}static embedHorizontalSeparationPattern(a,c,h){for(let g=0;g<8;++g){if(!rt.isEmpty(h.get(a+g,c)))throw new en;h.setNumber(a+g,c,0)}}static embedVerticalSeparationPattern(a,c,h){for(let g=0;g<7;++g){if(!rt.isEmpty(h.get(a,c+g)))throw new en;h.setNumber(a,c+g,0)}}static embedPositionAdjustmentPattern(a,c,h){for(let g=0;g<5;++g){const p=rt.POSITION_ADJUSTMENT_PATTERN[g];for(let b=0;b<5;++b)h.setNumber(a+b,c+g,p[b])}}static embedPositionDetectionPattern(a,c,h){for(let g=0;g<7;++g){const p=rt.POSITION_DETECTION_PATTERN[g];for(let b=0;b<7;++b)h.setNumber(a+b,c+g,p[b])}}static embedPositionDetectionPatternsAndSeparators(a){const c=rt.POSITION_DETECTION_PATTERN[0].length;rt.embedPositionDetectionPattern(0,0,a),rt.embedPositionDetectionPattern(a.getWidth()-c,0,a),rt.embedPositionDetectionPattern(0,a.getWidth()-c,a);const h=8;rt.embedHorizontalSeparationPattern(0,h-1,a),rt.embedHorizontalSeparationPattern(a.getWidth()-h,h-1,a),rt.embedHorizontalSeparationPattern(0,a.getWidth()-h,a);const g=7;rt.embedVerticalSeparationPattern(g,0,a),rt.embedVerticalSeparationPattern(a.getHeight()-g-1,0,a),rt.embedVerticalSeparationPattern(g,a.getHeight()-g,a)}static maybeEmbedPositionAdjustmentPatterns(a,c){if(a.getVersionNumber()<2)return;const h=a.getVersionNumber()-1,g=rt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[h];for(let p=0,b=g.length;p!==b;p++){const w=g[p];if(w>=0)for(let C=0;C!==b;C++){const I=g[C];I>=0&&rt.isEmpty(c.get(I,w))&&rt.embedPositionAdjustmentPattern(I-2,w-2,c)}}}}rt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),rt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),rt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),rt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),rt.VERSION_INFO_POLY=7973,rt.TYPE_INFO_POLY=1335,rt.TYPE_INFO_MASK_PATTERN=21522;class N0{constructor(a,c){this.dataBytes=a,this.errorCorrectionBytes=c}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class pn{constructor(){}static calculateMaskPenalty(a){return Nn.applyMaskPenaltyRule1(a)+Nn.applyMaskPenaltyRule2(a)+Nn.applyMaskPenaltyRule3(a)+Nn.applyMaskPenaltyRule4(a)}static encode(a,c,h=null){let g=pn.DEFAULT_BYTE_MODE_ENCODING;const p=h!==null&&h.get(qn.CHARACTER_SET)!==void 0;p&&(g=h.get(qn.CHARACTER_SET).toString());const b=this.chooseMode(a,g),w=new U;if(b===tt.BYTE&&(p||pn.DEFAULT_BYTE_MODE_ENCODING!==g)){const Pe=Q.getCharacterSetECIByName(g);Pe!==void 0&&this.appendECI(Pe,w)}this.appendModeInfo(b,w);const C=new U;this.appendBytes(a,b,C,g);let I;if(h!==null&&h.get(qn.QR_VERSION)!==void 0){const Pe=Number.parseInt(h.get(qn.QR_VERSION).toString(),10);I=$e.getVersionForNumber(Pe);const De=this.calculateBitsNeeded(b,w,C,I);if(!this.willFit(De,I,c))throw new en("Data too big for requested version")}else I=this.recommendVersion(c,b,w,C);const D=new U;D.appendBitArray(w);const F=b===tt.BYTE?C.getSizeInBytes():a.length;this.appendLengthInfo(F,I,b,D),D.appendBitArray(C);const z=I.getECBlocksForLevel(c),q=I.getTotalCodewords()-z.getTotalECCodewords();this.terminateBits(q,D);const ee=this.interleaveWithECBytes(D,I.getTotalCodewords(),q,z.getNumBlocks()),ne=new Xr;ne.setECLevel(c),ne.setMode(b),ne.setVersion(I);const ce=I.getDimensionForVersion(),pe=new Nl(ce,ce),Be=this.chooseMaskPattern(ee,c,I,pe);return ne.setMaskPattern(Be),rt.buildMatrix(ee,c,I,Be,pe),ne.setMatrix(pe),ne}static recommendVersion(a,c,h,g){const p=this.calculateBitsNeeded(c,h,g,$e.getVersionForNumber(1)),b=this.chooseVersion(p,a),w=this.calculateBitsNeeded(c,h,g,b);return this.chooseVersion(w,a)}static calculateBitsNeeded(a,c,h,g){return c.getSize()+a.getCharacterCountBits(g)+h.getSize()}static getAlphanumericCode(a){return a<pn.ALPHANUMERIC_TABLE.length?pn.ALPHANUMERIC_TABLE[a]:-1}static chooseMode(a,c=null){if(Q.SJIS.getName()===c&&this.isOnlyDoubleByteKanji(a))return tt.KANJI;let h=!1,g=!1;for(let p=0,b=a.length;p<b;++p){const w=a.charAt(p);if(pn.isDigit(w))h=!0;else if(this.getAlphanumericCode(w.charCodeAt(0))!==-1)g=!0;else return tt.BYTE}return g?tt.ALPHANUMERIC:h?tt.NUMERIC:tt.BYTE}static isOnlyDoubleByteKanji(a){let c;try{c=we.encode(a,Q.SJIS)}catch{return!1}const h=c.length;if(h%2!==0)return!1;for(let g=0;g<h;g+=2){const p=c[g]&255;if((p<129||p>159)&&(p<224||p>235))return!1}return!0}static chooseMaskPattern(a,c,h,g){let p=Number.MAX_SAFE_INTEGER,b=-1;for(let w=0;w<Xr.NUM_MASK_PATTERNS;w++){rt.buildMatrix(a,c,h,w,g);let C=this.calculateMaskPenalty(g);C<p&&(p=C,b=w)}return b}static chooseVersion(a,c){for(let h=1;h<=40;h++){const g=$e.getVersionForNumber(h);if(pn.willFit(a,g,c))return g}throw new en("Data too big")}static willFit(a,c,h){const g=c.getTotalCodewords(),b=c.getECBlocksForLevel(h).getTotalECCodewords(),w=g-b,C=(a+7)/8;return w>=C}static terminateBits(a,c){const h=a*8;if(c.getSize()>h)throw new en("data bits cannot fit in the QR Code"+c.getSize()+" > "+h);for(let b=0;b<4&&c.getSize()<h;++b)c.appendBit(!1);const g=c.getSize()&7;if(g>0)for(let b=g;b<8;b++)c.appendBit(!1);const p=a-c.getSizeInBytes();for(let b=0;b<p;++b)c.appendBits((b&1)===0?236:17,8);if(c.getSize()!==h)throw new en("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(a,c,h,g,p,b){if(g>=h)throw new en("Block ID too large");const w=a%h,C=h-w,I=Math.floor(a/h),D=I+1,F=Math.floor(c/h),z=F+1,q=I-F,ee=D-z;if(q!==ee)throw new en("EC bytes mismatch");if(h!==C+w)throw new en("RS blocks mismatch");if(a!==(F+q)*C+(z+ee)*w)throw new en("Total bytes mismatch");g<C?(p[0]=F,b[0]=q):(p[0]=z,b[0]=ee)}static interleaveWithECBytes(a,c,h,g){if(a.getSizeInBytes()!==h)throw new en("Number of bits and data bytes does not match");let p=0,b=0,w=0;const C=new Array;for(let D=0;D<g;++D){const F=new Int32Array(1),z=new Int32Array(1);pn.getNumDataBytesAndNumECBytesForBlockID(c,h,g,D,F,z);const q=F[0],ee=new Uint8Array(q);a.toBytes(8*p,ee,0,q);const ne=pn.generateECBytes(ee,z[0]);C.push(new N0(ee,ne)),b=Math.max(b,q),w=Math.max(w,ne.length),p+=F[0]}if(h!==p)throw new en("Data bytes does not match offset");const I=new U;for(let D=0;D<b;++D)for(const F of C){const z=F.getDataBytes();D<z.length&&I.appendBits(z[D],8)}for(let D=0;D<w;++D)for(const F of C){const z=F.getErrorCorrectionBytes();D<z.length&&I.appendBits(z[D],8)}if(c!==I.getSizeInBytes())throw new en("Interleaving error: "+c+" and "+I.getSizeInBytes()+" differ.");return I}static generateECBytes(a,c){const h=a.length,g=new Int32Array(h+c);for(let b=0;b<h;b++)g[b]=a[b]&255;new Oo(Ye.QR_CODE_FIELD_256).encode(g,c);const p=new Uint8Array(c);for(let b=0;b<c;b++)p[b]=g[h+b];return p}static appendModeInfo(a,c){c.appendBits(a.getBits(),4)}static appendLengthInfo(a,c,h,g){const p=h.getCharacterCountBits(c);if(a>=1<<p)throw new en(a+" is bigger than "+((1<<p)-1));g.appendBits(a,p)}static appendBytes(a,c,h,g){switch(c){case tt.NUMERIC:pn.appendNumericBytes(a,h);break;case tt.ALPHANUMERIC:pn.appendAlphanumericBytes(a,h);break;case tt.BYTE:pn.append8BitBytes(a,h,g);break;case tt.KANJI:pn.appendKanjiBytes(a,h);break;default:throw new en("Invalid mode: "+c)}}static getDigit(a){return a.charCodeAt(0)-48}static isDigit(a){const c=pn.getDigit(a);return c>=0&&c<=9}static appendNumericBytes(a,c){const h=a.length;let g=0;for(;g<h;){const p=pn.getDigit(a.charAt(g));if(g+2<h){const b=pn.getDigit(a.charAt(g+1)),w=pn.getDigit(a.charAt(g+2));c.appendBits(p*100+b*10+w,10),g+=3}else if(g+1<h){const b=pn.getDigit(a.charAt(g+1));c.appendBits(p*10+b,7),g+=2}else c.appendBits(p,4),g++}}static appendAlphanumericBytes(a,c){const h=a.length;let g=0;for(;g<h;){const p=pn.getAlphanumericCode(a.charCodeAt(g));if(p===-1)throw new en;if(g+1<h){const b=pn.getAlphanumericCode(a.charCodeAt(g+1));if(b===-1)throw new en;c.appendBits(p*45+b,11),g+=2}else c.appendBits(p,6),g++}}static append8BitBytes(a,c,h){let g;try{g=we.encode(a,h)}catch(p){throw new en(p)}for(let p=0,b=g.length;p!==b;p++){const w=g[p];c.appendBits(w,8)}}static appendKanjiBytes(a,c){let h;try{h=we.encode(a,Q.SJIS)}catch(p){throw new en(p)}const g=h.length;for(let p=0;p<g;p+=2){const b=h[p]&255,w=h[p+1]&255,C=b<<8&4294967295|w;let I=-1;if(C>=33088&&C<=40956?I=C-33088:C>=57408&&C<=60351&&(I=C-49472),I===-1)throw new en("Invalid byte sequence");const D=(I>>8)*192+(I&255);c.appendBits(D,13)}}static appendECI(a,c){c.appendBits(tt.ECI.getBits(),4),c.appendBits(a.getValue(),8)}}pn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),pn.DEFAULT_BYTE_MODE_ENCODING=Q.UTF8.getName();class qr{write(a,c,h,g=null){if(a.length===0)throw new E("Found empty contents");if(c<0||h<0)throw new E("Requested dimensions are too small: "+c+"x"+h);let p=Tt.L,b=qr.QUIET_ZONE_SIZE;g!==null&&(g.get(qn.ERROR_CORRECTION)!==void 0&&(p=Tt.fromString(g.get(qn.ERROR_CORRECTION).toString())),g.get(qn.MARGIN)!==void 0&&(b=Number.parseInt(g.get(qn.MARGIN).toString(),10)));const w=pn.encode(a,p,g);return this.renderResult(w,c,h,b)}writeToDom(a,c,h,g,p=null){typeof a=="string"&&(a=document.querySelector(a));const b=this.write(c,h,g,p);a&&a.appendChild(b)}renderResult(a,c,h,g){const p=a.getMatrix();if(p===null)throw new It;const b=p.getWidth(),w=p.getHeight(),C=b+g*2,I=w+g*2,D=Math.max(c,C),F=Math.max(h,I),z=Math.min(Math.floor(D/C),Math.floor(F/I)),q=Math.floor((D-b*z)/2),ee=Math.floor((F-w*z)/2),ne=this.createSVGElement(D,F);for(let ce=0,pe=ee;ce<w;ce++,pe+=z)for(let Be=0,Pe=q;Be<b;Be++,Pe+=z)if(p.get(Be,ce)===1){const De=this.createSvgRectElement(Pe,pe,z,z);ne.appendChild(De)}return ne}createSVGElement(a,c){const h=document.createElementNS(qr.SVG_NS,"svg");return h.setAttributeNS(null,"height",a.toString()),h.setAttributeNS(null,"width",c.toString()),h}createSvgRectElement(a,c,h,g){const p=document.createElementNS(qr.SVG_NS,"rect");return p.setAttributeNS(null,"x",a.toString()),p.setAttributeNS(null,"y",c.toString()),p.setAttributeNS(null,"height",h.toString()),p.setAttributeNS(null,"width",g.toString()),p.setAttributeNS(null,"fill","#000000"),p}}qr.QUIET_ZONE_SIZE=4,qr.SVG_NS="http://www.w3.org/2000/svg";class Pa{encode(a,c,h,g,p){if(a.length===0)throw new E("Found empty contents");if(c!==Re.QR_CODE)throw new E("Can only encode QR_CODE, but got "+c);if(h<0||g<0)throw new E(`Requested dimensions are too small: ${h}x${g}`);let b=Tt.L,w=Pa.QUIET_ZONE_SIZE;p!==null&&(p.get(qn.ERROR_CORRECTION)!==void 0&&(b=Tt.fromString(p.get(qn.ERROR_CORRECTION).toString())),p.get(qn.MARGIN)!==void 0&&(w=Number.parseInt(p.get(qn.MARGIN).toString(),10)));const C=pn.encode(a,b,p);return Pa.renderResult(C,h,g,w)}static renderResult(a,c,h,g){const p=a.getMatrix();if(p===null)throw new It;const b=p.getWidth(),w=p.getHeight(),C=b+g*2,I=w+g*2,D=Math.max(c,C),F=Math.max(h,I),z=Math.min(Math.floor(D/C),Math.floor(F/I)),q=Math.floor((D-b*z)/2),ee=Math.floor((F-w*z)/2),ne=new Se(D,F);for(let ce=0,pe=ee;ce<w;ce++,pe+=z)for(let Be=0,Pe=q;Be<b;Be++,Pe+=z)p.get(Be,ce)===1&&ne.setRegion(Pe,pe,z,z);return ne}}Pa.QUIET_ZONE_SIZE=4;class R0{encode(a,c,h,g,p){let b;switch(c){case Re.QR_CODE:b=new Pa;break;default:throw new E("No encoder available for format "+c)}return b.encode(a,c,h,g,p)}}class Ms extends Ie{constructor(a,c,h,g,p,b,w,C){if(super(b,w),this.yuvData=a,this.dataWidth=c,this.dataHeight=h,this.left=g,this.top=p,g+b>c||p+w>h)throw new E("Crop rectangle does not fit within image data.");C&&this.reverseHorizontal(b,w)}getRow(a,c){if(a<0||a>=this.getHeight())throw new E("Requested row is outside the image: "+a);const h=this.getWidth();(c==null||c.length<h)&&(c=new Uint8ClampedArray(h));const g=(a+this.top)*this.dataWidth+this.left;return R.arraycopy(this.yuvData,g,c,0,h),c}getMatrix(){const a=this.getWidth(),c=this.getHeight();if(a===this.dataWidth&&c===this.dataHeight)return this.yuvData;const h=a*c,g=new Uint8ClampedArray(h);let p=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return R.arraycopy(this.yuvData,p,g,0,h),g;for(let b=0;b<c;b++){const w=b*a;R.arraycopy(this.yuvData,p,g,w,a),p+=this.dataWidth}return g}isCropSupported(){return!0}crop(a,c,h,g){return new Ms(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+c,h,g,!1)}renderThumbnail(){const a=this.getWidth()/Ms.THUMBNAIL_SCALE_FACTOR,c=this.getHeight()/Ms.THUMBNAIL_SCALE_FACTOR,h=new Int32Array(a*c),g=this.yuvData;let p=this.top*this.dataWidth+this.left;for(let b=0;b<c;b++){const w=b*a;for(let C=0;C<a;C++){const I=g[p+C*Ms.THUMBNAIL_SCALE_FACTOR]&255;h[w+C]=4278190080|I*65793}p+=this.dataWidth*Ms.THUMBNAIL_SCALE_FACTOR}return h}getThumbnailWidth(){return this.getWidth()/Ms.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ms.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,c){const h=this.yuvData;for(let g=0,p=this.top*this.dataWidth+this.left;g<c;g++,p+=this.dataWidth){const b=p+a/2;for(let w=p,C=p+a-1;w<b;w++,C--){const I=h[w];h[w]=h[C],h[C]=I}}}invert(){return new Ue(this)}}Ms.THUMBNAIL_SCALE_FACTOR=2;class $c extends Ie{constructor(a,c,h,g,p,b,w){if(super(c,h),this.dataWidth=g,this.dataHeight=p,this.left=b,this.top=w,a.BYTES_PER_ELEMENT===4){const C=c*h,I=new Uint8ClampedArray(C);for(let D=0;D<C;D++){const F=a[D],z=F>>16&255,q=F>>7&510,ee=F&255;I[D]=(z+q+ee)/4&255}this.luminances=I}else this.luminances=a;if(g===void 0&&(this.dataWidth=c),p===void 0&&(this.dataHeight=h),b===void 0&&(this.left=0),w===void 0&&(this.top=0),this.left+c>this.dataWidth||this.top+h>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(a,c){if(a<0||a>=this.getHeight())throw new E("Requested row is outside the image: "+a);const h=this.getWidth();(c==null||c.length<h)&&(c=new Uint8ClampedArray(h));const g=(a+this.top)*this.dataWidth+this.left;return R.arraycopy(this.luminances,g,c,0,h),c}getMatrix(){const a=this.getWidth(),c=this.getHeight();if(a===this.dataWidth&&c===this.dataHeight)return this.luminances;const h=a*c,g=new Uint8ClampedArray(h);let p=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return R.arraycopy(this.luminances,p,g,0,h),g;for(let b=0;b<c;b++){const w=b*a;R.arraycopy(this.luminances,p,g,w,a),p+=this.dataWidth}return g}isCropSupported(){return!0}crop(a,c,h,g){return new $c(this.luminances,h,g,this.dataWidth,this.dataHeight,this.left+a,this.top+c)}invert(){return new Ue(this)}}class Gh extends Q{static forName(a){return this.getCharacterSetECIByName(a)}}class Lo{}Lo.ISO_8859_1=Q.ISO8859_1;class Ba{isCompact(){return this.compact}setCompact(a){this.compact=a}getSize(){return this.size}setSize(a){this.size=a}getLayers(){return this.layers}setLayers(a){this.layers=a}getCodeWords(){return this.codeWords}setCodeWords(a){this.codeWords=a}getMatrix(){return this.matrix}setMatrix(a){this.matrix=a}}class Yh{static singletonList(a){return[a]}static min(a,c){return a.sort(c)[0]}}class Xh{constructor(a){this.previous=a}getPrevious(){return this.previous}}class Wr extends Xh{constructor(a,c,h){super(a),this.value=c,this.bitCount=h}appendTo(a,c){a.appendBits(this.value,this.bitCount)}add(a,c){return new Wr(this,a,c)}addBinaryShift(a,c){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Wr(this,a,c)}toString(){let a=this.value&(1<<this.bitCount)-1;return a|=1<<this.bitCount,"<"+j.toBinaryString(a|1<<this.bitCount).substring(1)+">"}}class Rl extends Wr{constructor(a,c,h){super(a,0,0),this.binaryShiftStart=c,this.binaryShiftByteCount=h}appendTo(a,c){for(let h=0;h<this.binaryShiftByteCount;h++)(h===0||h===31&&this.binaryShiftByteCount<=62)&&(a.appendBits(31,5),this.binaryShiftByteCount>62?a.appendBits(this.binaryShiftByteCount-31,16):h===0?a.appendBits(Math.min(this.binaryShiftByteCount,31),5):a.appendBits(this.binaryShiftByteCount-31,5)),a.appendBits(c[this.binaryShiftStart+h],8)}addBinaryShift(a,c){return new Rl(this,a,c)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function qh(B,a,c){return new Rl(B,a,c)}function Fa(B,a,c){return new Wr(B,a,c)}const ja=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Er=0,Ml=1,Xi=2,Jc=3,us=4,ko=new Wr(null,0,0),Kr=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function M0(B){for(let a of B)P.fill(a,-1);return B[Er][us]=0,B[Ml][us]=0,B[Ml][Er]=28,B[Jc][us]=0,B[Xi][us]=0,B[Xi][Er]=15,B}const Po=M0(P.createInt32Array(6,6));class hs{constructor(a,c,h,g){this.token=a,this.mode=c,this.binaryShiftByteCount=h,this.bitCount=g}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(a,c){let h=this.bitCount,g=this.token;if(a!==this.mode){let b=Kr[this.mode][a];g=Fa(g,b&65535,b>>16),h+=b>>16}let p=a===Xi?4:5;return g=Fa(g,c,p),new hs(g,a,0,h+p)}shiftAndAppend(a,c){let h=this.token,g=this.mode===Xi?4:5;return h=Fa(h,Po[this.mode][a],g),h=Fa(h,c,5),new hs(h,this.mode,0,this.bitCount+g+5)}addBinaryShiftChar(a){let c=this.token,h=this.mode,g=this.bitCount;if(this.mode===us||this.mode===Xi){let w=Kr[h][Er];c=Fa(c,w&65535,w>>16),g+=w>>16,h=Er}let p=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,b=new hs(c,h,this.binaryShiftByteCount+1,g+p);return b.binaryShiftByteCount===2078&&(b=b.endBinaryShift(a+1)),b}endBinaryShift(a){if(this.binaryShiftByteCount===0)return this;let c=this.token;return c=qh(c,a-this.binaryShiftByteCount,this.binaryShiftByteCount),new hs(c,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(a){let c=this.bitCount+(Kr[this.mode][a.mode]>>16);return this.binaryShiftByteCount<a.binaryShiftByteCount?c+=hs.calculateBinaryShiftCost(a)-hs.calculateBinaryShiftCost(this):this.binaryShiftByteCount>a.binaryShiftByteCount&&a.binaryShiftByteCount>0&&(c+=10),c<=a.bitCount}toBitArray(a){let c=[];for(let g=this.endBinaryShift(a.length).token;g!==null;g=g.getPrevious())c.unshift(g);let h=new U;for(const g of c)g.appendTo(h,a);return h}toString(){return oe.format("%s bits=%d bytes=%d",ja[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(a){return a.binaryShiftByteCount>62?21:a.binaryShiftByteCount>31?20:a.binaryShiftByteCount>0?10:0}}hs.INITIAL_STATE=new hs(ko,Er,0,0);function Wh(B){const a=oe.getCharCode(" "),c=oe.getCharCode("."),h=oe.getCharCode(",");B[Er][a]=1;const g=oe.getCharCode("Z"),p=oe.getCharCode("A");for(let z=p;z<=g;z++)B[Er][z]=z-p+2;B[Ml][a]=1;const b=oe.getCharCode("z"),w=oe.getCharCode("a");for(let z=w;z<=b;z++)B[Ml][z]=z-w+2;B[Xi][a]=1;const C=oe.getCharCode("9"),I=oe.getCharCode("0");for(let z=I;z<=C;z++)B[Xi][z]=z-I+2;B[Xi][h]=12,B[Xi][c]=13;const D=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let z=0;z<D.length;z++)B[Jc][oe.getCharCode(D[z])]=z;const F=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let z=0;z<F.length;z++)oe.getCharCode(F[z])>0&&(B[us][oe.getCharCode(F[z])]=z);return B}const Bo=Wh(P.createInt32Array(5,256));class Qr{constructor(a){this.text=a}encode(){const a=oe.getCharCode(" "),c=oe.getCharCode(`
`);let h=Yh.singletonList(hs.INITIAL_STATE);for(let p=0;p<this.text.length;p++){let b,w=p+1<this.text.length?this.text[p+1]:0;switch(this.text[p]){case oe.getCharCode("\r"):b=w===c?2:0;break;case oe.getCharCode("."):b=w===a?3:0;break;case oe.getCharCode(","):b=w===a?4:0;break;case oe.getCharCode(":"):b=w===a?5:0;break;default:b=0}b>0?(h=Qr.updateStateListForPair(h,p,b),p++):h=this.updateStateListForChar(h,p)}return Yh.min(h,(p,b)=>p.getBitCount()-b.getBitCount()).toBitArray(this.text)}updateStateListForChar(a,c){const h=[];for(let g of a)this.updateStateForChar(g,c,h);return Qr.simplifyStates(h)}updateStateForChar(a,c,h){let g=this.text[c]&255,p=Bo[a.getMode()][g]>0,b=null;for(let w=0;w<=us;w++){let C=Bo[w][g];if(C>0){if(b==null&&(b=a.endBinaryShift(c)),!p||w===a.getMode()||w===Xi){const I=b.latchAndAppend(w,C);h.push(I)}if(!p&&Po[a.getMode()][w]>=0){const I=b.shiftAndAppend(w,C);h.push(I)}}}if(a.getBinaryShiftByteCount()>0||Bo[a.getMode()][g]===0){let w=a.addBinaryShiftChar(c);h.push(w)}}static updateStateListForPair(a,c,h){const g=[];for(let p of a)this.updateStateForPair(p,c,h,g);return this.simplifyStates(g)}static updateStateForPair(a,c,h,g){let p=a.endBinaryShift(c);if(g.push(p.latchAndAppend(us,h)),a.getMode()!==us&&g.push(p.shiftAndAppend(us,h)),h===3||h===4){let b=p.latchAndAppend(Xi,16-h).latchAndAppend(Xi,1);g.push(b)}if(a.getBinaryShiftByteCount()>0){let b=a.addBinaryShiftChar(c).addBinaryShiftChar(c+1);g.push(b)}}static simplifyStates(a){let c=[];for(const h of a){let g=!0;for(const p of c){if(p.isBetterThanOrEqualTo(h)){g=!1;break}h.isBetterThanOrEqualTo(p)&&(c=c.filter(b=>b!==p))}g&&c.push(h)}return c}}class Lt{constructor(){}static encodeBytes(a){return Lt.encode(a,Lt.DEFAULT_EC_PERCENT,Lt.DEFAULT_AZTEC_LAYERS)}static encode(a,c,h){let g=new Qr(a).encode(),p=j.truncDivision(g.getSize()*c,100)+11,b=g.getSize()+p,w,C,I,D,F;if(h!==Lt.DEFAULT_AZTEC_LAYERS){if(w=h<0,C=Math.abs(h),C>(w?Lt.MAX_NB_BITS_COMPACT:Lt.MAX_NB_BITS))throw new E(oe.format("Illegal value %s for layers",h));I=Lt.totalBitsInLayer(C,w),D=Lt.WORD_SIZE[C];let De=I-I%D;if(F=Lt.stuffBits(g,D),F.getSize()+p>De)throw new E("Data to large for user specified layer");if(w&&F.getSize()>D*64)throw new E("Data to large for user specified layer")}else{D=0,F=null;for(let De=0;;De++){if(De>Lt.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(w=De<=3,C=w?De+1:De,I=Lt.totalBitsInLayer(C,w),b>I)continue;(F==null||D!==Lt.WORD_SIZE[C])&&(D=Lt.WORD_SIZE[C],F=Lt.stuffBits(g,D));let Ct=I-I%D;if(!(w&&F.getSize()>D*64)&&F.getSize()+p<=Ct)break}}let z=Lt.generateCheckWords(F,I,D),q=F.getSize()/D,ee=Lt.generateModeMessage(w,C,q),ne=(w?11:14)+C*4,ce=new Int32Array(ne),pe;if(w){pe=ne;for(let De=0;De<ce.length;De++)ce[De]=De}else{pe=ne+1+2*j.truncDivision(j.truncDivision(ne,2)-1,15);let De=j.truncDivision(ne,2),Ct=j.truncDivision(pe,2);for(let dt=0;dt<De;dt++){let zn=dt+j.truncDivision(dt,15);ce[De-dt-1]=Ct-zn-1,ce[De+dt]=Ct+zn+1}}let Be=new Se(pe);for(let De=0,Ct=0;De<C;De++){let dt=(C-De)*4+(w?9:12);for(let zn=0;zn<dt;zn++){let qi=zn*2;for(let bi=0;bi<2;bi++)z.get(Ct+qi+bi)&&Be.set(ce[De*2+bi],ce[De*2+zn]),z.get(Ct+dt*2+qi+bi)&&Be.set(ce[De*2+zn],ce[ne-1-De*2-bi]),z.get(Ct+dt*4+qi+bi)&&Be.set(ce[ne-1-De*2-bi],ce[ne-1-De*2-zn]),z.get(Ct+dt*6+qi+bi)&&Be.set(ce[ne-1-De*2-zn],ce[De*2+bi])}Ct+=dt*8}if(Lt.drawModeMessage(Be,w,pe,ee),w)Lt.drawBullsEye(Be,j.truncDivision(pe,2),5);else{Lt.drawBullsEye(Be,j.truncDivision(pe,2),7);for(let De=0,Ct=0;De<j.truncDivision(ne,2)-1;De+=15,Ct+=16)for(let dt=j.truncDivision(pe,2)&1;dt<pe;dt+=2)Be.set(j.truncDivision(pe,2)-Ct,dt),Be.set(j.truncDivision(pe,2)+Ct,dt),Be.set(dt,j.truncDivision(pe,2)-Ct),Be.set(dt,j.truncDivision(pe,2)+Ct)}let Pe=new Ba;return Pe.setCompact(w),Pe.setSize(pe),Pe.setLayers(C),Pe.setCodeWords(q),Pe.setMatrix(Be),Pe}static drawBullsEye(a,c,h){for(let g=0;g<h;g+=2)for(let p=c-g;p<=c+g;p++)a.set(p,c-g),a.set(p,c+g),a.set(c-g,p),a.set(c+g,p);a.set(c-h,c-h),a.set(c-h+1,c-h),a.set(c-h,c-h+1),a.set(c+h,c-h),a.set(c+h,c-h+1),a.set(c+h,c+h-1)}static generateModeMessage(a,c,h){let g=new U;return a?(g.appendBits(c-1,2),g.appendBits(h-1,6),g=Lt.generateCheckWords(g,28,4)):(g.appendBits(c-1,5),g.appendBits(h-1,11),g=Lt.generateCheckWords(g,40,4)),g}static drawModeMessage(a,c,h,g){let p=j.truncDivision(h,2);if(c)for(let b=0;b<7;b++){let w=p-3+b;g.get(b)&&a.set(w,p-5),g.get(b+7)&&a.set(p+5,w),g.get(20-b)&&a.set(w,p+5),g.get(27-b)&&a.set(p-5,w)}else for(let b=0;b<10;b++){let w=p-5+b+j.truncDivision(b,5);g.get(b)&&a.set(w,p-7),g.get(b+10)&&a.set(p+7,w),g.get(29-b)&&a.set(w,p+7),g.get(39-b)&&a.set(p-7,w)}}static generateCheckWords(a,c,h){let g=a.getSize()/h,p=new Oo(Lt.getGF(h)),b=j.truncDivision(c,h),w=Lt.bitsToWords(a,h,b);p.encode(w,b-g);let C=c%h,I=new U;I.appendBits(0,C);for(const D of Array.from(w))I.appendBits(D,h);return I}static bitsToWords(a,c,h){let g=new Int32Array(h),p,b;for(p=0,b=a.getSize()/c;p<b;p++){let w=0;for(let C=0;C<c;C++)w|=a.get(p*c+C)?1<<c-C-1:0;g[p]=w}return g}static getGF(a){switch(a){case 4:return Ye.AZTEC_PARAM;case 6:return Ye.AZTEC_DATA_6;case 8:return Ye.AZTEC_DATA_8;case 10:return Ye.AZTEC_DATA_10;case 12:return Ye.AZTEC_DATA_12;default:throw new E("Unsupported word size "+a)}}static stuffBits(a,c){let h=new U,g=a.getSize(),p=(1<<c)-2;for(let b=0;b<g;b+=c){let w=0;for(let C=0;C<c;C++)(b+C>=g||a.get(b+C))&&(w|=1<<c-1-C);(w&p)===p?(h.appendBits(w&p,c),b--):(w&p)===0?(h.appendBits(w|1,c),b--):h.appendBits(w,c)}return h}static totalBitsInLayer(a,c){return((c?88:112)+16*a)*a}}Lt.DEFAULT_EC_PERCENT=33,Lt.DEFAULT_AZTEC_LAYERS=0,Lt.MAX_NB_BITS=32,Lt.MAX_NB_BITS_COMPACT=4,Lt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Fo{encode(a,c,h,g){return this.encodeWithHints(a,c,h,g,null)}encodeWithHints(a,c,h,g,p){let b=Lo.ISO_8859_1,w=Lt.DEFAULT_EC_PERCENT,C=Lt.DEFAULT_AZTEC_LAYERS;return p!=null&&(p.has(qn.CHARACTER_SET)&&(b=Gh.forName(p.get(qn.CHARACTER_SET).toString())),p.has(qn.ERROR_CORRECTION)&&(w=j.parseInt(p.get(qn.ERROR_CORRECTION).toString())),p.has(qn.AZTEC_LAYERS)&&(C=j.parseInt(p.get(qn.AZTEC_LAYERS).toString()))),Fo.encodeLayers(a,c,h,g,b,w,C)}static encodeLayers(a,c,h,g,p,b,w){if(c!==Re.AZTEC)throw new E("Can only encode AZTEC, but got "+c);let C=Lt.encode(oe.getBytes(a,p),b,w);return Fo.renderResult(C,h,g)}static renderResult(a,c,h){let g=a.getMatrix();if(g==null)throw new It;let p=g.getWidth(),b=g.getHeight(),w=Math.max(c,p),C=Math.max(h,b),I=Math.min(w/p,C/b),D=(w-p*I)/2,F=(C-b*I)/2,z=new Se(w,C);for(let q=0,ee=F;q<b;q++,ee+=I)for(let ne=0,ce=D;ne<p;ne++,ce+=I)g.get(ne,q)&&z.setRegion(ce,ee,I,I);return z}}t.AbstractExpandedDecoder=Yn,t.ArgumentException=A,t.ArithmeticException=kn,t.AztecCode=Ba,t.AztecCodeReader=Mi,t.AztecCodeWriter=Fo,t.AztecDecoder=Dt,t.AztecDetector=Vi,t.AztecDetectorResult=je,t.AztecEncoder=Lt,t.AztecHighLevelEncoder=Qr,t.AztecPoint=_t,t.BarcodeFormat=Re,t.Binarizer=M,t.BinaryBitmap=T,t.BitArray=U,t.BitMatrix=Se,t.BitSource=ls,t.BrowserAztecCodeReader=Hc,t.BrowserBarcodeReader=S0,t.BrowserCodeReader=Ce,t.BrowserDatamatrixCodeReader=vl,t.BrowserMultiFormatReader=Vh,t.BrowserPDF417Reader=T0,t.BrowserQRCodeReader=I0,t.BrowserQRCodeSvgWriter=qr,t.CharacterSetECI=Q,t.ChecksumException=N,t.Code128Reader=ke,t.Code39Reader=$t,t.DataMatrixDecodedBitStreamParser=Ws,t.DataMatrixReader=Ks,t.DecodeHintType=Y,t.DecoderResult=Qe,t.DefaultGridSampler=gt,t.DetectorResult=Ae,t.EAN13Reader=Ts,t.EncodeHintType=qn,t.Exception=m,t.FormatException=V,t.GenericGF=Ye,t.GenericGFPoly=Ht,t.GlobalHistogramBinarizer=K,t.GridSampler=Fe,t.GridSamplerInstance=ut,t.HTMLCanvasElementLuminanceSource=Je,t.HybridBinarizer=re,t.ITFReader=pt,t.IllegalArgumentException=E,t.IllegalStateException=It,t.InvertedLuminanceSource=Ue,t.LuminanceSource=Ie,t.MathUtils=ft,t.MultiFormatOneDReader=os,t.MultiFormatReader=Hh,t.MultiFormatWriter=R0,t.NotFoundException=ae,t.OneDReader=Zt,t.PDF417DecodedBitStreamParser=me,t.PDF417DecoderErrorCorrection=Zs,t.PDF417Reader=ui,t.PDF417ResultMetadata=ka,t.PerspectiveTransform=ze,t.PlanarYUVLuminanceSource=Ms,t.QRCodeByteMatrix=Nl,t.QRCodeDataMask=ki,t.QRCodeDecodedBitStreamParser=fn,t.QRCodeDecoderErrorCorrectionLevel=Tt,t.QRCodeDecoderFormatInformation=ei,t.QRCodeEncoder=pn,t.QRCodeEncoderQRCode=Xr,t.QRCodeMaskUtil=Nn,t.QRCodeMatrixUtil=rt,t.QRCodeMode=tt,t.QRCodeReader=Qs,t.QRCodeVersion=$e,t.QRCodeWriter=Pa,t.RGBLuminanceSource=$c,t.RSS14Reader=Jt,t.RSSExpandedReader=Me,t.ReaderException=Il,t.ReedSolomonDecoder=Qt,t.ReedSolomonEncoder=Oo,t.ReedSolomonException=bt,t.Result=Oe,t.ResultMetadataType=Ne,t.ResultPoint=J,t.StringUtils=oe,t.UnsupportedOperationException=be,t.VideoInputDevice=$,t.WhiteRectangleDetector=Le,t.WriterException=en,t.ZXingArrays=P,t.ZXingCharset=Gh,t.ZXingInteger=j,t.ZXingStandardCharsets=Lo,t.ZXingStringBuilder=Ee,t.ZXingStringEncoding=we,t.ZXingSystem=R,t.createAbstractExpandedDecoder=Ia,Object.defineProperty(t,"__esModule",{value:!0})}))})(Gu,Gu.exports)),Gu.exports}var _n=L4();const k4=zp(_n),P4=i_({__proto__:null,default:k4},[_n]);var kA=(function(){function i(e,t,n){if(this.formatMap=new Map([[qe.QR_CODE,_n.BarcodeFormat.QR_CODE],[qe.AZTEC,_n.BarcodeFormat.AZTEC],[qe.CODABAR,_n.BarcodeFormat.CODABAR],[qe.CODE_39,_n.BarcodeFormat.CODE_39],[qe.CODE_93,_n.BarcodeFormat.CODE_93],[qe.CODE_128,_n.BarcodeFormat.CODE_128],[qe.DATA_MATRIX,_n.BarcodeFormat.DATA_MATRIX],[qe.MAXICODE,_n.BarcodeFormat.MAXICODE],[qe.ITF,_n.BarcodeFormat.ITF],[qe.EAN_13,_n.BarcodeFormat.EAN_13],[qe.EAN_8,_n.BarcodeFormat.EAN_8],[qe.PDF_417,_n.BarcodeFormat.PDF_417],[qe.RSS_14,_n.BarcodeFormat.RSS_14],[qe.RSS_EXPANDED,_n.BarcodeFormat.RSS_EXPANDED],[qe.UPC_A,_n.BarcodeFormat.UPC_A],[qe.UPC_E,_n.BarcodeFormat.UPC_E],[qe.UPC_EAN_EXTENSION,_n.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!P4)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var r=this.createZXingFormats(e),l=new Map;l.set(_n.DecodeHintType.POSSIBLE_FORMATS,r),l.set(_n.DecodeHintType.TRY_HARDER,!1),this.hints=l}return i.prototype.decodeAsync=function(e){var t=this;return new Promise(function(n,r){try{n(t.decode(e))}catch(l){r(l)}})},i.prototype.decode=function(e){var t=new _n.MultiFormatReader(this.verbose,this.hints),n=new _n.HTMLCanvasElementLuminanceSource(e),r=new _n.BinaryBitmap(new _n.HybridBinarizer(n)),l=t.decode(r);return{text:l.text,format:Bv.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createZXingFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var l=r[n];this.formatMap.has(l)?t.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return t},i.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},i})(),B4=function(i,e,t,n){function r(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(A){try{m(n.next(A))}catch(E){u(E)}}function y(A){try{m(n.throw(A))}catch(E){u(E)}}function m(A){A.done?l(A.value):r(A.value).then(f,y)}m((n=n.apply(i,e||[])).next())})},F4=function(i,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,r,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(m){return function(A){return y([m,A])}}function y(m){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(t=0)),t;)try{if(n=1,r&&(l=m[0]&2?r.return:m[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,m[1])).done)return l;switch(r=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,r=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){t.label=m[1];break}if(m[0]===6&&t.label<l[1]){t.label=l[1],l=m;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(m);break}l[2]&&t.ops.pop(),t.trys.pop();continue}m=e.call(i,t)}catch(A){m=[6,A],r=0}finally{n=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},PA=(function(){function i(e,t,n){if(this.formatMap=new Map([[qe.QR_CODE,"qr_code"],[qe.AZTEC,"aztec"],[qe.CODABAR,"codabar"],[qe.CODE_39,"code_39"],[qe.CODE_93,"code_93"],[qe.CODE_128,"code_128"],[qe.DATA_MATRIX,"data_matrix"],[qe.ITF,"itf"],[qe.EAN_13,"ean_13"],[qe.EAN_8,"ean_8"],[qe.PDF_417,"pdf417"],[qe.UPC_A,"upc_a"],[qe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!i.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=n;var r=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(r),!this.detector)throw"BarcodeDetector detector not supported"}return i.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},i.prototype.decodeAsync=function(e){return B4(this,void 0,void 0,function(){var t,n;return F4(this,function(r){switch(r.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=r.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(t),[2,{text:n.rawValue,format:Bv.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},i.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,r=0,l=e;r<l.length;r++){var u=l[r],f=u.boundingBox.width*u.boundingBox.height;f>n&&(n=f,t=u)}if(!t)throw"No largest barcode found";return t},i.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var l=r[n];this.formatMap.has(l)?t.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},i.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},i})(),BA=function(i,e,t,n){function r(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(A){try{m(n.next(A))}catch(E){u(E)}}function y(A){try{m(n.throw(A))}catch(E){u(E)}}function m(A){A.done?l(A.value):r(A.value).then(f,y)}m((n=n.apply(i,e||[])).next())})},FA=function(i,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,r,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(m){return function(A){return y([m,A])}}function y(m){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(t=0)),t;)try{if(n=1,r&&(l=m[0]&2?r.return:m[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,m[1])).done)return l;switch(r=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,r=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){t.label=m[1];break}if(m[0]===6&&t.label<l[1]){t.label=l[1],l=m;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(m);break}l[2]&&t.ops.pop(),t.trys.pop();continue}m=e.call(i,t)}catch(A){m=[6,A],r=0}finally{n=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},j4=(function(){function i(e,t,n,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&PA.isSupported()?(this.primaryDecoder=new PA(e,n,r),this.secondaryDecoder=new kA(e,n,r)):this.primaryDecoder=new kA(e,n,r)}return i.prototype.decodeAsync=function(e){return BA(this,void 0,void 0,function(){var t;return FA(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},i.prototype.decodeRobustlyAsync=function(e){return BA(this,void 0,void 0,function(){var t,n;return FA(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,r.sent()];case 3:if(n=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},i.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},i.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},i.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++){var r=n[t];e+=r}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},i})(),xm=(function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Gf=function(i,e,t,n){function r(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(A){try{m(n.next(A))}catch(E){u(E)}}function y(A){try{m(n.throw(A))}catch(E){u(E)}}function m(A){A.done?l(A.value):r(A.value).then(f,y)}m((n=n.apply(i,e||[])).next())})},Yf=function(i,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,r,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(m){return function(A){return y([m,A])}}function y(m){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(t=0)),t;)try{if(n=1,r&&(l=m[0]&2?r.return:m[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,m[1])).done)return l;switch(r=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,r=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){t.label=m[1];break}if(m[0]===6&&t.label<l[1]){t.label=l[1],l=m;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(m);break}l[2]&&t.ops.pop(),t.trys.pop();continue}m=e.call(i,t)}catch(A){m=[6,A],r=0}finally{n=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},zv=(function(){function i(e,t){this.name=e,this.track=t}return i.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},i.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},i.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},i})(),U4=(function(i){xm(e,i);function e(t,n){return i.call(this,t,n)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var n={};n[this.name]=t;var r={advanced:[n]};return this.track.applyConstraints(r)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),n=t[this.name];return{min:n.min,max:n.max,step:n.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(zv),z4=(function(i){xm(e,i);function e(t){return i.call(this,"zoom",t)||this}return e})(U4),H4=(function(i){xm(e,i);function e(t){return i.call(this,"torch",t)||this}return e})(zv),V4=(function(){function i(e){this.track=e}return i.prototype.zoomFeature=function(){return new z4(this.track)},i.prototype.torchFeature=function(){return new H4(this.track)},i})(),G4=(function(){function i(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return i.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},i.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=e.surface.clientWidth,r=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,r),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},i.create=function(e,t,n,r){return Gf(this,void 0,void 0,function(){var l,u;return Yf(this,function(f){switch(f.label){case 0:return l=new i(e,t,r),n.aspectRatio?(u={aspectRatio:n.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(u)]):[3,2];case 1:f.sent(),f.label=2;case 2:return l.setupSurface(),[2,l]}})})},i.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},i.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},i.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},i.prototype.resume=function(e){this.failIfClosed();var t=this,n=function(){setTimeout(e,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},i.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},i.prototype.getSurface=function(){return this.failIfClosed(),this.surface},i.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},i.prototype.applyVideoConstraints=function(e){return Gf(this,void 0,void 0,function(){return Yf(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},i.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,n){var r=e.mediaStream.getVideoTracks(),l=r.length,u=0;e.mediaStream.getVideoTracks().forEach(function(f){e.mediaStream.removeTrack(f),f.stop(),++u,u>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},i.prototype.getCapabilities=function(){return new V4(this.getFirstTrackOrFail())},i})(),Y4=(function(){function i(e){this.mediaStream=e}return i.prototype.render=function(e,t,n){return Gf(this,void 0,void 0,function(){return Yf(this,function(r){return[2,G4.create(e,this.mediaStream,t,n)]})})},i.create=function(e){return Gf(this,void 0,void 0,function(){var t,n;return Yf(this,function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=r.sent(),[2,new i(n)]}})})},i})(),jA=function(i,e,t,n){function r(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(A){try{m(n.next(A))}catch(E){u(E)}}function y(A){try{m(n.throw(A))}catch(E){u(E)}}function m(A){A.done?l(A.value):r(A.value).then(f,y)}m((n=n.apply(i,e||[])).next())})},UA=function(i,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,r,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(m){return function(A){return y([m,A])}}function y(m){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(t=0)),t;)try{if(n=1,r&&(l=m[0]&2?r.return:m[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,m[1])).done)return l;switch(r=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,r=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){t.label=m[1];break}if(m[0]===6&&t.label<l[1]){t.label=l[1],l=m;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(m);break}l[2]&&t.ops.pop(),t.trys.pop();continue}m=e.call(i,t)}catch(A){m=[6,A],r=0}finally{n=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},X4=(function(){function i(){}return i.failIfNotSupported=function(){return jA(this,void 0,void 0,function(){return UA(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new i]})})},i.prototype.create=function(e){return jA(this,void 0,void 0,function(){return UA(this,function(t){return[2,Y4.create(e)]})})},i})(),q4=function(i,e,t,n){function r(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(A){try{m(n.next(A))}catch(E){u(E)}}function y(A){try{m(n.throw(A))}catch(E){u(E)}}function m(A){A.done?l(A.value):r(A.value).then(f,y)}m((n=n.apply(i,e||[])).next())})},W4=function(i,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,r,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(m){return function(A){return y([m,A])}}function y(m){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(t=0)),t;)try{if(n=1,r&&(l=m[0]&2?r.return:m[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,m[1])).done)return l;switch(r=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,r=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){t.label=m[1];break}if(m[0]===6&&t.label<l[1]){t.label=l[1],l=m;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(m);break}l[2]&&t.ops.pop(),t.trys.pop();continue}m=e.call(i,t)}catch(A){m=[6,A],r=0}finally{n=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},K4=(function(){function i(){}return i.retrieve=function(){if(navigator.mediaDevices)return i.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?i.getCamerasFromMediaStreamTrack():i.rejectWithError()},i.rejectWithError=function(){var e=hc.unableToQuerySupportedDevices();return i.isHttpsOrLocalhost()||(e=hc.insecureContextCameraQueryError()),Promise.reject(e)},i.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},i.getCamerasFromMediaDevices=function(){return q4(this,void 0,void 0,function(){var e,t,n,r,l,u,f;return W4(this,function(y){switch(y.label){case 0:return e=function(m){for(var A=m.getVideoTracks(),E=0,T=A;E<T.length;E++){var N=T[E];N.enabled=!1,N.stop(),m.removeTrack(N)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=y.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=y.sent(),r=[],l=0,u=n;l<u.length;l++)f=u[l],f.kind==="videoinput"&&r.push({id:f.deviceId,label:f.label});return e(t),[2,r]}})})},i.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var n=function(l){for(var u=[],f=0,y=l;f<y.length;f++){var m=y[f];m.kind==="video"&&u.push({id:m.id,label:m.label})}e(u)},r=MediaStreamTrack;r.getSources(n)})},i})(),Gn;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.NOT_STARTED=1]="NOT_STARTED",i[i.SCANNING=2]="SCANNING",i[i.PAUSED=3]="PAUSED"})(Gn||(Gn={}));var Q4=(function(){function i(){this.state=Gn.NOT_STARTED,this.onGoingTransactionNewState=Gn.UNKNOWN}return i.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},i.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},i.prototype.execute=function(){if(this.onGoingTransactionNewState===Gn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Gn.UNKNOWN,this.directTransition(e)},i.prototype.cancel=function(){if(this.onGoingTransactionNewState===Gn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Gn.UNKNOWN},i.prototype.getState=function(){return this.state},i.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Gn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},i.prototype.validateTransition=function(e){switch(this.state){case Gn.UNKNOWN:throw"Transition from unknown is not allowed";case Gn.NOT_STARTED:this.failIfNewStateIs(e,[Gn.PAUSED]);break;case Gn.SCANNING:break;case Gn.PAUSED:break}},i.prototype.failIfNewStateIs=function(e,t){for(var n=0,r=t;n<r.length;n++){var l=r[n];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},i})(),Z4=(function(){function i(e){this.stateManager=e}return i.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},i.prototype.directTransition=function(e){this.stateManager.directTransition(e)},i.prototype.getState=function(){return this.stateManager.getState()},i.prototype.canScanFile=function(){return this.stateManager.getState()===Gn.NOT_STARTED},i.prototype.isScanning=function(){return this.stateManager.getState()!==Gn.NOT_STARTED},i.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Gn.SCANNING},i.prototype.isPaused=function(){return this.stateManager.getState()===Gn.PAUSED},i})(),$4=(function(){function i(){}return i.create=function(){return new Z4(new Q4)},i})(),J4=(function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),bs=(function(i){J4(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(sr),e8=(function(){function i(e,t){this.logger=t,this.fps=bs.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=bs.DEFAULT_DISABLE_FLIP}return i.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Uv.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},i.prototype.isShadedBoxEnabled=function(){return!Or(this.qrbox)},i.create=function(e,t){return new i(e,t)},i})(),zA=(function(){function i(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var n;typeof t=="boolean"?this.verbose=t===!0:t&&(n=t,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new jv(this.verbose),this.qrcode=new j4(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=$4.create()}return i.prototype.start=function(e,t,n,r){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var u;r?u=r:u=this.verbose?this.logger.log:function(){};var f=e8.create(t,this.logger);this.clearElement();var y=!1;f.videoConstraints&&(f.isMediaStreamConstraintsValid()?y=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=y,A=document.getElementById(this.elementId);A.clientWidth?A.clientWidth:bs.DEFAULT_WIDTH,A.style.position="relative",this.shouldScan=!0,this.element=A;var E=this,T=this.stateManagerProxy.startTransition(Gn.SCANNING);return new Promise(function(N,M){var R=m?f.videoConstraints:E.createVideoConstraints(e);if(!R){T.cancel(),M("videoConstraints should be defined");return}var L={};(!m||f.aspectRatio)&&(L.aspectRatio=f.aspectRatio);var k={onRenderSurfaceReady:function(P,j){E.setupUi(P,j,f),E.isScanning=!0,E.foreverScan(f,n,u)}};X4.failIfNotSupported().then(function(P){P.create(R).then(function(j){return j.render(l.element,L,k).then(function(U){E.renderedCamera=U,T.execute(),N(null)}).catch(function(U){T.cancel(),M(U)})}).catch(function(j){T.cancel(),M(hc.errorGettingUserMedia(j))})}).catch(function(P){T.cancel(),M(hc.cameraStreamingNotSupported())})})},i.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Gn.PAUSED),this.showPausedState(),(Or(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},i.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(Gn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},i.prototype.getState=function(){return this.stateManagerProxy.getState()},i.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Gn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(e.element){var l=document.getElementById(bs.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},r=this;return this.renderedCamera.close().then(function(){return r.renderedCamera=null,r.element&&(r.element.removeChild(r.canvasElement),r.canvasElement=null),n(),r.qrRegion&&(r.qrRegion=null),r.context&&(r.context=null),t.execute(),r.hidePausedState(),r.isScanning=!1,Promise.resolve()})},i.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(n){return n.decodedText})},i.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Or(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(r,l){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var u=new Image;u.onload=function(){var f=u.width,y=u.height,m=document.getElementById(n.elementId),A=m.clientWidth?m.clientWidth:bs.DEFAULT_WIDTH,E=Math.max(m.clientHeight?m.clientHeight:y,bs.FILE_SCAN_MIN_HEIGHT),T=n.computeCanvasDrawConfig(f,y,A,E);if(t){var N=n.createCanvasElement(A,E,"qr-canvas-visible");N.style.display="inline-block",m.appendChild(N);var M=N.getContext("2d");if(!M)throw"Unable to get 2d context from canvas";M.canvas.width=A,M.canvas.height=E,M.drawImage(u,0,0,f,y,T.x,T.y,T.width,T.height)}var R=bs.FILE_SCAN_HIDDEN_CANVAS_PADDING,L=Math.max(u.width,T.width),k=Math.max(u.height,T.height),P=L+2*R,j=k+2*R,U=n.createCanvasElement(P,j);m.appendChild(U);var G=U.getContext("2d");if(!G)throw"Unable to get 2d context from canvas";G.canvas.width=P,G.canvas.height=j,G.drawImage(u,0,0,f,y,R,R,L,k);try{n.qrcode.decodeRobustlyAsync(U).then(function(Y){r(DA.createFromQrcodeResult(Y))}).catch(l)}catch(Y){l("QR code parse error, error = ".concat(Y))}},u.onerror=l,u.onabort=l,u.onstalled=l,u.onsuspend=l,u.src=URL.createObjectURL(e)})},i.prototype.clear=function(){this.clearElement()},i.getCameras=function(){return K4.retrieve()},i.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},i.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},i.prototype.applyVideoConstraints=function(e){if(e){if(!Uv.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},i.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},i.prototype.getSupportedFormats=function(e){var t=[qe.QR_CODE,qe.AZTEC,qe.CODABAR,qe.CODE_39,qe.CODE_93,qe.CODE_128,qe.DATA_MATRIX,qe.MAXICODE,qe.ITF,qe.EAN_13,qe.EAN_8,qe.PDF_417,qe.RSS_14,qe.RSS_EXPANDED,qe.UPC_A,qe.UPC_E,qe.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],r=0,l=e.formatsToSupport;r<l.length;r++){var u=l[r];M4(u)?n.push(u):this.logger.warn("Invalid format: ".concat(u," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},i.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Or(e))return!0;if(!Or(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Or(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return Or(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},i.prototype.validateQrboxSize=function(e,t,n){var r=this,l=n.qrbox;this.validateQrboxConfig(l);var u=this.toQrdimensions(e,t,l),f=function(m){if(m<bs.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(bs.MIN_QR_BOX_SIZE,"px.")},y=function(m){return m>e&&(r.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=e),m};f(u.width),f(u.height),u.width=y(u.width)},i.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},i.prototype.toQrdimensions=function(e,t,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(e,t)}catch(r){throw new Error("qrbox config was passed as a function but it failed with unknown error"+r)}return n},i.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var r=Or(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(r);var l=this.toQrdimensions(e,t,r);l.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var u=n.isShadedBoxEnabled()&&l.height<=t,f={x:0,y:0,width:e,height:t},y=u?this.getShadedRegionBounds(e,t,l):f,m=this.createCanvasElement(y.width,y.height),A={willReadFrequently:!0},E=m.getContext("2d",A);E.canvas.width=y.width,E.canvas.height=y.height,this.element.append(m),u&&this.possiblyInsertShadingElement(this.element,e,t,l),this.createScannerPausedUiElement(this.element),this.qrRegion=y,this.context=E,this.canvasElement=m},i.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=hc.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},i.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(r){return e(r.text,DA.createFromQrcodeResult(r)),n.possiblyUpdateShaders(!0),!0}).catch(function(r){n.possiblyUpdateShaders(!1);var l=hc.codeParseError(r);return t(l,Fv.createFrom(l)),!1})},i.prototype.foreverScan=function(e,t,n){var r=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),u=l.videoWidth/l.clientWidth,f=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var y=this.qrRegion.width*u,m=this.qrRegion.height*f,A=this.qrRegion.x*u,E=this.qrRegion.y*f;this.context.drawImage(l,A,E,y,m,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){r.foreverScanTimeout=setTimeout(function(){r.foreverScan(e,t,n)},r.getTimeoutFps(e.fps))};this.scanContext(t,n).then(function(N){!N&&e.disableFlip!==!0?(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(t,n).finally(function(){T()})):T()}).catch(function(N){r.logger.logError("Error happend while scanning context",N),T()})}},i.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",n="deviceId",r={user:!0,environment:!0},l="exact",u=function(M){if(M in r)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(M,"'")},f=Object.keys(e);if(f.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(f.length," keys");var y=Object.keys(e)[0];if(y!==t&&y!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(y===t){var m=e.facingMode;if(typeof m=="string"){if(u(m))return{facingMode:m}}else if(typeof m=="object")if(l in m){if(u(m["".concat(l)]))return{facingMode:{exact:m["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var A=typeof m;throw"Invalid type of 'facingMode' = ".concat(A)}}else{var E=e.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(l in E)return{deviceId:{exact:E["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var T=typeof E;throw"Invalid type of 'deviceId' = ".concat(T)}}}var N=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(N)},i.prototype.computeCanvasDrawConfig=function(e,t,n,r){if(e<=n&&t<=r){var l=(n-e)/2,u=(r-t)/2;return{x:l,y:u,width:e,height:t}}else{var f=e,y=t;return e>n&&(t=n/e*t,e=n),t>r&&(e=r/t*e,t=r),this.logger.log("Image downsampled from "+"".concat(f,"X").concat(y)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,n,r)}},i.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},i.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?bs.BORDER_SHADER_MATCH_COLOR:bs.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},i.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},i.prototype.createCanvasElement=function(e,t,n){var r=e,l=t,u=document.createElement("canvas");return u.style.width="".concat(r,"px"),u.style.height="".concat(l,"px"),u.style.display="none",u.id=Or(n)?"qr-canvas":n,u},i.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},i.prototype.possiblyInsertShadingElement=function(e,t,n,r){if(!(t-r.width<1||n-r.height<1)){var l=document.createElement("div");l.style.position="absolute";var u=(t-r.width)/2,f=(n-r.height)/2;if(l.style.borderLeft="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(bs.SHADED_REGION_ELEMENT_ID),t-r.width<11||n-r.height<11)this.hasBorderShaders=!1;else{var y=5,m=40;this.insertShaderBorders(l,m,y,-y,null,0,!0),this.insertShaderBorders(l,m,y,-y,null,0,!1),this.insertShaderBorders(l,m,y,null,-y,0,!0),this.insertShaderBorders(l,m,y,null,-y,0,!1),this.insertShaderBorders(l,y,m+y,-y,null,-y,!0),this.insertShaderBorders(l,y,m+y,null,-y,-y,!0),this.insertShaderBorders(l,y,m+y,-y,null,-y,!1),this.insertShaderBorders(l,y,m+y,null,-y,-y,!1),this.hasBorderShaders=!0}e.append(l)}},i.prototype.insertShaderBorders=function(e,t,n,r,l,u,f){var y=document.createElement("div");y.style.position="absolute",y.style.backgroundColor=bs.BORDER_SHADER_DEFAULT_COLOR,y.style.width="".concat(t,"px"),y.style.height="".concat(n,"px"),r!==null&&(y.style.top="".concat(r,"px")),l!==null&&(y.style.bottom="".concat(l,"px")),f?y.style.left="".concat(u,"px"):y.style.right="".concat(u,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(y),e.appendChild(y)},i.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},i.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},i.prototype.getTimeoutFps=function(e){return 1e3/e},i})(),bm="data:image/svg+xml;base64,",t8=bm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",n8=bm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",HA=bm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",i8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",VA=(function(){function i(){}return i.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},i})(),s8=(function(){function i(){this.data=VA.createDefault();var e=localStorage.getItem(i.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return i.prototype.hasCameraPermissions=function(){return this.data.hasPermission},i.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},i.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},i.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},i.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},i.prototype.reset=function(){this.data=VA.createDefault(),this.flush()},i.prototype.flush=function(){localStorage.setItem(i.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},i.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",i})(),r8=(function(){function i(){this.infoDiv=document.createElement("div")}return i.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=OA.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var n=document.createElement("br"),r=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(r);var l=document.createElement("a");l.innerText=OA.reportIssues(),l.href="https://github.com/mebjas/html5-qrcode/issues",l.target="new",l.style.color="white",this.infoDiv.appendChild(l),e.appendChild(this.infoDiv)},i.prototype.show=function(){this.infoDiv.style.display="block"},i.prototype.hide=function(){this.infoDiv.style.display="none"},i})(),a8=(function(){function i(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return i.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=HA,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(n){return t.onHoverIn()},this.infoIcon.onmouseout=function(n){return t.onHoverOut()},this.infoIcon.onclick=function(n){return t.onClick()},e.appendChild(this.infoIcon)},i.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},i.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},i.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=i8,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=HA,this.infoIcon.style.opacity="0.6")},i})(),o8=(function(){function i(){var e=this;this.infoDiv=new r8,this.infoIcon=new a8(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return i.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},i})(),l8=function(i,e,t,n){function r(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(A){try{m(n.next(A))}catch(E){u(E)}}function y(A){try{m(n.throw(A))}catch(E){u(E)}}function m(A){A.done?l(A.value):r(A.value).then(f,y)}m((n=n.apply(i,e||[])).next())})},c8=function(i,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,r,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(m){return function(A){return y([m,A])}}function y(m){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(t=0)),t;)try{if(n=1,r&&(l=m[0]&2?r.return:m[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,m[1])).done)return l;switch(r=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,r=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){t.label=m[1];break}if(m[0]===6&&t.label<l[1]){t.label=l[1],l=m;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(m);break}l[2]&&t.ops.pop(),t.trys.pop();continue}m=e.call(i,t)}catch(A){m=[6,A],r=0}finally{n=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},GA=(function(){function i(){}return i.hasPermissions=function(){return l8(this,void 0,void 0,function(){var e,t,n,r;return c8(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=l.sent(),t=0,n=e;t<n.length;t++)if(r=n[t],r.kind==="videoinput"&&r.label)return[2,!0];return[2,!1]}})})},i})(),ho=(function(){function i(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return i.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},i.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},i.prototype.isCameraScanRequired=function(){for(var e=0,t=this.supportedScanTypes;e<t.length;e++){var n=t[e];if(i.isCameraScanType(n))return!0}return!1},i.isCameraScanType=function(e){return e===Co.SCAN_TYPE_CAMERA},i.isFileScanType=function(e){return e===Co.SCAN_TYPE_FILE},i.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return sr.DEFAULT_SUPPORTED_SCAN_TYPE;var t=sr.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var n=0,r=e;n<r.length;n++){var l=r[n];if(!sr.DEFAULT_SUPPORTED_SCAN_TYPE.includes(l))throw"Unsupported scan type ".concat(l)}return e},i})(),Cs=(function(){function i(){}return i.ALL_ELEMENT_CLASS="html5-qrcode-element",i.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",i.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",i.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",i.TORCH_BUTTON_ID="html5-qrcode-button-torch",i.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",i.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",i.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",i.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",i.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",i.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",i})(),xa=(function(){function i(){}return i.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n.classList.add(Cs.ALL_ELEMENT_CLASS),e==="button"&&n.setAttribute("type","button"),n},i})(),Hv=function(i,e,t,n){function r(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(A){try{m(n.next(A))}catch(E){u(E)}}function y(A){try{m(n.throw(A))}catch(E){u(E)}}function m(A){A.done?l(A.value):r(A.value).then(f,y)}m((n=n.apply(i,e||[])).next())})},Vv=function(i,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,r,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(m){return function(A){return y([m,A])}}function y(m){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(t=0)),t;)try{if(n=1,r&&(l=m[0]&2?r.return:m[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,m[1])).done)return l;switch(r=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,r=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){t.label=m[1];break}if(m[0]===6&&t.label<l[1]){t.label=l[1],l=m;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(m);break}l[2]&&t.ops.pop(),t.trys.pop();continue}m=e.call(i,t)}catch(A){m=[6,A],r=0}finally{n=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},YA=(function(){function i(e,t,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=n}return i.prototype.isTorchEnabled=function(){return this.isTorchOn},i.prototype.flipState=function(){return Hv(this,void 0,void 0,function(){var e,t;return Vv(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},i.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?on.torchOffButton():on.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},i.prototype.propagateFailure=function(e,t){var n=e?on.torchOnFailedMessage():on.torchOffFailedMessage();t&&(n+="; Error = "+t),this.onTorchActionFailureCallback(n)},i.prototype.reset=function(){this.isTorchOn=!1},i})(),u8=(function(){function i(e,t){this.onTorchActionFailureCallback=t,this.torchButton=xa.createElement("button",Cs.TORCH_BUTTON_ID),this.torchController=new YA(e,this,t)}return i.prototype.render=function(e,t){var n=this;this.torchButton.innerText=on.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var r=this;this.torchButton.addEventListener("click",function(l){return Hv(n,void 0,void 0,function(){return Vv(this,function(u){switch(u.label){case 0:return[4,r.torchController.flipState()];case 1:return u.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(Cs.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(Cs.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(Cs.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(Cs.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},i.prototype.updateTorchCapability=function(e){this.torchController=new YA(e,this,this.onTorchActionFailureCallback)},i.prototype.getTorchButton=function(){return this.torchButton},i.prototype.hide=function(){this.torchButton.style.display="none"},i.prototype.show=function(){this.torchButton.style.display="inline-block"},i.prototype.disable=function(){this.torchButton.disabled=!0},i.prototype.enable=function(){this.torchButton.disabled=!1},i.prototype.setText=function(e){this.torchButton.innerText=e},i.prototype.reset=function(){this.torchButton.innerText=on.torchOnButton(),this.torchController.reset()},i.create=function(e,t,n,r){var l=new i(t,r);return l.render(e,n),l},i})(),h8=(function(){function i(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var r=document.createElement("label");r.setAttribute("for",this.getFileScanInputId()),r.style.display="inline-block",this.fileBasedScanRegion.appendChild(r),this.fileSelectionButton=xa.createElement("button",Cs.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(f){r.click()}),r.append(this.fileSelectionButton),this.fileScanInput=xa.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",r.appendChild(this.fileScanInput);var l=this;this.fileScanInput.addEventListener("change",function(f){if(!(f==null||f.target==null)){var y=f.target;if(!(y.files&&y.files.length===0)){var m=y.files,A=m[0],E=A.name;l.setImageNameToButton(E),n(A)}}});var u=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(u),this.fileBasedScanRegion.addEventListener("dragenter",function(f){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),f.stopPropagation(),f.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(f){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder(),f.stopPropagation(),f.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(f){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),f.stopPropagation(),f.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(f){f.stopPropagation(),f.preventDefault(),l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder();var y=f.dataTransfer;if(y){var m=y.files;if(!m||m.length===0)return;for(var A=!1,E=0;E<m.length;++E){var T=m.item(E);if(T){var N=/image.*/;if(T.type.match(N)){A=!0;var M=T.name;l.setImageNameToButton(M),n(T),u.innerText=on.dragAndDropMessage();break}}}A||(u.innerText=on.dragAndDropMessageOnlyImages())}})}return i.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},i.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},i.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},i.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},i.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},i.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},i.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},i.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=on.dragAndDropMessage(),e.style.fontWeight="400",e},i.prototype.setImageNameToButton=function(e){var t=20;if(e.length>t){var n=e.substring(0,8),r=e.length,l=e.substring(r-8,r);e="".concat(n,"....").concat(l)}var u=on.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=u},i.prototype.setInitialValueToButton=function(){var e=on.fileSelectionChooseImage()+" - "+on.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},i.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},i.create=function(e,t,n){var r=new i(e,t,n);return r},i})(),d8=(function(){function i(e){this.selectElement=xa.createElement("select",Cs.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return i.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var n=this.cameras.length;if(n===0)throw new Error("No cameras found");if(n===1)t.style.display="none";else{var r=on.selectCamera();t.innerText="".concat(r," (").concat(this.cameras.length,")  ")}for(var l=1,u=0,f=this.cameras;u<f.length;u++){var y=f[u],m=y.id,A=y.label==null?m:y.label;(!A||A==="")&&(A=[on.anonymousCameraPrefix(),l++].join(" "));var E=document.createElement("option");E.value=m,E.innerText=A,this.options.push(E),this.selectElement.appendChild(E)}t.appendChild(this.selectElement),e.appendChild(t)},i.prototype.disable=function(){this.selectElement.disabled=!0},i.prototype.isDisabled=function(){return this.selectElement.disabled===!0},i.prototype.enable=function(){this.selectElement.disabled=!1},i.prototype.getValue=function(){return this.selectElement.value},i.prototype.hasValue=function(e){for(var t=0,n=this.options;t<n.length;t++){var r=n[t];if(r.value===e)return!0}return!1},i.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},i.prototype.hasSingleItem=function(){return this.cameras.length===1},i.prototype.numCameras=function(){return this.cameras.length},i.create=function(e,t){var n=new i(t);return n.render(e),n},i})(),f8=(function(){function i(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=xa.createElement("input",Cs.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return i.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=on.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var r=this;this.rangeInput.addEventListener("input",function(){return r.onValueChange()}),this.rangeInput.addEventListener("change",function(){return r.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},i.prototype.onValueChange=function(){var e=on.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},i.prototype.setValues=function(e,t,n,r){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},i.prototype.show=function(){this.zoomElementContainer.style.display="block"},i.prototype.hide=function(){this.zoomElementContainer.style.display="none"},i.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},i.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},i.create=function(e,t){var n=new i;return n.render(e,t),n},i})(),As;(function(i){i[i.STATUS_DEFAULT=0]="STATUS_DEFAULT",i[i.STATUS_SUCCESS=1]="STATUS_SUCCESS",i[i.STATUS_WARNING=2]="STATUS_WARNING",i[i.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(As||(As={}));function g8(i){return{fps:i.fps,qrbox:i.qrbox,aspectRatio:i.aspectRatio,disableFlip:i.disableFlip,videoConstraints:i.videoConstraints}}function p8(i,e){return{formatsToSupport:i.formatsToSupport,useBarCodeDetectorIfSupported:i.useBarCodeDetectorIfSupported,experimentalFeatures:i.experimentalFeatures,verbose:e}}var m8=(function(){function i(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=n===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new ho(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new jv(this.verbose),this.persistedDataManager=new s8,t.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return i.prototype.render=function(e,t){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(l,u){if(e)e(l,u);else{if(n.lastMatchFound===l)return;n.lastMatchFound=l,n.setHeaderMessage(on.lastMatch(l),As.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(l,u){t&&t(l,u)};var r=document.getElementById(this.elementId);if(!r)throw"HTML Element with id=".concat(this.elementId," not found");r.innerHTML="",this.createBasicLayout(r),this.html5Qrcode=new zA(this.getScanRegionId(),p8(this.config,this.verbose))},i.prototype.pause=function(e){(Or(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},i.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},i.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},i.prototype.clear=function(){var e=this,t=function(){var n=document.getElementById(e.elementId);n&&(n.innerHTML="",e.resetBasicLayout(n))};return this.html5Qrcode?new Promise(function(n,r){if(!e.html5Qrcode){n();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(l){if(!e.html5Qrcode){n();return}e.html5Qrcode.clear(),t(),n()}).catch(function(l){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",l),r(l)}):(e.html5Qrcode.clear(),t(),n())}):Promise.resolve()},i.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},i.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},i.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},i.prototype.createConfig=function(e){return e?(e.fps||(e.fps=sr.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!sr.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=sr.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=sr.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:sr.SCAN_DEFAULT_FPS,rememberLastUsedCamera:sr.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:sr.DEFAULT_SUPPORTED_SCAN_TYPE}},i.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),n=this.getScanRegionId();t.id=n,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),ho.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var r=document.createElement("div"),l=this.getDashboardId();r.id=l,r.style.width="100%",e.appendChild(r),this.setupInitialDashboard(r)},i.prototype.resetBasicLayout=function(e){e.style.border="none"},i.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},i.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t);var n=new o8;n.renderInto(t);var r=document.createElement("div");r.id=this.getHeaderMessageContainerId(),r.style.display="none",r.style.textAlign="center",r.style.fontSize="14px",r.style.padding="2px 10px",r.style.margin="4px",r.style.borderTop="1px solid #f6f6f6",t.appendChild(r)},i.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},i.prototype.createCameraListUi=function(e,t,n){var r=this;r.showHideScanTypeSwapLink(!1),r.setHeaderMessage(on.cameraPermissionRequesting());var l=function(){n||r.createPermissionButton(e,t)};zA.getCameras().then(function(u){r.persistedDataManager.setHasPermission(!0),r.showHideScanTypeSwapLink(!0),r.resetHeaderMessage(),u&&u.length>0?(e.removeChild(t),r.renderCameraSelection(u)):(r.setHeaderMessage(on.noCameraFound(),As.STATUS_WARNING),l())}).catch(function(u){r.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:l(),r.setHeaderMessage(u,As.STATUS_WARNING),r.showHideScanTypeSwapLink(!0)})},i.prototype.createPermissionButton=function(e,t){var n=this,r=xa.createElement("button",this.getCameraPermissionButtonId());r.innerText=on.cameraPermissionTitle(),r.addEventListener("click",function(){r.disabled=!0,n.createCameraListUi(e,t,r)}),t.appendChild(r)},i.prototype.createPermissionsUi=function(e,t){var n=this;if(ho.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){GA.hasPermissions().then(function(r){r?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))}).catch(function(r){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)});return}this.createPermissionButton(e,t)},i.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=ho.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var r=document.createElement("div");r.style.textAlign="center",n.appendChild(r),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,r),this.renderFileScanUi(t)},i.prototype.renderFileScanUi=function(e){var t=ho.isFileScanType(this.currentScanType),n=this,r=function(l){if(!n.html5Qrcode)throw"html5Qrcode not defined";ho.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(on.loadingImage()),n.html5Qrcode.scanFileV2(l,!0).then(function(u){n.resetHeaderMessage(),n.qrCodeSuccessCallback(u.decodedText,u)}).catch(function(u){n.setHeaderMessage(u,As.STATUS_WARNING),n.qrCodeErrorCallback(u,Fv.createFrom(u))}))};this.fileSelectionUi=h8.create(e,t,r)},i.prototype.renderCameraSelection=function(e){var t=this,n=this,r=document.getElementById(this.getDashboardSectionCameraScanRegionId());r.style.textAlign="center";var l=f8.create(r,!1),u=function(R){var L=R.zoomFeature();if(L.isSupported()){l.setOnCameraZoomValueChangeCallback(function(P){L.apply(P)});var k=1;t.config.defaultZoomValueIfSupported&&(k=t.config.defaultZoomValueIfSupported),k=D4(k,L.min(),L.max()),l.setValues(L.min(),L.max(),k,L.step()),l.show()}},f=d8.create(r,e),y=document.createElement("span"),m=xa.createElement("button",Cs.CAMERA_START_BUTTON_ID);m.innerText=on.scanButtonStartScanningText(),y.appendChild(m);var A=xa.createElement("button",Cs.CAMERA_STOP_BUTTON_ID);A.innerText=on.scanButtonStopScanningText(),A.style.display="none",A.disabled=!0,y.appendChild(A);var E,T=function(R){if(!R.torchFeature().isSupported()){E&&E.hide();return}E?E.updateTorchCapability(R.torchFeature()):E=u8.create(y,R.torchFeature(),{display:"none",marginLeft:"5px"},function(L){n.setHeaderMessage(L,As.STATUS_WARNING)}),E.show()};r.appendChild(y);var N=function(R){R||(m.style.display="none"),m.innerText=on.scanButtonStartScanningText(),m.style.opacity="1",m.disabled=!1,R&&(m.style.display="inline-block")};if(m.addEventListener("click",function(R){m.innerText=on.scanButtonScanningStarting(),f.disable(),m.disabled=!0,m.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var L=f.getValue();n.persistedDataManager.setLastUsedCameraId(L),n.html5Qrcode.start(L,g8(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(k){A.disabled=!1,A.style.display="inline-block",N(!1);var P=n.html5Qrcode.getRunningTrackCameraCapabilities();t.config.showTorchButtonIfSupported===!0&&T(P),t.config.showZoomSliderIfSupported===!0&&u(P)}).catch(function(k){n.showHideScanTypeSwapLink(!0),f.enable(),N(!0),n.setHeaderMessage(k,As.STATUS_WARNING)})}),f.hasSingleItem()&&m.click(),A.addEventListener("click",function(R){if(!n.html5Qrcode)throw"html5Qrcode not defined";A.disabled=!0,n.html5Qrcode.stop().then(function(L){t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),f.enable(),m.disabled=!1,A.style.display="none",m.style.display="inline-block",E&&(E.reset(),E.hide()),l.removeOnCameraZoomValueChangeCallback(),l.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(L){A.disabled=!1,n.setHeaderMessage(L,As.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var M=n.persistedDataManager.getLastUsedCameraId();f.hasValue(M)?(f.setValue(M),m.click()):n.persistedDataManager.resetLastUsedCameraId()}},i.prototype.createSectionSwap=function(){var e=this,t=on.textIfCameraScanSelected(),n=on.textIfFileScanSelected(),r=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");l.style.textAlign="center";var u=xa.createElement("span",this.getDashboardSectionSwapLinkId());u.style.textDecoration="underline",u.style.cursor="pointer",u.innerText=ho.isCameraScanType(this.currentScanType)?t:n,u.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,ho.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),u.innerText=n,e.currentScanType=Co.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),u.innerText=t,e.currentScanType=Co.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),l.appendChild(u),r.appendChild(l)},i.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;if(this.persistedDataManager.hasCameraPermissions()){GA.hasPermissions().then(function(n){if(n){var r=document.getElementById(t.getCameraPermissionButtonId());if(!r)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";r.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(n){t.persistedDataManager.setHasPermission(!1)});return}},i.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},i.prototype.setHeaderMessage=function(e,t){t||(t=As.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case As.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case As.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case As.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)";break}},i.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},i.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=t8,this.cameraScanImage.alt=on.cameraScanAltText()},i.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=n8,this.fileScanImage.alt=on.fileScanAltText()},i.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},i.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},i.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},i.prototype.getDashboardSectionSwapLinkId=function(){return Cs.SCAN_TYPE_CHANGE_ANCHOR_ID},i.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},i.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},i.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},i.prototype.getCameraPermissionButtonId=function(){return Cs.CAMERA_PERMISSION_BUTTON_ID},i.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},i.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},i.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},i})();function y8(){const{show:i}=dr(),{selectedProjectId:e}=_a(),[t,n]=W.useState([]),[r,l]=W.useState(null),[u,f]=W.useState([]),[y,m]=W.useState(!1),[A,E]=W.useState(!0),{register:T,handleSubmit:N,reset:M}=jc();W.useEffect(()=>{R(),L()},[]);const R=async()=>Ft.get("/projects").then(U=>f(U.data)),L=async()=>Ft.get("/sms/educations").then(U=>{n(U.data),E(!1)}),k=W.useMemo(()=>e==="ALL"?t:t.filter(U=>U.project_id===e),[t,e]),P=async U=>{try{await Ft.post("/sms/educations",U),i(" .","success"),m(!1),M(),L()}catch{i(" ","error")}},j=U=>{const G={:"badge",:"badge-primary",:"badge-error",TBM:"badge-live"};return S.jsx("span",{className:`badge ${G[U]||"badge-tag"}`,children:U})};return S.jsxs("div",{className:"page",style:{paddingBottom:"80px"},children:[S.jsxs("header",{className:"page-header",children:[S.jsxs("div",{children:[S.jsx("p",{className:"eyebrow",children:"SMS Module"}),S.jsx("h1",{children:"  (Education)"}),S.jsx("p",{className:"muted",children:"       . (  PMS    )"})]}),S.jsxs("button",{className:"btn-primary",onClick:()=>m(!0),children:[S.jsx(So,{size:18}),"  "]})]}),S.jsx("div",{className:"grid three",children:k.map(U=>S.jsxs("div",{className:"card",style:{cursor:"pointer"},onClick:()=>l(U),children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[j(U.type),S.jsxs("span",{className:"milestone-meta",children:[S.jsx(hp,{size:14})," ",U.attendee_count,""]})]}),S.jsx("h3",{style:{margin:"0.8rem 0"},children:U.title}),S.jsxs("p",{className:"muted",style:{fontSize:"0.9rem",marginBottom:"0.5rem"},children:[S.jsx(th,{size:14,style:{marginRight:4}})," ",new Date(U.date).toLocaleDateString()]}),S.jsxs("p",{className:"muted",style:{fontSize:"0.9rem"},children:[S.jsx(ul,{size:14,style:{marginRight:4}})," ",U.place]})]},U.id))}),k.length===0&&!A&&S.jsxs("section",{className:"empty-state",children:[S.jsx(hp,{size:48,className:"empty-icon"}),S.jsx("h3",{children:"   ."}),S.jsx("p",{children:"  ,       ."})]}),y&&S.jsx("div",{className:"modal-overlay",children:S.jsxs("div",{className:"modal-content",children:[S.jsxs("header",{className:"modal-header",children:[S.jsx("h2",{children:" "}),S.jsx("button",{className:"btn-text",onClick:()=>m(!1),children:S.jsx(Gs,{size:24})})]}),S.jsxs("form",{onSubmit:N(P),className:"modal-body",children:[S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:""}),S.jsx("select",{className:"input",...T("projectId"),children:S.jsx("option",{value:u[0]?.id,children:u[0]?.name})})]}),S.jsxs("div",{className:"form-grid",children:[S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:""}),S.jsxs("select",{className:"input",...T("type"),children:[S.jsx("option",{children:""}),S.jsx("option",{children:""}),S.jsx("option",{children:""})]})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:""}),S.jsx("input",{type:"date",className:"input",...T("date",{required:!0})})]})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:""}),S.jsx("input",{className:"input",...T("title",{required:!0})})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:""}),S.jsx("input",{className:"input",...T("instructor",{required:!0})})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:""}),S.jsx("input",{className:"input",...T("place")})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:""}),S.jsx("textarea",{className:"input",...T("content")})]}),S.jsx("div",{className:"form-actions",children:S.jsx("button",{className:"btn-primary",children:""})})]})]})}),r&&S.jsx(x8,{educationId:r.id,title:r.title,onClose:()=>{l(null),L()}})]})}function x8({educationId:i,title:e,onClose:t}){const{show:n}=dr(),[r,l]=W.useState([]),[u,f]=W.useState(!1),[y,m]=W.useState({name:"",birth:"",agency:""}),A=W.useRef(null);W.useEffect(()=>(E(),()=>{A.current&&A.current.clear()}),[]);const E=async()=>{try{const{data:P}=await Ft.get(`/sms/educations/${i}`);l(P.attendees||[])}catch(P){console.error(P)}},T=async P=>{try{A.current&&A.current.pause(!0);const j=JSON.parse(P),U={name:j.n,birth:j.b,agency:j.a||"",signature:"QR Checked"};await Ft.post(`/sms/educations/${i}/attend`,{attendees:[U]}),n(`${U.name}  `,"success"),await E()}catch(j){console.error(j),n("QR  ","error")}finally{setTimeout(()=>{A.current&&A.current.resume()},1500)}},N=()=>{f(!0),setTimeout(()=>{const P=new m8("reader",{fps:10,qrbox:250},!1);P.render(T,j=>console.log(j)),A.current=P},100)},M=()=>{A.current&&(A.current.clear(),A.current=null),f(!1)},R=async()=>{if(!y.name){n(" .","error");return}try{await Ft.post(`/sms/educations/${i}/attend`,{attendees:[{...y,signature:"Manual"}]}),n(".","success"),E(),m({name:"",birth:"",agency:""})}catch{n(" ","error")}},L=Array.from({length:20},(P,j)=>r[j]||null),k=P=>{const j=new Date(P),U=new Date(j);return U.setHours(9,0,0,0),(j.getTime()-U.getTime())/(1e3*60)>10};return S.jsx("div",{className:"modal-overlay",children:S.jsxs("div",{className:"modal-content",style:{maxWidth:"1200px",maxHeight:"90vh",display:"flex",flexDirection:"column"},children:[S.jsxs("header",{className:"modal-header",children:[S.jsxs("div",{children:[S.jsx("p",{className:"eyebrow",style:{marginBottom:0},children:" "}),S.jsx("h2",{style:{margin:0},children:e})]}),S.jsx("button",{className:"btn-text",onClick:t,children:S.jsx(Gs,{size:24})})]}),S.jsxs("div",{className:"modal-body",style:{flex:1,display:"flex",flexDirection:"column",gap:"1.5rem",overflow:"hidden"},children:[u?S.jsxs("div",{style:{background:"#000",borderRadius:"8px",overflow:"hidden"},children:[S.jsx("div",{id:"reader",style:{width:"100%"}}),S.jsx("button",{className:"btn-secondary",onClick:M,style:{width:"100%",padding:"1rem",background:"#333",color:"#fff",border:"none"},children:" "})]}):S.jsxs("div",{className:"panel action-card",onClick:N,style:{cursor:"pointer",border:"2px dashed var(--primary)",padding:"1.5rem",textAlign:"center"},children:[S.jsx($p,{size:40,color:"var(--primary)",style:{marginBottom:"0.5rem"}}),S.jsx("h3",{style:{margin:"0.5rem 0"},children:"QR   ()"}),S.jsx("p",{className:"muted",style:{fontSize:"0.85rem",margin:0},children:"  QR  PMS   ."})]}),S.jsxs("div",{className:"panel",style:{background:"var(--bg-surface-hover)",padding:"1rem"},children:[S.jsx("h4",{style:{margin:"0 0 0.75rem 0"},children:" "}),S.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[S.jsxs("div",{style:{flex:1},children:[S.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"0.25rem",display:"block"},children:""}),S.jsx("input",{className:"input",placeholder:"",value:y.name,onChange:P=>m({...y,name:P.target.value})})]}),S.jsxs("div",{style:{flex:1},children:[S.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"0.25rem",display:"block"},children:""}),S.jsx("input",{className:"input",placeholder:"800101",value:y.birth,onChange:P=>m({...y,birth:P.target.value})})]}),S.jsxs("div",{style:{flex:1},children:[S.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"0.25rem",display:"block"},children:""}),S.jsx("input",{className:"input",placeholder:"OO",value:y.agency,onChange:P=>m({...y,agency:P.target.value})})]}),S.jsx("button",{className:"btn-primary",onClick:R,style:{height:"42px"},children:""})]})]}),S.jsxs("div",{style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:[S.jsxs("h4",{style:{margin:"0 0 1rem 0"},children:["  (",r.length,"/20)"]}),S.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",flex:1,overflow:"hidden"},children:L.map((P,j)=>S.jsx("div",{className:"card",style:{minHeight:"100px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",background:P?"var(--bg-surface)":"var(--bg-surface-hover)",border:P?"1px solid var(--primary)":"1px dashed var(--border)",padding:"0.75rem"},children:P?S.jsxs(S.Fragment,{children:[S.jsxs("p",{className:"muted",style:{fontSize:"0.8rem",margin:"0 0 0.5rem 0",fontWeight:500},children:[": ",P.worker_agency||""]}),S.jsx("strong",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},children:P.worker_name}),S.jsxs("p",{style:{fontSize:"0.75rem",margin:0,color:k(P.attended_at)?"#ff6b6b":"var(--text-secondary)",fontWeight:k(P.attended_at)?600:400},children:[new Date(P.attended_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),k(P.attended_at)&&" ()"]})]}):S.jsx("p",{className:"muted",style:{margin:0,fontSize:"0.9rem"},children:" "})},j))})]})]})]})})}function b8(){const{show:i}=dr(),{selectedProjectId:e}=_a(),[t,n]=W.useState([]),[r,l]=W.useState([]),[u,f]=W.useState(!1),[y,m]=W.useState(null),[A,E]=W.useState(!0),[T,N]=W.useState([]),{register:M,handleSubmit:R,reset:L,formState:{isSubmitting:k}}=jc();W.useEffect(()=>{Promise.all([Ft.get("/sms/incidents").then(Y=>n(Y.data)),Ft.get("/projects").then(Y=>l(Y.data))]).finally(()=>E(!1))},[]);const P=W.useMemo(()=>e==="ALL"?t:t.filter(Y=>Y.project_id===e),[t,e]),j=async Y=>{try{await Ft.post("/sms/incidents",{...Y,photos:T}),i("  .","success"),f(!1),L(),N([]);const V=await Ft.get("/sms/incidents");n(V.data)}catch{i(" ","error")}},U=Y=>{const V=Y.target.files;V&&Array.from(V).forEach(ie=>{const Q=new FileReader;Q.onloadend=()=>{N(be=>[...be,Q.result])},Q.readAsDataURL(ie)})},G=Y=>Y===""?"badge-primary":Y===""?"badge-error":"badge";return S.jsxs("div",{className:"page",children:[S.jsxs("header",{className:"page-header",children:[S.jsxs("div",{children:[S.jsx("p",{className:"eyebrow",children:"SMS Module"}),S.jsx("h1",{children:" /  (Incident)"}),S.jsx("p",{className:"muted",children:"       ."})]}),S.jsxs("button",{className:"btn-primary",onClick:()=>f(!0),children:[S.jsx(So,{size:18}),"  "]})]}),S.jsx("div",{className:"grid three",children:P.map(Y=>S.jsxs("div",{className:"card",style:{cursor:"pointer"},onClick:()=>m(Y),children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[S.jsx("span",{className:`badge ${G(Y.type)}`,children:Y.type}),S.jsx("span",{className:"badge badge-tag",children:Y.status})]}),S.jsx("h3",{style:{margin:"0 0 0.75rem 0",fontSize:"1.1rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Y.title}),S.jsxs("div",{style:{marginBottom:"0.5rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.9rem",color:"var(--text-secondary)"},children:[S.jsx(th,{size:14,style:{verticalAlign:"middle",marginRight:"4px"}}),new Date(Y.date).toLocaleDateString()," ",Y.time]}),S.jsxs("div",{style:{marginBottom:"1rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.9rem",color:"var(--text-secondary)"},children:[S.jsx(ul,{size:14,style:{verticalAlign:"middle",marginRight:"4px"}}),Y.place]}),Y.thumbnail?S.jsx("div",{style:{aspectRatio:"16/9",background:"#eee",borderRadius:"4px",overflow:"hidden",marginBottom:"1rem"},children:S.jsx("img",{src:Y.thumbnail,alt:"Evidence",style:{width:"100%",height:"100%",objectFit:"cover"}})}):S.jsxs("div",{style:{padding:"2rem",background:"var(--bg-surface-hover)",borderRadius:"4px",textAlign:"center",marginBottom:"1rem"},children:[S.jsx($p,{size:24,color:"var(--text-tertiary)"}),S.jsx("p",{className:"muted",style:{fontSize:"0.8rem",margin:"0.5rem 0 0 0"},children:" "})]}),S.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:Y.description})]},Y.id))}),P.length===0&&!A&&S.jsxs("section",{className:"empty-state",children:[S.jsx(t0,{size:48,className:"empty-icon"}),S.jsx("h3",{children:" /  ."}),S.jsx("p",{children:"       ."})]}),u&&S.jsx("div",{className:"modal-overlay",children:S.jsxs("div",{className:"modal-content",children:[S.jsxs("header",{className:"modal-header",children:[S.jsx("h2",{children:"/ "}),S.jsx("button",{className:"btn-text",onClick:()=>{f(!1),N([])},children:S.jsx(Gs,{size:24})})]}),S.jsxs("form",{onSubmit:R(j),className:"modal-body",children:[S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" "}),S.jsx("select",{className:"input",...M("projectId",{required:!0}),children:r.map(Y=>S.jsx("option",{value:Y.id,children:Y.name},Y.id))})]}),S.jsxs("div",{className:"form-grid",children:[S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:""}),S.jsxs("select",{className:"input",...M("type"),children:[S.jsx("option",{value:"",children:" (Near Miss)"}),S.jsx("option",{value:"",children:" (Accident)"})]})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" "}),S.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[S.jsx("input",{type:"date",className:"input",...M("date",{required:!0})}),S.jsx("input",{type:"time",className:"input",...M("time",{required:!0})})]})]})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" (  )"}),S.jsx("input",{className:"input",placeholder:":      (  )",...M("title",{required:!0})})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" "}),S.jsx("input",{className:"input",placeholder:": 101 3 ",...M("place")})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" "}),S.jsx("textarea",{className:"input",rows:4,placeholder:"6    .",...M("description",{required:!0})})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:" "}),S.jsxs("div",{style:{border:"2px dashed var(--border)",borderRadius:"8px",padding:"1.5rem",textAlign:"center",background:"var(--bg-surface-hover)"},children:[S.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:U,style:{display:"none"},id:"photo-upload"}),S.jsxs("label",{htmlFor:"photo-upload",style:{cursor:"pointer",display:"block"},children:[S.jsx(Jw,{size:32,color:"var(--primary)",style:{marginBottom:"0.5rem"}}),S.jsx("p",{style:{margin:0,color:"var(--primary)",fontWeight:600},children:"  "}),S.jsx("p",{className:"muted",style:{fontSize:"0.85rem",margin:"0.25rem 0 0 0"},children:"   "})]})]}),T.length>0&&S.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem",flexWrap:"wrap"},children:T.map((Y,V)=>S.jsxs("div",{style:{position:"relative",width:"100px",height:"100px",borderRadius:"4px",overflow:"hidden",border:"1px solid var(--border)"},children:[S.jsx("img",{src:Y,alt:`Upload ${V+1}`,style:{width:"100%",height:"100%",objectFit:"cover"}}),S.jsx("button",{type:"button",onClick:()=>N(ie=>ie.filter((Q,be)=>be!==V)),style:{position:"absolute",top:"4px",right:"4px",background:"rgba(0,0,0,0.6)",border:"none",borderRadius:"50%",width:"24px",height:"24px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:S.jsx(Gs,{size:16,color:"#fff"})})]},V))})]}),S.jsxs("div",{className:"form-actions",children:[S.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{f(!1),N([])},children:""}),S.jsx("button",{type:"submit",className:"btn-primary",disabled:k,children:k?" ...":" "})]})]})]})}),y&&S.jsx("div",{className:"modal-overlay",children:S.jsxs("div",{className:"modal-content",style:{maxWidth:"700px"},children:[S.jsxs("header",{className:"modal-header",children:[S.jsxs("div",{children:[S.jsx("span",{className:`badge ${G(y.type)}`,style:{marginBottom:"0.5rem"},children:y.type}),S.jsx("h2",{style:{margin:"0.5rem 0 0 0"},children:y.title})]}),S.jsx("button",{className:"btn-text",onClick:()=>m(null),children:S.jsx(Gs,{size:24})})]}),S.jsxs("div",{className:"modal-body",children:[S.jsxs("div",{className:"form-grid",style:{marginBottom:"1.5rem"},children:[S.jsxs("div",{children:[S.jsx("p",{className:"muted",style:{fontSize:"0.85rem",marginBottom:"0.25rem"},children:" "}),S.jsxs("p",{style:{margin:0,fontWeight:600},children:[S.jsx(th,{size:16,style:{verticalAlign:"middle",marginRight:"4px"}}),new Date(y.date).toLocaleDateString()," ",y.time]})]}),S.jsxs("div",{children:[S.jsx("p",{className:"muted",style:{fontSize:"0.85rem",marginBottom:"0.25rem"},children:" "}),S.jsxs("p",{style:{margin:0,fontWeight:600},children:[S.jsx(ul,{size:16,style:{verticalAlign:"middle",marginRight:"4px"}}),y.place]})]})]}),S.jsxs("div",{style:{marginBottom:"1.5rem"},children:[S.jsx("p",{className:"muted",style:{fontSize:"0.85rem",marginBottom:"0.5rem"},children:" "}),S.jsx("p",{style:{margin:0,lineHeight:1.6,whiteSpace:"pre-wrap"},children:y.description})]}),y.thumbnail&&S.jsxs("div",{style:{marginBottom:"1.5rem"},children:[S.jsx("p",{className:"muted",style:{fontSize:"0.85rem",marginBottom:"0.5rem"},children:" "}),S.jsx("div",{style:{borderRadius:"8px",overflow:"hidden",border:"1px solid var(--border)"},children:S.jsx("img",{src:y.thumbnail,alt:"Evidence",style:{width:"100%",display:"block"}})})]}),S.jsxs("div",{className:"form-grid",children:[S.jsxs("div",{children:[S.jsx("p",{className:"muted",style:{fontSize:"0.85rem",marginBottom:"0.25rem"},children:""}),S.jsx("p",{style:{margin:0},children:y.reporter||""})]}),S.jsxs("div",{children:[S.jsx("p",{className:"muted",style:{fontSize:"0.85rem",marginBottom:"0.25rem"},children:" "}),S.jsx("span",{className:"badge badge-tag",children:y.status})]})]})]})]})})]})}const ji=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Np=[.001,0,0,.001,0,0],K1=1.35,ws={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Fr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ah="pdfjs_internal_editor_",yt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Bt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Gv={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Si={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Qu={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Zn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},oc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},_h={ERRORS:0,WARNINGS:1,INFOS:5},Ic={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},rf={moveTo:0,lineTo:1,curveTo:2,closePath:3},Yv={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let g0=_h.WARNINGS;function A8(i){Number.isInteger(i)&&(g0=i)}function w8(){return g0}function p0(i){g0>=_h.INFOS&&console.info(`Info: ${i}`)}function xt(i){g0>=_h.WARNINGS&&console.warn(`Warning: ${i}`)}function bn(i){throw new Error(i)}function Ut(i,e){i||bn(e)}function E8(i){switch(i?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Am(i,e=null,t=null){if(!i)return null;if(t&&typeof i=="string"&&(t.addDefaultProtocol&&i.startsWith("www.")&&i.match(/\./g)?.length>=2&&(i=`http://${i}`),t.tryConvertEncoding))try{i=T8(i)}catch{}const n=e?URL.parse(i,e):URL.parse(i);return E8(n)?n:null}function wm(i,e,t=!1){const n=URL.parse(i);return n?(n.hash=e,n.href):t&&Am(i,"http://example.com")?i.split("#",1)[0]+`${e?`#${e}`:""}`:""}function St(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const bl=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class XA extends bl{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Q1 extends bl{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Xf extends bl{constructor(e){super(e,"InvalidPDFException")}}class oh extends bl{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class v8 extends bl{constructor(e){super(e,"FormatError")}}class va extends bl{constructor(e){super(e,"AbortException")}}function Xv(i){(typeof i!="object"||i?.length===void 0)&&bn("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const n=[];for(let r=0;r<e;r+=t){const l=Math.min(r+t,e),u=i.subarray(r,l);n.push(String.fromCharCode.apply(null,u))}return n.join("")}function Th(i){typeof i!="string"&&bn("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function S8(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function C8(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function _8(){try{return new Function(""),!0}catch{return!1}}class yi{static get isLittleEndian(){return St(this,"isLittleEndian",C8())}static get isEvalSupported(){return St(this,"isEvalSupported",_8())}static get isOffscreenCanvasSupported(){return St(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return St(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return St(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return St(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Z1=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));class Ke{static makeHexColor(e,t,n){return`#${Z1[e]}${Z1[t]}${Z1[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const r=e[n],l=e[n+1];e[n]=r*t[0]+l*t[2]+t[4],e[n+1]=r*t[1]+l*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const r=t[0],l=t[1],u=t[2],f=t[3],y=t[4],m=t[5];for(let A=0;A<6;A+=2){const E=e[n+A],T=e[n+A+1];e[n+A]=E*r+T*u+y,e[n+A+1]=E*l+T*f+m}}static applyInverseTransform(e,t){const n=e[0],r=e[1],l=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/l,e[1]=(-n*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/l}static axialAlignedBoundingBox(e,t,n){const r=t[0],l=t[1],u=t[2],f=t[3],y=t[4],m=t[5],A=e[0],E=e[1],T=e[2],N=e[3];let M=r*A+y,R=M,L=r*T+y,k=L,P=f*E+m,j=P,U=f*N+m,G=U;if(l!==0||u!==0){const Y=l*A,V=l*T,ie=u*E,Q=u*N;M+=ie,k+=ie,L+=Q,R+=Q,P+=Y,G+=Y,U+=V,j+=V}n[0]=Math.min(n[0],M,L,R,k),n[1]=Math.min(n[1],P,U,j,G),n[2]=Math.max(n[2],M,L,R,k),n[3]=Math.max(n[3],P,U,j,G)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],r=e[1],l=e[2],u=e[3],f=n**2+r**2,y=n*l+r*u,m=l**2+u**2,A=(f+m)/2,E=Math.sqrt(A**2-(f*m-y**2));t[0]=Math.sqrt(A+E||1),t[1]=Math.sqrt(A-E||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const l=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),u=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return l>u?null:[n,l,r,u]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,r,l){l[0]=Math.min(l[0],e,n),l[1]=Math.min(l[1],t,r),l[2]=Math.max(l[2],e,n),l[3]=Math.max(l[3],t,r)}static#e(e,t,n,r,l,u,f,y,m,A){if(m<=0||m>=1)return;const E=1-m,T=m*m,N=T*m,M=E*(E*(E*e+3*m*t)+3*T*n)+N*r,R=E*(E*(E*l+3*m*u)+3*T*f)+N*y;A[0]=Math.min(A[0],M),A[1]=Math.min(A[1],R),A[2]=Math.max(A[2],M),A[3]=Math.max(A[3],R)}static#t(e,t,n,r,l,u,f,y,m,A,E,T){if(Math.abs(m)<1e-12){Math.abs(A)>=1e-12&&this.#e(e,t,n,r,l,u,f,y,-E/A,T);return}const N=A**2-4*E*m;if(N<0)return;const M=Math.sqrt(N),R=2*m;this.#e(e,t,n,r,l,u,f,y,(-A+M)/R,T),this.#e(e,t,n,r,l,u,f,y,(-A-M)/R,T)}static bezierBoundingBox(e,t,n,r,l,u,f,y,m){m[0]=Math.min(m[0],e,f),m[1]=Math.min(m[1],t,y),m[2]=Math.max(m[2],e,f),m[3]=Math.max(m[3],t,y),this.#t(e,n,l,f,t,r,u,y,3*(-e+3*(n-l)+f),6*(e-2*n+l),3*(n-e),m),this.#t(e,n,l,f,t,r,u,y,3*(-t+3*(r-u)+y),6*(t-2*r+u),3*(r-t),m)}}function T8(i){return decodeURIComponent(escape(i))}let $1=null,qA=null;function qv(i){return $1||($1=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,qA=new Map([["","t"]])),i.replaceAll($1,(e,t,n)=>t?t.normalize("NFKC"):qA.get(n))}function Em(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),Xv(i)}const vm="pdfjs_internal_id_";function I8(i,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,r,...l]=t;if(!i(n)&&!Number.isInteger(n)||!e(r))return!1;const u=l.length;let f=!0;switch(r.name){case"XYZ":if(u<2||u>3)return!1;break;case"Fit":case"FitB":return u===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(u>1)return!1;break;case"FitR":if(u!==4)return!1;f=!1;break;default:return!1}for(const y of l)if(!(typeof y=="number"||f&&y===null))return!1;return!0}function Ii(i,e,t){return Math.min(Math.max(i,e),t)}function Wv(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(Xv(i))}function N8(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):Th(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...e){return new Promise(t=>{t(i(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((e,t)=>e+t,0)});class lh{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(l){if(!l)return;let u=null;const f=l.name;if(f==="#text")u=l.value;else if(lh.shouldBuildText(f))l?.attributes?.textContent?u=l.attributes.textContent:l.value&&(u=l.value);else return;if(u!==null&&t.push({str:u}),!!l.children)for(const y of l.children)r(y)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class Sm{static setupStorage(e,t,n,r,l){const u=r.getValue(t,{value:null});switch(n.name){case"textarea":if(u.value!==null&&(e.textContent=u.value),l==="print")break;e.addEventListener("input",f=>{r.setValue(t,{value:f.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(u.value===n.attributes.xfaOn?e.setAttribute("checked",!0):u.value===n.attributes.xfaOff&&e.removeAttribute("checked"),l==="print")break;e.addEventListener("change",f=>{r.setValue(t,{value:f.target.checked?f.target.getAttribute("xfaOn"):f.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&e.setAttribute("value",u.value),l==="print")break;e.addEventListener("input",f=>{r.setValue(t,{value:f.target.value})})}break;case"select":if(u.value!==null){e.setAttribute("value",u.value);for(const f of n.children)f.attributes.value===u.value?f.attributes.selected=!0:f.attributes.hasOwnProperty("selected")&&delete f.attributes.selected}e.addEventListener("input",f=>{const y=f.target.options,m=y.selectedIndex===-1?"":y[y.selectedIndex].value;r.setValue(t,{value:m})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:l}){const{attributes:u}=t,f=e instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${r}`);for(const[y,m]of Object.entries(u))if(m!=null)switch(y){case"class":m.length&&e.setAttribute(y,m.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",m);break;case"style":Object.assign(e.style,m);break;case"textContent":e.textContent=m;break;default:(!f||y!=="href"&&y!=="newWindow")&&e.setAttribute(y,m)}f&&l.addLinkAttributes(e,u.href,u.newWindow),n&&u.dataId&&this.setupStorage(e,u.dataId,t,n)}static render(e){const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,l=e.intent||"display",u=document.createElement(r.name);r.attributes&&this.setAttributes({html:u,element:r,intent:l,linkService:n});const f=l!=="richText",y=e.div;if(y.append(u),e.viewport){const E=`matrix(${e.viewport.transform.join(",")})`;y.style.transform=E}f&&y.setAttribute("class","xfaLayer xfaFont");const m=[];if(r.children.length===0){if(r.value){const E=document.createTextNode(r.value);u.append(E),f&&lh.shouldBuildText(r.name)&&m.push(E)}return{textDivs:m}}const A=[[r,-1,u]];for(;A.length>0;){const[E,T,N]=A.at(-1);if(T+1===E.children.length){A.pop();continue}const M=E.children[++A.at(-1)[1]];if(M===null)continue;const{name:R}=M;if(R==="#text"){const k=document.createTextNode(M.value);m.push(k),N.append(k);continue}const L=M?.attributes?.xmlns?document.createElementNS(M.attributes.xmlns,R):document.createElement(R);if(N.append(L),M.attributes&&this.setAttributes({html:L,element:M,storage:t,intent:l,linkService:n}),M.children?.length>0)A.push([M,-1,L]);else if(M.value){const k=document.createTextNode(M.value);f&&lh.shouldBuildText(R)&&m.push(k),L.append(k)}}for(const E of y.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))E.setAttribute("readOnly",!0);return{textDivs:m}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const ga="http://www.w3.org/2000/svg";class gl{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Uc(i,e="text"){if(Yu(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class Ih{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:l=0,offsetY:u=0,dontFlip:f=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=l,this.offsetY=u,n*=t;const y=(e[2]+e[0])/2,m=(e[3]+e[1])/2;let A,E,T,N;switch(r%=360,r<0&&(r+=360),r){case 180:A=-1,E=0,T=0,N=1;break;case 90:A=0,E=1,T=1,N=0;break;case 270:A=0,E=-1,T=-1,N=0;break;case 0:A=1,E=0,T=0,N=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}f&&(T=-T,N=-N);let M,R,L,k;A===0?(M=Math.abs(m-e[1])*n+l,R=Math.abs(y-e[0])*n+u,L=(e[3]-e[1])*n,k=(e[2]-e[0])*n):(M=Math.abs(y-e[0])*n+l,R=Math.abs(m-e[1])*n+u,L=(e[2]-e[0])*n,k=(e[3]-e[1])*n),this.transform=[A*n,E*n,T*n,N*n,M-A*n*y-T*n*m,R-E*n*y-N*n*m],this.width=L,this.height=k}get rawDims(){const e=this.viewBox;return St(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:l=!1}={}){return new Ih({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:l})}convertToViewportPoint(e,t){const n=[e,t];return Ke.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];Ke.applyTransform(t,this.transform);const n=[e[2],e[3]];return Ke.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return Ke.applyInverseTransform(n,this.transform),n}}class m0 extends bl{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Nh(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function y0(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function Kv(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function Qv(i,e="document.pdf"){if(typeof i!="string")return e;if(Nh(i))return xt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(f=>{try{return new URL(f)}catch{try{return new URL(decodeURIComponent(f))}catch{try{return new URL(f,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(f),"https://foo.bar")}catch{return null}}}}})(i);if(!n)return e;const r=f=>{try{let y=decodeURIComponent(f);return y.includes("/")?(y=y.split("/").at(-1),y.test(/^\.pdf$/i)?y:f):y}catch{return f}},l=/\.pdf$/i,u=n.pathname.split("/").at(-1);if(l.test(u))return r(u);if(n.searchParams.size>0){const f=Array.from(n.searchParams.values()).reverse();for(const m of f)if(l.test(m))return r(m);const y=Array.from(n.searchParams.keys()).reverse();for(const m of y)if(l.test(m))return r(m)}if(n.hash){const y=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(y)return r(y[0])}return e}class WA{started=Object.create(null);times=[];time(e){e in this.started&&xt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||xt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:l}of this.times)e.push(`${n.padEnd(t)} ${l-r}ms
`);return e.join("")}}function Yu(i,e){const t=e?URL.parse(i,e):URL.parse(i);return t?.protocol==="http:"||t?.protocol==="https:"}function _s(i){i.preventDefault()}function Bn(i){i.preventDefault(),i.stopPropagation()}function R8(i){console.log("Deprecated API usage: "+i)}class qf{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let l=parseInt(t[3],10);l=l>=1&&l<=31?l:1;let u=parseInt(t[4],10);u=u>=0&&u<=23?u:0;let f=parseInt(t[5],10);f=f>=0&&f<=59?f:0;let y=parseInt(t[6],10);y=y>=0&&y<=59?y:0;const m=t[7]||"Z";let A=parseInt(t[8],10);A=A>=0&&A<=23?A:0;let E=parseInt(t[9],10)||0;return E=E>=0&&E<=59?E:0,m==="-"?(u+=A,f+=E):m==="+"&&(u-=A,f-=E),new Date(Date.UTC(n,r,l,u,f,y))}}function Zv(i,{scale:e=1,rotation:t=0}){const{width:n,height:r}=i.attributes.style,l=[0,0,parseInt(n),parseInt(r)];return new Ih({viewBox:l,userUnit:1,scale:e,rotation:t})}function zc(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(xt(`Not a valid color format: "${i}"`),[0,0,0])}function M8(i){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of i.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;i.set(t,zc(n))}e.remove()}function Pn(i){const{a:e,b:t,c:n,d:r,e:l,f:u}=i.getTransform();return[e,t,n,r,l,u]}function Mr(i){const{a:e,b:t,c:n,d:r,e:l,f:u}=i.getTransform().invertSelf();return[e,t,n,r,l,u]}function _o(i,e,t=!1,n=!0){if(e instanceof Ih){const{pageWidth:r,pageHeight:l}=e.rawDims,{style:u}=i,f=yi.isCSSRoundSupported,y=`var(--total-scale-factor) * ${r}px`,m=`var(--total-scale-factor) * ${l}px`,A=f?`round(down, ${y}, var(--scale-round-x))`:`calc(${y})`,E=f?`round(down, ${m}, var(--scale-round-y))`:`calc(${m})`;!t||e.rotation%180===0?(u.width=A,u.height=E):(u.width=E,u.height=A)}n&&i.setAttribute("data-main-rotation",e.rotation)}class ur{constructor(){const{pixelRatio:e}=ur;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,r,l=-1){let u=1/0,f=1/0,y=1/0;n=ur.capPixels(n,l),n>0&&(u=Math.sqrt(n/(e*t))),r!==-1&&(f=r/e,y=r/t);const m=Math.min(u,f,y);return this.sx>m||this.sy>m?(this.sx=m,this.sy=m,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const Wf=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class D8{static get isDarkMode(){return St(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class $v{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),St(this,"commentForegroundColor",zc(n))}}function Jv(i,e,t,n){n=Math.min(Math.max(n??1,0),1);const r=255*(1-n);return i=Math.round(i*n+r),e=Math.round(e*n+r),t=Math.round(t*n+r),[i,e,t]}function KA(i,e){const t=i[0]/255,n=i[1]/255,r=i[2]/255,l=Math.max(t,n,r),u=Math.min(t,n,r),f=(l+u)/2;if(l===u)e[0]=e[1]=0;else{const y=l-u;switch(e[1]=f<.5?y/(l+u):y/(2-l-u),l){case t:e[0]=((n-r)/y+(n<r?6:0))*60;break;case n:e[0]=((r-t)/y+2)*60;break;case r:e[0]=((t-n)/y+4)*60;break}}e[2]=f}function Rp(i,e){const t=i[0],n=i[1],r=i[2],l=(1-Math.abs(2*r-1))*n,u=l*(1-Math.abs(t/60%2-1)),f=r-l/2;switch(Math.floor(t/60)){case 0:e[0]=l+f,e[1]=u+f,e[2]=f;break;case 1:e[0]=u+f,e[1]=l+f,e[2]=f;break;case 2:e[0]=f,e[1]=l+f,e[2]=u+f;break;case 3:e[0]=f,e[1]=u+f,e[2]=l+f;break;case 4:e[0]=u+f,e[1]=f,e[2]=l+f;break;case 5:case 6:e[0]=l+f,e[1]=f,e[2]=u+f;break}}function QA(i){return i<=.03928?i/12.92:((i+.055)/1.055)**2.4}function ZA(i,e,t){Rp(i,t),t.map(QA);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];Rp(e,t),t.map(QA);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)}const $A=new Map;function eS(i,e){const t=i[0]+i[1]*256+i[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=$A.get(t);if(n)return n;const r=new Float32Array(9),l=r.subarray(0,3),u=r.subarray(3,6);KA(i,u);const f=r.subarray(6,9);KA(e,f);const y=f[2]<.5,m=y?12:4.5;if(u[2]=y?Math.sqrt(u[2]):1-Math.sqrt(1-u[2]),ZA(u,f,l)<m){let A,E;y?(A=u[2],E=1):(A=0,E=u[2]);const T=.005;for(;E-A>T;){const N=u[2]=(A+E)/2;y===ZA(u,f,l)<m?A=N:E=N}u[2]=y?E:A}return Rp(u,l),n=Ke.makeHexColor(Math.round(l[0]*255),Math.round(l[1]*255),Math.round(l[2]*255)),$A.set(t,n),n}function Cm({html:i,dir:e,className:t},n){const r=document.createDocumentFragment();if(typeof i=="string"){const l=document.createElement("p");l.dir=e||"auto";const u=i.split(/(?:\r\n?|\n)/);for(let f=0,y=u.length;f<y;++f){const m=u[f];l.append(document.createTextNode(m)),f<y-1&&l.append(document.createElement("br"))}r.append(l)}else Sm.render({xfaHtml:i,div:r,intent:"richText"});r.firstChild.classList.add("richText",t),n.append(r)}class Zu{#e=null;#t=null;#n;#i=null;#s=null;#r=null;#a=null;#o=null;static#c=null;constructor(e){this.#n=e,Zu.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",_s,{signal:t}),e.addEventListener("pointerdown",Zu.#l,{signal:t}));const n=this.#i=document.createElement("div");n.className="buttons",e.append(n);const r=this.#n.toolbarPosition;if(r){const{style:l}=e,u=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];l.insetInlineEnd=`${100*u}%`,l.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#d(e){this.#n._focusEventsAllowed=!1,Bn(e)}#h(e){this.#n._focusEventsAllowed=!0,Bn(e)}#f(e){const t=this.#n._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",_s,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#s?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#n,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",Zu.#c[e]),this.#f(n)&&n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),this.#i.append(n)}get#m(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#i.append(t,this.#m),this.#s=e}addComment(e,t=null){if(this.#r)return;const n=e.renderForToolbar();if(!n)return;this.#f(n);const r=this.#a=this.#m;t?(this.#i.insertBefore(n,t),this.#i.insertBefore(r,t)):this.#i.append(n,r),this.#r=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#i.append(t,this.#m)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#n);this.#f(t),this.#i.append(t,this.#m)}removeButton(e){switch(e){case"comment":this.#r?.removeToolbarCommentButton(),this.#r=null,this.#a?.remove(),this.#a=null;break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,n){const r=this.#i.querySelector(n);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class O8{#e=null;#t=null;#n;constructor(e){this.#n=e}#i(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#n._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",_s,{signal:t});const n=this.#e=document.createElement("div");return n.className="buttons",e.append(n),this.#n.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),e}#s(e,t){let n=0,r=0;for(const l of e){const u=l.y+l.height;if(u<n)continue;const f=l.x+(t?l.width:0);if(u>n){r=f,n=u;continue}t?f>r&&(r=f):f<r&&(r=f)}return[t?1-r:r,n]}show(e,t,n){const[r,l]=this.#s(t,n),{style:u}=this.#t||=this.#i();e.append(this.#t),u.insetInlineEnd=`${100*r}%`,u.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#r(e,t,n,r){const l=document.createElement("button");l.classList.add("basic",e),l.tabIndex=0,l.setAttribute("data-l10n-id",t);const u=document.createElement("span");l.append(u),u.className="visuallyHidden",u.setAttribute("data-l10n-id",n);const f=this.#n._signal;f instanceof AbortSignal&&!f.aborted&&(l.addEventListener("contextmenu",_s,{signal:f}),l.addEventListener("click",r,{signal:f})),this.#e.append(l)}}function tS(i,e,t){for(const n of t)e.addEventListener(n,i[n].bind(i))}class L8{#e=0;get id(){return`${ah}${this.#e++}`}}class _m{#e=Em();#t=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const l=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return St(this,"_isSVGFittingCanvas",l)}async#i(e,t){this.#n||=new Map;let n=this.#n.get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let r;if(typeof t=="string"?(n.url=t,r=await Uc(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const l=_m._isSVGFittingCanvas,u=new FileReader,f=new Image,y=new Promise((m,A)=>{f.onload=()=>{n.bitmap=f,n.isSvg=!0,m()},u.onload=async()=>{const E=n.svgUrl=u.result;f.src=await l?`${E}#svgView(preserveAspectRatio(none))`:E},f.onerror=u.onerror=A});u.readAsDataURL(r),await y}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){xt(r),n=null}return this.#n.set(e,n),n&&this.#n.set(n.id,n),n}async getFromFile(e){const{lastModified:t,name:n,size:r,type:l}=e;return this.#i(`${t}_${n}_${r}_${l}`,e)}async getFromUrl(e){return this.#i(e,e)}async getFromBlob(e,t){const n=await t;return this.#i(e,n)}async getFromId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#n||=new Map;let n=this.#n.get(e);if(n?.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,n),this.#n.set(n.id,n),n}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=r.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class k8{#e=[];#t=!1;#n;#i=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:n,mustExec:r,type:l=NaN,overwriteIfSameType:u=!1,keepUndo:f=!1}){if(r&&e(),this.#t)return;const y={cmd:e,undo:t,post:n,type:l};if(this.#i===-1){this.#e.length>0&&(this.#e.length=0),this.#i=0,this.#e.push(y);return}if(u&&this.#e[this.#i].type===l){f&&(y.undo=this.#e[this.#i].undo),this.#e[this.#i]=y;return}const m=this.#i+1;m===this.#n?this.#e.splice(0,1):(this.#i=m,m<this.#e.length&&this.#e.splice(m)),this.#e.push(y)}undo(){if(this.#i===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1,this.#i-=1}redo(){if(this.#i<this.#e.length-1){this.#i+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#e.length-1}cleanType(e){if(this.#i!==-1){for(let t=this.#i;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#i-t),this.#i=t;return}this.#e.length=0,this.#i=-1}}destroy(){this.#e=null}}class Rh{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=yi.platform;for(const[n,r,l={}]of e)for(const u of n){const f=u.startsWith("mac+");t&&f?(this.callbacks.set(u.slice(4),{callback:r,options:l}),this.allKeys.add(u.split("+").at(-1))):!t&&!f&&(this.callbacks.set(u,{callback:r,options:l}),this.allKeys.add(u.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(this.#e(t));if(!n)return;const{callback:r,options:{bubbles:l=!1,args:u=[],checker:f=null}}=n;f&&!f(e,t)||(r.bind(e,...u,t)(),l||Bn(t))}}class Tm{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return M8(e),St(this,"_colors",e)}convert(e){const t=zc(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((l,u)=>l===t[u]))return Tm._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Ke.makeHexColor(...t):e}}class Sa{#e=new AbortController;#t=null;#n=null;#i=new Map;#s=new Map;#r=null;#a=null;#o=null;#c=new k8;#l=null;#d=null;#h=null;#f=0;#m=new Set;#g=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#b=!1;#x=!1;#C=null;#v=null;#A=null;#T=null;#E=!1;#S=null;#R=new L8;#I=!1;#N=!1;#B=!1;#D=null;#L=null;#F=null;#k=null;#G=null;#_=yt.NONE;#w=new Set;#O=null;#j=null;#z=null;#q=null;#X=null;#W={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#P=null;#Y=null;#$=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Sa.prototype,t=u=>u.#Y.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),n=(u,{target:f})=>{if(f instanceof HTMLInputElement){const{type:y}=f;return y!=="text"&&y!=="number"}return!0},r=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return St(this,"_keyboardManager",new Rh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(u,{target:f})=>!(f instanceof HTMLButtonElement)&&u.#Y.contains(f)&&!u.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(u,{target:f})=>!(f instanceof HTMLButtonElement)&&u.#Y.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-l,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[l,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-l],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,l],checker:t}]]))}constructor(e,t,n,r,l,u,f,y,m,A,E,T,N,M,R,L){const k=this._signal=this.#e.signal;this.#Y=e,this.#$=t,this.#J=n,this.#r=r,this.#l=l,this.#j=u,this.#X=y,this._eventBus=f,f._on("editingaction",this.onEditingAction.bind(this),{signal:k}),f._on("pagechanging",this.onPageChanging.bind(this),{signal:k}),f._on("scalechanging",this.onScaleChanging.bind(this),{signal:k}),f._on("rotationchanging",this.onRotationChanging.bind(this),{signal:k}),f._on("setpreference",this.onSetPreference.bind(this),{signal:k}),f._on("switchannotationeditorparams",P=>this.updateParams(P.type,P.value),{signal:k}),window.addEventListener("pointerdown",()=>{this.#N=!0},{capture:!0,signal:k}),window.addEventListener("pointerup",()=>{this.#N=!1},{capture:!0,signal:k}),this.#le(),this.#de(),this.#te(),this.#a=y.annotationStorage,this.#C=y.filterFactory,this.#z=m,this.#T=A||null,this.#y=E,this.#b=T,this.#x=N,this.#G=M||null,this.viewParameters={realScale:gl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=R||null,this._supportsPinchToZoom=L!==!1,l?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#s.values())e.destroy();this.#s.clear(),this.#i.clear(),this.#p.clear(),this.#k?.clear(),this.#t=null,this.#w.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#j?.destroy(),this.#S?.hide(),this.#S=null,this.#F?.destroy(),this.#F=null,this.#n=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#G}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#x}get hcmFilter(){return St(this,"hcmFilter",this.#z?this.#C.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return St(this,"direction",getComputedStyle(this.#Y).direction)}get _highlightColors(){return St(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return St(this,"highlightColors",null);const t=new Map,n=!!this.#z;for(const[r,l]of e){const u=r.endsWith("_HCM");if(n&&u){t.set(r.replace("_HCM",""),l);continue}!n&&!u&&t.set(r,l)}return St(this,"highlightColors",t)}get highlightColorNames(){return St(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=e}setMainHighlightColorPicker(e){this.#F=e}editAltText(e,t=!1){this.#r?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,n,r){this.#l?.showDialog(this,e,t,n,r)}selectComment(e,t){this.#s.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,n=void 0){this.#l?.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#s.has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),r=l=>{l.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await n}getSignature(e){this.#j?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#j}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#x=t;break}}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#Y.focus()}findParent(e,t){for(const n of this.#s.values()){const{x:r,y:l,width:u,height:f}=n.div.getBoundingClientRect();if(e>=r&&e<=r+u&&t>=l&&t<=l+f)return n}return null}disableUserSelect(e=!1){this.#$.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*gl.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Z({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of this.#s.values())if(n.hasTextLayer(e))return n;return null}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:l,focusNode:u,focusOffset:f}=n,y=n.toString(),A=this.#Z(n).closest(".textLayer"),E=this.getSelectionBoxes(A);if(!E)return;n.empty();const T=this.#ee(A),N=this.#_===yt.NONE,M=()=>{const R=T?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:E,anchorNode:r,anchorOffset:l,focusNode:u,focusOffset:f,text:y});N&&this.showAllEditors("highlight",!0,!0),t&&R?.editComment()};if(N){this.switchToMode(yt.HIGHLIGHT,M);return}M()}commentSelection(e=""){this.highlightSelection(e,!0)}#ae(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=this.#Z(e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(this.#S||=new O8(this),this.#S.show(n,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#a)return null;const t=`${ah}${e}`,n=this.#a.getRawValue(t);return n&&this.#a.remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&this.#a&&!this.#a.has(e.id)&&this.#a.setValue(e.id,e)}a11yAlert(e,t=null){const n=this.#J;n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}#oe(){const e=document.getSelection();if(!e||e.isCollapsed){this.#O&&(this.#S?.hide(),this.#O=null,this.#M({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#O)return;const r=this.#Z(e).closest(".textLayer");if(!r){this.#O&&(this.#S?.hide(),this.#O=null,this.#M({hasSelectedText:!1}));return}if(this.#S?.hide(),this.#O=t,this.#M({hasSelectedText:!0}),!(this.#_!==yt.HIGHLIGHT&&this.#_!==yt.NONE)&&(this.#_===yt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){const l=this.#_===yt.HIGHLIGHT?this.#ee(r):null;if(l?.toggleDrawing(),this.#N){const u=new AbortController,f=this.combinedSignal(u),y=m=>{m.type==="pointerup"&&m.button!==0||(u.abort(),l?.toggleDrawing(!0),m.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",y,{signal:f}),window.addEventListener("blur",y,{signal:f})}else l?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(e=""){this.#_===yt.HIGHLIGHT?this.highlightSelection(e):this.#y&&this.#ae()}#le(){document.addEventListener("selectionchange",this.#oe.bind(this),{signal:this._signal})}#ce(){if(this.#A)return;this.#A=new AbortController;const e=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ue(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#w)if(t.div.contains(e)){this.#L=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[e,t]=this.#L;this.#L=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#D)return;this.#D=new AbortController;const e=this.combinedSignal(this.#D);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#he(){this.#D?.abort(),this.#D=null}#ne(){if(this.#d)return;this.#d=new AbortController;const e=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#ie(){this.#d?.abort(),this.#d=null}#de(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.#ne()}removeEditListeners(){this.#he(),this.#ie()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const n of this.#w){const r=n.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const l of t.items)for(const u of this.#u)if(u.isHandlingMimeForPasting(l.type)){u.paste(l,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(l){xt(`paste: "${l.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const l=[];for(const y of n){const m=await r.deserialize(y);if(!m)return;l.push(m)}const u=()=>{for(const y of l)this.#se(y);this.#re(l)},f=()=>{for(const y of l)y.remove()};this.addCommands({cmd:u,undo:f,mustExec:!0})}catch(l){xt(`paste: "${l.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#_!==yt.NONE&&!this.isEditorHandlingKeyboard&&Sa._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#K("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#M(e){Object.entries(e).some(([n,r])=>this.#W[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#W,e)}),this.#_===yt.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#V([[Bt.HIGHLIGHT_FREE,!0]]))}#V(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ce(),this.#ne(),this.#M({isEditing:this.#_!==yt.NONE,isEmpty:this.#Q(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ue(),this.#ie(),this.#M({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#u){this.#u=e;for(const t of this.#u)this.#V(t.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#s.get(this.#f)}getLayer(e){return this.#s.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#s.set(e.pageIndex,e),this.#I?e.enable():e.disable()}removeLayer(e){this.#s.delete(e.pageIndex)}async updateMode(e,t=null,n=!1,r=!1,l=!1){if(this.#_!==e&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#_===yt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#_=e,e===yt.NONE){this.setEditingState(!1),this.#ge();for(const u of this.#i.values())u.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const u of this.#i.values())u.addStandaloneCommentButton();e===yt.SIGNATURE&&await this.#j?.loadSignatures(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const u of this.#s.values())u.updateMode(e);if(e===yt.POPUP){this.#n||=await this.#X.getAnnotationsByType(new Set(this.#u.map(y=>y._editorType)));const u=new Set,f=[];for(const y of this.#i.values()){const{annotationElementId:m,hasComment:A,deleted:E}=y;m&&u.add(m),A&&!E&&f.push(y.getData())}for(const y of this.#n){const{id:m,popupRef:A,contentsObj:E}=y;A&&E?.str&&!u.has(m)&&!this.#m.has(m)&&f.push(y)}this.#l?.showSidebar(f)}if(!t){n&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const u of this.#i.values())u.uid===t?(this.setSelected(u),l?u.editComment():r?u.enterInEditMode():u.focus()):u.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#u){switch(e){case Bt.CREATE:this.currentLayer.addNewEditor(t);return;case Bt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of this.#w)n.updateParams(e,t);else for(const n of this.#u)n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){for(const l of this.#i.values())l.editorType===e&&l.show(t);(this.#q?.get(Bt.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#V([[Bt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#B!==e){this.#B=e;for(const t of this.#s.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#I){this.#I=!0;const e=[];for(const t of this.#s.values())e.push(t.enable());await Promise.all(e);for(const t of this.#i.values())t.enable()}}#ge(){if(this.unselectAll(),this.#I){this.#I=!1;for(const e of this.#s.values())e.disable();for(const e of this.#i.values())e.disable()}}*getEditors(e){for(const t of this.#i.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#i.get(e)}addEditor(e){this.#i.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#i.delete(e.id),e.annotationElementId&&this.#k?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#m.has(e.annotationElementId))&&this.#a?.remove(e.id)}addDeletedAnnotationElement(e){this.#m.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#m.has(e)}removeDeletedAnnotationElement(e){this.#m.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#se(e){const t=this.#s.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#V(e.propertiesToUpdate))}get#pe(){let e=null;for(e of this.#w);return e}updateUI(e){this.#pe===e&&this.#V(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#V(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#M({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#h?.commitOrRemove();for(const t of this.#w)t!==e&&t.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#M({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#M({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Q()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#Q()})}addCommands(e){this.#c.add(e),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Q()})}cleanUndoStack(e){this.#c.cleanType(e)}#Q(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const e of this.#i.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#w],n=()=>{this._editorUndoBar?.show(r,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},r=()=>{for(const l of t)this.#se(l)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#re(e){for(const t of this.#w)t.unselect();this.#w.clear();for(const t of e)t.isEmpty()||(this.#w.add(t),t.select());this.#M({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#re(this.#i.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#_!==yt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#M({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=e,this.#H[1]+=t;const[r,l]=this.#H,u=[...this.#w],f=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const y of u)this.#i.has(y.id)&&(y.translateInPage(r,l),y.translationDone())},undo:()=>{for(const y of u)this.#i.has(y.id)&&(y.translateInPage(-r,-l),y.translationDone())},mustExec:!1})},f);for(const y of u)y.translateInPage(e,t),y.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const e of this.#w)this.#g.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const e=this.#g;this.#g=null;let t=!1;for(const[{x:r,y:l,pageIndex:u},f]of e)f.newX=r,f.newY=l,f.newPageIndex=u,t||=r!==f.savedX||l!==f.savedY||u!==f.savedPageIndex;if(!t)return!1;const n=(r,l,u,f)=>{if(this.#i.has(r.id)){const y=this.#s.get(f);y?r._setParentAndPosition(y,l,u):(r.pageIndex=f,r.x=l,r.y=u)}};return this.addCommands({cmd:()=>{for(const[r,{newX:l,newY:u,newPageIndex:f}]of e)n(r,l,u,f)},undo:()=>{for(const[r,{savedX:l,savedY:u,savedPageIndex:f}]of e)n(r,l,u,f)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#g)for(const n of this.#g.keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#_}isEditingMode(){return this.#_!==yt.NONE}get imageManager(){return St(this,"imageManager",new _m)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let m=0,A=t.rangeCount;m<A;m++)if(!e.contains(t.getRangeAt(m).commonAncestorContainer))return null;const{x:n,y:r,width:l,height:u}=e.getBoundingClientRect();let f;switch(e.getAttribute("data-main-rotation")){case"90":f=(m,A,E,T)=>({x:(A-r)/u,y:1-(m+E-n)/l,width:T/u,height:E/l});break;case"180":f=(m,A,E,T)=>({x:1-(m+E-n)/l,y:1-(A+T-r)/u,width:E/l,height:T/u});break;case"270":f=(m,A,E,T)=>({x:1-(A+T-r)/u,y:(m-n)/l,width:T/u,height:E/l});break;default:f=(m,A,E,T)=>({x:(m-n)/l,y:(A-r)/u,width:E/l,height:T/u});break}const y=[];for(let m=0,A=t.rangeCount;m<A;m++){const E=t.getRangeAt(m);if(!E.collapsed)for(const{x:T,y:N,width:M,height:R}of E.getClientRects())M===0||R===0||y.push(f(T,N,M,R))}return y.length===0?null:y}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#o||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const t=this.#o?.get(e.data.id);if(!t)return;const n=this.#a.getRawValue(t);n&&(this.#_===yt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){const r=this.#k?.get(e);r&&(r.setCanvas(t,n),this.#k.delete(e))}addMissingCanvas(e,t){(this.#k||=new Map).set(e,t)}}class Pr{#e=null;#t=!1;#n=null;#i=null;#s=null;#r=null;#a=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#h=e._uiManager.useNewAltTextFlow,Pr.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Pr._l10n??=e}async render(){const e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#i=document.createElement("span");e.append(t),this.#h?(e.classList.add("new"),e.setAttribute("data-l10n-id",Pr.#f.missing),t.setAttribute("data-l10n-id",Pr.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#c._uiManager._signal;e.addEventListener("contextmenu",_s,{signal:n}),e.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:n});const r=l=>{l.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",l=>{l.target===e&&l.key==="Enter"&&(this.#a=!0,r(l))},{signal:n}),await this.#g(),e}get#m(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#h?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#d=await Pr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#g())}toggleAltTextBadge(e=!1){if(!this.#h||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#d),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:l=!1}){n&&(this.#l=n,this.#d=r),!(this.#e===e&&this.#t===t)&&(l||(this.#e=e,this.#t=t),this.#g())}toggle(e=!1){this.#n&&(!e&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#s=null,this.#o?.remove(),this.#o=null}async#g(){const e=this.#n;if(!e)return;if(this.#h){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Pr.#f[this.#m]),this.#i?.setAttribute("data-l10n-id",Pr.#f[`${this.#m}-label`]),!this.#e){this.#s?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#s?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#s;if(!t){this.#s=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const r=100,l=this.#c._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#s.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:l}),e.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#s?.classList.remove("show")},{signal:l})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class af{#e=null;#t=null;#n=!1;#i=null;#s=null;#r=null;#a=null;#o=null;#c=!1;#l=null;constructor(e){this.#i=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#d(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#i.commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=this.#i.commentButtonColor;r&&(n.backgroundColor=r)}return this.#d(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#i.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:n}=this.#e.getBoundingClientRect(),{x:r,y:l,width:u,height:f}=this.#i.parent.boundingClientRect;return[(e-r)/u,(t+n-l)/f]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#d(e,t){if(!this.#i._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=this.#i._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",_s,{signal:n}),t&&(e.addEventListener("focusin",l=>{this.#i._focusEventsAllowed=!1,Bn(l)},{capture:!0,signal:n}),e.addEventListener("focusout",l=>{this.#i._focusEventsAllowed=!0,Bn(l)},{capture:!0,signal:n})),e.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:n});const r=l=>{l.preventDefault(),e===this.#t?this.edit():this.#i.toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",l=>{l.target===e&&l.key==="Enter"&&(this.#n=!0,r(l))},{signal:n}),e.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:n}),e}edit(e){const t=this.commentPopupPositionInLayer;let n,r;if(t)[n,r]=t;else{[n,r]=this.#i.commentButtonPosition;const{width:A,height:E,x:T,y:N}=this.#i;n=T+n*A,r=N+r*E}const l=this.#i.parent.boundingClientRect,{x:u,y:f,width:y,height:m}=l;this.#i._uiManager.editComment(this.#i,u+n*y,f+r*m,{...e,parentDimensions:l})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#s}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#a&&(this.#r=null),e===null){this.#a="",this.#c=!0;return}this.#a=e,this.#o=new Date,this.#c=!1}setInitialText(e,t=null){this.#s=e,this.data=e,this.#o=null,this.#r=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#a="",this.#r=null,this.#o=null,this.#i=null,this.#n=!1,this.#c=!1}}class Mh{#e;#t=!1;#n=null;#i;#s;#r;#a;#o=null;#c;#l=null;#d;#h=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:l=null,onPinchEnd:u=null,signal:f}){this.#e=e,this.#n=n,this.#i=t,this.#s=r,this.#r=l,this.#a=u,this.#d=new AbortController,this.#c=AbortSignal.any([f,this.#d.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ur.pixelRatio}#f(e){if(this.#i?.())return;if(e.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,l=AbortSignal.any([this.#c,r.signal]),u=this.#e,f={capture:!0,signal:l,passive:!1},y=m=>{m.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};u.addEventListener("pointerdown",m=>{m.pointerType==="touch"&&(Bn(m),y(m))},f),u.addEventListener("pointerup",y,f),u.addEventListener("pointercancel",y,f);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),l=this.#e,u={signal:r,capture:!1,passive:!1};l.addEventListener("touchmove",this.#m.bind(this),u);const f=this.#g.bind(this);l.addEventListener("touchend",f,u),l.addEventListener("touchcancel",f,u),u.capture=!0,l.addEventListener("pointerdown",Bn,u),l.addEventListener("pointermove",Bn,u),l.addEventListener("pointercancel",Bn,u),l.addEventListener("pointerup",Bn,u),this.#s?.()}if(Bn(e),e.touches.length!==2||this.#n?.()){this.#l=null;return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#m(e){if(!this.#l||e.touches.length!==2)return;Bn(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:l}=t,{screenX:u,screenY:f}=n,y=this.#l,{touch0X:m,touch0Y:A,touch1X:E,touch1Y:T}=y,N=E-m,M=T-A,R=u-r,L=f-l,k=Math.hypot(R,L)||1,P=Math.hypot(N,M)||1;if(!this.#t&&Math.abs(P-k)<=Mh.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(y.touch0X=r,y.touch0Y=l,y.touch1X=u,y.touch1Y=f,!this.#t){this.#t=!0;return}const j=[(r+u)/2,(l+f)/2];this.#r?.(j,P,k)}#g(e){e.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#l&&(Bn(e),this.#l=null,this.#t=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class it{#e=null;#t=null;#n=null;#i=null;#s=null;#r=!1;#a=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#g=!1;#u=null;#p=!1;#y=!1;#b=!1;#x=null;#C=0;#v=0;#A=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#E=!1;#S=it._zIndex++;static _borderLineWidth=-1;static _colorManager=new Tm;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=it.prototype._resizeWithKeyboard,t=Sa.TRANSLATE_SMALL,n=Sa.TRANSLATE_BIG;return St(this,"_resizerKeyboardManager",new Rh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],it.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:l,pageY:u}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[l,u];const[f,y]=this.parentDimensions;this.x=e.x/f,this.y=e.y/y,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return St(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new P8({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(it._l10n??=e,it._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),it._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);it._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){bn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#E}set _isDraggable(e){this.#E=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#S}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[l,u]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/l,this.y=(t+r)/u,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this._onTranslated()}#R([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#R(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#u||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[r,l]}=this;if(this.x+=e/r,this.y+=t/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:E,y:T}=this.div.getBoundingClientRect();this.parent.findNewParent(this,E,T)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:f}=this;const[y,m]=this.getBaseTranslation();u+=y,f+=m;const{style:A}=n;A.left=`${(100*u).toFixed(2)}%`,A.top=`${(100*f).toFixed(2)}%`,this._onTranslating(u,f),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=it,r=n/e,l=n/t;switch(this.rotation){case 90:return[-r,l];case 180:return[r,l];case 270:return[r,-l];default:return[-r,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:l,y:u,width:f,height:y}=this;if(f*=n,y*=r,l*=n,u*=r,this._mustFixPosition)switch(e){case 0:l=Ii(l,0,n-f),u=Ii(u,0,r-y);break;case 90:l=Ii(l,0,n-y),u=Ii(u,f,r);break;case 180:l=Ii(l,f,n),u=Ii(u,y,r);break;case 270:l=Ii(l,y,n),u=Ii(u,0,r-f);break}this.x=l/=n,this.y=u/=r;const[m,A]=this.getBaseTranslation();l+=m,u+=A,t.left=`${(100*l).toFixed(2)}%`,t.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}static#I(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return it.#I(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return it.#I(e,t,360-this.parentRotation)}#N(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#B(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",this.#D.bind(this,n),{signal:t}),r.addEventListener("contextmenu",_s,{signal:t}),r.tabIndex=-1}this.div.prepend(this.#c)}#D(e,t){t.preventDefault();const{isMac:n}=yi.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const l=new AbortController,u=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#k.bind(this,e),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",Bn,{passive:!1,signal:u}),window.addEventListener("contextmenu",_s,{signal:u}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const f=this.parent.div.style.cursor,y=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const m=()=>{l.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=f,this.div.style.cursor=y,this.#F()};window.addEventListener("pointerup",m,{signal:u}),window.addEventListener("blur",m,{signal:u})}#L(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=this.#d;this.#d=null;const l=this.x,u=this.y,f=this.width,y=this.height;l===e&&u===t&&f===n&&y===r||this.addCommands({cmd:this.#L.bind(this,l,u,f,y),undo:this.#L.bind(this,e,t,n,r),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#k(e,t){const[n,r]=this.parentDimensions,l=this.x,u=this.y,f=this.width,y=this.height,m=it.MIN_SIZE/n,A=it.MIN_SIZE/r,E=this.#N(this.rotation),T=(K,re)=>[E[0]*K+E[2]*re,E[1]*K+E[3]*re],N=this.#N(360-this.rotation),M=(K,re)=>[N[0]*K+N[2]*re,N[1]*K+N[3]*re];let R,L,k=!1,P=!1;switch(e){case"topLeft":k=!0,R=(K,re)=>[0,0],L=(K,re)=>[K,re];break;case"topMiddle":R=(K,re)=>[K/2,0],L=(K,re)=>[K/2,re];break;case"topRight":k=!0,R=(K,re)=>[K,0],L=(K,re)=>[0,re];break;case"middleRight":P=!0,R=(K,re)=>[K,re/2],L=(K,re)=>[0,re/2];break;case"bottomRight":k=!0,R=(K,re)=>[K,re],L=(K,re)=>[0,0];break;case"bottomMiddle":R=(K,re)=>[K/2,re],L=(K,re)=>[K/2,0];break;case"bottomLeft":k=!0,R=(K,re)=>[0,re],L=(K,re)=>[K,0];break;case"middleLeft":P=!0,R=(K,re)=>[0,re/2],L=(K,re)=>[K,re/2];break}const j=R(f,y),U=L(f,y);let G=T(...U);const Y=it._round(l+G[0]),V=it._round(u+G[1]);let ie=1,Q=1,be,we;if(t.fromKeyboard)({deltaX:be,deltaY:we}=t);else{const{screenX:K,screenY:re}=t,[Ie,Ue]=this.#l;[be,we]=this.screenToPageTranslation(K-Ie,re-Ue),this.#l[0]=K,this.#l[1]=re}if([be,we]=M(be/n,we/r),k){const K=Math.hypot(f,y);ie=Q=Math.max(Math.min(Math.hypot(U[0]-j[0]-be,U[1]-j[1]-we)/K,1/f,1/y),m/f,A/y)}else P?ie=Ii(Math.abs(U[0]-j[0]-be),m,1)/f:Q=Ii(Math.abs(U[1]-j[1]-we),A,1)/y;const oe=it._round(f*ie),Ee=it._round(y*Q);G=T(...L(oe,Ee));const Se=Y-G[0],ae=V-G[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=oe,this.height=Ee,this.x=Se,this.y=ae,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Zu(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Pr.initialize(it._l10n),this.#n=new Pr(this),this.#e&&(this.#n.data=this.#e,this.#e=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(e){await this.#n?.setGuessedText(e)}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.#i||=new af(this)}addStandaloneCommentButton(){if(this.#s){this._uiManager.isEditingMode()&&this.#s.classList.remove("hidden");return}this.hasComment&&(this.#s=this.#i.renderForStandalone(),this.div.append(this.#s))}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#s=null}hideStandaloneCommentButton(){this.#s?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:r}}=this.#i;return{text:t,richText:e,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#i||=new af(this),this.#i.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(this.#i||=new af(this),this.#i.setInitialText(e,n),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(e){this.#i||=new af(this),this.#i.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#i.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[l]=this.pageDimensions,[u]=this.pageTranslation,f=u+l+1,y=r-100,m=f+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[f,y,m,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#i.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#r?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#z();const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[r,l]=this.getInitialTranslation();return this.translate(r,l),tS(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new Mh({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#G.bind(this),onPinching:this.#_.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#G(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#_(e,t,n){let l=.7*(n/t)+1-.7;if(l===1)return;const u=this.#N(this.rotation),f=(Y,V)=>[u[0]*Y+u[2]*V,u[1]*Y+u[3]*V],[y,m]=this.parentDimensions,A=this.x,E=this.y,T=this.width,N=this.height,M=it.MIN_SIZE/y,R=it.MIN_SIZE/m;l=Math.max(Math.min(l,1/T,1/N),M/T,R/N);const L=it._round(T*l),k=it._round(N*l);if(L===T&&k===N)return;this.#u||=[A,E,T,N];const P=f(T/2,N/2),j=it._round(A+P[0]),U=it._round(E+P[1]),G=f(L/2,k/2);this.x=j-G[0],this.y=U-G[1],this.width=L,this.height=k,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(e){const{isMac:t}=yi.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#j(e);return}this.#O(e)}#O(e){const{isMac:t}=yi.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#j(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,l=this._uiManager.combinedSignal(r),u={capture:!0,passive:!1,signal:l},f=m=>{r.abort(),this.#a=null,this.#g=!1,this._uiManager.endDragSession()||this.#O(m),n&&this._onStopDragging()};t&&(this.#C=e.clientX,this.#v=e.clientY,this.#a=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",m=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:A,clientY:E,pointerId:T}=m;if(T!==this.#a){Bn(m);return}const[N,M]=this.screenToPageTranslation(A-this.#C,E-this.#v);this.#C=A,this.#v=E,this._uiManager.dragSelectedEditors(N,M)},u),window.addEventListener("touchmove",Bn,u),window.addEventListener("pointerdown",m=>{m.pointerType===this.#o&&(this.#T||m.isPrimary)&&f(m),Bn(m)},u));const y=m=>{if(!this.#a||this.#a===m.pointerId){f(m);return}Bn(m)};window.addEventListener("pointerup",y,{signal:l}),window.addEventListener("blur",y,{signal:l})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.#x=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[l,u]=this.pageDimensions,[f,y]=this.pageTranslation,m=e/r,A=t/r,E=this.x*l,T=this.y*u,N=this.width*l,M=this.height*u;switch(n){case 0:return[E+m+f,u-T-A-M+y,E+m+N+f,u-T-A+y];case 90:return[E+A+f,u-T+m+y,E+A+M+f,u-T+m+N+y];case 180:return[E-m-N+f,u-T+A+y,E-m+f,u-T+A+M+y];case 270:return[E-A-M+f,u-T-m-N+y,E-A+f,u-T-m+y];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,l,u]=e,f=l-n,y=u-r;switch(this.rotation){case 0:return[n,t-u,f,y];case 90:return[n,t-r,y,f];case 180:return[l,t-r,f,y];case 270:return[l,t-u,y,f];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&it._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:r,deleted:l,richText:u},uid:f,pageIndex:y,creationDate:m,modificationDate:A}=this;return{id:f,pageIndex:y,rect:this.getPDFRect(),richText:u,contentsObj:{str:e},creationDate:m,modificationDate:n||A,popupRef:!l,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:l,innerWidth:u}=window;return t<u&&r>0&&e<l&&n>0}#z(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#z()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,r.#e=e.accessibilityData,r._isCopy=e.isCopy||!1;const[l,u]=r.pageDimensions,[f,y,m,A]=r.getRectInCurrentCoords(e.rect,u);return r.x=f/l,r.y=y/u,r.width=m/l,r.height=A/u,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#x&&(clearTimeout(this.#x),this.#x=null),this.#P(),this.removeEditToolbar(),this.#A){for(const e of this.#A.values())clearTimeout(e);this.#A=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#B(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,r,l,u]=this.getPDFRect();return[it._round(n+(l-n)*e),it._round(r+(u-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(e){this.#i.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#i.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const u=this.#q.bind(this),f=this.#X.bind(this),y=this._uiManager._signal;for(const m of this.#t){const A=m.getAttribute("data-resizer-name");m.setAttribute("role","spinbutton"),m.addEventListener("keydown",u,{signal:y}),m.addEventListener("blur",f,{signal:y}),m.addEventListener("focus",this.#W.bind(this,A),{signal:y}),m.setAttribute("data-l10n-id",it._l10nResizer[A])}}const n=this.#t[0];let r=0;for(const u of t){if(u===n)break;r++}const l=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(l!==r){if(l<r)for(let f=0;f<r-l;f++)this.#c.append(this.#c.firstChild);else if(l>r)for(let f=0;f<l-r;f++)this.#c.firstChild.before(this.#c.lastChild);let u=0;for(const f of t){const m=this.#t[u++].getAttribute("data-resizer-name");f.setAttribute("data-l10n-id",it._l10nResizer[m])}}this.#H(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#q(e){it._resizerKeyboardManager.exec(this,e)}#X(e){this.#b&&e.relatedTarget?.parentNode!==this.#c&&this.#P()}#W(e){this.#m=this.#b?e:""}#H(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#b&&this.#k(this.#m,{deltaX:e,deltaY:t,fromKeyboard:!0})}#P(){this.#b=!1,this.#H(-1),this.#F()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#A||=new Map;const{action:n}=e;let r=this.#A.get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),this.#A.delete(n),this.#A.size===0&&(this.#A=null)},it._telemetryTimeout),this.#A.set(n,r);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(e){if(!this.#h&&!this.deleted){this.#h=e.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class P8 extends it{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const JA=3285377520,Us=4294901760,Dr=65535;class nS{constructor(e){this.h1=e?e&4294967295:JA,this.h2=e?e&4294967295:JA}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let R=0,L=e.length;R<L;R++){const k=e.charCodeAt(R);k<=255?t[n++]=k:(t[n++]=k>>>8,t[n++]=k&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,l=n-r*4,u=new Uint32Array(t.buffer,0,r);let f=0,y=0,m=this.h1,A=this.h2;const E=3432918353,T=461845907,N=E&Dr,M=T&Dr;for(let R=0;R<r;R++)R&1?(f=u[R],f=f*E&Us|f*N&Dr,f=f<<15|f>>>17,f=f*T&Us|f*M&Dr,m^=f,m=m<<13|m>>>19,m=m*5+3864292196):(y=u[R],y=y*E&Us|y*N&Dr,y=y<<15|y>>>17,y=y*T&Us|y*M&Dr,A^=y,A=A<<13|A>>>19,A=A*5+3864292196);switch(f=0,l){case 3:f^=t[r*4+2]<<16;case 2:f^=t[r*4+1]<<8;case 1:f^=t[r*4],f=f*E&Us|f*N&Dr,f=f<<15|f>>>17,f=f*T&Us|f*M&Dr,r&1?m^=f:A^=f}this.h1=m,this.h2=A}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Us|e*36045&Dr,t=t*4283543511&Us|((t<<16|e>>>16)*2950163797&Us)>>>16,e^=t>>>1,e=e*444984403&Us|e*60499&Dr,t=t*3301882366&Us|((t<<16|e>>>16)*3120437893&Us)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Mp=Object.freeze({map:null,hash:"",transfer:void 0});class Im{#e=!1;#t=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=this.#i.get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return this.#i.get(e)}remove(e){const t=this.#i.get(e);if(t!==void 0&&(t instanceof it&&this.#n.delete(t.annotationElementId),this.#i.delete(e),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#i.values())if(n instanceof it)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=this.#i.get(e);let r=!1;if(n!==void 0)for(const[l,u]of Object.entries(t))n[l]!==u&&(r=!0,n[l]=u);else r=!0,this.#i.set(e,t);r&&this.#s(),t instanceof it&&((this.#n||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#i.has(e)}get size(){return this.#i.size}#s(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new iS(this)}get serializable(){if(this.#i.size===0)return Mp;const e=new Map,t=new nS,n=[],r=Object.create(null);let l=!1;for(const[u,f]of this.#i){const y=f instanceof it?f.serialize(!1,r):f;y&&(e.set(u,y),t.update(`${u}:${JSON.stringify(y)}`),l||=!!y.bitmap)}if(l)for(const u of e.values())u.bitmap&&n.push(u.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Mp}get editorStats(){let e=null;const t=new Map;let n=0,r=0;for(const l of this.#i.values()){if(!(l instanceof it)){l.popup&&(l.popup.deleted?r+=1:n+=1);continue}l.isCommentDeleted?r+=1:l.hasEditedComment&&(n+=1);const u=l.telemetryFinalData;if(!u)continue;const{type:f}=u;t.has(f)||t.set(f,Object.getPrototypeOf(l).constructor),e||=Object.create(null);const y=e[f]||=new Map;for(const[m,A]of Object.entries(u)){if(m==="type")continue;let E=y.get(m);E||(E=new Map,y.set(m,E));const T=E.get(A)??0;E.set(A,T+1)}}if((r>0||n>0)&&(e||=Object.create(null),e.comments={deleted:r,edited:n}),!e)return null;for(const[l,u]of t)e[l]=u.computeTelemetryFinalData(e[l]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const n=this.#n?.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#n?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#n)for(const t of this.#n.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class iS extends Im{#e;constructor(e){super();const{map:t,hash:n,transfer:r}=e.serializable,l=structuredClone(t,r?{transfer:r}:null);this.#e={map:l,hash:n,transfer:r}}get print(){bn("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return St(this,"modifiedIds",{ids:new Set,hash:""})}}class B8{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||this.#e.has(e.loadedName))){if(Ut(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:l,style:u}=e,f=new FontFace(r,l,u);this.addNativeFontFace(f);try{await f.load(),this.#e.add(r),n?.(e)}catch{xt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(f)}return}bn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw xt(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return St(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return St(this,"isSyncFontLoadingSupported",ji||yi.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ut(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const l=n.shift();setTimeout(l.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return St(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(U,G){return U.charCodeAt(G)<<24|U.charCodeAt(G+1)<<16|U.charCodeAt(G+2)<<8|U.charCodeAt(G+3)&255}function r(U,G,Y,V){const ie=U.substring(0,G),Q=U.substring(G+Y);return ie+V+Q}let l,u;const f=this._document.createElement("canvas");f.width=1,f.height=1;const y=f.getContext("2d");let m=0;function A(U,G){if(++m>30){xt("Load test font never loaded."),G();return}if(y.font="30px "+U,y.fillText(".",0,20),y.getImageData(0,0,1,1).data[3]>0){G();return}setTimeout(A.bind(null,U,G))}const E=`lt${Date.now()}${this.loadTestFontId++}`;let T=this._loadTestFont;T=r(T,976,E.length,E);const M=16,R=1482184792;let L=n(T,M);for(l=0,u=E.length-3;l<u;l+=4)L=L-R+n(E,l)|0;l<E.length&&(L=L-R+n(E+"XXX",l)|0),T=r(T,M,4,S8(L));const k=`url(data:font/opentype;base64,${btoa(T)});`,P=`@font-face {font-family:"${E}";src:${k}}`;this.insertRule(P);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const U of[e.loadedName,E]){const G=this._document.createElement("span");G.textContent="Hi",G.style.fontFamily=U,j.append(G)}this._document.body.append(j),A(E,()=>{j.remove(),t.complete()})}}class F8{#e;constructor(e,t=null,n,r){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Wv(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(u){xt(`getPathGenerator - ignoring character: "${u}".`)}const l=new Path2D(r||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=l}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}function j8(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(ji)return i;const e=URL.parse(i,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function U8(i){if(ji&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return Th(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i?.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function of(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const Dp=i=>typeof i=="object"&&Number.isInteger(i?.num)&&i.num>=0&&Number.isInteger(i?.gen)&&i.gen>=0,z8=i=>typeof i=="object"&&typeof i?.name=="string",sS=I8.bind(null,Dp,z8);class H8{#e=new Map;#t=Promise.resolve();postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[r]of this.#e)r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if(n?.signal instanceof AbortSignal){const{signal:l}=n;if(l.aborted){xt("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(e,t);r=()=>l.removeEventListener("abort",u),l.addEventListener("abort",u)}this.#e.set(t,r)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const lf={DATA:1,ERROR:2},ai={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ew(){}function es(i){if(i instanceof va||i instanceof Xf||i instanceof XA||i instanceof oh||i instanceof Q1)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||bn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new va(i.message);case"InvalidPDFException":return new Xf(i.message);case"PasswordException":return new XA(i.message,i.code);case"ResponseException":return new oh(i.message,i.status,i.missing);case"UnknownErrorException":return new Q1(i.message,i.details)}return new Q1(i.message,i.toString())}class Xu{#e=new AbortController;constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#i(e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===lf.DATA)r.resolve(e.data);else if(e.callback===lf.ERROR)r.reject(es(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,l=this.comObj;Promise.try(t,e.data).then(function(u){l.postMessage({sourceName:n,targetName:r,callback:lf.DATA,callbackId:e.callbackId,data:u})},function(u){l.postMessage({sourceName:n,targetName:r,callback:lf.ERROR,callbackId:e.callbackId,reason:es(u)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[r]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(u){l.reject(u)}return l.promise}sendWithStream(e,t,n,r){const l=this.streamId++,u=this.sourceName,f=this.targetName,y=this.comObj;return new ReadableStream({start:m=>{const A=Promise.withResolvers();return this.streamControllers[l]={controller:m,startCall:A,pullCall:null,cancelCall:null,isClosed:!1},y.postMessage({sourceName:u,targetName:f,action:e,streamId:l,data:t,desiredSize:m.desiredSize},r),A.promise},pull:m=>{const A=Promise.withResolvers();return this.streamControllers[l].pullCall=A,y.postMessage({sourceName:u,targetName:f,stream:ai.PULL,streamId:l,desiredSize:m.desiredSize}),A.promise},cancel:m=>{Ut(m instanceof Error,"cancel must have a valid reason");const A=Promise.withResolvers();return this.streamControllers[l].cancelCall=A,this.streamControllers[l].isClosed=!0,y.postMessage({sourceName:u,targetName:f,stream:ai.CANCEL,streamId:l,reason:es(m)}),A.promise}},n)}#n(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,l=this.comObj,u=this,f=this.actionHandler[e.action],y={enqueue(m,A=1,E){if(this.isCancelled)return;const T=this.desiredSize;this.desiredSize-=A,T>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:n,targetName:r,stream:ai.ENQUEUE,streamId:t,chunk:m},E)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:n,targetName:r,stream:ai.CLOSE,streamId:t}),delete u.streamSinks[t])},error(m){Ut(m instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:n,targetName:r,stream:ai.ERROR,streamId:t,reason:es(m)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};y.sinkCapability.resolve(),y.ready=y.sinkCapability.promise,this.streamSinks[t]=y,Promise.try(f,e.data,y).then(function(){l.postMessage({sourceName:n,targetName:r,stream:ai.START_COMPLETE,streamId:t,success:!0})},function(m){l.postMessage({sourceName:n,targetName:r,stream:ai.START_COMPLETE,streamId:t,reason:es(m)})})}#i(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,l=this.comObj,u=this.streamControllers[t],f=this.streamSinks[t];switch(e.stream){case ai.START_COMPLETE:e.success?u.startCall.resolve():u.startCall.reject(es(e.reason));break;case ai.PULL_COMPLETE:e.success?u.pullCall.resolve():u.pullCall.reject(es(e.reason));break;case ai.PULL:if(!f){l.postMessage({sourceName:n,targetName:r,stream:ai.PULL_COMPLETE,streamId:t,success:!0});break}f.desiredSize<=0&&e.desiredSize>0&&f.sinkCapability.resolve(),f.desiredSize=e.desiredSize,Promise.try(f.onPull||ew).then(function(){l.postMessage({sourceName:n,targetName:r,stream:ai.PULL_COMPLETE,streamId:t,success:!0})},function(m){l.postMessage({sourceName:n,targetName:r,stream:ai.PULL_COMPLETE,streamId:t,reason:es(m)})});break;case ai.ENQUEUE:if(Ut(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(e.chunk);break;case ai.CLOSE:if(Ut(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),this.#s(u,t);break;case ai.ERROR:Ut(u,"error should have stream controller"),u.controller.error(es(e.reason)),this.#s(u,t);break;case ai.CANCEL_COMPLETE:e.success?u.cancelCall.resolve():u.cancelCall.reject(es(e.reason)),this.#s(u,t);break;case ai.CANCEL:if(!f)break;const y=es(e.reason);Promise.try(f.onCancel||ew,y).then(function(){l.postMessage({sourceName:n,targetName:r,stream:ai.CANCEL_COMPLETE,streamId:t,success:!0})},function(m){l.postMessage({sourceName:n,targetName:r,stream:ai.CANCEL_COMPLETE,streamId:t,reason:es(m)})}),f.sinkCapability.reject(y),f.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#s(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class rS{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){bn("Abstract method `_createCanvas` called.")}}class V8 extends rS{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class aS{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){bn("Abstract method `_fetch` called.")}}class tw extends aS{async _fetch(e){const t=await Uc(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Th(t)}}class oS{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,l){return"none"}destroy(e=!1){}}class G8 extends oS{#e;#t;#n;#i;#s;#r;#a=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#i=e,this.#s=t}get#o(){return this.#t||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#n){const e=this.#s.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const n=this.#s.createElementNS(ga,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#n=this.#s.createElementNS(ga,"defs"),e.append(n),n.append(this.#n),this.#s.body.append(e)}return this.#n}#d(e){if(e.length===1){const y=e[0],m=new Array(256);for(let E=0;E<256;E++)m[E]=y[E]/255;const A=m.join(",");return[A,A,A]}const[t,n,r]=e,l=new Array(256),u=new Array(256),f=new Array(256);for(let y=0;y<256;y++)l[y]=t[y]/255,u[y]=n[y]/255,f[y]=r[y]/255;return[l.join(","),u.join(","),f.join(",")]}#h(e){if(this.#e===void 0){this.#e="";const t=this.#s.URL;t!==this.#s.baseURI&&(Nh(t)?xt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=wm(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[n,r,l]=this.#d(e),u=e.length===1?n:`${n}${r}${l}`;if(t=this.#o.get(u),t)return this.#o.set(e,t),t;const f=`g_${this.#i}_transfer_map_${this.#a++}`,y=this.#h(f);this.#o.set(e,y),this.#o.set(u,y);const m=this.#g(f);return this.#p(n,r,l,m),y}addHCMFilter(e,t){const n=`${e}-${t}`,r="base";let l=this.#c.get(r);if(l?.key===n||(l?(l.filter?.remove(),l.key=n,l.url="none",l.filter=null):(l={key:n,url:"none",filter:null},this.#c.set(r,l)),!e||!t))return l.url;const u=this.#b(e);e=Ke.makeHexColor(...u);const f=this.#b(t);if(t=Ke.makeHexColor(...f),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return l.url;const y=new Array(256);for(let N=0;N<=255;N++){const M=N/255;y[N]=M<=.03928?M/12.92:((M+.055)/1.055)**2.4}const m=y.join(","),A=`g_${this.#i}_hcm_filter`,E=l.filter=this.#g(A);this.#p(m,m,m,E),this.#m(E);const T=(N,M)=>{const R=u[N]/255,L=f[N]/255,k=new Array(M+1);for(let P=0;P<=M;P++)k[P]=R+P/M*(L-R);return k.join(",")};return this.#p(T(0,5),T(1,5),T(2,5),E),l.url=this.#h(A),l.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[n]=this.#d([e]),r=`alpha_${n}`;if(t=this.#o.get(r),t)return this.#o.set(e,t),t;const l=`g_${this.#i}_alpha_map_${this.#a++}`,u=this.#h(l);this.#o.set(e,u),this.#o.set(r,u);const f=this.#g(l);return this.#y(n,f),u}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let n,r;if(e?([n]=this.#d([e]),r=`luminosity_${n}`):r="luminosity",t=this.#o.get(r),t)return this.#o.set(e,t),t;const l=`g_${this.#i}_luminosity_map_${this.#a++}`,u=this.#h(l);this.#o.set(e,u),this.#o.set(r,u);const f=this.#g(l);return this.#f(f),e&&this.#y(n,f),u}addHighlightHCMFilter(e,t,n,r,l){const u=`${t}-${n}-${r}-${l}`;let f=this.#c.get(e);if(f?.key===u||(f?(f.filter?.remove(),f.key=u,f.url="none",f.filter=null):(f={key:u,url:"none",filter:null},this.#c.set(e,f)),!t||!n))return f.url;const[y,m]=[t,n].map(this.#b.bind(this));let A=Math.round(.2126*y[0]+.7152*y[1]+.0722*y[2]),E=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[T,N]=[r,l].map(this.#b.bind(this));E<A&&([A,E,T,N]=[E,A,N,T]),this.#l.style.color="";const M=(k,P,j)=>{const U=new Array(256),G=(E-A)/j,Y=k/255,V=(P-k)/(255*j);let ie=0;for(let Q=0;Q<=j;Q++){const be=Math.round(A+Q*G),we=Y+Q*V;for(let oe=ie;oe<=be;oe++)U[oe]=we;ie=be+1}for(let Q=ie;Q<256;Q++)U[Q]=U[ie-1];return U.join(",")},R=`g_${this.#i}_hcm_${e}_filter`,L=f.filter=this.#g(R);return this.#m(L),this.#p(M(T[0],N[0],5),M(T[1],N[1],5),M(T[2],N[2],5),L),f.url=this.#h(R),f.url}destroy(e=!1){e&&this.#r?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#t?.clear(),this.#t=null,this.#r?.clear(),this.#r=null,this.#a=0)}#f(e){const t=this.#s.createElementNS(ga,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#m(e){const t=this.#s.createElementNS(ga,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#g(e){const t=this.#s.createElementNS(ga,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#u(e,t,n){const r=this.#s.createElementNS(ga,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)}#p(e,t,n,r){const l=this.#s.createElementNS(ga,"feComponentTransfer");r.append(l),this.#u(l,"feFuncR",e),this.#u(l,"feFuncG",t),this.#u(l,"feFuncB",n)}#y(e,t){const n=this.#s.createElementNS(ga,"feComponentTransfer");t.append(n),this.#u(n,"feFuncA",e)}#b(e){return this.#l.style.color=e,zc(getComputedStyle(this.#l).getPropertyValue("color"))}}class lS{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){bn("Abstract method `_fetch` called.")}}class nw extends lS{async _fetch(e){const t=await Uc(e,"arraybuffer");return new Uint8Array(t)}}class cS{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){bn("Abstract method `_fetch` called.")}}class iw extends cS{async _fetch(e){const t=await Uc(e,"arraybuffer");return new Uint8Array(t)}}ji&&xt("Please use the `legacy` build in Node.js environments.");async function Nm(i){const t=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(t)}class Y8 extends oS{}class X8 extends rS{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class q8 extends aS{async _fetch(e){return Nm(e)}}class W8 extends lS{async _fetch(e){return Nm(e)}}class K8 extends cS{async _fetch(e){return Nm(e)}}const rc="__forcedDependency",{floor:sw,ceil:rw}=Math;function cf(i,e,t,n,r,l){i[e*4+0]=Math.min(i[e*4+0],t),i[e*4+1]=Math.min(i[e*4+1],n),i[e*4+2]=Math.max(i[e*4+2],r),i[e*4+3]=Math.max(i[e*4+3],l)}const Op=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class Q8{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===Op}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const uf=(i,e)=>{if(!i)return;let t=i.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},i.set(e,t)),t};class Z8{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[rc]:[]};#n=new Map;#i=[];#s=[];#r=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#g;#u;#p;constructor(e,t,n=!1){this.#f=e.width,this.#m=e.height,this.#y(t),n&&(this.#p=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#y(e,this.#u)}#y(e,t){const n=new ArrayBuffer(e*4);this.#g=new Uint8ClampedArray(n),this.#u=new Uint32Array(n),t&&t.length>0?(this.#u.set(t),this.#u.fill(Op,t.length)):this.#u.fill(Op)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[rc]:{__proto__:this.#t[rc]}},this.#a={__proto__:this.#a},this.#i.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#a=Object.getPrototypeOf(this.#a);const n=this.#i.pop();return n!==void 0&&(uf(this.#p,e)?.dependencies.add(n),this.#u[e]=this.#u[n]),this}recordOpenMarker(e){return this.#i.push(e),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(e){const t=this.#i.pop();return t!==void 0&&(uf(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}beginMarkedContent(e){return this.#s.push(e),this}endMarkedContent(e){const t=this.#s.pop();return t!==void 0&&(uf(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}pushBaseTransform(e){return this.#r.push(Ke.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#n.set(e,t),this}recordSimpleDataFromNamed(e,t,n){this.#e[e]=this.#n.get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(rc,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(rc,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,t,n,r,l,u){const f=Ke.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform()),y=[1/0,1/0,-1/0,-1/0];Ke.axialAlignedBoundingBox([n,l,r,u],f,y);const m=Ke.intersect(this.#a,y);return m?(this.#a[0]=m[0],this.#a[1]=m[1],this.#a[2]=m[2],this.#a[3]=m[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(e,t,n,r,l,u){const f=this.#a;if(f[0]===1/0)return this;const y=Ke.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform());if(f[0]===-1/0)return Ke.axialAlignedBoundingBox([n,l,r,u],y,this.#o),this;const m=[1/0,1/0,-1/0,-1/0];return Ke.axialAlignedBoundingBox([n,l,r,u],y,m),this.#o[0]=Math.min(this.#o[0],Math.max(m[0],f[0])),this.#o[1]=Math.min(this.#o[1],Math.max(m[1],f[1])),this.#o[2]=Math.max(this.#o[2],Math.min(m[2],f[2])),this.#o[3]=Math.max(this.#o[3],Math.min(m[3],f[3])),this}recordCharacterBBox(e,t,n,r=1,l=0,u=0,f){const y=n.bbox;let m,A;if(y&&(m=y[2]!==y[0]&&y[3]!==y[1]&&this.#h.get(n),m!==!1&&(A=[0,0,0,0],Ke.axialAlignedBoundingBox(y,n.fontMatrix,A),(r!==1||l!==0||u!==0)&&Ke.scaleMinMax([r,0,0,-r,l,u],A),m)))return this.recordBBox(e,t,A[0],A[2],A[1],A[3]);if(!f)return this.recordFullPageBBox(e);const E=f();return y&&A&&m===void 0&&(m=A[0]<=l-E.actualBoundingBoxLeft&&A[2]>=l+E.actualBoundingBoxRight&&A[1]<=u-E.actualBoundingBoxAscent&&A[3]>=u+E.actualBoundingBoxDescent,this.#h.set(n,m),m)?this.recordBBox(e,t,A[0],A[2],A[1],A[3]):this.recordBBox(e,t,l-E.actualBoundingBoxLeft,l+E.actualBoundingBoxRight,u-E.actualBoundingBoxAscent,u+E.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#m,this.#a[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const n=this.#l,r=this.#e,l=this.#t;for(const u of t)u in this.#e?n.add(r[u]):u in l&&l[u].forEach(n.add,n);return this}recordNamedDependency(e,t){return this.#n.has(t)&&this.#l.add(this.#n.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[rc]),this.#p){const n=uf(this.#p,e),{dependencies:r}=n;this.#l.forEach(r.add,r),this.#i.forEach(r.add,r),this.#s.forEach(r.add,r),r.delete(e),n.isRenderingOperation=!0}if(this.#c===e){const n=sw(this.#o[0]*256/this.#f),r=sw(this.#o[1]*256/this.#m),l=rw(this.#o[2]*256/this.#f),u=rw(this.#o[3]*256/this.#m);cf(this.#g,e,n,r,l,u);for(const f of this.#l)f!==e&&cf(this.#g,f,n,r,l,u);for(const f of this.#i)f!==e&&cf(this.#g,f,n,r,l,u);for(const f of this.#s)f!==e&&cf(this.#g,f,n,r,l,u);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const n=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#d.get(e);return this.#d.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#h.clear(),new Q8(this.#u,this.#g)}takeDebugMetadata(){return this.#p}}class Kf{#e;#t;#n;#i=0;#s=0;constructor(e,t,n){if(e instanceof Kf&&e.#n===!!n)return e;this.#e=e,this.#t=t,this.#n=!!n}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#s++,this.#e.save(this.#t),this}restore(e){return this.#s>0&&(this.#e.restore(this.#t),this.#s--),this}recordOpenMarker(e){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#i--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#n||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,n,r,l,u){return this.#n||this.#e.recordClipBox(this.#t,t,n,r,l,u),this}recordBBox(e,t,n,r,l,u){return this.#n||this.#e.recordBBox(this.#t,t,n,r,l,u),this}recordCharacterBBox(e,t,n,r,l,u,f){return this.#n||this.#e.recordCharacterBBox(this.#t,t,n,r,l,u,f),this}recordFullPageBBox(e){return this.#n||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#n||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const zs={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ci={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Lp(i,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),i.clip(r)}class Rm{isModifyingCurrentTransform(){return!1}getPattern(){bn("Abstract method `getPattern` called.")}}class $8 extends Rm{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let l;if(r===Ci.STROKE||r===Ci.FILL){const u=t.current.getClippedPathBoundingBox(r,Pn(e))||[0,0,0,0],f=Math.ceil(u[2]-u[0])||1,y=Math.ceil(u[3]-u[1])||1,m=t.cachedCanvases.getCanvas("pattern",f,y),A=m.context;A.clearRect(0,0,A.canvas.width,A.canvas.height),A.beginPath(),A.rect(0,0,A.canvas.width,A.canvas.height),A.translate(-u[0],-u[1]),n=Ke.transform(n,[1,0,0,1,u[0],u[1]]),A.transform(...t.baseTransform),this.matrix&&A.transform(...this.matrix),Lp(A,this._bbox),A.fillStyle=this._createGradient(A),A.fill(),l=e.createPattern(m.canvas,"no-repeat");const E=new DOMMatrix(n);l.setTransform(E)}else Lp(e,this._bbox),l=this._createGradient(e);return l}}function J1(i,e,t,n,r,l,u,f){const y=e.coords,m=e.colors,A=i.data,E=i.width*4;let T;y[t+1]>y[n+1]&&(T=t,t=n,n=T,T=l,l=u,u=T),y[n+1]>y[r+1]&&(T=n,n=r,r=T,T=u,u=f,f=T),y[t+1]>y[n+1]&&(T=t,t=n,n=T,T=l,l=u,u=T);const N=(y[t]+e.offsetX)*e.scaleX,M=(y[t+1]+e.offsetY)*e.scaleY,R=(y[n]+e.offsetX)*e.scaleX,L=(y[n+1]+e.offsetY)*e.scaleY,k=(y[r]+e.offsetX)*e.scaleX,P=(y[r+1]+e.offsetY)*e.scaleY;if(M>=P)return;const j=m[l],U=m[l+1],G=m[l+2],Y=m[u],V=m[u+1],ie=m[u+2],Q=m[f],be=m[f+1],we=m[f+2],oe=Math.round(M),Ee=Math.round(P);let Se,ae,K,re,Ie,Ue,Je,$;for(let ue=oe;ue<=Ee;ue++){if(ue<L){const Ge=ue<M?0:(M-ue)/(M-L);Se=N-(N-R)*Ge,ae=j-(j-Y)*Ge,K=U-(U-V)*Ge,re=G-(G-ie)*Ge}else{let Ge;ue>P?Ge=1:L===P?Ge=0:Ge=(L-ue)/(L-P),Se=R-(R-k)*Ge,ae=Y-(Y-Q)*Ge,K=V-(V-be)*Ge,re=ie-(ie-we)*Ge}let Ce;ue<M?Ce=0:ue>P?Ce=1:Ce=(M-ue)/(M-P),Ie=N-(N-k)*Ce,Ue=j-(j-Q)*Ce,Je=U-(U-be)*Ce,$=G-(G-we)*Ce;const Oe=Math.round(Math.min(Se,Ie)),Ve=Math.round(Math.max(Se,Ie));let Re=E*ue+Oe*4;for(let Ge=Oe;Ge<=Ve;Ge++)Ce=(Se-Ge)/(Se-Ie),Ce<0?Ce=0:Ce>1&&(Ce=1),A[Re++]=ae-(ae-Ue)*Ce|0,A[Re++]=K-(K-Je)*Ce|0,A[Re++]=re-(re-$)*Ce|0,A[Re++]=255}}function J8(i,e,t){const n=e.coords,r=e.colors;let l,u;switch(e.type){case"lattice":const f=e.verticesPerRow,y=Math.floor(n.length/f)-1,m=f-1;for(l=0;l<y;l++){let A=l*f;for(let E=0;E<m;E++,A++)J1(i,t,n[A],n[A+1],n[A+f],r[A],r[A+1],r[A+f]),J1(i,t,n[A+f+1],n[A+1],n[A+f],r[A+f+1],r[A+1],r[A+f])}break;case"triangles":for(l=0,u=n.length;l<u;l+=3)J1(i,t,n[l],n[l+1],n[l+2],r[l],r[l+1],r[l+2]);break;default:throw new Error("illegal figure")}}class e6 extends Rm{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const f=Math.floor(this._bounds[0]),y=Math.floor(this._bounds[1]),m=Math.ceil(this._bounds[2])-f,A=Math.ceil(this._bounds[3])-y,E=Math.min(Math.ceil(Math.abs(m*e[0]*1.1)),3e3),T=Math.min(Math.ceil(Math.abs(A*e[1]*1.1)),3e3),N=m/E,M=A/T,R={coords:this._coords,colors:this._colors,offsetX:-f,offsetY:-y,scaleX:1/N,scaleY:1/M},L=E+4,k=T+4,P=n.getCanvas("mesh",L,k),j=P.context,U=j.createImageData(E,T);if(t){const Y=U.data;for(let V=0,ie=Y.length;V<ie;V+=4)Y[V]=t[0],Y[V+1]=t[1],Y[V+2]=t[2],Y[V+3]=255}for(const Y of this._figures)J8(U,Y,R);return j.putImageData(U,2,2),{canvas:P.canvas,offsetX:f-2*N,offsetY:y-2*M,scaleX:N,scaleY:M}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,r){Lp(e,this._bbox);const l=new Float32Array(2);if(r===Ci.SHADING)Ke.singularValueDecompose2dScale(Pn(e),l);else if(this.matrix){Ke.singularValueDecompose2dScale(this.matrix,l);const[f,y]=l;Ke.singularValueDecompose2dScale(t.baseTransform,l),l[0]*=f,l[1]*=y}else Ke.singularValueDecompose2dScale(t.baseTransform,l);const u=this._createMeshCanvas(l,r===Ci.SHADING?null:this._background,t.cachedCanvases);return r!==Ci.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(u.offsetX,u.offsetY),e.scale(u.scaleX,u.scaleY),e.createPattern(u.canvas,"no-repeat")}}class t6 extends Rm{getPattern(){return"hotpink"}}function n6(i){switch(i[0]){case"RadialAxial":return new $8(i);case"Mesh":return new e6(i);case"Dummy":return new t6}throw new Error(`Unknown IR type: ${i[0]}`)}const aw={COLORED:1,UNCOLORED:2};class Mm{static MAX_PATTERN_SIZE=3e3;constructor(e,t,n,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e,t){const{bbox:n,operatorList:r,paintType:l,tilingType:u,color:f,canvasGraphicsFactory:y}=this;let{xstep:m,ystep:A}=this;m=Math.abs(m),A=Math.abs(A),p0("TilingType: "+u);const E=n[0],T=n[1],N=n[2],M=n[3],R=N-E,L=M-T,k=new Float32Array(2);Ke.singularValueDecompose2dScale(this.matrix,k);const[P,j]=k;Ke.singularValueDecompose2dScale(this.baseTransform,k);const U=P*k[0],G=j*k[1];let Y=R,V=L,ie=!1,Q=!1;const be=Math.ceil(m*U),we=Math.ceil(A*G),oe=Math.ceil(R*U),Ee=Math.ceil(L*G);be>=oe?Y=m:ie=!0,we>=Ee?V=A:Q=!0;const Se=this.getSizeAndScale(Y,this.ctx.canvas.width,U),ae=this.getSizeAndScale(V,this.ctx.canvas.height,G),K=e.cachedCanvases.getCanvas("pattern",Se.size,ae.size),re=K.context,Ie=y.createCanvasGraphics(re,t);if(Ie.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(Ie,l,f),re.translate(-Se.scale*E,-ae.scale*T),Ie.transform(0,Se.scale,0,0,ae.scale,0,0),re.save(),Ie.dependencyTracker?.save(),this.clipBbox(Ie,E,T,N,M),Ie.baseTransform=Pn(Ie.ctx),Ie.executeOperatorList(r),Ie.endDrawing(),Ie.dependencyTracker?.restore(),re.restore(),ie||Q){const Ue=K.canvas;ie&&(Y=m),Q&&(V=A);const Je=this.getSizeAndScale(Y,this.ctx.canvas.width,U),$=this.getSizeAndScale(V,this.ctx.canvas.height,G),ue=Je.size,Ce=$.size,Oe=e.cachedCanvases.getCanvas("pattern-workaround",ue,Ce),Ve=Oe.context,Re=ie?Math.floor(R/m):0,Ge=Q?Math.floor(L/A):0;for(let Ne=0;Ne<=Re;Ne++)for(let Qe=0;Qe<=Ge;Qe++)Ve.drawImage(Ue,ue*Ne,Ce*Qe,ue,Ce,0,0,ue,Ce);return{canvas:Oe.canvas,scaleX:Je.scale,scaleY:$.scale,offsetX:E,offsetY:T}}return{canvas:K.canvas,scaleX:Se.scale,scaleY:ae.scale,offsetX:E,offsetY:T}}getSizeAndScale(e,t,n){const r=Math.max(Mm.MAX_PATTERN_SIZE,t);let l=Math.ceil(e*n);return l>=r?l=r:n=l/e,{scale:n,size:l}}clipBbox(e,t,n,r,l){const u=r-t,f=l-n;e.ctx.rect(t,n,u,f),Ke.axialAlignedBoundingBox([t,n,r,l],Pn(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,l=e.current;switch(t){case aw.COLORED:const{fillStyle:u,strokeStyle:f}=this.ctx;r.fillStyle=l.fillColor=u,r.strokeStyle=l.strokeColor=f;break;case aw.UNCOLORED:r.fillStyle=r.strokeStyle=n,l.fillColor=l.strokeColor=n;break;default:throw new v8(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,r,l){let u=n;r!==Ci.SHADING&&(u=Ke.transform(u,t.baseTransform),this.matrix&&(u=Ke.transform(u,this.matrix)));const f=this.createPatternCanvas(t,l);let y=new DOMMatrix(u);y=y.translate(f.offsetX,f.offsetY),y=y.scale(1/f.scaleX,1/f.scaleY);const m=e.createPattern(f.canvas,"repeat");return m.setTransform(y),m}}function i6({src:i,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:l=4294967295,inverseDecode:u=!1}){const f=yi.isLittleEndian?4278190080:255,[y,m]=u?[l,f]:[f,l],A=n>>3,E=n&7,T=i.length;t=new Uint32Array(t.buffer);let N=0;for(let M=0;M<r;M++){for(const L=e+A;e<L;e++){const k=e<T?i[e]:255;t[N++]=k&128?m:y,t[N++]=k&64?m:y,t[N++]=k&32?m:y,t[N++]=k&16?m:y,t[N++]=k&8?m:y,t[N++]=k&4?m:y,t[N++]=k&2?m:y,t[N++]=k&1?m:y}if(E===0)continue;const R=e<T?i[e++]:255;for(let L=0;L<E;L++)t[N++]=R&1<<7-L?m:y}return{srcPos:e,destPos:N}}const ow=16,lw=100,s6=15,cw=10,ts=16,ep=new DOMMatrix,vs=new Float32Array(2),dc=new Float32Array([1/0,1/0,-1/0,-1/0]);function r6(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},i.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},i.transform=function(t,n,r,l,u,f){e.transform(t,n,r,l,u,f),this.__originalTransform(t,n,r,l,u,f)},i.setTransform=function(t,n,r,l,u,f){e.setTransform(t,n,r,l,u,f),this.__originalSetTransform(t,n,r,l,u,f)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(t){e.rotate(t),this.__originalRotate(t)},i.clip=function(t){e.clip(t),this.__originalClip(t)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,r,l,u,f){e.bezierCurveTo(t,n,r,l,u,f),this.__originalBezierCurveTo(t,n,r,l,u,f)},i.rect=function(t,n,r,l){e.rect(t,n,r,l),this.__originalRect(t,n,r,l)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class a6{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function hf(i,e,t,n,r,l,u,f,y,m){const[A,E,T,N,M,R]=Pn(i);if(E===0&&T===0){const P=u*A+M,j=Math.round(P),U=f*N+R,G=Math.round(U),Y=(u+y)*A+M,V=Math.abs(Math.round(Y)-j)||1,ie=(f+m)*N+R,Q=Math.abs(Math.round(ie)-G)||1;return i.setTransform(Math.sign(A),0,0,Math.sign(N),j,G),i.drawImage(e,t,n,r,l,0,0,V,Q),i.setTransform(A,E,T,N,M,R),[V,Q]}if(A===0&&N===0){const P=f*T+M,j=Math.round(P),U=u*E+R,G=Math.round(U),Y=(f+m)*T+M,V=Math.abs(Math.round(Y)-j)||1,ie=(u+y)*E+R,Q=Math.abs(Math.round(ie)-G)||1;return i.setTransform(0,Math.sign(E),Math.sign(T),0,j,G),i.drawImage(e,t,n,r,l,0,0,Q,V),i.setTransform(A,E,T,N,M,R),[Q,V]}i.drawImage(e,t,n,r,l,u,f,y,m);const L=Math.hypot(A,E),k=Math.hypot(T,N);return[L*y,k*m]}class uw{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Np;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Si.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,n){n?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=dc.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Ci.FILL,t=null){const n=this.minMax.slice();if(e===Ci.STROKE){t||bn("Stroke bounding box must include transform."),Ke.singularValueDecompose2dScale(t,vs);const r=vs[0]*this.lineWidth/2,l=vs[1]*this.lineWidth/2;n[0]-=r,n[1]-=l,n[2]+=r,n[3]+=l}return n}updateClipFromPath(){const e=Ke.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(dc,0)}getClippedPathBoundingBox(e=Ci.FILL,t=null){return Ke.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function hw(i,e){if(e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%ts,l=(t-r)/ts,u=r===0?l:l+1,f=i.createImageData(n,ts);let y=0,m;const A=e.data,E=f.data;let T,N,M,R;if(e.kind===Qu.GRAYSCALE_1BPP){const L=A.byteLength,k=new Uint32Array(E.buffer,0,E.byteLength>>2),P=k.length,j=n+7>>3,U=4294967295,G=yi.isLittleEndian?4278190080:255;for(T=0;T<u;T++){for(M=T<l?ts:r,m=0,N=0;N<M;N++){const Y=L-y;let V=0;const ie=Y>j?n:Y*8-7,Q=ie&-8;let be=0,we=0;for(;V<Q;V+=8)we=A[y++],k[m++]=we&128?U:G,k[m++]=we&64?U:G,k[m++]=we&32?U:G,k[m++]=we&16?U:G,k[m++]=we&8?U:G,k[m++]=we&4?U:G,k[m++]=we&2?U:G,k[m++]=we&1?U:G;for(;V<ie;V++)be===0&&(we=A[y++],be=128),k[m++]=we&be?U:G,be>>=1}for(;m<P;)k[m++]=0;i.putImageData(f,0,T*ts)}}else if(e.kind===Qu.RGBA_32BPP){for(N=0,R=n*ts*4,T=0;T<l;T++)E.set(A.subarray(y,y+R)),y+=R,i.putImageData(f,0,N),N+=ts;T<u&&(R=n*r*4,E.set(A.subarray(y,y+R)),i.putImageData(f,0,N))}else if(e.kind===Qu.RGB_24BPP)for(M=ts,R=n*M,T=0;T<u;T++){for(T>=l&&(M=r,R=n*M),m=0,N=R;N--;)E[m++]=A[y++],E[m++]=A[y++],E[m++]=A[y++],E[m++]=255;i.putImageData(f,0,T*ts)}else throw new Error(`bad image kind: ${e.kind}`)}function dw(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%ts,l=(t-r)/ts,u=r===0?l:l+1,f=i.createImageData(n,ts);let y=0;const m=e.data,A=f.data;for(let E=0;E<u;E++){const T=E<l?ts:r;({srcPos:y}=i6({src:m,srcPos:y,dest:A,width:n,height:T,nonBlackColor:0})),i.putImageData(f,0,E*ts)}}function Fu(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function df(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}function fw(i,e){if(e)return!0;Ke.singularValueDecompose2dScale(i,vs);const t=Math.fround(ur.pixelRatio*gl.PDF_TO_CSS_UNITS);return vs[0]<=t&&vs[1]<=t}const o6=["butt","round","square"],l6=["miter","round","bevel"],c6={},gw={};class xc{constructor(e,t,n,r,l,{optionalContentConfig:u,markedContentStack:f=null},y,m,A){this.ctx=e,this.current=new uw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=f||[],this.optionalContentConfig=u,this.cachedCanvases=new a6(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=y,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=m,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=A??null}getObject(e,t,n=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const l=this.ctx.canvas.width,u=this.ctx.canvas.height,f=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,l,u),this.ctx.fillStyle=f,n){const y=this.cachedCanvases.getCanvas("transparent",l,u);this.compositeCtx=this.ctx,this.transparentCanvas=y.canvas,this.ctx=y.context,this.ctx.save(),this.ctx.transform(...Pn(this.compositeCtx))}this.ctx.save(),df(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Pn(this.ctx)}executeOperatorList(e,t,n,r,l){const u=e.argsArray,f=e.fnArray;let y=t||0;const m=u.length;if(m===y)return y;const A=m-y>cw&&typeof n=="function",E=A?Date.now()+s6:0;let T=0;const N=this.commonObjs,M=this.objs;let R,L;for(;;){if(r!==void 0&&y===r.nextBreakPoint)return r.breakIt(y,n),y;if(!l||l(y))if(R=f[y],L=u[y]??null,R!==Ic.dependency)L===null?this[R](y):this[R](y,...L);else for(const k of L){this.dependencyTracker?.recordNamedData(k,y);const P=k.startsWith("g_")?N:M;if(!P.has(k))return P.get(k,n),y}if(y++,y===m)return y;if(A&&++T>cw){if(Date.now()>E)return n(),y;T=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let l=Math.max(Math.hypot(t[0],t[1]),1),u=Math.max(Math.hypot(t[2],t[3]),1),f=n,y=r,m="prescale1",A,E;for(;l>2&&f>1||u>2&&y>1;){let T=f,N=y;l>2&&f>1&&(T=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f/2),l/=f/T),u>2&&y>1&&(N=y>=16384?Math.floor(y/2)-1||1:Math.ceil(y)/2,u/=y/N),A=this.cachedCanvases.getCanvas(m,T,N),E=A.context,E.clearRect(0,0,T,N),E.drawImage(e,0,0,f,y,0,0,T,N),e=A.canvas,f=T,y=N,m=m==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:f,paintHeight:y}}_createMaskCanvas(e,t){const n=this.ctx,{width:r,height:l}=t,u=this.current.fillColor,f=this.current.patternFill,y=Pn(n);let m,A,E,T;if((t.bitmap||t.data)&&t.count>1){const be=t.bitmap||t.data.buffer;A=JSON.stringify(f?y:[y.slice(0,4),u]),m=this._cachedBitmapsMap.get(be),m||(m=new Map,this._cachedBitmapsMap.set(be,m));const we=m.get(A);if(we&&!f){const oe=Math.round(Math.min(y[0],y[2])+y[4]),Ee=Math.round(Math.min(y[1],y[3])+y[5]);return this.dependencyTracker?.recordDependencies(e,zs.transformAndFill),{canvas:we,offsetX:oe,offsetY:Ee}}E=we}E||(T=this.cachedCanvases.getCanvas("maskCanvas",r,l),dw(T.context,t));let N=Ke.transform(y,[1/r,0,0,-1/l,0,0]);N=Ke.transform(N,[1,0,0,1,0,-l]);const M=dc.slice();Ke.axialAlignedBoundingBox([0,0,r,l],N,M);const[R,L,k,P]=M,j=Math.round(k-R)||1,U=Math.round(P-L)||1,G=this.cachedCanvases.getCanvas("fillCanvas",j,U),Y=G.context,V=R,ie=L;Y.translate(-V,-ie),Y.transform(...N),E||(E=this._scaleImage(T.canvas,Mr(Y)),E=E.img,m&&f&&m.set(A,E)),Y.imageSmoothingEnabled=fw(Pn(Y),t.interpolate),hf(Y,E,0,0,E.width,E.height,0,0,r,l),Y.globalCompositeOperation="source-in";const Q=Ke.transform(Mr(Y),[1,0,0,1,-V,-ie]);return Y.fillStyle=f?u.getPattern(n,this,Q,Ci.FILL,e):u,Y.fillRect(0,0,r,l),m&&!f&&(this.cachedCanvases.delete("fillCanvas"),m.set(A,G.canvas)),this.dependencyTracker?.recordDependencies(e,zs.transformAndFill),{canvas:G.canvas,offsetX:Math.round(V),offsetY:Math.round(ie)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=o6[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=l6[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){this.dependencyTracker?.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[n,r]of t)switch(n){case"LW":this.setLineWidth(e,r);break;case"LC":this.setLineCap(e,r);break;case"LJ":this.setLineJoin(e,r);break;case"ML":this.setMiterLimit(e,r);break;case"D":this.setDash(e,r[0],r[1]);break;case"RI":this.setRenderingIntent(e,r);break;case"FL":this.setFlatness(e,r);break;case"Font":this.setFont(e,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(r,t,n);this.suspendedCtx=this.ctx;const u=this.ctx=l.context;u.setTransform(this.suspendedCtx.getTransform()),Fu(this.suspendedCtx,u),r6(u,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Fu(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const l=r[0],u=r[1],f=r[2]-l,y=r[3]-u;f===0||y===0||(this.genericComposeSMask(t.context,n,f,y,t.subtype,t.backdrop,t.transferMap,l,u,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,l,u,f,y,m,A,E){let T=e.canvas,N=y-A,M=m-E;if(u)if(N<0||M<0||N+n>T.width||M+r>T.height){const L=this.cachedCanvases.getCanvas("maskExtension",n,r),k=L.context;k.drawImage(T,-N,-M),k.globalCompositeOperation="destination-atop",k.fillStyle=u,k.fillRect(0,0,n,r),k.globalCompositeOperation="source-over",T=L.canvas,N=M=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const L=new Path2D;L.rect(N,M,n,r),e.clip(L),e.globalCompositeOperation="destination-atop",e.fillStyle=u,e.fillRect(N,M,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),l==="Alpha"&&f?t.filter=this.filterFactory.addAlphaFilter(f):l==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(f));const R=new Path2D;R.rect(y,m,n,r),t.clip(R),t.globalCompositeOperation="destination-in",t.drawImage(T,N,M,n,r,y,m,n,r),t.restore()}save(e){this.inSMaskMode&&Fu(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Fu(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,r,l,u,f){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,n,r,l,u,f),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,r){let[l]=n;if(!r){l||=n[0]=new Path2D,this[t](e,l);return}if(this.dependencyTracker!==null){const u=t===Ic.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-u,r[2]+u,r[1]-u,r[3]+u).recordDependencies(e,["transform"])}if(!(l instanceof Path2D)){const u=n[0]=new Path2D;for(let f=0,y=l.length;f<y;)switch(l[f++]){case rf.moveTo:u.moveTo(l[f++],l[f++]);break;case rf.lineTo:u.lineTo(l[f++],l[f++]);break;case rf.curveTo:u.bezierCurveTo(l[f++],l[f++],l[f++],l[f++],l[f++],l[f++]);break;case rf.closePath:u.closePath();break;default:xt(`Unrecognized drawing path operator: ${l[f-1]}`);break}l=u}Ke.axialAlignedBoundingBox(r,Pn(this.ctx),this.current.minMax),this[t](e,l),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){const r=this.ctx,l=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof l=="object"&&l?.getPattern){const u=l.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=l.getPattern(r,this,Mr(r),Ci.STROKE,e),u){const f=new Path2D;f.addPath(t,r.getTransform().invertSelf().multiplySelf(u)),t=f}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,zs.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Ci.STROKE,Pn(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){const r=this.ctx,l=this.current.fillColor,u=this.current.patternFill;let f=!1;if(u){const m=l.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(e),r.save(),r.fillStyle=l.getPattern(r,this,Mr(r),Ci.FILL,e),m){const A=new Path2D;A.addPath(t,r.getTransform().invertSelf().multiplySelf(m)),t=A}f=!0}const y=this.current.getClippedPathBoundingBox();this.contentVisible&&y!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),this.dependencyTracker?.recordDependencies(e,zs.fill),f&&(r.restore(),this.dependencyTracker?.restore(e)),n&&this.consumePath(e,t,y)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,zs.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=c6}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=gw}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,l=n.getTransform().invertSelf();for(const{transform:u,x:f,y,fontSize:m,path:A}of t)A&&r.addPath(A,new DOMMatrix(u).preMultiplySelf(l).translate(f,y).scale(m,-m));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),l=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(l.fontMatrix=r.fontMatrix||Np,(l.fontMatrix[0]===0||l.fontMatrix[3]===0)&&xt("Invalid font matrix for font "+t),n<0?(n=-n,l.fontDirection=-1):l.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const u=r.loadedName||"sans-serif",f=r.systemFontInfo?.css||`"${u}", ${r.fallbackName}`;let y="normal";r.black?y="900":r.bold&&(y="bold");const m=r.italic?"italic":"normal";let A=n;n<ow?A=ow:n>lw&&(A=lw),this.current.fontSizeScale=n/A,this.ctx.font=`${m} ${y} ${A}px ${f}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){this.dependencyTracker?.recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#n(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r}paintChar(e,t,n,r,l,u){const f=this.ctx,y=this.current,m=y.font,A=y.textRenderingMode,E=y.fontSize/y.fontSizeScale,T=A&Si.FILL_STROKE_MASK,N=!!(A&Si.ADD_TO_PATH_FLAG),M=y.patternFill&&!m.missingFile,R=y.patternStroke&&!m.missingFile;let L;if((m.disableFontFace||N||M||R)&&!m.missingFile&&(L=m.getPathGenerator(this.commonObjs,t)),L&&(m.disableFontFace||M||R)){f.save(),f.translate(n,r),f.scale(E,-E),this.dependencyTracker?.recordCharacterBBox(e,f,m);let k;if(T===Si.FILL||T===Si.FILL_STROKE)if(l){k=f.getTransform(),f.setTransform(...l);const P=this.#n(L,k,l);f.fill(P)}else f.fill(L);if(T===Si.STROKE||T===Si.FILL_STROKE)if(u){k||=f.getTransform(),f.setTransform(...u);const{a:P,b:j,c:U,d:G}=k,Y=Ke.inverseTransform(u),V=Ke.transform([P,j,U,G,0,0],Y);Ke.singularValueDecompose2dScale(V,vs),f.lineWidth*=Math.max(vs[0],vs[1])/E,f.stroke(this.#n(L,k,u))}else f.lineWidth/=E,f.stroke(L);f.restore()}else(T===Si.FILL||T===Si.FILL_STROKE)&&(f.fillText(t,n,r),this.dependencyTracker?.recordCharacterBBox(e,f,m,E,n,r,()=>f.measureText(t))),(T===Si.STROKE||T===Si.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,f,m,E,n,r,()=>f.measureText(t)).recordDependencies(e,zs.stroke),f.strokeText(t,n,r));N&&((this.pendingTextPaths||=[]).push({transform:Pn(f),x:n,y:r,fontSize:E,path:L}),this.dependencyTracker?.recordCharacterBBox(e,f,m,E,n,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return St(this,"isFontSubpixelAAEnabled",n)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,zs.showText).resetBBox(e),this.current.textRenderingMode&Si.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const l=n.fontSize;if(l===0){this.dependencyTracker?.recordOperation(e);return}const u=this.ctx,f=n.fontSizeScale,y=n.charSpacing,m=n.wordSpacing,A=n.fontDirection,E=n.textHScale*A,T=t.length,N=r.vertical,M=N?1:-1,R=r.defaultVMetrics,L=l*n.fontMatrix[0],k=n.textRenderingMode===Si.FILL&&!r.disableFontFace&&!n.patternFill;u.save(),n.textMatrix&&u.transform(...n.textMatrix),u.translate(n.x,n.y+n.textRise),A>0?u.scale(E,-1):u.scale(E,1);let P,j;if(n.patternFill){u.save();const ie=n.fillColor.getPattern(u,this,Mr(u),Ci.FILL,e);P=Pn(u),u.restore(),u.fillStyle=ie}if(n.patternStroke){u.save();const ie=n.strokeColor.getPattern(u,this,Mr(u),Ci.STROKE,e);j=Pn(u),u.restore(),u.strokeStyle=ie}let U=n.lineWidth;const G=n.textMatrixScale;if(G===0||U===0){const ie=n.textRenderingMode&Si.FILL_STROKE_MASK;(ie===Si.STROKE||ie===Si.FILL_STROKE)&&(U=this.getSinglePixelWidth())}else U/=G;if(f!==1&&(u.scale(f,f),U/=f),u.lineWidth=U,r.isInvalidPDFjsFont){const ie=[];let Q=0;for(const we of t)ie.push(we.unicode),Q+=we.width;const be=ie.join("");if(u.fillText(be,0,0),this.dependencyTracker!==null){const we=u.measureText(be);this.dependencyTracker.recordBBox(e,this.ctx,-we.actualBoundingBoxLeft,we.actualBoundingBoxRight,-we.actualBoundingBoxAscent,we.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=Q*L*E,u.restore(),this.compose();return}let Y=0,V;for(V=0;V<T;++V){const ie=t[V];if(typeof ie=="number"){Y+=M*ie*l/1e3;continue}let Q=!1;const be=(ie.isSpace?m:0)+y,we=ie.fontChar,oe=ie.accent;let Ee,Se,ae=ie.width;if(N){const Ie=ie.vmetric||R,Ue=-(ie.vmetric?Ie[1]:ae*.5)*L,Je=Ie[2]*L;ae=Ie?-Ie[0]:ae,Ee=Ue/f,Se=(Y+Je)/f}else Ee=Y/f,Se=0;let K;if(r.remeasure&&ae>0){K=u.measureText(we);const Ie=K.width*1e3/l*f;if(ae<Ie&&this.isFontSubpixelAAEnabled){const Ue=ae/Ie;Q=!0,u.save(),u.scale(Ue,1),Ee/=Ue}else ae!==Ie&&(Ee+=(ae-Ie)/2e3*l/f)}if(this.contentVisible&&(ie.isInFont||r.missingFile)){if(k&&!oe)u.fillText(we,Ee,Se),this.dependencyTracker?.recordCharacterBBox(e,u,K?{bbox:null}:r,l/f,Ee,Se,()=>K??u.measureText(we));else if(this.paintChar(e,we,Ee,Se,P,j),oe){const Ie=Ee+l*oe.offset.x/f,Ue=Se-l*oe.offset.y/f;this.paintChar(e,oe.fontChar,Ie,Ue,P,j)}}const re=N?ae*L-be*A:ae*L+be*A;Y+=re,Q&&u.restore()}N?n.y-=Y:n.x+=Y*E,u.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,r=this.current,l=r.font,u=r.fontSize,f=r.fontDirection,y=l.vertical?1:-1,m=r.charSpacing,A=r.wordSpacing,E=r.textHScale*f,T=r.fontMatrix||Np,N=t.length,M=r.textRenderingMode===Si.INVISIBLE;let R,L,k,P;if(M||u===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(E,f);const j=this.dependencyTracker;for(this.dependencyTracker=j?new Kf(j,e):null,R=0;R<N;++R){if(L=t[R],typeof L=="number"){P=y*L*u/1e3,this.ctx.translate(P,0),r.x+=P*E;continue}const U=(L.isSpace?A:0)+m,G=l.charProcOperatorList[L.operatorListId];G?this.contentVisible&&(this.save(),n.scale(u,u),n.transform(...T),this.executeOperatorList(G),this.restore()):xt(`Type3 character "${L.operatorListId}" is not available.`);const Y=[L.width,0];Ke.applyTransform(Y,T),k=Y[0]*u+U,n.translate(k,0),r.x+=k*E}n.restore(),j&&(this.dependencyTracker=j)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,r,l,u,f){const y=new Path2D;y.rect(r,l,u-r,f-l),this.ctx.clip(y),this.dependencyTracker?.recordBBox(e,this.ctx,r,u,l,f).recordClipBox(e,this.ctx,r,u,l,f),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const r=this.baseTransform||Pn(this.ctx),l={createCanvasGraphics:(u,f)=>new xc(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Kf(this.dependencyTracker,f,!0):null)};n=new Mm(t,this.ctx,l,r)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=n6(this.getObject(e,t)),this.cachedPatterns.set(t,r)),n&&(r.matrix=n),r}shadingFill(e,t){if(!this.contentVisible)return;const n=this.ctx;this.save(e);const r=this._getPattern(e,t);n.fillStyle=r.getPattern(n,this,Mr(n),Ci.SHADING,e);const l=Mr(n);if(l){const{width:u,height:f}=n.canvas,y=dc.slice();Ke.axialAlignedBoundingBox([0,0,u,f],l,y);const[m,A,E,T]=y;this.ctx.fillRect(m,A,E-m,T-A)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,zs.transform).recordDependencies(e,zs.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){bn("Should not call beginInlineImage")}beginImageData(){bn("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Pn(this.ctx),n)){Ke.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[r,l,u,f]=n,y=new Path2D;y.rect(r,l,u-r,f-l),this.ctx.clip(y),this.dependencyTracker?.recordClipBox(e,this.ctx,r,u,l,f),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||p0("TODO: Support non-isolated groups."),t.knockout&&xt("Knockout groups not supported.");const r=Pn(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let l=dc.slice();Ke.axialAlignedBoundingBox(t.bbox,Pn(n),l);const u=[0,0,n.canvas.width,n.canvas.height];l=Ke.intersect(l,u)||[0,0,0,0];const f=Math.floor(l[0]),y=Math.floor(l[1]),m=Math.max(Math.ceil(l[2])-f,1),A=Math.max(Math.ceil(l[3])-y,1);this.current.startNewPathAndClipBox([0,0,m,A]);let E="groupAt"+this.groupLevel;t.smask&&(E+="_smask_"+this.smaskCounter++%2);const T=this.cachedCanvases.getCanvas(E,m,A),N=T.context;N.translate(-f,-y),N.transform(...r);let M=new Path2D;const[R,L,k,P]=t.bbox;if(M.rect(R,L,k-R,P-L),t.matrix){const j=new Path2D;j.addPath(M,new DOMMatrix(t.matrix)),M=j}N.clip(M),t.smask&&this.smaskStack.push({canvas:T.canvas,context:N,offsetX:f,offsetY:y,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(f,y),n.save()),Fu(n,N),this.ctx=N,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const l=Pn(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...l);const u=dc.slice();Ke.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],l,u),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotation(e,t,n,r,l,u){if(this.#e(),df(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const f=n[2]-n[0],y=n[3]-n[1];if(u&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=f,n[3]=y,Ke.singularValueDecompose2dScale(Pn(this.ctx),vs);const{viewportScale:m}=this,A=Math.ceil(f*this.outputScaleX*m),E=Math.ceil(y*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(A,E);const{canvas:T,context:N}=this.annotationCanvas;this.annotationCanvasMap.set(t,T),this.annotationCanvas.savedCtx=this.ctx,this.ctx=N,this.ctx.save(),this.ctx.setTransform(vs[0],0,0,-vs[1],0,y*vs[1]),df(this.ctx)}else{df(this.ctx),this.endPath(e);const m=new Path2D;m.rect(n[0],n[1],f,y),this.ctx.clip(m)}}this.current=new uw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...l)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const r=this.ctx,l=this._createMaskCanvas(e,t),u=l.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(u,l.offsetX,l.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,l.offsetX,l.offsetX+u.width,l.offsetY,l.offsetY+u.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,r=0,l=0,u,f){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const y=this.ctx;y.save();const m=Pn(y);y.transform(n,r,l,u,0,0);const A=this._createMaskCanvas(e,t);y.setTransform(1,0,0,1,A.offsetX-m[4],A.offsetY-m[5]),this.dependencyTracker?.resetBBox(e);for(let E=0,T=f.length;E<T;E+=2){const N=Ke.transform(m,[n,r,l,u,f[E],f[E+1]]);y.drawImage(A.canvas,N[4],N[5]),this.dependencyTracker?.recordBBox(e,this.ctx,N[4],N[4]+A.canvas.width,N[5],N[5]+A.canvas.height)}y.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,l=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,zs.transformAndFill);for(const u of t){const{data:f,width:y,height:m,transform:A}=u,E=this.cachedCanvases.getCanvas("maskCanvas",y,m),T=E.context;T.save();const N=this.getObject(e,f,u);dw(T,N),T.globalCompositeOperation="source-in",T.fillStyle=l?r.getPattern(T,this,Mr(n),Ci.FILL,e):r,T.fillRect(0,0,y,m),T.restore(),n.save(),n.transform(...A),n.scale(1,-1),hf(n,E.canvas,0,0,y,m,0,-1,1,1),this.dependencyTracker?.recordBBox(e,n,0,y,0,m),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){xt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,r,l){if(!this.contentVisible)return;const u=this.getObject(e,t);if(!u){xt("Dependent image isn't ready yet");return}const f=u.width,y=u.height,m=[];for(let A=0,E=l.length;A<E;A+=2)m.push({transform:[n,0,0,r,l[A],l[A+1]],x:0,y:0,w:f,h:y});this.paintInlineImageXObjectGroup(e,u,m)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,l=this.cachedCanvases.getCanvas("inlineImage",n,r),u=l.context;return u.filter=this.current.transferMaps,u.drawImage(t,0,0),u.filter="none",l.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const n=t.width,r=t.height,l=this.ctx;this.save(e);const{filter:u}=l;u!=="none"&&u!==""&&(l.filter="none"),l.scale(1/n,-1/r);let f;if(t.bitmap)f=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)f=t;else{const A=this.cachedCanvases.getCanvas("inlineImage",n,r).context;hw(A,t),f=this.applyTransferMapsToCanvas(A)}const y=this._scaleImage(f,Mr(l));l.imageSmoothingEnabled=fw(Pn(l),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,l,0,n,-r,0).recordDependencies(e,zs.imageXObject).recordOperation(e),hf(l,y.img,0,0,y.paintWidth,y.paintHeight,0,-r,n,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){if(!this.contentVisible)return;const r=this.ctx;let l;if(t.bitmap)l=t.bitmap;else{const u=t.width,f=t.height,m=this.cachedCanvases.getCanvas("inlineImage",u,f).context;hw(m,t),l=this.applyTransferMapsToCanvas(m)}this.dependencyTracker?.resetBBox(e);for(const u of n)r.save(),r.transform(...u.transform),r.scale(1,-1),hf(r,l,u.x,u.y,u.w,u.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,zs.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const l=this.ctx;this.pendingClip?(r||(this.pendingClip===gw?l.clip(t,"evenodd"):l.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Pn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:l}=this.ctx.getTransform();let u,f;if(n===0&&r===0){const y=Math.abs(t),m=Math.abs(l);if(y===m)if(e===0)u=f=1/y;else{const A=y*e;u=f=A<1?1/A:1}else if(e===0)u=1/y,f=1/m;else{const A=y*e,E=m*e;u=A<1?1/A:1,f=E<1?1/E:1}}else{const y=Math.abs(t*l-n*r),m=Math.hypot(t,n),A=Math.hypot(r,l);if(e===0)u=A/y,f=m/y;else{const E=e*y;u=A>E?A/E:1,f=m>E?m/E:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=f}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:r}}=this,[l,u]=this.getScaleForStroking();if(l===u){n.lineWidth=(r||1)*l,n.stroke(e);return}const f=n.getLineDash();t&&n.save(),n.scale(l,u),ep.a=1/l,ep.d=1/u;const y=new Path2D;if(y.addPath(e,ep),f.length>0){const m=Math.max(l,u);n.setLineDash(f.map(A=>A/m)),n.lineDashOffset/=m}n.lineWidth=r||1,n.stroke(y),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const i in Ic)xc.prototype[i]!==void 0&&(xc.prototype[Ic[i]]=xc.prototype[i]);class bc{#e;#t;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,n={};let r=0;for(const m of bc.strings){const A=t.encode(e[m]);n[m]=A,r+=4+A.length}const l=new ArrayBuffer(r),u=new Uint8Array(l),f=new DataView(l);let y=0;for(const m of bc.strings){const A=n[m],E=A.length;f.setUint32(y,E),u.set(A,y+4),y+=4+E}return Ut(y===l.byteLength,"CssFontInfo.write: Buffer overflow"),l}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#n=new TextDecoder}#i(e){Ut(e<bc.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=this.#t.getUint32(t)+4;const n=this.#t.getUint32(t);return this.#n.decode(new Uint8Array(this.#e,t+4,n))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class Ac{#e;#t;#n;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,n={};let r=0;for(const T of Ac.strings){const N=t.encode(e[T]);n[T]=N,r+=4+N.length}r+=4;let l,u,f=1+r;e.style&&(l=t.encode(e.style.style),u=t.encode(e.style.weight),f+=4+l.length+4+u.length);const y=new ArrayBuffer(f),m=new Uint8Array(y),A=new DataView(y);let E=0;A.setUint8(E++,e.guessFallback?1:0),A.setUint32(E,0),E+=4,r=0;for(const T of Ac.strings){const N=n[T],M=N.length;r+=4+M,A.setUint32(E,M),m.set(N,E+4),E+=4+M}return A.setUint32(E-r-4,r),e.style&&(A.setUint32(E,l.length),m.set(l,E+4),E+=4+l.length,A.setUint32(E,u.length),m.set(u,E+4),E+=4+u.length),Ut(E<=y.byteLength,"SubstitionInfo.write: Buffer overflow"),y.transferToFixedLength(E)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#n=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#i(e){Ut(e<Ac.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=this.#t.getUint32(t)+4;const n=this.#t.getUint32(t);return this.#n.decode(new Uint8Array(this.#e,t+4,n))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),n=this.#n.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const r=this.#t.getUint32(e),l=this.#n.decode(new Uint8Array(this.#e,e+4,r));return{style:n,weight:l}}}class dn{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#n=this.#t+1+8;static#i=this.#n+1+48;static#s=this.#i+1+6;#r;#a;#o;constructor({data:e,extra:t}){this.#r=e,this.#a=new TextDecoder,this.#o=new DataView(this.#r),t&&Object.assign(this,t)}#c(e){Ut(e<dn.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,r=this.#o.getUint8(t)>>n&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return Ut(e<dn.numbers.length,"Invalid number index"),this.#o.getFloat64(dn.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=dn.#t;if(this.#o.getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<4;r++)n.push(this.#o.getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=dn.#n;if(this.#o.getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<6;r++)n.push(this.#o.getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=dn.#i;if(this.#o.getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<3;r++)n.push(this.#o.getInt16(e,!0)),e+=2;return n}#d(e){Ut(e<dn.strings.length,"Invalid string index");let t=dn.#s+4;for(let l=0;l<e;l++)t+=this.#o.getUint32(t)+4;const n=this.#o.getUint32(t),r=new Uint8Array(n);return r.set(new Uint8Array(this.#r,t+4,n)),this.#a.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let e=dn.#s;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);e+=4+n;const r=this.#o.getUint32(e);e+=4+r;const l=this.#o.getUint32(e);if(l!==0)return new Uint8Array(this.#r,e+4,l)}clearData(){let e=dn.#s;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);e+=4+n;const r=this.#o.getUint32(e);e+=4+r;const l=this.#o.getUint32(e);new Uint8Array(this.#r,e+4,l).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=dn.#s;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);e+=4+n;const r=this.#o.getUint32(e);if(r===0)return null;const l=new Uint8Array(r);return l.set(new Uint8Array(this.#r,e+4,r)),new bc(l.buffer)}get systemFontInfo(){let e=dn.#s;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);if(n===0)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(this.#r,e+4,n)),new Ac(r.buffer)}static write(e){const t=e.systemFontInfo?Ac.write(e.systemFontInfo):null,n=e.cssFontInfo?bc.write(e.cssFontInfo):null,r=new TextEncoder,l={};let u=0;for(const R of dn.strings)l[R]=r.encode(e[R]),u+=4+l[R].length;const f=dn.#s+4+u+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),y=new ArrayBuffer(f),m=new Uint8Array(y),A=new DataView(y);let E=0;const T=dn.bools.length;let N=0,M=0;for(let R=0;R<T;R++){const L=e[dn.bools[R]];N|=(L===void 0?0:L?2:1)<<M,M+=2,(M===8||R===T-1)&&(A.setUint8(E++,N),N=0,M=0)}Ut(E===dn.#e,"FontInfo.write: Boolean properties offset mismatch");for(const R of dn.numbers)A.setFloat64(E,e[R]),E+=8;if(Ut(E===dn.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){A.setUint8(E++,4);for(const R of e.bbox)A.setInt16(E,R,!0),E+=2}else A.setUint8(E++,0),E+=8;if(Ut(E===dn.#n,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){A.setUint8(E++,6);for(const R of e.fontMatrix)A.setFloat64(E,R,!0),E+=8}else A.setUint8(E++,0),E+=48;if(Ut(E===dn.#i,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){A.setUint8(E++,1);for(const R of e.defaultVMetrics)A.setInt16(E,R,!0),E+=2}else A.setUint8(E++,0),E+=6;Ut(E===dn.#s,"FontInfo.write: DefaultVMetrics properties offset mismatch"),A.setUint32(dn.#s,0),E+=4;for(const R of dn.strings){const L=l[R],k=L.length;A.setUint32(E,k),m.set(L,E+4),E+=4+k}if(A.setUint32(dn.#s,E-dn.#s-4),!t)A.setUint32(E,0),E+=4;else{const R=t.byteLength;A.setUint32(E,R),Ut(E+4+R<=y.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),m.set(new Uint8Array(t),E+4),E+=4+R}if(!n)A.setUint32(E,0),E+=4;else{const R=n.byteLength;A.setUint32(E,R),Ut(E+4+R<=y.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),m.set(new Uint8Array(n),E+4),E+=4+R}return e.data===void 0?(A.setUint32(E,0),E+=4):(A.setUint32(E,e.data.length),m.set(e.data,E+4),E+=4+e.data.length),Ut(E<=y.byteLength,"FontInfo.write: Buffer overflow"),y.transferToFixedLength(E)}}class vo{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class u6{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const lc=Symbol("INTERNAL");class h6{#e=!1;#t=!1;#n=!1;#i=!0;constructor(e,{name:t,intent:n,usage:r,rbGroups:l}){this.#e=!!(e&ws.DISPLAY),this.#t=!!(e&ws.PRINT),this.name=t,this.intent=n,this.usage=r,this.rbGroups=l}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,n=!1){e!==lc&&bn("Internal method `_setVisible` called."),this.#n=n,this.#i=t}}class d6{#e=null;#t=new Map;#n=null;#i=null;constructor(e,t=ws.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#i=e.order;for(const n of e.groups)this.#t.set(n.id,new h6(t,n));if(e.baseState==="OFF")for(const n of this.#t.values())n._setVisible(lc,!1);for(const n of e.on)this.#t.get(n)._setVisible(lc,!0);for(const n of e.off)this.#t.get(n)._setVisible(lc,!1);this.#n=this.getHash()}}#s(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const l=e[r];let u;if(Array.isArray(l))u=this.#s(l);else if(this.#t.has(l))u=this.#t.get(l).visible;else return xt(`Optional content group not found: ${l}`),!0;switch(n){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return n==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return p0("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(xt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#s(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return xt(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return xt(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return xt(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return xt(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return xt(`Unknown optional content policy ${e.policy}.`),!0}return xt(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){const r=this.#t.get(e);if(!r){xt(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const l of r.rbGroups)for(const u of l)u!==e&&this.#t.get(u)?._setVisible(lc,!1,!0);r._setVisible(lc,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const l=this.#t.get(r);if(l)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!l.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new nS;for(const[t,n]of this.#t)e.update(`${t}:${n.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class f6{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Ut(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:l,progressiveDone:u,contentDispositionFilename:f}=e;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=f,l?.length>0){const y=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(y)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((y,m)=>{this._onReceiveData({begin:y,chunk:m})}),e.addProgressListener((y,m)=>{this._onProgress({loaded:y,total:m})}),e.addProgressiveReadListener(y=>{this._onReceiveData({chunk:y})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(l){return l._begin!==e?!1:(l._enqueue(n),!0)});Ut(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ut(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new g6(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new p6(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class g6{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=y0(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class p6{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function m6(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let A=f(t);return A=unescape(A),A=y(A),A=m(A),l(A)}if(t=u(i),t){const A=m(t);return l(A)}if(t=n("filename","i").exec(i),t){t=t[1];let A=f(t);return A=m(A),l(A)}function n(A,E){return new RegExp("(?:^|;)\\s*"+A+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',E)}function r(A,E){if(A){if(!/^[\x00-\xFF]+$/.test(E))return E;try{const T=new TextDecoder(A,{fatal:!0}),N=Th(E);E=T.decode(N),e=!1}catch{}}return E}function l(A){return e&&/[\x80-\xff]/.test(A)&&(A=r("utf-8",A),e&&(A=r("iso-8859-1",A))),A}function u(A){const E=[];let T;const N=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(T=N.exec(A))!==null;){let[,R,L,k]=T;if(R=parseInt(R,10),R in E){if(R===0)break;continue}E[R]=[L,k]}const M=[];for(let R=0;R<E.length&&R in E;++R){let[L,k]=E[R];k=f(k),L&&(k=unescape(k),R===0&&(k=y(k))),M.push(k)}return M.join("")}function f(A){if(A.startsWith('"')){const E=A.slice(1).split('\\"');for(let T=0;T<E.length;++T){const N=E[T].indexOf('"');N!==-1&&(E[T]=E[T].slice(0,N),E.length=T+1),E[T]=E[T].replaceAll(/\\(.)/g,"$1")}A=E.join('"')}return A}function y(A){const E=A.indexOf("'");if(E===-1)return A;const T=A.slice(0,E),M=A.slice(E+1).replace(/^[^']*'/,"");return r(T,M)}function m(A){return!A.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(A)?A:A.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(E,T,N,M){if(N==="q"||N==="Q")return M=M.replaceAll("_"," "),M=M.replaceAll(/=([0-9a-fA-F]{2})/g,function(R,L){return String.fromCharCode(parseInt(L,16))}),r(T,M);try{M=atob(M)}catch{}return r(T,M)})}return""}function uS(i,e){const t=new Headers;if(!i||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function x0(i){return URL.parse(i)?.origin??null}function hS({responseHeaders:i,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(i.get("Content-Length"),10);return!Number.isInteger(l)||(r.suggestedLength=l,l<=2*t)||n||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function dS(i){const e=i.get("Content-Disposition");if(e){let t=m6(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(y0(t))return t}return null}function Dh(i,e){return new oh(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i,i===404||i===0&&e.startsWith("file:"))}function fS(i){return i===200||i===206}function gS(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function pS(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(xt(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class y6{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=uS(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ut(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new x6(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new b6(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class x6{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,gS(n,this._withCredentials,this._abortController)).then(l=>{if(e._responseOrigin=x0(l.url),!fS(l.status))throw Dh(l.status,r);this._reader=l.body.getReader(),this._headersCapability.resolve();const u=l.headers,{allowRangeRequests:f,suggestedLength:y}=hS({responseHeaders:u,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=f,this._contentLength=y||this._contentLength,this._filename=dS(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new va("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:pS(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class b6{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const l=new Headers(e.headers);l.append("Range",`bytes=${t}-${n-1}`);const u=r.url;fetch(u,gS(l,this._withCredentials,this._abortController)).then(f=>{const y=x0(f.url);if(y!==e._responseOrigin)throw new Error(`Expected range response-origin "${y}" to match "${e._responseOrigin}".`);if(!fS(f.status))throw Dh(f.status,u);this._readCapability.resolve(),this._reader=f.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:pS(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const tp=200,np=206;function A6(i){const e=i.response;return typeof e!="string"?e:Th(e).buffer}class w6{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=uS(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[l,u]of this.headers)t.setRequestHeader(l,u);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=np):r.expectedStatus=tp,t.responseType="arraybuffer",Ut(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){const n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){n.onError(r.status);return}const l=r.status||tp;if(!(l===tp&&n.expectedStatus===np)&&l!==n.expectedStatus){n.onError(r.status);return}const f=A6(r);if(l===np){const y=r.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(y);m?n.onDone({begin:parseInt(m[1],10),chunk:f}):(xt('Missing or invalid "Content-Range" header.'),n.onError(0))}else f?n.onDone({begin:0,chunk:f}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class E6{constructor(e){this._source=e,this._manager=new w6(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ut(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new v6(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new S6(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class v6{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=x0(t.responseURL);const n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[y,...m]=f.split(": ");return[y,m.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:u}=hS({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=dS(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Dh(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class S6{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=x0(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=Dh(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const C6=/^[a-z][a-z0-9\-+.]+:/i;function _6(i){if(C6.test(i))return new URL(i);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(i))}class T6{constructor(e){this.source=e,this.url=_6(e.url),Ut(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ut(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new I6(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new N6(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class I6{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Dh(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new va("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class N6{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const ju=Symbol("INITIAL_DATA");class mS{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:ju}}get(e,t=null){if(t){const r=this.#t(e);return r.promise.then(()=>t(r.data)),null}const n=this.#e[e];if(!n||n.data===ju)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=this.#e[e];return!!t&&t.data!==ju}delete(e){const t=this.#e[e];return!t||t.data===ju?!1:(delete this.#e[e],!0)}resolve(e,t=null){const n=this.#t(e);n.data=t,n.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==ju&&(yield[e,t])}}}const R6=1e5,pw=30;let ch=class Hs{#e=Promise.withResolvers();#t=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#s=null;#r=null;#a=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#g=null;#u=[];#p=new WeakMap;#y=null;static#b=new Map;static#x=new Map;static#C=new WeakMap;static#v=null;static#A=new Set;constructor({textContentSource:e,container:t,viewport:n}){if(e instanceof ReadableStream)this.#g=e;else if(typeof e=="object")this.#g=new ReadableStream({start(y){y.enqueue(e),y.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#h=n.scale*ur.pixelRatio,this.#d=n.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:l,pageX:u,pageY:f}=n.rawDims;this.#y=[1,0,0,-1,-u,f+l],this.#o=r,this.#a=l,Hs.#N(),_o(t,n),this.#e.promise.finally(()=>{Hs.#A.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=yi.platform;return St(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:n})=>{if(n){this.#e.resolve();return}this.#s??=t.lang,Object.assign(this.#f,t.styles),this.#T(t.items),e()},this.#e.reject)};return this.#c=this.#g.getReader(),Hs.#A.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const n=e.scale*ur.pixelRatio,r=e.rotation;if(r!==this.#d&&(t?.(),this.#d=r,_o(this.#l,{rotation:r})),n!==this.#h){t?.(),this.#h=n;const l={div:null,properties:null,ctx:Hs.#R(this.#s)};for(const u of this.#u)l.properties=this.#p.get(u),l.div=u,this.#S(l)}}cancel(){const e=new va("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#T(e){if(this.#n)return;this.#r.ctx??=Hs.#R(this.#s);const t=this.#u,n=this.#m;for(const r of e){if(t.length>R6){xt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const l=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),r.id&&this.#t.setAttribute("id",`${r.id}`),l.append(this.#t)}else r.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}n.push(r.str),this.#E(r)}}#E(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(t);const r=Ke.transform(this.#y,e.transform);let l=Math.atan2(r[1],r[0]);const u=this.#f[e.fontName];u.vertical&&(l+=Math.PI/2);let f=this.#i&&u.fontSubstitution||u.fontFamily;f=Hs.fontFamilyMap.get(f)||f;const y=Math.hypot(r[2],r[3]),m=y*Hs.#B(f,u,this.#s);let A,E;l===0?(A=r[4],E=r[5]-m):(A=r[4]+m*Math.sin(l),E=r[5]-m*Math.cos(l));const T="calc(var(--total-scale-factor) *",N=t.style;this.#t===this.#l?(N.left=`${(100*A/this.#o).toFixed(2)}%`,N.top=`${(100*E/this.#a).toFixed(2)}%`):(N.left=`${T}${A.toFixed(2)}px)`,N.top=`${T}${E.toFixed(2)}px)`),N.fontSize=`${T}${(Hs.#v*y).toFixed(2)}px)`,N.fontFamily=f,n.fontSize=y,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#i&&(t.dataset.fontName=u.fontSubstitutionLoadedName||e.fontName),l!==0&&(n.angle=l*(180/Math.PI));let M=!1;if(e.str.length>1)M=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const R=Math.abs(e.transform[0]),L=Math.abs(e.transform[3]);R!==L&&Math.max(R,L)/Math.min(R,L)>1.5&&(M=!0)}if(M&&(n.canvasWidth=u.vertical?e.height:e.width),this.#p.set(t,n),this.#r.div=t,this.#r.properties=n,this.#S(this.#r),n.hasText&&this.#t.append(t),n.hasEOL){const R=document.createElement("br");R.setAttribute("role","presentation"),this.#t.append(R)}}#S(e){const{div:t,properties:n,ctx:r}=e,{style:l}=t;let u="";if(Hs.#v>1&&(u=`scale(${1/Hs.#v})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:f}=l,{canvasWidth:y,fontSize:m}=n;Hs.#I(r,m*this.#h,f);const{width:A}=r.measureText(t.textContent);A>0&&(u=`scaleX(${y*this.#h/A}) ${u}`)}n.angle!==0&&(u=`rotate(${n.angle}deg) ${u}`),u.length>0&&(l.transform=u)}static cleanup(){if(!(this.#A.size>0)){this.#b.clear();for(const{canvas:e}of this.#x.values())e.remove();this.#x.clear()}}static#R(e=null){let t=this.#x.get(e||="");if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#x.set(e,t),this.#C.set(t,{size:0,family:""})}return t}static#I(e,t,n){const r=this.#C.get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)}static#N(){if(this.#v!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#v=e.getBoundingClientRect().height,e.remove()}static#B(e,t,n){const r=this.#b.get(e);if(r)return r;const l=this.#R(n);l.canvas.width=l.canvas.height=pw,this.#I(l,pw,e);const u=l.measureText(""),f=u.fontBoundingBoxAscent,y=Math.abs(u.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let m=.8;return f?m=f/(f+y):(yi.platform.isFirefox&&xt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?m=t.ascent:t.descent&&(m=1+t.descent)),this.#b.set(e,m),m}};const M6=100;function Dm(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const e=new Om,{docId:t}=e,n=i.url?j8(i.url):null,r=i.data?U8(i.data):null,l=i.httpHeaders||null,u=i.withCredentials===!0,f=i.password??null,y=i.range instanceof Lm?i.range:null,m=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let A=i.worker instanceof Nc?i.worker:null;const E=i.verbosity,T=typeof i.docBaseUrl=="string"&&!Nh(i.docBaseUrl)?i.docBaseUrl:null,N=of(i.cMapUrl),M=i.cMapPacked!==!1,R=i.CMapReaderFactory||(ji?q8:tw),L=of(i.iccUrl),k=of(i.standardFontDataUrl),P=i.StandardFontDataFactory||(ji?W8:nw),j=of(i.wasmUrl),U=i.WasmFactory||(ji?K8:iw),G=i.stopAtErrors!==!0,Y=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,V=i.isEvalSupported!==!1,ie=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!ji,Q=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!ji&&(yi.platform.isFirefox||!globalThis.chrome),be=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,we=typeof i.disableFontFace=="boolean"?i.disableFontFace:ji,oe=i.fontExtraProperties===!0,Ee=i.enableXfa===!0,Se=i.ownerDocument||globalThis.document,ae=i.disableRange===!0,K=i.disableStream===!0,re=i.disableAutoFetch===!0,Ie=i.pdfBug===!0,Ue=i.CanvasFactory||(ji?X8:V8),Je=i.FilterFactory||(ji?Y8:G8),$=i.enableHWA===!0,ue=i.useWasm!==!1,Ce=y?y.length:i.length??NaN,Oe=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!ji&&!we,Ve=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(R===tw&&P===nw&&U===iw&&N&&k&&j&&Yu(N,document.baseURI)&&Yu(k,document.baseURI)&&Yu(j,document.baseURI)),Re=null;A8(E);const Ge={canvasFactory:new Ue({ownerDocument:Se,enableHWA:$}),filterFactory:new Je({docId:t,ownerDocument:Se}),cMapReaderFactory:Ve?null:new R({baseUrl:N,isCompressed:M}),standardFontDataFactory:Ve?null:new P({baseUrl:k}),wasmFactory:Ve?null:new U({baseUrl:j})};A||(A=Nc.create({verbosity:E,port:vo.workerPort}),e._worker=A);const Ne={docId:t,apiVersion:"5.4.296",data:r,password:f,disableAutoFetch:re,rangeChunkSize:m,length:Ce,docBaseUrl:T,enableXfa:Ee,evaluatorOptions:{maxImageSize:Y,disableFontFace:we,ignoreErrors:G,isEvalSupported:V,isOffscreenCanvasSupported:ie,isImageDecoderSupported:Q,canvasMaxAreaInBytes:be,fontExtraProperties:oe,useSystemFonts:Oe,useWasm:ue,useWorkerFetch:Ve,cMapUrl:N,iccUrl:L,standardFontDataUrl:k,wasmUrl:j}},Qe={ownerDocument:Se,pdfBug:Ie,styleElement:Re,loadingParams:{disableAutoFetch:re,enableXfa:Ee}};return A.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(A.destroyed)throw new Error("Worker was destroyed");const ct=A.messageHandler.sendWithPromise("GetDocRequest",Ne,r?[r.buffer]:null);let Ht;if(y)Ht=new f6(y,{disableRange:ae,disableStream:K});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const kn=Yu(n)?y6:ji?T6:E6;Ht=new kn({url:n,length:Ce,httpHeaders:l,withCredentials:u,rangeChunkSize:m,disableRange:ae,disableStream:K})}return ct.then(kn=>{if(e.destroyed)throw new Error("Loading aborted");if(A.destroyed)throw new Error("Worker was destroyed");const Ye=new Xu(t,kn,A.port),bt=new L6(Ye,e,Ht,Qe,Ge,$);e._transport=bt,Ye.send("Ready",null)})}).catch(e._capability.reject),e}class Om{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Om.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let Lm=class{#e=Promise.withResolvers();#t=[];#n=[];#i=[];#s=[];constructor(e,t,n=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(e){this.#s.push(e)}addProgressListener(e){this.#i.push(e)}addProgressiveReadListener(e){this.#n.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const n of this.#s)n(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const n of this.#i)n(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#n)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){bn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class D6{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return St(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class O6{#e=!1;constructor(e,t,n,r=!1){this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new WA:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new mS,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:l=!1}={}){return new Ih({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:l})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return St(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:r="display",annotationMode:l=Fr.ENABLE,transform:u=null,background:f=null,optionalContentConfigPromise:y=null,annotationCanvasMap:m=null,pageColors:A=null,printAnnotationStorage:E=null,isEditing:T=!1,recordOperations:N=!1,operationsFilter:M=null}){this._stats?.time("Overall");const R=this._transport.getRenderingIntent(r,l,E,T),{renderingIntent:L,cacheKey:k}=R;this.#e=!1,y||=this._transport.getOptionalContentConfig(L);let P=this._intentStates.get(k);P||(P=Object.create(null),this._intentStates.set(k,P)),P.streamReaderCancelTimeout&&(clearTimeout(P.streamReaderCancelTimeout),P.streamReaderCancelTimeout=null);const j=!!(L&ws.PRINT);P.displayReadyCapability||(P.displayReadyCapability=Promise.withResolvers(),P.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(R));const U=!!(this._pdfBug&&globalThis.StepperManager?.enabled),G=!this.recordedBBoxes&&(N||U),Y=Q=>{if(P.renderTasks.delete(V),G){const be=V.gfx?.dependencyTracker.take();be&&(V.stepper&&V.stepper.setOperatorBBoxes(be,V.gfx.dependencyTracker.takeDebugMetadata()),N&&(this.recordedBBoxes=be))}j&&(this.#e=!0),this.#t(),Q?(V.capability.reject(Q),this._abortOperatorList({intentState:P,reason:Q instanceof Error?Q:new Error(Q)})):V.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},V=new fc({callback:Y,params:{canvas:t,canvasContext:e,dependencyTracker:G?new Z8(t,P.operatorList.length,U):null,viewport:n,transform:u,background:f},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:m,operatorList:P.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!j,pdfBug:this._pdfBug,pageColors:A,enableHWA:this._transport.enableHWA,operationsFilter:M});(P.renderTasks||=new Set).add(V);const ie=V.task;return Promise.all([P.displayReadyCapability.promise,y]).then(([Q,be])=>{if(this.destroyed){Y();return}if(this._stats?.time("Rendering"),!(be.renderingIntent&L))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");V.initializeGraphics({transparency:Q,optionalContentConfig:be}),V.operatorListChanged()}).catch(Y),ie}getOperatorList({intent:e="display",annotationMode:t=Fr.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){function l(){f.operatorList.lastChunk&&(f.opListReadCapability.resolve(f.operatorList),f.renderTasks.delete(y))}const u=this._transport.getRenderingIntent(e,t,n,r,!0);let f=this._intentStates.get(u.cacheKey);f||(f=Object.create(null),this._intentStates.set(u.cacheKey,f));let y;return f.opListReadCapability||(y=Object.create(null),y.operatorListChanged=l,f.opListReadCapability=Promise.withResolvers(),(f.renderTasks||=new Set).add(y),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(u)),f.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>lh.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function l(){u.read().then(function({value:y,done:m}){if(m){n(f);return}f.lang??=y.lang,Object.assign(f.styles,y.styles),f.items.push(...y.items),l()},r)}const u=t.getReader(),f={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new WA),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:l,transfer:u}=n,y=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:l,modifiedIds:r},u).getReader(),m=this._intentStates.get(t);m.streamReader=y;const A=()=>{y.read().then(({value:E,done:T})=>{if(T){m.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(E,m),A())},E=>{if(m.streamReader=null,!this._transport.destroyed){if(m.operatorList){m.operatorList.lastChunk=!0;for(const T of m.renderTasks)T.operatorListChanged();this.#t()}if(m.displayReadyCapability)m.displayReadyCapability.reject(E);else if(m.opListReadCapability)m.opListReadCapability.reject(E);else throw E}})};A()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof m0){let r=M6;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new va(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,l]of this._intentStates)if(l===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var xo,ir,pa,rl,Qf,al,ol,zi,Sf,yS,xS,qu,vc,Cf;const Dn=class Dn{constructor({name:e=null,port:t=null,verbosity:n=w8()}={}){Tr(this,zi);Tr(this,xo,Promise.withResolvers());Tr(this,ir,null);Tr(this,pa,null);Tr(this,rl,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(Mn(Dn,ol).has(t))throw new Error("Cannot use more than one PDFWorker per port.");Mn(Dn,ol).set(t,this),Ir(this,zi,yS).call(this,t)}else Ir(this,zi,xS).call(this)}get promise(){return Mn(this,xo).promise}get port(){return Mn(this,pa)}get messageHandler(){return Mn(this,ir)}destroy(){this.destroyed=!0,Mn(this,rl)?.terminate(),Ji(this,rl,null),Mn(Dn,ol).delete(Mn(this,pa)),Ji(this,pa,null),Mn(this,ir)?.destroy(),Ji(this,ir,null)}static create(e){const t=Mn(this,ol).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Dn(e)}static get workerSrc(){if(vo.workerSrc)return vo.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return St(this,"_setupFakeWorkerGlobal",(async()=>Mn(this,vc,Cf)?Mn(this,vc,Cf):(await import(this.workerSrc)).WorkerMessageHandler)())}};xo=new WeakMap,ir=new WeakMap,pa=new WeakMap,rl=new WeakMap,Qf=new WeakMap,al=new WeakMap,ol=new WeakMap,zi=new WeakSet,Sf=function(){Mn(this,xo).resolve(),Mn(this,ir).send("configure",{verbosity:this.verbosity})},yS=function(e){Ji(this,pa,e),Ji(this,ir,new Xu("main","worker",e)),Mn(this,ir).on("ready",()=>{}),Ir(this,zi,Sf).call(this)},xS=function(){if(Mn(Dn,al)||Mn(Dn,vc,Cf)){Ir(this,zi,qu).call(this);return}let{workerSrc:e}=Dn;try{Dn._isSameOrigin(window.location,e)||(e=Dn._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Xu("main","worker",t),r=()=>{l.abort(),n.destroy(),t.terminate(),this.destroyed?Mn(this,xo).reject(new Error("Worker was destroyed")):Ir(this,zi,qu).call(this)},l=new AbortController;t.addEventListener("error",()=>{Mn(this,rl)||r()},{signal:l.signal}),n.on("test",f=>{if(l.abort(),this.destroyed||!f){r();return}Ji(this,ir,n),Ji(this,pa,t),Ji(this,rl,t),Ir(this,zi,Sf).call(this)}),n.on("ready",f=>{if(l.abort(),this.destroyed){r();return}try{u()}catch{Ir(this,zi,qu).call(this)}});const u=()=>{const f=new Uint8Array;n.send("test",f,[f.buffer])};u();return}catch{p0("The worker has been disabled.")}Ir(this,zi,qu).call(this)},qu=function(){Mn(Dn,al)||(xt("Setting up fake worker."),Ji(Dn,al,!0)),Dn._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Mn(this,xo).reject(new Error("Worker was destroyed"));return}const t=new H8;Ji(this,pa,t);const n=`fake${Yb(Dn,Qf)._++}`,r=new Xu(n+"_worker",n,t);e.setup(r,t),Ji(this,ir,new Xu(n,n+"_worker",t)),Ir(this,zi,Sf).call(this)}).catch(e=>{Mn(this,xo).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},vc=new WeakSet,Cf=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Tr(Dn,vc),Tr(Dn,Qf,0),Tr(Dn,al,!1),Tr(Dn,ol,new WeakMap),ji&&(Ji(Dn,al,!0),vo.workerSrc||="./pdf.worker.mjs"),Dn._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!n?.origin||n.origin==="null")return!1;const r=new URL(t,n);return n.origin===r.origin},Dn._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Dn.fromPort=e=>{if(R8("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Dn.create(e)};let Nc=Dn;class L6{#e=new Map;#t=new Map;#n=new Map;#i=new Map;#s=null;constructor(e,t,n,r,l,u){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new mS,this.fontLoader=new B8({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=u,this.setupMessageHandler()}#r(e,t=null){const n=this.#e.get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,r),r}get annotationStorage(){return St(this,"annotationStorage",new Im)}getRenderingIntent(e,t=Fr.ENABLE,n=null,r=!1,l=!1){let u=ws.DISPLAY,f=Mp;switch(e){case"any":u=ws.ANY;break;case"display":break;case"print":u=ws.PRINT;break;default:xt(`getRenderingIntent - invalid intent: ${e}`)}const y=u&ws.PRINT&&n instanceof iS?n:this.annotationStorage;switch(t){case Fr.DISABLE:u+=ws.ANNOTATIONS_DISABLE;break;case Fr.ENABLE:break;case Fr.ENABLE_FORMS:u+=ws.ANNOTATIONS_FORMS;break;case Fr.ENABLE_STORAGE:u+=ws.ANNOTATIONS_STORAGE,f=y.serializable;break;default:xt(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(u+=ws.IS_EDITING),l&&(u+=ws.OPLIST);const{ids:m,hash:A}=y.modifiedIds,E=[u,f.hash,A];return{renderingIntent:u,cacheKey:E.join("_"),annotationStorageSerializable:f,modifiedIds:m}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of this.#t.values())e.push(n._destroy());this.#t.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),ch.cleanup(),this._networkStream?.cancelAllRequests(new va("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{Ut(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},r.onPull=()=>{this._fullReader.read().then(function({value:l,done:u}){if(u){r.close();return}Ut(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{this._fullReader.cancel(l),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:l,contentLength:u}=this._fullReader;return(!r||!l)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=f=>{t.onProgress?.({loaded:f.loaded,total:f.total})}),{isStreamingSupported:r,isRangeSupported:l,contentLength:u}}),e.on("GetRangeReader",(n,r)=>{Ut(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(n.begin,n.end);if(!l){r.close();return}r.onPull=()=>{l.read().then(function({value:u,done:f}){if(f){r.close();return}Ut(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{r.error(u)})},r.onCancel=u=>{l.cancel(u),r.ready.catch(f=>{if(!this.destroyed)throw f})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new D6(n,this))}),e.on("DocException",n=>{t._capability.reject(es(n))}),e.on("PasswordRequest",n=>{this.#s=Promise.withResolvers();try{if(!t.onPassword)throw es(n);const r=l=>{l instanceof Error?this.#s.reject(l):this.#s.resolve({password:l})};t.onPassword(r,n.code)}catch(r){this.#s.reject(r)}return this.#s.promise}),e.on("DataLoaded",n=>{t.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;this.#t.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,l])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in l){const A=l.error;xt(`Error during font loading: ${A}`),this.commonObjs.resolve(n,A);break}const u=new dn(l),f=this._params.pdfBug&&globalThis.FontInspector?.enabled?(A,E)=>globalThis.FontInspector.fontAdded(A,E):null,y=new F8(u,f,l.extra,l.charProcOperatorList);this.fontLoader.bind(y).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!y.fontExtraProperties&&y.data&&y.clearData(),this.commonObjs.resolve(n,y)});break;case"CopyLocalImage":const{imageRef:m}=l;Ut(m,"The imageRef must be defined.");for(const A of this.#t.values())for(const[,E]of A.objs)if(E?.ref===m)return E.dataLen?(this.commonObjs.resolve(n,structuredClone(E)),E.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,l);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,l,u])=>{if(this.destroyed)return;const f=this.#t.get(r);if(!f.objs.has(n)){if(f._intentStates.size===0){u?.bitmap?.close();return}switch(l){case"Image":case"Pattern":f.objs.resolve(n,u);break;default:throw new Error(`Got unknown object type ${l}`)}}}),e.on("DocProgress",n=>{this.destroyed||t.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&xt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=this.#n.get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#i.set(l.refStr,e);const u=new O6(t,l,this,this._params.pdfBug);return this.#t.set(t,u),u});return this.#n.set(t,r),r}getPageIndex(e){return Dp(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#r("GetOptionalContentConfig").then(t=>new d6(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>({info:r[0],metadata:r[1]?new u6(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),ch.cleanup()}}cachedPageNumber(e){if(!Dp(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#i.get(t)??null}}class k6{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class fc{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:l,operatorList:u,pageIndex:f,canvasFactory:y,filterFactory:m,useRequestAnimationFrame:A=!1,pdfBug:E=!1,pageColors:T=null,enableHWA:N=!1,operationsFilter:M=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=f,this.canvasFactory=y,this.filterFactory=m,this._pdfBug=E,this.pageColors=T,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=A===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new k6(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=N,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=M}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(fc.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");fc.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:l,dependencyTracker:u}=this.params,f=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new xc(f,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,u),this.gfx.beginDrawing({transform:r,viewport:n,transparency:e,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),fc.#t.delete(this._canvas),e||=new m0(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),fc.#t.delete(this._canvas),this.callback())))}}const km="5.4.296",bS="f56dc8601";class Es{#e=null;#t=null;#n;#i=null;#s=!1;#r=!1;#a=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return St(this,"_keyboardManager",new Rh([[["Escape","mac+Escape"],Es.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Es.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Es.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Es.prototype._moveToPrevious],[["Home","mac+Home"],Es.prototype._moveToBeginning],[["End","mac+End"],Es.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#r=!1,this.#a=e):this.#r=!0,this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#n=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Es.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#a&&(e.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#g.bind(this),{signal:t}),e.addEventListener("keydown",this.#m.bind(this),{signal:t});const n=this.#t=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#n,e.append(n),e}renderMainDropdown(){const e=this.#i=this.#h();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#h(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",_s,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(e.id=`${this.#a.id}_colorpicker_dropdown`);for(const[n,r]of this.#l.highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",r),l.title=n,l.setAttribute("data-l10n-id",Es.#d[n]);const u=document.createElement("span");l.append(u),u.className="swatch",u.style.backgroundColor=r,l.ariaSelected=r===this.#n,l.addEventListener("click",this.#f.bind(this,r),{signal:t}),e.append(l)}return e.addEventListener("keydown",this.#m.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Bt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#g(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#p){this.#g(e);return}if(e.target===this.#e){this.#i.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#i?.firstChild||e.target===this.#e){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#p){this.#g(e);return}this.#i.firstChild?.focus()}_moveToEnd(e){if(!this.#p){this.#g(e);return}this.#i.lastChild?.focus()}#m(e){Es._keyboardManager.exec(this,e)}#g(e){if(this.#p){this.hideDropdown();return}if(this.#s=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const t=this.#i=this.#h();this.#e.append(t)}#u(e){this.#i?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#p){this.#a?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#i)return;const t=this.#l.highlightColors.values();for(const n of this.#i.children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#i?.remove(),this.#i=null}}class uh{#e=null;#t=null;#n=null;static#i=null;constructor(e){this.#t=e,this.#n=e._uiManager,uh.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,colorValue:n}=this.#t,r=this.#e=document.createElement("input");return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",uh.#i[e]),r.addEventListener("input",()=>{this.#n.updateParams(t,r.value)},{signal:this.#n._signal}),r}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function mw(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Uu(i){return Math.max(0,Math.min(255,255*i))}class yw{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Uu(e),[e,e,e]}static G_HTML([e]){const t=mw(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Uu)}static RGB_HTML(e){return`#${e.map(mw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[Uu(1-Math.min(1,e+r)),Uu(1-Math.min(1,n+r)),Uu(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,l=1-t,u=1-n,f=Math.min(r,l,u);return["CMYK",r,l,u,f]}}class P6{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){bn("Abstract method `_createSVG` called.")}}class hh extends P6{_createSVG(e){return document.createElementNS(ga,e)}}const B6=9,pl=new WeakSet,F6=new Date().getTimezoneOffset()*60*1e3;class xw{static create(e){switch(e.data.annotationType){case Zn.LINK:return new Pm(e);case Zn.TEXT:return new U6(e);case Zn.WIDGET:switch(e.data.fieldType){case"Tx":return new z6(e);case"Btn":return e.data.radioButton?new AS(e):e.data.checkBox?new V6(e):new G6(e);case"Ch":return new Y6(e);case"Sig":return new H6(e)}return new Al(e);case Zn.POPUP:return new kp(e);case Zn.FREETEXT:return new wS(e);case Zn.LINE:return new q6(e);case Zn.SQUARE:return new W6(e);case Zn.CIRCLE:return new K6(e);case Zn.POLYLINE:return new ES(e);case Zn.CARET:return new Z6(e);case Zn.INK:return new Bm(e);case Zn.POLYGON:return new Q6(e);case Zn.HIGHLIGHT:return new vS(e);case Zn.UNDERLINE:return new $6(e);case Zn.SQUIGGLY:return new J6(e);case Zn.STRIKEOUT:return new eL(e);case Zn.STAMP:return new SS(e);case Zn.FILEATTACHMENT:return new tL(e);default:return new Fn(e)}}}class Fn{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Fn._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:r}=this.data;let l=-1/0,u=-1/0;if(t?.length>=8){for(let f=0;f<t.length;f+=8)t[f+1]>u?(u=t[f+1],l=t[f+2]):t[f+1]===u&&(l=Math.max(l,t[f+2]));return[l,u]}if(n?.length>=1){for(const f of n)for(let y=0,m=f.length;y<m;y+=2)f[y+1]>u?(u=f[y+1],l=f[y]):f[y+1]===u&&(l=Math.max(l,f[y]));if(l!==1/0)return[l,u]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:l,pageY:u}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-l)/n,e[1]=100*(e[1]-u)/r,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${ah}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${ah}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:n}=e;t&&this.#i(t);let r=this.#n?.popup||this.popup;!r&&n?.text&&(this._createPopup(n),r=this.#n.popup),r&&(r.updateEdited(e),n?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#e&&(this.#i(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#i(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:u,pageX:f,pageY:y}}}}=this;n?.splice(0,4,...e),t.left=`${100*(e[0]-f)/l}%`,t.top=`${100*(u-e[3]+y)/u}%`,r===0?(t.width=`${100*(e[2]-e[0])/l}%`,t.height=`${100*(e[3]-e[1])/u}%`):this.setRotation(r)}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",t.id),!(this instanceof Al)&&!(this instanceof Pm)&&(l.tabIndex=0);const{style:u}=l;if(u.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(l.title=t.alternativeText),t.noRotate&&l.classList.add("norotate"),!t.rect||this instanceof kp){const{rotation:R}=t;return!t.hasOwnCanvas&&R!==0&&this.setRotation(R,l),l}const{width:f,height:y}=this;if(!e&&t.borderStyle.width>0){u.borderWidth=`${t.borderStyle.width}px`;const R=t.borderStyle.horizontalCornerRadius,L=t.borderStyle.verticalCornerRadius;if(R>0||L>0){const P=`calc(${R}px * var(--total-scale-factor)) / calc(${L}px * var(--total-scale-factor))`;u.borderRadius=P}else if(this instanceof AS){const P=`calc(${f}px * var(--total-scale-factor)) / calc(${y}px * var(--total-scale-factor))`;u.borderRadius=P}switch(t.borderStyle.style){case oc.SOLID:u.borderStyle="solid";break;case oc.DASHED:u.borderStyle="dashed";break;case oc.BEVELED:xt("Unimplemented border style: beveled");break;case oc.INSET:xt("Unimplemented border style: inset");break;case oc.UNDERLINE:u.borderBottomStyle="solid";break}const k=t.borderColor||null;k?(this.#t=!0,u.borderColor=Ke.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):u.borderWidth=0}const m=Ke.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:A,pageHeight:E,pageX:T,pageY:N}=r.rawDims;u.left=`${100*(m[0]-T)/A}%`,u.top=`${100*(m[1]-N)/E}%`;const{rotation:M}=t;return t.hasOwnCanvas||M===0?(u.width=`${100*f/A}%`,u.height=`${100*y/E}%`):this.setRotation(M,l),l}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:l,height:u}=this;e%180!==0&&([l,u]=[u,l]),t.style.width=`${100*l/n}%`,t.style.height=`${100*u/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const l=r.detail[t],u=l[0],f=l.slice(1);r.target.style[n]=yw[`${u}_HTML`](f),this.annotationStorage.setValue(this.data.id,{[n]:yw[`${u}_rgb`](f)})};return St(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail))(e[r]||n[r])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,l]of Object.entries(t)){const u=n[r];if(u){const f={detail:{[r]:l},target:e};u(f),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,l]=this.data.rect.map(R=>Math.fround(R));if(e.length===8){const[R,L,k,P]=e.subarray(2,6);if(r===R&&l===L&&t===k&&n===P)return}const{style:u}=this.container;let f;if(this.#t){const{borderColor:R,borderWidth:L}=u;u.borderWidth=0,f=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${R}" stroke-width="${L}">`],this.container.classList.add("hasBorder")}const y=r-t,m=l-n,{svgFactory:A}=this,E=A.createElement("svg");E.classList.add("quadrilateralsContainer"),E.setAttribute("width",0),E.setAttribute("height",0),E.role="none";const T=A.createElement("defs");E.append(T);const N=A.createElement("clipPath"),M=`clippath_${this.data.id}`;N.setAttribute("id",M),N.setAttribute("clipPathUnits","objectBoundingBox"),T.append(N);for(let R=2,L=e.length;R<L;R+=8){const k=e[R],P=e[R+1],j=e[R+2],U=e[R+3],G=A.createElement("rect"),Y=(j-t)/y,V=(l-P)/m,ie=(k-j)/y,Q=(P-U)/m;G.setAttribute("x",Y),G.setAttribute("y",V),G.setAttribute("width",ie),G.setAttribute("height",Q),N.append(G),f?.push(`<rect vector-effect="non-scaling-stroke" x="${Y}" y="${V}" width="${ie}" height="${Q}"/>`)}this.#t&&(f.push("</g></svg>')"),u.backgroundImage=f.join("")),this.container.append(E),this.container.style.clipPath=`url(#${M})`}_createPopup(e=null){const{data:t}=this;let n,r;e?(n={str:e.text},r=e.date):(n=t.contentsObj,r=t.modificationDate);const l=this.#n=new kp({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(l.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){bn("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:l,id:u,exportValues:f}of r){if(l===-1||u===t)continue;const y=typeof f=="string"?f:null,m=document.querySelector(`[data-element-id="${u}"]`);if(m&&!pl.has(m)){xt(`_getElementsByName - element not allowed: ${u}`);continue}n.push({id:u,exportValue:y,domElement:m})}return n}for(const r of document.getElementsByName(e)){const{exportValue:l}=r,u=r.getAttribute("data-element-id");u!==t&&pl.has(r)&&n.push({id:u,exportValue:l,domElement:r})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class j6 extends Fn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class Pm extends Fn{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),r=!0):e.attachment?(this.#t(n,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(this.#n(n,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,n=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),n&&(e.title=n)}_bindNamedAction(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),n&&(e.title=n),this.#e()}#t(e,t,n="",r=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:n&&(e.title=n),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,r),!1),this.#e()}#n(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),n&&(e.title=n),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const l=n.get(r);l&&(e[l]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){xt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{n?.();const{fields:r,refs:l,include:u}=t,f=[];if(r.length!==0||l.length!==0){const A=new Set(l);for(const E of r){const T=this._fieldObjects[E]||[];for(const{id:N}of T)A.add(N)}for(const E of Object.values(this._fieldObjects))for(const T of E)A.has(T.id)===u&&f.push(T)}else for(const A of Object.values(this._fieldObjects))f.push(...A);const y=this.annotationStorage,m=[];for(const A of f){const{id:E}=A;switch(m.push(E),A.type){case"text":{const N=A.defaultValue||"";y.setValue(E,{value:N});break}case"checkbox":case"radiobutton":{const N=A.defaultValue===A.exportValues;y.setValue(E,{value:N});break}case"combobox":case"listbox":{const N=A.defaultValue||"";y.setValue(E,{value:N});break}default:continue}const T=document.querySelector(`[data-element-id="${E}"]`);if(T){if(!pl.has(T)){xt(`_bindResetFormAction - element not allowed: ${E}`);continue}}else continue;T.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}}),!1}}}class U6 extends Fn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Al extends Fn{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return yi.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,l){n.includes("mouse")?e.addEventListener(n,u=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):e.addEventListener(n,u=>{if(n==="blur"){if(!t.focused||!u.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}l&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(u)}})})}_setEventListeners(e,t,n,r){for(const[l,u]of n)(u==="Action"||this.data.actions?.[u])&&((u==="Focus"||u==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,l,u,r),u==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ke.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||B6,l=e.style;let u;const f=2,y=m=>Math.round(10*m)/10;if(this.data.multiLine){const m=Math.abs(this.data.rect[3]-this.data.rect[1]-f),A=Math.round(m/(K1*r))||1,E=m/A;u=Math.min(r,y(E/K1))}else{const m=Math.abs(this.data.rect[3]-this.data.rect[1]-f);u=Math.min(r,y(m/K1))}l.fontSize=`calc(${u}px * var(--total-scale-factor))`,l.color=Ke.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(l.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class z6 extends Al{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const l=this.annotationStorage;for(const u of this._getElementsByName(e.name,e.id))u.domElement&&(u.domElement[t]=n),l.setValue(u.id,{[r]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const r=e.getValue(t,{value:this.data.fieldValue});let l=r.value||"";const u=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;u&&l.length>u&&(l=l.slice(0,u));let f=r.formattedValue||this.data.textContent?.join(`
`)||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const y={userValue:l,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",f??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),pl.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:m,datetimeType:A,timeStep:E}=this.data,T=!!A&&this.enableScripting;m&&(n.title=m),this._setRequired(n,this.data.required),u&&(n.maxLength=u),n.addEventListener("input",M=>{e.setValue(t,{value:M.target.value}),this.setPropertyOnSiblings(n,"value",M.target.value,"value"),y.formattedValue=null}),n.addEventListener("resetform",M=>{const R=this.data.defaultFieldValue??"";n.value=y.userValue=R,y.formattedValue=null});let N=M=>{const{formattedValue:R}=y;R!=null&&(M.target.value=R),M.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",R=>{if(y.focused)return;const{target:L}=R;if(T&&(L.type=A,E&&(L.step=E)),y.userValue){const k=y.userValue;if(T)if(A==="time"){const P=new Date(k),j=[P.getHours(),P.getMinutes(),P.getSeconds()];L.value=j.map(U=>U.toString().padStart(2,"0")).join(":")}else L.value=new Date(k-F6).toISOString().split(A==="date"?"T":".",1)[0];else L.value=k}y.lastCommittedValue=L.value,y.commitKey=1,this.data.actions?.Focus||(y.focused=!0)}),n.addEventListener("updatefromsandbox",R=>{this.showElementAndHideCanvas(R.target);const L={value(k){y.userValue=k.detail.value??"",T||e.setValue(t,{value:y.userValue.toString()}),k.target.value=y.userValue},formattedValue(k){const{formattedValue:P}=k.detail;y.formattedValue=P,P!=null&&k.target!==document.activeElement&&(k.target.value=P);const j={formattedValue:P};T&&(j.value=P),e.setValue(t,j)},selRange(k){k.target.setSelectionRange(...k.detail.selRange)},charLimit:k=>{const{charLimit:P}=k.detail,{target:j}=k;if(P===0){j.removeAttribute("maxLength");return}j.setAttribute("maxLength",P);let U=y.userValue;!U||U.length<=P||(U=U.slice(0,P),j.value=y.userValue=U,e.setValue(t,{value:U}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:U,willCommit:!0,commitKey:1,selStart:j.selectionStart,selEnd:j.selectionEnd}}))}};this._dispatchEventFromSandbox(L,R)}),n.addEventListener("keydown",R=>{y.commitKey=1;let L=-1;if(R.key==="Escape"?L=0:R.key==="Enter"&&!this.data.multiLine?L=2:R.key==="Tab"&&(y.commitKey=3),L===-1)return;const{value:k}=R.target;y.lastCommittedValue!==k&&(y.lastCommittedValue=k,y.userValue=k,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,willCommit:!0,commitKey:L,selStart:R.target.selectionStart,selEnd:R.target.selectionEnd}}))});const M=N;N=null,n.addEventListener("blur",R=>{if(!y.focused||!R.relatedTarget)return;this.data.actions?.Blur||(y.focused=!1);const{target:L}=R;let{value:k}=L;if(T){if(k&&A==="time"){const P=k.split(":").map(j=>parseInt(j,10));k=new Date(2e3,0,1,P[0],P[1],P[2]||0).valueOf(),L.step=""}else k.includes("T")||(k=`${k}T00:00`),k=new Date(k).valueOf();L.type="text"}y.userValue=k,y.lastCommittedValue!==k&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,willCommit:!0,commitKey:y.commitKey,selStart:R.target.selectionStart,selEnd:R.target.selectionEnd}}),M(R)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",R=>{y.lastCommittedValue=null;const{data:L,target:k}=R,{value:P,selectionStart:j,selectionEnd:U}=k;let G=j,Y=U;switch(R.inputType){case"deleteWordBackward":{const V=P.substring(0,j).match(/\w*[^\w]*$/);V&&(G-=V[0].length);break}case"deleteWordForward":{const V=P.substring(j).match(/^[^\w]*\w*/);V&&(Y+=V[0].length);break}case"deleteContentBackward":j===U&&(G-=1);break;case"deleteContentForward":j===U&&(Y+=1);break}R.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:P,change:L||"",willCommit:!1,selStart:G,selEnd:Y}})}),this._setEventListeners(n,y,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],R=>R.target.value)}if(N&&n.addEventListener("blur",N),this.data.comb){const R=(this.data.rect[2]-this.data.rect[0])/u;n.classList.add("comb"),n.style.letterSpacing=`calc(${R}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class H6 extends Al{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class V6 extends Al{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return pl.add(l),l.setAttribute("data-element-id",n),l.disabled=t.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=t.fieldName,r&&l.setAttribute("checked",!0),l.setAttribute("exportValue",t.exportValue),l.tabIndex=0,l.addEventListener("change",u=>{const{name:f,checked:y}=u.target;for(const m of this._getElementsByName(f,n)){const A=y&&m.exportValue===t.exportValue;m.domElement&&(m.domElement.checked=A),e.setValue(m.id,{value:A})}e.setValue(n,{value:y})}),l.addEventListener("resetform",u=>{const f=t.defaultFieldValue||"Off";u.target.checked=f===t.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",u=>{const f={value(y){y.target.checked=y.detail.value!=="Off",e.setValue(n,{value:y.target.checked})}};this._dispatchEventFromSandbox(f,u)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class AS extends Al{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const u of this._getElementsByName(t.fieldName,n))e.setValue(u.id,{value:!1});const l=document.createElement("input");if(pl.add(l),l.setAttribute("data-element-id",n),l.disabled=t.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=t.fieldName,r&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",u=>{const{name:f,checked:y}=u.target;for(const m of this._getElementsByName(f,n))e.setValue(m.id,{value:!1});e.setValue(n,{value:y})}),l.addEventListener("resetform",u=>{const f=t.defaultFieldValue;u.target.checked=f!=null&&f===t.buttonValue}),this.enableScripting&&this.hasJSActions){const u=t.buttonValue;l.addEventListener("updatefromsandbox",f=>{const y={value:m=>{const A=u===m.detail.value;for(const E of this._getElementsByName(m.target.name)){const T=A&&E.id===n;E.domElement&&(E.domElement.checked=T),e.setValue(E.id,{value:T})}}};this._dispatchEventFromSandbox(y,f)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class G6 extends Pm{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class Y6 extends Al{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");pl.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",A=>{const E=this.data.defaultFieldValue;for(const T of r.options)T.selected=T.value===E});for(const A of this.data.options){const E=document.createElement("option");E.textContent=A.displayValue,E.value=A.exportValue,n.value.includes(A.exportValue)&&(E.setAttribute("selected",!0),l=!1),r.append(E)}let u=null;if(l){const A=document.createElement("option");A.value=" ",A.setAttribute("hidden",!0),A.setAttribute("selected",!0),r.prepend(A),u=()=>{A.remove(),r.removeEventListener("input",u),u=null},r.addEventListener("input",u)}const f=A=>{const E=A?"value":"textContent",{options:T,multiple:N}=r;return N?Array.prototype.filter.call(T,M=>M.selected).map(M=>M[E]):T.selectedIndex===-1?null:T[T.selectedIndex][E]};let y=f(!1);const m=A=>{const E=A.target.options;return Array.prototype.map.call(E,T=>({displayValue:T.textContent,exportValue:T.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",A=>{const E={value(T){u?.();const N=T.detail.value,M=new Set(Array.isArray(N)?N:[N]);for(const R of r.options)R.selected=M.has(R.value);e.setValue(t,{value:f(!0)}),y=f(!1)},multipleSelection(T){r.multiple=!0},remove(T){const N=r.options,M=T.detail.remove;N[M].selected=!1,r.remove(M),N.length>0&&Array.prototype.findIndex.call(N,L=>L.selected)===-1&&(N[0].selected=!0),e.setValue(t,{value:f(!0),items:m(T)}),y=f(!1)},clear(T){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),y=f(!1)},insert(T){const{index:N,displayValue:M,exportValue:R}=T.detail.insert,L=r.children[N],k=document.createElement("option");k.textContent=M,k.value=R,L?L.before(k):r.append(k),e.setValue(t,{value:f(!0),items:m(T)}),y=f(!1)},items(T){const{items:N}=T.detail;for(;r.length!==0;)r.remove(0);for(const M of N){const{displayValue:R,exportValue:L}=M,k=document.createElement("option");k.textContent=R,k.value=L,r.append(k)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:f(!0),items:m(T)}),y=f(!1)},indices(T){const N=new Set(T.detail.indices);for(const M of T.target.options)M.selected=N.has(M.index);e.setValue(t,{value:f(!0)}),y=f(!1)},editable(T){T.target.disabled=!T.detail.editable}};this._dispatchEventFromSandbox(E,A)}),r.addEventListener("input",A=>{const E=f(!0),T=f(!1);e.setValue(t,{value:E}),A.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,change:T,changeEx:E,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],A=>A.target.value)):r.addEventListener("input",function(A){e.setValue(t,{value:f(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class kp extends Fn{constructor(e){const{data:t,elements:n,parent:r}=e,l=!!r._commentManager;if(super(e,{isRenderable:!l&&Fn._hasPopupData(t)}),this.elements=n,l&&Fn._hasPopupData(t)){const u=this.popup=this.#e();for(const f of n)f.popup=u}else this.popup=null}#e(){return new X6({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),n=[];for(const r of this.elements)r.popup=t,r.container.ariaHasPopup="dialog",n.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(r=>`${vm}${r}`).join(",")),this.container}}class X6{#e=null;#t=this.#G.bind(this);#n=this.#j.bind(this);#i=this.#O.bind(this);#s=this.#w.bind(this);#r=null;#a=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#g=null;#u=null;#p=null;#y=null;#b=null;#x=null;#C=null;#v=null;#A=null;#T=!1;#E=null;#S=null;constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:l,contentsObj:u,richText:f,parent:y,rect:m,parentRect:A,open:E,commentManager:T=null}){this.#a=e,this.#v=r,this.#o=u,this.#C=f,this.#d=y,this.#r=t,this.#x=m,this.#h=A,this.#l=n,this.#e=T,this.#E=n[0],this.#c=qf.toDateObject(l),this.trigger=n.flatMap(N=>N.getElementsToTriggerPopup()),T?this.renderCommentButton():(this.#R(),this.#a.hidden=!0,E&&this.#w())}#R(){if(this.#g)return;this.#g=new AbortController;const{signal:e}=this.#g;for(const t of this.trigger)t.addEventListener("click",this.#s,{signal:e}),t.addEventListener("pointerenter",this.#i,{signal:e}),t.addEventListener("pointerleave",this.#n,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#I(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#y=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#p||(this.#y||this.#I(),!this.#y))return;const{signal:e}=this.#g=new AbortController,t=!!this.#E.extraPopupElement,n=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},r=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},l=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#p=this.#E.container;for(const u of this.trigger)u.ariaHasPopup="dialog",u.ariaControls="commentPopup",u.addEventListener("keydown",this.#t,{signal:e}),u.addEventListener("click",n,{signal:e}),u.addEventListener("pointerenter",r,{signal:e}),u.addEventListener("pointerleave",l,{signal:e}),u.classList.add("popupTriggerArea")}else{const u=this.#p=document.createElement("button");u.className="annotationCommentButton";const f=this.#E.container;u.style.zIndex=f.style.zIndex+1,u.tabIndex=0,u.ariaHasPopup="dialog",u.ariaControls="commentPopup",u.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#B(),this.#N(),u.addEventListener("keydown",this.#t,{signal:e}),u.addEventListener("click",n,{signal:e}),u.addEventListener("pointerenter",r,{signal:e}),u.addEventListener("pointerleave",l,{signal:e}),f.after(u)}}#N(){if(this.#E.extraPopupElement&&!this.#E.editor)return;this.renderCommentButton();const[e,t]=this.#y,{style:n}=this.#p;n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`}#B(){this.#E.extraPopupElement||(this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#E.commentData;return e?this.#d._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:r,modificationDate:l}=this.#E.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:r,modificationDate:l}}get elementBeforePopup(){return this.#p}get comment(){return this.#S||=this.#E.commentText,this.#S}set comment(e){e!==this.comment&&(this.#E.commentText=this.#S=e)}get parentBoundingClientRect(){return this.#E.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#p&&(this.#p.classList.toggle("selected",e),this.#p.ariaExpanded=t)}setSelectedCommentButton(e){this.#p.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:e,y:t,height:n}=this.#p.getBoundingClientRect(),{x:r,y:l,width:u,height:f}=this.#E.layer.getBoundingClientRect();return[(e-r)/u,(t+n-l)/f]}set commentPopupPosition(e){this.#b=e}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=this.#b||this.commentButtonPosition.map(m=>m/100),r=this.parentBoundingClientRect,{x:l,y:u,width:f,height:y}=r;this.#e.showDialog(null,this,l+t*f,u+n*y,{...e,parentDimensions:r})}render(){if(this.#m)return;const e=this.#m=document.createElement("div");if(e.className="popup",this.#r){const n=e.style.outlineColor=Ke.makeHexColor(...this.#r);e.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#v?.str){const n=document.createElement("span");n.className="title",t.append(n),{dir:n.dir,str:n.textContent}=this.#v}if(e.append(t),this.#c){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.dateTime=this.#c.toISOString(),t.append(n)}Cm({html:this.#D||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#a.append(e)}get#D(){const e=this.#C,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#C.html||null}get#L(){return this.#D?.attributes?.style?.fontSize||0}get#F(){return this.#D?.attributes?.style?.color||null}#k(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:this.#F,fontSize:this.#L?`calc(${this.#L}px * var(--total-scale-factor))`:""}};for(const l of e.split(`
`))t.push({name:"span",value:l,attributes:r});return n}#G(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:e,popup:t,deleted:n}){if(this.#e){n?(this.remove(),this.#S=null):t&&(t.deleted?this.remove():(this.#B(),this.#S=t.text)),e&&(this.#y=null,this.#I(),this.#N());return}if(n||t?.deleted){this.remove();return}this.#R(),this.#A||={contentsObj:this.#o,richText:this.#C},e&&(this.#u=null),t&&t.text&&(this.#C=this.#k(t.text),this.#c=qf.toDateObject(t.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#C}=this.#A,this.#A=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#T=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#_(){if(this.#u!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:l}}}=this.#d;let u=!!this.#h,f=u?this.#h:this.#x;for(const M of this.#l)if(!f||Ke.intersect(M.data.rect,f)!==null){f=M.data.rect,u=!0;break}const y=Ke.normalizeRect([f[0],e[3]-f[1]+e[1],f[2],e[3]-f[3]+e[1]]),A=u?f[2]-f[0]+5:0,E=y[0]+A,T=y[1];this.#u=[100*(E-r)/t,100*(T-l)/n];const{style:N}=this.#a;N.left=`${this.#u[0]}%`,N.top=`${this.#u[1]}%`}#w(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#O(),this.#a.addEventListener("click",this.#s),this.#a.addEventListener("keydown",this.#t)):(this.#j(),this.#a.removeEventListener("click",this.#s),this.#a.removeEventListener("keydown",this.#t))}#O(){this.#m||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#_(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#j(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#a.hidden=!0)}maybeShow(){this.#e||(this.#R(),this.#T&&(this.#m||this.#O(),this.#T=!1,this.#a.hidden=!1))}get isVisible(){return this.#e?!1:this.#a.hidden===!1}}class wS extends Fn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=yt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class q6 extends Fn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),l=this.#e=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),l.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),l.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),l.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),l.setAttribute("stroke-width",e.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class W6 extends Fn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),l=e.borderStyle.width,u=this.#e=this.svgFactory.createElement("svg:rect");return u.setAttribute("x",l/2),u.setAttribute("y",l/2),u.setAttribute("width",t-l),u.setAttribute("height",n-l),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),r.append(u),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class K6 extends Fn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),l=e.borderStyle.width,u=this.#e=this.svgFactory.createElement("svg:ellipse");return u.setAttribute("cx",t/2),u.setAttribute("cy",n/2),u.setAttribute("rx",t/2-l/2),u.setAttribute("ry",n/2-l/2),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),r.append(u),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class ES extends Fn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:r},width:l,height:u}=this;if(!t)return this.container;const f=this.svgFactory.create(l,u,!0);let y=[];for(let A=0,E=t.length;A<E;A+=2){const T=t[A]-e[0],N=e[3]-t[A+1];y.push(`${T},${N}`)}y=y.join(" ");const m=this.#e=this.svgFactory.createElement(this.svgElementName);return m.setAttribute("points",y),m.setAttribute("stroke-width",n.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),f.append(m),this.container.append(f),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Q6 extends ES{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Z6 extends Fn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Bm extends Fn{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?yt.HIGHLIGHT:yt.INK}#n(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:r,popupRef:l}}=this,{transform:u,width:f,height:y}=this.#n(t,e),m=this.svgFactory.create(f,y,!0),A=this.#e=this.svgFactory.createElement("svg:g");m.append(A),A.setAttribute("stroke-width",r.width||1),A.setAttribute("stroke-linecap","round"),A.setAttribute("stroke-linejoin","round"),A.setAttribute("stroke-miterlimit",10),A.setAttribute("stroke","transparent"),A.setAttribute("fill","transparent"),A.setAttribute("transform",u);for(let E=0,T=n.length;E<T;E++){const N=this.svgFactory.createElement(this.svgElementName);this.#t.push(N),N.setAttribute("points",n[E].join(",")),A.append(N)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:r}=e,l=this.#e;if(t>=0&&l.setAttribute("stroke-width",t||1),n)for(let u=0,f=this.#t.length;u<f;u++)this.#t[u].setAttribute("points",n[u].join(","));if(r){const{transform:u,width:f,height:y}=this.#n(this.data.rotation,r);l.parentElement.setAttribute("viewBox",`0 0 ${f} ${y}`),l.setAttribute("transform",u)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class vS extends Fn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=yt.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class $6 extends Fn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class J6 extends Fn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class eL extends Fn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class SS extends Fn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=yt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class tL extends Fn{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||t.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#t.bind(this)),this.#e=n;const{isMac:r}=yi.platform;return e.addEventListener("keydown",l=>{l.key==="Enter"&&(r?l.metaKey:l.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let Fm=class CS{#e=null;#t=null;#n=null;#i=new Map;#s=null;#r=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:l,viewport:u,structTreeLayer:f,commentManager:y,linkService:m,annotationStorage:A}){this.div=e,this.#e=t,this.#t=n,this.#s=f||null,this.#r=m||null,this.#n=A||new Im,this.page=l,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=y||null}hasEditableAnnotations(){return this.#i.size>0}async#a(e,t,n){const r=e.firstChild||e,l=r.id=`${vm}${t}`,u=await this.#s?.getAriaAttributes(l);if(u)for(const[f,y]of u)r.setAttribute(f,y);n?n.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,r,!1))}async render(e){const{annotations:t}=e,n=this.div;_o(n,this.viewport);const r=new Map,l={data:null,layer:n,linkService:this.#r,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new hh,annotationStorage:this.#n,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const f=u.annotationType===Zn.POPUP;if(f){const A=r.get(u.id);if(!A)continue;l.elements=A}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;l.data=u;const y=xw.create(l);if(!y.isRenderable)continue;if(!f&&u.popupRef){const A=r.get(u.popupRef);A?A.push(y):r.set(u.popupRef,[y])}const m=y.render();u.hidden&&(m.style.visibility="hidden"),await this.#a(m,u.id,l.elements),y.extraPopupElement?.popup?.renderCommentButton(),y._isEditable&&(this.#i.set(y.data.id,y),this._annotationEditorUIManager?.renderAnnotationElement(y))}this.#o()}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#r,svgFactory:new hh,parent:this};for(const n of e){n.borderStyle||=CS._defaultBorderStyle,t.data=n;const r=xw.create(t);if(!r.isRenderable)continue;const l=r.render();await this.#a(l,n.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,_o(t,{rotation:e.rotation}),this.#o(),t.hidden=!1}#o(){if(!this.#t)return;const e=this.div;for(const[t,n]of this.#t){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:l}=r;l?l.nodeName==="CANVAS"?l.replaceWith(n):l.classList.contains("annotationContent")?l.after(n):l.before(n):r.append(n);const u=this.#i.get(t);u&&(u._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,r.id,n),u._hasNoCanvas=!1):u.canvas=n)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(e){return this.#i.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:r}=e,l=new j6({data:{id:n,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#n}),u=l.render();return t.append(u),this.#e?.moveElementInDOM(t,u,u,!1),l.createOrUpdatePopup(),l}static get _defaultBorderStyle(){return St(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:oc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const ff=/\r\n?|\n/g;class pi extends it{#e="";#t=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=pi.prototype,t=l=>l.isEmpty(),n=Sa.TRANSLATE_SMALL,r=Sa.TRANSLATE_BIG;return St(this,"_keyboardManager",new Rh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}static _type="freetext";static _editorType=yt.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||pi._defaultColor||it._defaultLineColor,this.#i=e.fontSize||pi._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){it.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Bt.FREETEXT_SIZE:pi._defaultFontSize=t;break;case Bt.FREETEXT_COLOR:pi._defaultColor=t;break}}updateParams(e,t){switch(e){case Bt.FREETEXT_SIZE:this.#s(t);break;case Bt.FREETEXT_COLOR:this.#r(t);break}}static get defaultPropertiesToUpdate(){return[[Bt.FREETEXT_SIZE,pi._defaultFontSize],[Bt.FREETEXT_COLOR,pi._defaultColor||it._defaultLineColor]]}get propertiesToUpdate(){return[[Bt.FREETEXT_SIZE,this.#i],[Bt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new uh(this),[["colorPicker",this._colorPicker]]}get colorType(){return Bt.FREETEXT_COLOR}#s(e){const t=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#o()},n=this.#i;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(e){const t=r=>{this.color=r,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-pi._internalPadding*e,-(pi._internalPadding+this.#i)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const e=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const e=[];this.editorDiv.normalize();let t=null;for(const n of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(e.push(pi.#c(n)),t=n);return e.join(`
`)}#o(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:l}=this,u=l.style.display,f=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",r.div.append(this.div),n=l.getBoundingClientRect(),l.remove(),l.style.display=u,l.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#a().trimEnd();if(e===t)return;const n=r=>{if(this.#e=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){pi._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,l]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[f,y]=this.getInitialTranslation();[f,y]=this.pageTranslationToScreen(f,y);const[m,A]=this.pageDimensions,[E,T]=this.pageTranslation;let N,M;switch(this.rotation){case 0:N=e+(u[0]-E)/m,M=t+this.height-(u[1]-T)/A;break;case 90:N=e+(u[0]-E)/m,M=t-(u[1]-T)/A,[f,y]=[y,-f];break;case 180:N=e-this.width+(u[0]-E)/m,M=t-(u[1]-T)/A,[f,y]=[-f,-y];break;case 270:N=e+(u[0]-E-this.height*A)/m,M=t+(u[1]-T-this.width*m)/A,[f,y]=[-y,f];break}this.setAt(N*r,M*l,f,y)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(ff,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const r=pi.#h(t.getData("text")||"").replaceAll(ff,`
`);if(!r)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const u=l.getRangeAt(0);if(!r.includes(`
`)){u.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:f,startOffset:y}=u,m=[],A=[];if(f.nodeType===Node.TEXT_NODE){const N=f.parentElement;if(A.push(f.nodeValue.slice(y).replaceAll(ff,"")),N!==this.editorDiv){let M=m;for(const R of this.editorDiv.childNodes){if(R===N){M=A;continue}M.push(pi.#c(R))}}m.push(f.nodeValue.slice(0,y).replaceAll(ff,""))}else if(f===this.editorDiv){let N=m,M=0;for(const R of this.editorDiv.childNodes)M++===y&&(N=A),N.push(pi.#c(R))}this.#e=`${m.join(`
`)}${r}${A.join(`
`)}`,this.#l();const E=new Range;let T=Math.sumPrecise(m.map(N=>N.length));for(const{firstChild:N}of this.editorDiv.childNodes)if(N.nodeType===Node.TEXT_NODE){const M=N.nodeValue.length;if(T<=M){E.setStart(N,T),E.setEnd(N,T);break}T-=M}l.removeAllRanges(),l.addRange(E)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#d(){return this.#e.replaceAll(""," ")}static#h(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=pi._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,n){let r=null;if(e instanceof wS){const{data:{defaultAppearanceData:{fontSize:u,fontColor:f},rect:y,rotation:m,id:A,popupRef:E,richText:T,contentsObj:N,creationDate:M,modificationDate:R},textContent:L,textPosition:k,parent:{page:{pageNumber:P}}}=e;if(!L||L.length===0)return null;r=e={annotationType:yt.FREETEXT,color:Array.from(f),fontSize:u,value:L.join(`
`),position:k,pageIndex:P-1,rect:y.slice(0),rotation:m,annotationElementId:A,id:A,deleted:!1,popupRef:E,comment:N?.str||null,richText:T,creationDate:M,modificationDate:R}}const l=await super.deserialize(e,t,n);return l.#i=e.fontSize,l.color=Ke.makeHexColor(...e.color),l.#e=pi.#h(e.value),l._initialData=r,e.comment&&l.setCommentData(e),l}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=it._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(e),{color:t,fontSize:this.#i,value:this.#d()});return this.addComment(n),e?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(e){const{value:t,fontSize:n,color:r,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((u,f)=>u!==r[f])||e.pageIndex!==l}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:n}=t;n.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,n.color=this.color,t.replaceChildren();for(const r of this.#e.split(`
`)){const l=document.createElement("div");l.append(r?document.createTextNode(r):document.createElement("br")),t.append(l)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class We{static PRECISION=1e-4;toSVGPath(){bn("Abstract method `toSVGPath` must be implemented.")}get box(){bn("Abstract getter `box` must be implemented.")}serialize(e,t){bn("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,l,u){u||=new Float32Array(e.length);for(let f=0,y=e.length;f<y;f+=2)u[f]=t+e[f]*r,u[f+1]=n+e[f+1]*l;return u}static _rescaleAndSwap(e,t,n,r,l,u){u||=new Float32Array(e.length);for(let f=0,y=e.length;f<y;f+=2)u[f]=t+e[f+1]*r,u[f+1]=n+e[f]*l;return u}static _translate(e,t,n,r){r||=new Float32Array(e.length);for(let l=0,u=e.length;l<u;l+=2)r[l]=t+e[l],r[l+1]=n+e[l+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,l){switch(l){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,l,u){return[(e+5*n)/6,(t+5*r)/6,(5*n+l)/6,(5*r+u)/6,(n+l)/2,(r+u)/2]}}class sl{#e;#t=[];#n;#i;#s=[];#r=new Float32Array(18);#a;#o;#c;#l;#d;#h;#f=[];static#m=8;static#g=2;static#u=sl.#m+sl.#g;constructor({x:e,y:t},n,r,l,u,f=0){this.#e=n,this.#h=l*r,this.#i=u,this.#r.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=f,this.#l=sl.#m*r,this.#c=sl.#u*r,this.#d=r,this.#f.push(e,t)}isEmpty(){return isNaN(this.#r[8])}#p(){const e=this.#r.subarray(4,6),t=this.#r.subarray(16,18),[n,r,l,u]=this.#e;return[(this.#a+(e[0]-t[0])/2-n)/l,(this.#o+(e[1]-t[1])/2-r)/u,(this.#a+(t[0]-e[0])/2-n)/l,(this.#o+(t[1]-e[1])/2-r)/u]}add({x:e,y:t}){this.#a=e,this.#o=t;const[n,r,l,u]=this.#e;let[f,y,m,A]=this.#r.subarray(8,12);const E=e-m,T=t-A,N=Math.hypot(E,T);if(N<this.#c)return!1;const M=N-this.#l,R=M/N,L=R*E,k=R*T;let P=f,j=y;f=m,y=A,m+=L,A+=k,this.#f?.push(e,t);const U=-k/M,G=L/M,Y=U*this.#h,V=G*this.#h;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([m+Y,A+V],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([m-Y,A-V],16),isNaN(this.#r[6])?(this.#s.length===0&&(this.#r.set([f+Y,y+V],2),this.#s.push(NaN,NaN,NaN,NaN,(f+Y-n)/l,(y+V-r)/u),this.#r.set([f-Y,y-V],14),this.#t.push(NaN,NaN,NaN,NaN,(f-Y-n)/l,(y-V-r)/u)),this.#r.set([P,j,f,y,m,A],6),!this.isEmpty()):(this.#r.set([P,j,f,y,m,A],6),Math.abs(Math.atan2(j-y,P-f)-Math.atan2(k,L))<Math.PI/2?([f,y,m,A]=this.#r.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((f+m)/2-n)/l,((y+A)/2-r)/u),[f,y,P,j]=this.#r.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((P+f)/2-n)/l,((j+y)/2-r)/u),!0):([P,j,f,y,m,A]=this.#r.subarray(0,6),this.#s.push(((P+5*f)/6-n)/l,((j+5*y)/6-r)/u,((5*f+m)/6-n)/l,((5*y+A)/6-r)/u,((f+m)/2-n)/l,((y+A)/2-r)/u),[m,A,f,y,P,j]=this.#r.subarray(12,18),this.#t.push(((P+5*f)/6-n)/l,((j+5*y)/6-r)/u,((5*f+m)/6-n)/l,((5*y+A)/6-r)/u,((f+m)/2-n)/l,((y+A)/2-r)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#s,t=this.#t;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);this.#x(n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return this.#b(n),n.join(" ")}#y(){const[e,t,n,r]=this.#e,[l,u,f,y]=this.#p();return`M${(this.#r[2]-e)/n} ${(this.#r[3]-t)/r} L${(this.#r[4]-e)/n} ${(this.#r[5]-t)/r} L${l} ${u} L${f} ${y} L${(this.#r[16]-e)/n} ${(this.#r[17]-t)/r} L${(this.#r[14]-e)/n} ${(this.#r[15]-t)/r} Z`}#b(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#x(e){const[t,n,r,l]=this.#e,u=this.#r.subarray(4,6),f=this.#r.subarray(16,18),[y,m,A,E]=this.#p();e.push(`L${(u[0]-t)/r} ${(u[1]-n)/l} L${y} ${m} L${A} ${E} L${(f[0]-t)/r} ${(f[1]-n)/l}`)}newFreeDrawOutline(e,t,n,r,l,u){return new _S(e,t,n,r,l,u)}getOutlines(){const e=this.#s,t=this.#t,n=this.#r,[r,l,u,f]=this.#e,y=new Float32Array((this.#f?.length??0)+2);for(let E=0,T=y.length-2;E<T;E+=2)y[E]=(this.#f[E]-r)/u,y[E+1]=(this.#f[E+1]-l)/f;if(y[y.length-2]=(this.#a-r)/u,y[y.length-1]=(this.#o-l)/f,isNaN(n[6])&&!this.isEmpty())return this.#C(y);const m=new Float32Array(this.#s.length+24+this.#t.length);let A=e.length;for(let E=0;E<A;E+=2){if(isNaN(e[E])){m[E]=m[E+1]=NaN;continue}m[E]=e[E],m[E+1]=e[E+1]}A=this.#A(m,A);for(let E=t.length-6;E>=6;E-=6)for(let T=0;T<6;T+=2){if(isNaN(t[E+T])){m[A]=m[A+1]=NaN,A+=2;continue}m[A]=t[E+T],m[A+1]=t[E+T+1],A+=2}return this.#v(m,A),this.newFreeDrawOutline(m,y,this.#e,this.#d,this.#n,this.#i)}#C(e){const t=this.#r,[n,r,l,u]=this.#e,[f,y,m,A]=this.#p(),E=new Float32Array(36);return E.set([NaN,NaN,NaN,NaN,(t[2]-n)/l,(t[3]-r)/u,NaN,NaN,NaN,NaN,(t[4]-n)/l,(t[5]-r)/u,NaN,NaN,NaN,NaN,f,y,NaN,NaN,NaN,NaN,m,A,NaN,NaN,NaN,NaN,(t[16]-n)/l,(t[17]-r)/u,NaN,NaN,NaN,NaN,(t[14]-n)/l,(t[15]-r)/u],0),this.newFreeDrawOutline(E,e,this.#e,this.#d,this.#n,this.#i)}#v(e,t){const n=this.#t;return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6}#A(e,t){const n=this.#r.subarray(4,6),r=this.#r.subarray(16,18),[l,u,f,y]=this.#e,[m,A,E,T]=this.#p();return e.set([NaN,NaN,NaN,NaN,(n[0]-l)/f,(n[1]-u)/y,NaN,NaN,NaN,NaN,m,A,NaN,NaN,NaN,NaN,E,T,NaN,NaN,NaN,NaN,(r[0]-l)/f,(r[1]-u)/y],t),t+=24}}class _S extends We{#e;#t=new Float32Array(4);#n;#i;#s;#r;#a;constructor(e,t,n,r,l,u){super(),this.#a=e,this.#s=t,this.#e=n,this.#r=r,this.#n=l,this.#i=u,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(u);const[f,y,m,A]=this.#t;for(let E=0,T=e.length;E<T;E+=2)e[E]=(e[E]-f)/m,e[E+1]=(e[E+1]-y)/A;for(let E=0,T=t.length;E<T;E+=2)t[E]=(t[E]-f)/m,t[E+1]=(t[E+1]-y)/A}toSVGPath(){const e=[`M${this.#a[4]} ${this.#a[5]}`];for(let t=6,n=this.#a.length;t<n;t+=6){if(isNaN(this.#a[t])){e.push(`L${this.#a[t+4]} ${this.#a[t+5]}`);continue}e.push(`C${this.#a[t]} ${this.#a[t+1]} ${this.#a[t+2]} ${this.#a[t+3]} ${this.#a[t+4]} ${this.#a[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,n,r],l){const u=n-e,f=r-t;let y,m;switch(l){case 0:y=We._rescale(this.#a,e,r,u,-f),m=We._rescale(this.#s,e,r,u,-f);break;case 90:y=We._rescaleAndSwap(this.#a,e,t,u,f),m=We._rescaleAndSwap(this.#s,e,t,u,f);break;case 180:y=We._rescale(this.#a,n,t,-u,f),m=We._rescale(this.#s,n,t,-u,f);break;case 270:y=We._rescaleAndSwap(this.#a,n,r,-u,-f),m=We._rescaleAndSwap(this.#s,n,r,-u,-f);break}return{outline:Array.from(y),points:[Array.from(m)]}}#o(e){const t=this.#a;let n=t[4],r=t[5];const l=[n,r,n,r];let u=n,f=r,y=n,m=r;const A=e?Math.max:Math.min,E=new Float32Array(4);for(let N=6,M=t.length;N<M;N+=6){const R=t[N+4],L=t[N+5];isNaN(t[N])?(Ke.pointBoundingBox(R,L,l),f>L?(u=R,f=L):f===L&&(u=A(u,R)),m<L?(y=R,m=L):m===L&&(y=A(y,R))):(E[0]=E[1]=1/0,E[2]=E[3]=-1/0,Ke.bezierBoundingBox(n,r,...t.slice(N,N+6),E),Ke.rectBoundingBox(E[0],E[1],E[2],E[3],l),f>E[1]?(u=E[0],f=E[1]):f===E[1]&&(u=A(u,E[0])),m<E[3]?(y=E[2],m=E[3]):m===E[3]&&(y=A(y,E[2]))),n=R,r=L}const T=this.#t;T[0]=l[0]-this.#n,T[1]=l[1]-this.#n,T[2]=l[2]-l[0]+2*this.#n,T[3]=l[3]-l[1]+2*this.#n,this.firstPoint=[u,f],this.lastPoint=[y,m]}get box(){return this.#t}newOutliner(e,t,n,r,l,u=0){return new sl(e,t,n,r,l,u)}getNewOutline(e,t){const[n,r,l,u]=this.#t,[f,y,m,A]=this.#e,E=l*m,T=u*A,N=n*m+f,M=r*A+y,R=this.newOutliner({x:this.#s[0]*E+N,y:this.#s[1]*T+M},this.#e,this.#r,e,this.#i,t??this.#n);for(let L=2;L<this.#s.length;L+=2)R.add({x:this.#s[L]*E+N,y:this.#s[L+1]*T+M});return R.getOutlines()}}class Pp{#e;#t;#n;#i=[];#s=[];constructor(e,t=0,n=0,r=!0){const l=[1/0,1/0,-1/0,-1/0],u=10**-4;for(const{x:R,y:L,width:k,height:P}of e){const j=Math.floor((R-t)/u)*u,U=Math.ceil((R+k+t)/u)*u,G=Math.floor((L-t)/u)*u,Y=Math.ceil((L+P+t)/u)*u,V=[j,G,Y,!0],ie=[U,G,Y,!1];this.#i.push(V,ie),Ke.rectBoundingBox(j,G,U,Y,l)}const f=l[2]-l[0]+2*n,y=l[3]-l[1]+2*n,m=l[0]-n,A=l[1]-n;let E=r?-1/0:1/0,T=1/0;const N=this.#i.at(r?-1:-2),M=[N[0],N[2]];for(const R of this.#i){const[L,k,P,j]=R;!j&&r?k<T?(T=k,E=L):k===T&&(E=Math.max(E,L)):j&&!r&&(k<T?(T=k,E=L):k===T&&(E=Math.min(E,L))),R[0]=(L-m)/f,R[1]=(k-A)/y,R[2]=(P-A)/y}this.#e=new Float32Array([m,A,f,y]),this.#t=[E,T],this.#n=M}getOutlines(){this.#i.sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of this.#i)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#c(t),e.push(...this.#l(t)));return this.#r(e)}#r(e){const t=[],n=new Set;for(const u of e){const[f,y,m]=u;t.push([f,y,u],[f,m,u])}t.sort((u,f)=>u[1]-f[1]||u[0]-f[0]);for(let u=0,f=t.length;u<f;u+=2){const y=t[u][2],m=t[u+1][2];y.push(m),m.push(y),n.add(y),n.add(m)}const r=[];let l;for(;n.size>0;){const u=n.values().next().value;let[f,y,m,A,E]=u;n.delete(u);let T=f,N=y;for(l=[f,m],r.push(l);;){let M;if(n.has(A))M=A;else if(n.has(E))M=E;else break;n.delete(M),[f,y,m,A,E]=M,T!==f&&(l.push(T,N,f,N===y?y:m),T=f),N=N===y?m:y}l.push(T,N)}return new nL(r,this.#e,this.#t,this.#n)}#a(e){const t=this.#s;let n=0,r=t.length-1;for(;n<=r;){const l=n+r>>1,u=t[l][0];if(u===e)return l;u<e?n=l+1:r=l-1}return r+1}#o([,e,t]){const n=this.#a(e);this.#s.splice(n,0,[e,t])}#c([,e,t]){const n=this.#a(e);for(let r=n;r<this.#s.length;r++){const[l,u]=this.#s[r];if(l!==e)break;if(l===e&&u===t){this.#s.splice(r,1);return}}for(let r=n-1;r>=0;r--){const[l,u]=this.#s[r];if(l!==e)break;if(l===e&&u===t){this.#s.splice(r,1);return}}}#l(e){const[t,n,r]=e,l=[[t,n,r]],u=this.#a(r);for(let f=0;f<u;f++){const[y,m]=this.#s[f];for(let A=0,E=l.length;A<E;A++){const[,T,N]=l[A];if(!(m<=T||N<=y)){if(T>=y){if(N>m)l[A][1]=m;else{if(E===1)return[];l.splice(A,1),A--,E--}continue}l[A][2]=y,N>m&&l.push([t,m,N])}}}return l}}class nL extends We{#e;#t;constructor(e,t,n,r){super(),this.#t=e,this.#e=t,this.firstPoint=n,this.lastPoint=r}toSVGPath(){const e=[];for(const t of this.#t){let[n,r]=t;e.push(`M${n} ${r}`);for(let l=2;l<t.length;l+=2){const u=t[l],f=t[l+1];u===n?(e.push(`V${f}`),r=f):f===r&&(e.push(`H${u}`),n=u)}e.push("Z")}return e.join(" ")}serialize([e,t,n,r],l){const u=[],f=n-e,y=r-t;for(const m of this.#t){const A=new Array(m.length);for(let E=0;E<m.length;E+=2)A[E]=e+m[E]*f,A[E+1]=r-m[E+1]*y;u.push(A)}return u}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class Bp extends sl{newFreeDrawOutline(e,t,n,r,l,u){return new iL(e,t,n,r,l,u)}}class iL extends _S{newOutliner(e,t,n,r,l,u=0){return new Bp(e,t,n,r,l,u)}}class $n extends it{#e=null;#t=0;#n;#i=null;#s=null;#r=null;#a=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#g=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=yt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=$n.prototype;return St(this,"_keyboardManager",new Rh([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||$n._defaultColor,this.#p=e.thickness||$n._defaultThickness,this.opacity=e.opacity||$n._defaultOpacity,this.#n=e.boxes||null,this.#y=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#h=!0,this.#x(e),this.#E()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#a=e.focusNode,this.#o=e.focusOffset,this.#b(),this.#E(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#b(){const e=new Pp(this.#n,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new Pp(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=t.getOutlines();const{firstPoint:n}=this.#l;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:r}=this.#r;this.#m=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#x({highlightOutlines:e,highlightId:t,clipPathId:n}){this.#l=e;const r=1.5;if(this.#r=e.getNewOutline(this.#p/2+r,.0025),t>=0)this.#d=t,this.#i=n,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const E=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:$n.#S(this.#l.box,(E-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:$n.#S(this.#r.box,E),path:{d:this.#r.toSVGPath()}})}const[l,u,f,y]=e.box;switch(this.rotation){case 0:this.x=l,this.y=u,this.width=f,this.height=y;break;case 90:{const[E,T]=this.parentDimensions;this.x=u,this.y=1-l,this.width=f*T/E,this.height=y*E/T;break}case 180:this.x=1-l,this.y=1-u,this.width=f,this.height=y;break;case 270:{const[E,T]=this.parentDimensions;this.x=1-u,this.y=l,this.width=f*T/E,this.height=y*E/T;break}}const{firstPoint:m}=e;this.#f=[(m[0]-l)/f,(m[1]-u)/y];const{lastPoint:A}=this.#r;this.#m=[(A[0]-l)/f,(A[1]-u)/y]}static initialize(e,t){it.initialize(e,t),$n._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case Bt.HIGHLIGHT_COLOR:$n._defaultColor=t;break;case Bt.HIGHLIGHT_THICKNESS:$n._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case Bt.HIGHLIGHT_COLOR:this.#C(t);break;case Bt.HIGHLIGHT_THICKNESS:this.#v(t);break}}static get defaultPropertiesToUpdate(){return[[Bt.HIGHLIGHT_COLOR,$n._defaultColor],[Bt.HIGHLIGHT_THICKNESS,$n._defaultThickness]]}get propertiesToUpdate(){return[[Bt.HIGHLIGHT_COLOR,this.color||$n._defaultColor],[Bt.HIGHLIGHT_THICKNESS,this.#p||$n._defaultThickness],[Bt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#s?.updateColor(this.color),super.onUpdatedColor()}#C(e){const t=(l,u)=>{this.color=l,this.opacity=u,this.onUpdatedColor()},n=this.color,r=this.opacity;this.addCommands({cmd:t.bind(this,e,$n._defaultOpacity),undo:t.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#v(e){const t=this.#p,n=r=>{this.#p=r,this.#A(r)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#s=new Es({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#N())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#N())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#E(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#T():e&&(this.#E(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#A(e){this.#h&&(this.#x({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#E(e=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#S([e,t,n,r],l){switch(l){case 90:return[1-t-r,e,r,n];case 180:return[1-e-n,1-t-r,n,r];case 270:return[t,1-e-n,r,n]}return[e,t,n,r]}rotate(e){const{drawLayer:t}=this.parent;let n;this.#h?(e=(e-this.rotation+360)%360,n=$n.#S(this.#l.box,e)):n=$n.#S([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#d,{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(this.#g,{bbox:$n.#S(this.#r.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#h?e.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#i,this.setDims(this.width,this.height),tS(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#R(e){$n._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#I(!0);break;case 1:case 3:this.#I(!1);break}}#I(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#a,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#I(!1))}get _mustFixPosition(){return!this.#h}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!e}}))}#N(){return this.#h?this.rotation:0}#B(){if(this.#h)return null;const[e,t]=this.pageDimensions,[n,r]=this.pageTranslation,l=this.#n,u=new Float32Array(l.length*8);let f=0;for(const{x:y,y:m,width:A,height:E}of l){const T=y*e+n,N=(1-m)*t+r;u[f]=u[f+4]=T,u[f+1]=u[f+3]=N,u[f+2]=u[f+6]=T+A*e,u[f+5]=u[f+7]=N-E*t,f+=8}return u}#D(e){return this.#l.serialize(e,this.#N())}static startHighlighting(e,t,{target:n,x:r,y:l}){const{x:u,y:f,width:y,height:m}=n.getBoundingClientRect(),A=new AbortController,E=e.combinedSignal(A),T=N=>{A.abort(),this.#F(e,N)};window.addEventListener("blur",T,{signal:E}),window.addEventListener("pointerup",T,{signal:E}),window.addEventListener("pointerdown",Bn,{capture:!0,passive:!1,signal:E}),window.addEventListener("contextmenu",_s,{signal:E}),n.addEventListener("pointermove",this.#L.bind(this,e),{signal:E}),this._freeHighlight=new Bp({x:r,y:l},[u,f,y,m],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,n){let r=null;if(e instanceof vS){const{data:{quadPoints:M,rect:R,rotation:L,id:k,color:P,opacity:j,popupRef:U,richText:G,contentsObj:Y,creationDate:V,modificationDate:ie},parent:{page:{pageNumber:Q}}}=e;r=e={annotationType:yt.HIGHLIGHT,color:Array.from(P),opacity:j,quadPoints:M,boxes:null,pageIndex:Q-1,rect:R.slice(0),rotation:L,annotationElementId:k,id:k,deleted:!1,popupRef:U,richText:G,comment:Y?.str||null,creationDate:V,modificationDate:ie}}else if(e instanceof Bm){const{data:{inkLists:M,rect:R,rotation:L,id:k,color:P,borderStyle:{rawWidth:j},popupRef:U,richText:G,contentsObj:Y,creationDate:V,modificationDate:ie},parent:{page:{pageNumber:Q}}}=e;r=e={annotationType:yt.HIGHLIGHT,color:Array.from(P),thickness:j,inkLists:M,boxes:null,pageIndex:Q-1,rect:R.slice(0),rotation:L,annotationElementId:k,id:k,deleted:!1,popupRef:U,richText:G,comment:Y?.str||null,creationDate:V,modificationDate:ie}}const{color:l,quadPoints:u,inkLists:f,opacity:y}=e,m=await super.deserialize(e,t,n);m.color=Ke.makeHexColor(...l),m.opacity=y||1,f&&(m.#p=e.thickness),m._initialData=r,e.comment&&m.setCommentData(e);const[A,E]=m.pageDimensions,[T,N]=m.pageTranslation;if(u){const M=m.#n=[];for(let R=0;R<u.length;R+=8)M.push({x:(u[R]-T)/A,y:1-(u[R+1]-N)/E,width:(u[R+2]-u[R])/A,height:(u[R+1]-u[R+5])/E});m.#b(),m.#E(),m.rotate(m.rotation)}else if(f){m.#h=!0;const M=f[0],R={x:M[0]-T,y:E-(M[1]-N)},L=new Bp(R,[0,0,A,E],1,m.#p/2,!0,.001);for(let j=0,U=M.length;j<U;j+=2)R.x=M[j]-T,R.y=E-(M[j+1]-N),L.add(R);const{id:k,clipPathId:P}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:L.toSVGPath()}},!0,!0);m.#x({highlightOutlines:L.getOutlines(),highlightId:k,clipPathId:P}),m.#E(),m.rotate(m.parentRotation)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=it._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(e);return Object.assign(n,{color:t,opacity:this.opacity,thickness:this.#p,quadPoints:this.#B(),outlines:this.#D(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#k(n)?null:(n.id=this.annotationElementId,n)}#k(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((n,r)=>n!==t[r])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class TS{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){bn("Not implemented")}}class ot extends it{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#s=null;static#r=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:t,drawingOptions:n}){this.#e=e,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#d(e,this.parent),this.#u(e.box)}#d(e,t){const{id:n}=t.drawLayer.draw(ot._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[r,l]of Object.entries(t))n.has(r)?Object.assign(e[r],l):e[r]=l;return e}static getDefaultDrawingOptions(e){bn("Not implemented")}static get typesMap(){bn("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(ot.#n.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)e.push([n,t[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,r]of this.constructor.typesMap)e.push([n,t[r]]);return e}_updateProperty(e,t,n){const r=this._drawingOptions,l=r[t],u=f=>{r.updateProperty(t,f);const y=this.#e.updateProperty(t,f);y&&this.#u(y),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:u.bind(this,n),undo:u.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,ot._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#g()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,ot._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#g()),{bbox:this.#p()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,ot._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#g(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#h()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#e,e)}}#m([e,t,n,r]){const{parentDimensions:[l,u],rotation:f}=this;switch(f){case 90:return[t,1-e,n*(u/l),r*(l/u)];case 180:return[1-e,1-t,n,r];case 270:return[1-t,e,n*(u/l),r*(l/u)];default:return[e,t,n,r]}}#g(){const{x:e,y:t,width:n,height:r,parentDimensions:[l,u],rotation:f}=this;switch(f){case 90:return[1-t,e,n*(l/u),r*(u/l)];case 180:return[1-e,1-t,n,r];case 270:return[t,1-e,n*(l/u),r*(u/l)];default:return[e,t,n,r]}}#u(e){[this.x,this.y,this.width,this.height]=this.#m(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#p(){const{x:e,y:t,width:n,height:r,rotation:l,parentRotation:u,parentDimensions:[f,y]}=this;switch((l*4+u)/90){case 1:return[1-t-r,e,r,n];case 2:return[1-e-n,1-t-r,n,r];case 3:return[t,1-e-n,r,n];case 4:return[e,t-n*(f/y),r*(y/f),n*(f/y)];case 5:return[1-t,e,n*(f/y),r*(y/f)];case 6:return[1-e-r*(y/f),1-t,r*(y/f),n*(f/y)];case 7:return[t-n*(f/y),1-e-r*(y/f),n*(f/y),r*(y/f)];case 8:return[e-n,t-r,n,r];case 9:return[1-t,e-n,r,n];case 10:return[1-e,1-t,n,r];case 11:return[t-r,1-e,r,n];case 12:return[e-r*(y/f),t,r*(y/f),n*(f/y)];case 13:return[1-t-n*(f/y),e-r*(y/f),n*(f/y),r*(y/f)];case 14:return[1-e,1-t-n*(f/y),r*(y/f),n*(f/y)];case 15:return[t,1-e,n*(f/y),r*(y/f)];default:return[e,t,n,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ot._mergeSVGProperties({bbox:this.#p()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const r=document.createElement("div");return n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,r,l){bn("Not implemented")}static startDrawing(e,t,n,r){const{target:l,offsetX:u,offsetY:f,pointerId:y,pointerType:m}=r;if(ot.#a&&ot.#a!==m)return;const{viewport:{rotation:A}}=e,{width:E,height:T}=l.getBoundingClientRect(),N=ot.#i=new AbortController,M=e.combinedSignal(N);if(ot.#r||=y,ot.#a??=m,window.addEventListener("pointerup",R=>{ot.#r===R.pointerId?this._endDraw(R):ot.#o?.delete(R.pointerId)},{signal:M}),window.addEventListener("pointercancel",R=>{ot.#r===R.pointerId?this._currentParent.endDrawingSession():ot.#o?.delete(R.pointerId)},{signal:M}),window.addEventListener("pointerdown",R=>{ot.#a===R.pointerType&&((ot.#o||=new Set).add(R.pointerId),ot.#n.isCancellable()&&(ot.#n.removeLastElement(),ot.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:M}),window.addEventListener("contextmenu",_s,{signal:M}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:M}),l.addEventListener("touchmove",R=>{R.timeStamp===ot.#c&&Bn(R)},{signal:M}),e.toggleDrawing(),t._editorUndoBar?.hide(),ot.#n){e.drawLayer.updateProperties(this._currentDrawId,ot.#n.startNew(u,f,E,T,A));return}t.updateUIForDefaultProperties(this),ot.#n=this.createDrawerInstance(u,f,E,T,A),ot.#s=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(ot.#s.toSVGProperties(),ot.#n.defaultSVGProperties),!0,!1)}static _drawMove(e){if(ot.#c=-1,!ot.#n)return;const{offsetX:t,offsetY:n,pointerId:r}=e;if(ot.#r===r){if(ot.#o?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,ot.#n.add(t,n)),ot.#c=e.timeStamp,Bn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,ot.#n=null,ot.#s=null,ot.#a=null,ot.#c=NaN),ot.#i&&(ot.#i.abort(),ot.#i=null,ot.#r=NaN,ot.#o=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,ot.#n.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const n=ot.#n,r=this._currentDrawId,l=n.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(r,n.setLastElement(l))},undo:()=>{t.drawLayer.updateProperties(r,n.removeLastElement())},mustExec:!1,type:Bt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(Bt.DRAW_STEP),!ot.#n.isEmpty()){const{pageDimensions:[n,r],scale:l}=t,u=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ot.#n.getOutlines(n*l,r*l,l,this._INNER_MARGIN),drawingOptions:ot.#s,mustBeCommitted:!e});return this._cleanup(!0),u}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,r,l,u){bn("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:r,pageHeight:l,pageX:u,pageY:f}}=t.viewport,y=this.deserializeDraw(u,f,r,l,this._INNER_MARGIN,e),m=await super.deserialize(e,t,n);return m.createDrawingOptions(e),m.#l({drawOutlines:y}),m.#f(),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[t,n]=this.pageTranslation,[r,l]=this.pageDimensions;return this.#e.serialize([t,n,r,l],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class sL{#e=new Float64Array(6);#t;#n;#i;#s;#r;#a="";#o=0;#c=new Oh;#l;#d;constructor(e,t,n,r,l,u){this.#l=n,this.#d=r,this.#i=l,this.#s=u,[e,t]=this.#h(e,t);const f=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t],this.#n=[{line:f,points:this.#r}],this.#e.set(f,0)}updateProperty(e,t){e==="stroke-width"&&(this.#s=t)}#h(e,t){return We._normalizePoint(e,t,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#r.length<=10}add(e,t){[e,t]=this.#h(e,t);const[n,r,l,u]=this.#e.subarray(2,6),f=e-l,y=t-u;return Math.hypot(this.#l*f,this.#d*y)<=2?null:(this.#r.push(e,t),isNaN(n)?(this.#e.set([l,u,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([n,r,l,u,e,t],0),this.#t.push(...We.createBezierPoints(n,r,l,u,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,l){this.#l=n,this.#d=r,this.#i=l,[e,t]=this.#h(e,t);const u=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t];const f=this.#n.at(-1);return f&&(f.line=new Float32Array(f.line),f.points=new Float32Array(f.points)),this.#n.push({line:u,points:this.#r}),this.#e.set(u,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(e){return this.#n?(this.#n.push(e),this.#t=e.line,this.#r=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#a="";for(let e=0,t=this.#n.length;e<t;e++){const{line:n,points:r}=this.#n[e];this.#t=n,this.#r=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const e=We.svgRound(this.#t[4]),t=We.svgRound(this.#t[5]);if(this.#r.length===2)return this.#a=`${this.#a} M ${e} ${t} Z`,this.#a;if(this.#r.length<=6){const r=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,r)} M ${e} ${t}`,this.#o=6}if(this.#r.length===4){const r=We.svgRound(this.#t[10]),l=We.svgRound(this.#t[11]);return this.#a=`${this.#a} L ${r} ${l}`,this.#o=12,this.#a}const n=[];this.#o===0&&(n.push(`M ${e} ${t}`),this.#o=6);for(let r=this.#o,l=this.#t.length;r<l;r+=6){const[u,f,y,m,A,E]=this.#t.slice(r,r+6).map(We.svgRound);n.push(`C${u} ${f} ${y} ${m} ${A} ${E}`)}return this.#a+=n.join(" "),this.#o=this.#t.length,this.#a}getOutlines(e,t,n,r){const l=this.#n.at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),this.#c.build(this.#n,e,t,n,this.#i,this.#s,r),this.#e=null,this.#t=null,this.#n=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Oh extends We{#e;#t=0;#n;#i;#s;#r;#a;#o;#c;build(e,t,n,r,l,u,f){this.#s=t,this.#r=n,this.#a=r,this.#o=l,this.#c=u,this.#n=f??0,this.#i=e,this.#h()}get thickness(){return this.#c}setLastElement(e){return this.#i.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#i){if(e.push(`M${We.svgRound(t[4])} ${We.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${We.svgRound(t[10])} ${We.svgRound(t[11])}`);continue}for(let n=6,r=t.length;n<r;n+=6){const[l,u,f,y,m,A]=t.subarray(n,n+6).map(We.svgRound);e.push(`C${l} ${u} ${f} ${y} ${m} ${A}`)}}return e.join("")}serialize([e,t,n,r],l){const u=[],f=[],[y,m,A,E]=this.#d();let T,N,M,R,L,k,P,j,U;switch(this.#o){case 0:U=We._rescale,T=e,N=t+r,M=n,R=-r,L=e+y*n,k=t+(1-m-E)*r,P=e+(y+A)*n,j=t+(1-m)*r;break;case 90:U=We._rescaleAndSwap,T=e,N=t,M=n,R=r,L=e+m*n,k=t+y*r,P=e+(m+E)*n,j=t+(y+A)*r;break;case 180:U=We._rescale,T=e+n,N=t,M=-n,R=r,L=e+(1-y-A)*n,k=t+m*r,P=e+(1-y)*n,j=t+(m+E)*r;break;case 270:U=We._rescaleAndSwap,T=e+n,N=t+r,M=-n,R=-r,L=e+(1-m-E)*n,k=t+(1-y-A)*r,P=e+(1-m)*n,j=t+(1-y)*r;break}for(const{line:G,points:Y}of this.#i)u.push(U(G,T,N,M,R,l?new Array(G.length):null)),f.push(U(Y,T,N,M,R,l?new Array(Y.length):null));return{lines:u,points:f,rect:[L,k,P,j]}}static deserialize(e,t,n,r,l,{paths:{lines:u,points:f},rotation:y,thickness:m}){const A=[];let E,T,N,M,R;switch(y){case 0:R=We._rescale,E=-e/n,T=t/r+1,N=1/n,M=-1/r;break;case 90:R=We._rescaleAndSwap,E=-t/r,T=-e/n,N=1/r,M=1/n;break;case 180:R=We._rescale,E=e/n+1,T=-t/r,N=-1/n,M=1/r;break;case 270:R=We._rescaleAndSwap,E=t/r+1,T=e/n+1,N=-1/r,M=-1/n;break}if(!u){u=[];for(const k of f){const P=k.length;if(P===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,k[0],k[1]]));continue}if(P===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,k[0],k[1],NaN,NaN,NaN,NaN,k[2],k[3]]));continue}const j=new Float32Array(3*(P-2));u.push(j);let[U,G,Y,V]=k.subarray(0,4);j.set([NaN,NaN,NaN,NaN,U,G],0);for(let ie=4;ie<P;ie+=2){const Q=k[ie],be=k[ie+1];j.set(We.createBezierPoints(U,G,Y,V,Q,be),(ie-2)*3),[U,G,Y,V]=[Y,V,Q,be]}}}for(let k=0,P=u.length;k<P;k++)A.push({line:R(u[k].map(j=>j??NaN),E,T,N,M),points:R(f[k].map(j=>j??NaN),E,T,N,M)});const L=new this.prototype.constructor;return L.build(A,n,r,1,y,m,l),L}#l(e=this.#c){const t=this.#n+e/2*this.#a;return this.#o%180===0?[t/this.#s,t/this.#r]:[t/this.#r,t/this.#s]}#d(){const[e,t,n,r]=this.#e,[l,u]=this.#l(0);return[e+l,t+u,n-2*l,r-2*u]}#h(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let f=4,y=r.length;f<y;f+=6)Ke.pointBoundingBox(r[f],r[f+1],e);continue}let l=r[4],u=r[5];for(let f=6,y=r.length;f<y;f+=6){const[m,A,E,T,N,M]=r.subarray(f,f+6);Ke.bezierBoundingBox(l,u,m,A,E,T,N,M,e),l=N,u=M}}const[t,n]=this.#l();e[0]=Ii(e[0]-t,0,1),e[1]=Ii(e[1]-n,0,1),e[2]=Ii(e[2]+t,0,1),e[3]=Ii(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,n]=this.#l();this.#c=e;const[r,l]=this.#l(),[u,f]=[r-t,l-n],y=this.#e;return y[0]-=u,y[1]-=f,y[2]+=2*u,y[3]+=2*f,y}updateParentDimensions([e,t],n){const[r,l]=this.#l();this.#s=e,this.#r=t,this.#a=n;const[u,f]=this.#l(),y=u-r,m=f-l,A=this.#e;return A[0]-=y,A[1]-=m,A[2]+=2*y,A[3]+=2*m,A}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(We.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${We.svgRound(e)} ${We.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let n=0,r=0,l=0,u=0,f=0,y=0;switch(this.#t){case 90:r=t/e,l=-e/t,f=e;break;case 180:n=-1,u=-1,f=e,y=t;break;case 270:r=-t/e,l=e/t,y=t;break;default:return""}return`matrix(${n} ${r} ${l} ${u} ${We.svgRound(f)} ${We.svgRound(y)})`}getPathResizingSVGProperties([e,t,n,r]){const[l,u]=this.#l(),[f,y,m,A]=this.#e;if(Math.abs(m-l)<=We.PRECISION||Math.abs(A-u)<=We.PRECISION){const R=e+n/2-(f+m/2),L=t+r/2-(y+A/2);return{path:{"transform-origin":`${We.svgRound(e)} ${We.svgRound(t)}`,transform:`${this.rotationTransform} translate(${R} ${L})`}}}const E=(n-2*l)/(m-2*l),T=(r-2*u)/(A-2*u),N=m/n,M=A/r;return{path:{"transform-origin":`${We.svgRound(f)} ${We.svgRound(y)}`,transform:`${this.rotationTransform} scale(${N} ${M}) translate(${We.svgRound(l)} ${We.svgRound(u)}) scale(${E} ${T}) translate(${We.svgRound(-l)} ${We.svgRound(-u)})`}}}getPathResizedSVGProperties([e,t,n,r]){const[l,u]=this.#l(),f=this.#e,[y,m,A,E]=f;if(f[0]=e,f[1]=t,f[2]=n,f[3]=r,Math.abs(A-l)<=We.PRECISION||Math.abs(E-u)<=We.PRECISION){const L=e+n/2-(y+A/2),k=t+r/2-(m+E/2);for(const{line:P,points:j}of this.#i)We._translate(P,L,k,P),We._translate(j,L,k,j);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${We.svgRound(e)} ${We.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const T=(n-2*l)/(A-2*l),N=(r-2*u)/(E-2*u),M=-T*(y+l)+e+l,R=-N*(m+u)+t+u;if(T!==1||N!==1||M!==0||R!==0)for(const{line:L,points:k}of this.#i)We._rescale(L,M,R,T,N,L),We._rescale(k,M,R,T,N,k);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${We.svgRound(e)} ${We.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],n){const[r,l]=n,u=this.#e,f=e-u[0],y=t-u[1];if(this.#s===r&&this.#r===l)for(const{line:m,points:A}of this.#i)We._translate(m,f,y,m),We._translate(A,f,y,A);else{const m=this.#s/r,A=this.#r/l;this.#s=r,this.#r=l;for(const{line:E,points:T}of this.#i)We._rescale(E,f,y,m,A,E),We._rescale(T,f,y,m,A,T);u[2]*=m,u[3]*=A}return u[0]=e,u[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${We.svgRound(e)} ${We.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${We.svgRound(e[0])} ${We.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class b0 extends TS{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:it._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new b0(this._viewParameters);return e.updateAll(this),e}}class jm extends ot{static _type="ink";static _editorType=yt.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){it.initialize(e,t),this._defaultDrawingOptions=new b0(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return St(this,"typesMap",new Map([[Bt.INK_THICKNESS,"stroke-width"],[Bt.INK_COLOR,"stroke"],[Bt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,r,l){return new sL(e,t,n,r,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,r,l,u){return Oh.deserialize(e,t,n,r,l,u)}static async deserialize(e,t,n){let r=null;if(e instanceof Bm){const{data:{inkLists:u,rect:f,rotation:y,id:m,color:A,opacity:E,borderStyle:{rawWidth:T},popupRef:N,richText:M,contentsObj:R,creationDate:L,modificationDate:k},parent:{page:{pageNumber:P}}}=e;r=e={annotationType:yt.INK,color:Array.from(A),thickness:T,opacity:E,paths:{points:u},boxes:null,pageIndex:P-1,rect:f.slice(0),rotation:y,annotationElementId:m,id:m,deleted:!1,popupRef:N,richText:M,comment:R?.str||null,creationDate:L,modificationDate:k}}const l=await super.deserialize(e,t,n);return l._initialData=r,e.comment&&l.setCommentData(e),l}get toolbarButtons(){return this._colorPicker||=new uh(this),[["colorPicker",this._colorPicker]]}get colorType(){return Bt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:n}){this._drawingOptions=jm.getDefaultDrawingOptions({stroke:Ke.makeHexColor(...e),"stroke-width":t,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":l,"stroke-width":u}}=this,f=Object.assign(super.serialize(e),{color:it._colorManager.convert(r),opacity:l,thickness:u,paths:{lines:t,points:n}});return this.addComment(f),e?(f.isCopy=!0,f):this.annotationElementId&&!this.#e(f)?null:(f.id=this.annotationElementId,f)}#e(e){const{color:t,thickness:n,opacity:r,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((u,f)=>u!==t[f])||e.thickness!==n||e.opacity!==r||e.pageIndex!==l}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class Fp extends Oh{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const gf=8,zu=3;class tl{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,n,r){return n-=e,r-=t,n===0?r>0?0:4:n===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(e,t,n,r,l,u,f){const y=this.#t(n,r,l,u);for(let m=0;m<8;m++){const A=(-m+y-f+16)%8,E=this.#n[2*A],T=this.#n[2*A+1];if(e[(n+E)*t+(r+T)]!==0)return A}return-1}static#s(e,t,n,r,l,u,f){const y=this.#t(n,r,l,u);for(let m=0;m<8;m++){const A=(m+y+f+16)%8,E=this.#n[2*A],T=this.#n[2*A+1];if(e[(n+E)*t+(r+T)]!==0)return A}return-1}static#r(e,t,n,r){const l=e.length,u=new Int32Array(l);for(let A=0;A<l;A++)u[A]=e[A]<=r?1:0;for(let A=1;A<n-1;A++)u[A*t]=u[A*t+t-1]=0;for(let A=0;A<t;A++)u[A]=u[t*n-1-A]=0;let f=1,y;const m=[];for(let A=1;A<n-1;A++){y=1;for(let E=1;E<t-1;E++){const T=A*t+E,N=u[T];if(N===0)continue;let M=A,R=E;if(N===1&&u[T-1]===0)f+=1,R-=1;else if(N>=1&&u[T+1]===0)f+=1,R+=1,N>1&&(y=N);else{N!==1&&(y=Math.abs(N));continue}const L=[E,A],k=R===E+1,P={isHole:k,points:L,id:f,parent:0};m.push(P);let j;for(const we of m)if(we.id===y){j=we;break}j?j.isHole?P.parent=k?j.parent:y:P.parent=k?y:j.parent:P.parent=k?y:0;const U=this.#i(u,t,A,E,M,R,0);if(U===-1){u[T]=-f,u[T]!==1&&(y=Math.abs(u[T]));continue}let G=this.#n[2*U],Y=this.#n[2*U+1];const V=A+G,ie=E+Y;M=V,R=ie;let Q=A,be=E;for(;;){const we=this.#s(u,t,Q,be,M,R,1);G=this.#n[2*we],Y=this.#n[2*we+1];const oe=Q+G,Ee=be+Y;L.push(Ee,oe);const Se=Q*t+be;if(u[Se+1]===0?u[Se]=-f:u[Se]===1&&(u[Se]=f),oe===A&&Ee===E&&Q===V&&be===ie){u[T]!==1&&(y=Math.abs(u[T]));break}else M=Q,R=be,Q=oe,be=Ee}}}return m}static#a(e,t,n,r){if(n-t<=4){for(let V=t;V<n-2;V+=2)r.push(e[V],e[V+1]);return}const l=e[t],u=e[t+1],f=e[n-4]-l,y=e[n-3]-u,m=Math.hypot(f,y),A=f/m,E=y/m,T=A*u-E*l,N=y/f,M=1/m,R=Math.atan(N),L=Math.cos(R),k=Math.sin(R),P=M*(Math.abs(L)+Math.abs(k)),j=M*(1-P+P**2),U=Math.max(Math.atan(Math.abs(k+L)*j),Math.atan(Math.abs(k-L)*j));let G=0,Y=t;for(let V=t+2;V<n-2;V+=2){const ie=Math.abs(T-A*e[V+1]+E*e[V]);ie>G&&(Y=V,G=ie)}G>(m*U)**2?(this.#a(e,t,Y+2,r),this.#a(e,Y,n,r)):r.push(l,u)}static#o(e){const t=[],n=e.length;return this.#a(e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}static#c(e,t,n,r,l,u){const f=new Float32Array(u**2),y=-2*r**2,m=u>>1;for(let R=0;R<u;R++){const L=(R-m)**2;for(let k=0;k<u;k++)f[R*u+k]=Math.exp((L+(k-m)**2)/y)}const A=new Float32Array(256),E=-2*l**2;for(let R=0;R<256;R++)A[R]=Math.exp(R**2/E);const T=e.length,N=new Uint8Array(T),M=new Uint32Array(256);for(let R=0;R<n;R++)for(let L=0;L<t;L++){const k=R*t+L,P=e[k];let j=0,U=0;for(let Y=0;Y<u;Y++){const V=R+Y-m;if(!(V<0||V>=n))for(let ie=0;ie<u;ie++){const Q=L+ie-m;if(Q<0||Q>=t)continue;const be=e[V*t+Q],we=f[Y*u+ie]*A[Math.abs(be-P)];j+=be*we,U+=we}}const G=N[k]=Math.round(j/U);M[G]++}return[N,M]}static#l(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}static#d(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let r=-1/0,l=1/0;for(let f=0,y=n.length;f<y;f++){const m=n[f]=e[f<<2];r=Math.max(r,m),l=Math.min(l,m)}const u=255/(r-l);for(let f=0,y=n.length;f<y;f++)n[f]=(n[f]-l)*u;return n}static#h(e){let t,n=-1/0,r=-1/0;const l=e.findIndex(y=>y!==0);let u=l,f=l;for(t=l;t<256;t++){const y=e[t];y>n&&(t-u>r&&(r=t-u,f=t-1),n=y,u=t)}for(t=f-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:n,height:r}=e,{maxDim:l}=this.#e;let u=n,f=r;if(n>l||r>l){let T=n,N=r,M=Math.log2(Math.max(n,r)/l);const R=Math.floor(M);M=M===R?R-1:R;for(let k=0;k<M;k++){u=Math.ceil(T/2),f=Math.ceil(N/2);const P=new OffscreenCanvas(u,f);P.getContext("2d").drawImage(e,0,0,T,N,0,0,u,f),T=u,N=f,e!==t&&e.close(),e=P.transferToImageBitmap()}const L=Math.min(l/u,l/f);u=Math.round(u*L),f=Math.round(f*L)}const m=new OffscreenCanvas(u,f).getContext("2d",{willReadFrequently:!0});m.fillStyle="white",m.fillRect(0,0,u,f),m.filter="grayscale(1)",m.drawImage(e,0,0,e.width,e.height,0,0,u,f);const A=m.getImageData(0,0,u,f).data;return[this.#d(A),u,f]}static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:r},l,u,f,y){let m=new OffscreenCanvas(1,1),A=m.getContext("2d",{alpha:!1});const E=200,T=A.font=`${n} ${r} ${E}px ${t}`,{actualBoundingBoxLeft:N,actualBoundingBoxRight:M,actualBoundingBoxAscent:R,actualBoundingBoxDescent:L,fontBoundingBoxAscent:k,fontBoundingBoxDescent:P,width:j}=A.measureText(e),U=1.5,G=Math.ceil(Math.max(Math.abs(N)+Math.abs(M)||0,j)*U),Y=Math.ceil(Math.max(Math.abs(R)+Math.abs(L)||E,Math.abs(k)+Math.abs(P)||E)*U);m=new OffscreenCanvas(G,Y),A=m.getContext("2d",{alpha:!0,willReadFrequently:!0}),A.font=T,A.filter="grayscale(1)",A.fillStyle="white",A.fillRect(0,0,G,Y),A.fillStyle="black",A.fillText(e,G*(U-1)/2,Y*(3-U)/2);const V=this.#d(A.getImageData(0,0,G,Y).data),ie=this.#l(V),Q=this.#h(ie),be=this.#r(V,G,Y,Q);return this.processDrawnLines({lines:{curves:be,width:G,height:Y},pageWidth:l,pageHeight:u,rotation:f,innerMargin:y,mustSmooth:!0,areContours:!0})}static process(e,t,n,r,l){const[u,f,y]=this.#f(e),[m,A]=this.#c(u,f,y,Math.hypot(f,y)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),E=this.#h(A),T=this.#r(m,f,y,E);return this.processDrawnLines({lines:{curves:T,width:f,height:y},pageWidth:t,pageHeight:n,rotation:r,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:l,mustSmooth:u,areContours:f}){r%180!==0&&([t,n]=[n,t]);const{curves:y,width:m,height:A}=e,E=e.thickness??0,T=[],N=Math.min(t/m,n/A),M=N/t,R=N/n,L=[];for(const{points:P}of y){const j=u?this.#o(P):P;if(!j)continue;L.push(j);const U=j.length,G=new Float32Array(U),Y=new Float32Array(3*(U===2?2:U-2));if(T.push({line:Y,points:G}),U===2){G[0]=j[0]*M,G[1]=j[1]*R,Y.set([NaN,NaN,NaN,NaN,G[0],G[1]],0);continue}let[V,ie,Q,be]=j;V*=M,ie*=R,Q*=M,be*=R,G.set([V,ie,Q,be],0),Y.set([NaN,NaN,NaN,NaN,V,ie],0);for(let we=4;we<U;we+=2){const oe=G[we]=j[we]*M,Ee=G[we+1]=j[we+1]*R;Y.set(We.createBezierPoints(V,ie,Q,be,oe,Ee),(we-2)*3),[V,ie,Q,be]=[Q,be,oe,Ee]}}if(T.length===0)return null;const k=f?new Fp:new Oh;return k.build(T,t,n,1,r,f?0:E,l),{outline:k,newCurves:L,areContours:f,thickness:E,width:m,height:A}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:r,height:l}){let u=1/0,f=-1/0,y=0;for(const j of e){y+=j.length;for(let U=2,G=j.length;U<G;U++){const Y=j[U]-j[U-2];u=Math.min(u,Y),f=Math.max(f,Y)}}let m;u>=-128&&f<=127?m=Int8Array:u>=-32768&&f<=32767?m=Int16Array:m=Int32Array;const A=e.length,E=gf+zu*A,T=new Uint32Array(E);let N=0;T[N++]=E*Uint32Array.BYTES_PER_ELEMENT+(y-2*A)*m.BYTES_PER_ELEMENT,T[N++]=0,T[N++]=r,T[N++]=l,T[N++]=t?0:1,T[N++]=Math.max(0,Math.floor(n??0)),T[N++]=A,T[N++]=m.BYTES_PER_ELEMENT;for(const j of e)T[N++]=j.length-2,T[N++]=j[0],T[N++]=j[1];const M=new CompressionStream("deflate-raw"),R=M.writable.getWriter();await R.ready,R.write(T);const L=m.prototype.constructor;for(const j of e){const U=new L(j.length-2);for(let G=2,Y=j.length;G<Y;G++)U[G-2]=j[G]-j[G-2];R.write(U)}R.close();const k=await new Response(M.readable).arrayBuffer(),P=new Uint8Array(k);return Wv(P)}static async decompressSignature(e){try{const t=N8(e),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),l=r.getWriter();await l.ready,l.write(t).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let u=null,f=0;for await(const j of n)u||=new Uint8Array(new Uint32Array(j.buffer,0,4)[0]),u.set(j,f),f+=j.length;const y=new Uint32Array(u.buffer,0,u.length>>2),m=y[1];if(m!==0)throw new Error(`Invalid version: ${m}`);const A=y[2],E=y[3],T=y[4]===0,N=y[5],M=y[6],R=y[7],L=[],k=(gf+zu*M)*Uint32Array.BYTES_PER_ELEMENT;let P;switch(R){case Int8Array.BYTES_PER_ELEMENT:P=new Int8Array(u.buffer,k);break;case Int16Array.BYTES_PER_ELEMENT:P=new Int16Array(u.buffer,k);break;case Int32Array.BYTES_PER_ELEMENT:P=new Int32Array(u.buffer,k);break}f=0;for(let j=0;j<M;j++){const U=y[zu*j+gf],G=new Float32Array(U+2);L.push(G);for(let Y=0;Y<zu-1;Y++)G[Y]=y[zu*j+gf+Y+1];for(let Y=0;Y<U;Y++)G[Y+2]=G[Y]+P[f++]}return{areContours:T,thickness:N,outlines:L,width:A,height:E}}catch(t){return xt(`decompressSignature: ${t}`),null}}}class Um extends TS{constructor(){super(),super.updateProperties({fill:it._defaultLineColor,"stroke-width":0})}clone(){const e=new Um;return e.updateAll(this),e}}class zm extends b0{constructor(e){super(e),super.updateProperties({stroke:it._defaultLineColor,"stroke-width":1})}clone(){const e=new zm(this._viewParameters);return e.updateAll(this),e}}class Lr extends ot{#e=!1;#t=null;#n=null;#i=null;static _type="signature";static _editorType=yt.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){it.initialize(e,t),this._defaultDrawingOptions=new Um,this._defaultDrawnSignatureOptions=new zm(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return St(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:l,areContours:u,description:f,uuid:y,heightInPage:m}=this.#n,{rawDims:{pageWidth:A,pageHeight:E},rotation:T}=this.parent.viewport,N=tl.processDrawnLines({lines:r,pageWidth:A,pageHeight:E,rotation:T,innerMargin:Lr._INNER_MARGIN,mustSmooth:l,areContours:u});this.addSignature(N,m,f,y)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#i=e,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:r,height:l}=this.#n,u=Math.max(r,l),f=tl.processDrawnLines({lines:{curves:e.map(y=>({points:y})),thickness:n,width:r,height:l},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:f.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,n,r){const{x:l,y:u}=this,{outline:f}=this.#n=e;this.#e=f instanceof Fp,this.description=n;let y;this.#e?y=Lr.getDefaultDrawingOptions():(y=Lr._defaultDrawnSignatureOptions.clone(),y.updateProperties({"stroke-width":f.thickness})),this._addOutlines({drawOutlines:f,drawingOptions:y});const[,m]=this.pageDimensions;let A=t/m;A=A>=1?.5:A,this.width*=A/this.height,this.width>=1&&(A*=.9/this.width,this.width=.9),this.height=A,this.setDims(),this.x=l,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:r}=this.parent.viewport;return tl.process(e,t,n,r,Lr._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:l}=this.parent.viewport;return tl.extractContoursFromText(e,t,n,r,l,Lr._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:r}=this.parent.viewport;return tl.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:Lr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=Lr.getDefaultDrawingOptions():(this._drawingOptions=Lr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,l=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:r});return this.addComment(l),e?(l.paths={lines:t,points:n},l.uuid=this.#i,l.isCopy=!0):l.lines=t,this.#t&&(l.accessibilityData={type:"Figure",alt:this.#t}),l}static deserializeDraw(e,t,n,r,l,u){return u.areContours?Fp.deserialize(e,t,n,r,l,u):Oh.deserialize(e,t,n,r,l,u)}static async deserialize(e,t,n){const r=await super.deserialize(e,t,n);return r.#e=e.areContours,r.description=e.accessibilityData?.alt||"",r.#i=e.uuid,r}}class rL extends it{#e=null;#t=null;#n=null;#i=null;#s=null;#r="";#a=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=yt.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#i=e.bitmapUrl,this.#s=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){it.initialize(e,t)}static isHandlingMimeForPasting(e){return Wf.includes(e)}static paste(e,t){t.pasteEditor({mode:yt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#h(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#r=e.file.name),this.#g()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:l,height:u}=e||this.copyCanvas(null,null,!0).imageData,f=await n.guess({name:"altText",request:{data:r,width:l,height:u,channels:r.length/(l*u)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const y=f.output;return await this.setGuessedAltText(y),t&&!this.hasAltTextData()&&(this.altTextData={alt:y,decorative:!1}),y}#m(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(n=>this.#h(n,!0)).finally(()=>this.#f());return}if(this.#i){const n=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(n).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#s){const n=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(n).then(r=>this.#h(r)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=Wf.join(",");const t=this._uiManager._signal;this.#n=new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#m();return}super.rebuild(),this.div!==null&&(this.#t&&this.#a===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#s||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#t=n,r&&(this.#e=r),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},e)}#g(){const{div:e}=this;let{width:t,height:n}=this.#e;const[r,l]=this.pageDimensions,u=.75;if(this.width)t=this.width*r,n=this.height*l;else if(t>u*r||n>u*l){const y=Math.min(u*r/t,u*l/n);t*=y,n*=y}this._uiManager.enableWaiting(!1);const f=this.#a=document.createElement("canvas");f.setAttribute("role","img"),this.addContainer(f),this.width=t/r,this.height=n/l,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,n=!1){e||(e=224);const{width:r,height:l}=this.#e,u=new ur;let f=this.#e,y=r,m=l,A=null;if(t){if(r>t||l>t){const Y=Math.min(t/r,t/l);y=Math.floor(r*Y),m=Math.floor(l*Y)}A=document.createElement("canvas");const T=A.width=Math.ceil(y*u.sx),N=A.height=Math.ceil(m*u.sy);this.#l||(f=this.#u(T,N));const M=A.getContext("2d");M.filter=this._uiManager.hcmFilter;let R="white",L="#cfcfd8";this._uiManager.hcmFilter!=="none"?L="black":D8.isDarkMode&&(R="#8f8f9d",L="#42414d");const k=15,P=k*u.sx,j=k*u.sy,U=new OffscreenCanvas(P*2,j*2),G=U.getContext("2d");G.fillStyle=R,G.fillRect(0,0,P*2,j*2),G.fillStyle=L,G.fillRect(0,0,P,j),G.fillRect(P,j,P,j),M.fillStyle=M.createPattern(U,"repeat"),M.fillRect(0,0,T,N),M.drawImage(f,0,0,f.width,f.height,0,0,T,N)}let E=null;if(n){let T,N;if(u.symmetric&&f.width<e&&f.height<e)T=f.width,N=f.height;else if(f=this.#e,r>e||l>e){const L=Math.min(e/r,e/l);T=Math.floor(r*L),N=Math.floor(l*L),this.#l||(f=this.#u(T,N))}const R=new OffscreenCanvas(T,N).getContext("2d",{willReadFrequently:!0});R.drawImage(f,0,0,f.width,f.height,0,0,T,N),E={width:T,height:N,data:R.getImageData(0,0,T,N).data}}return{canvas:A,width:y,height:m,imageData:E}}#u(e,t){const{width:n,height:r}=this.#e;let l=n,u=r,f=this.#e;for(;l>2*e||u>2*t;){const y=l,m=u;l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),u>2*t&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const A=new OffscreenCanvas(l,u);A.getContext("2d").drawImage(f,0,0,y,m,0,0,l,u),f=A.transferToImageBitmap()}return f}#p(){const[e,t]=this.parentDimensions,{width:n,height:r}=this,l=new ur,u=Math.ceil(n*e*l.sx),f=Math.ceil(r*t*l.sy),y=this.#a;if(!y||y.width===u&&y.height===f)return;y.width=u,y.height=f;const m=this.#l?this.#e:this.#u(u,f),A=y.getContext("2d");A.filter=this._uiManager.hcmFilter,A.drawImage(m,0,0,m.width,m.height,0,0,u,f)}#y(e){if(e){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#t);if(r)return r}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,n]=this.pageDimensions,r=Math.round(this.width*t*gl.PDF_TO_CSS_UNITS),l=Math.round(this.height*n*gl.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(r,l);return u.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,r,l),u.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,n){let r=null,l=!1;if(e instanceof SS){const{data:{rect:R,rotation:L,id:k,structParent:P,popupRef:j,richText:U,contentsObj:G,creationDate:Y,modificationDate:V},container:ie,parent:{page:{pageNumber:Q}},canvas:be}=e;let we,oe;be?(delete e.canvas,{id:we,bitmap:oe}=n.imageManager.getFromCanvas(ie.id,be),be.remove()):(l=!0,e._hasNoCanvas=!0);const Ee=(await t._structTree.getAriaAttributes(`${vm}${k}`))?.get("aria-label")||"";r=e={annotationType:yt.STAMP,bitmapId:we,bitmap:oe,pageIndex:Q-1,rect:R.slice(0),rotation:L,annotationElementId:k,id:k,deleted:!1,accessibilityData:{decorative:!1,altText:Ee},isSvg:!1,structParent:P,popupRef:j,richText:U,comment:G?.str||null,creationDate:Y,modificationDate:V}}const u=await super.deserialize(e,t,n),{rect:f,bitmap:y,bitmapUrl:m,bitmapId:A,isSvg:E,accessibilityData:T}=e;l?(n.addMissingCanvas(e.id,u),u.#o=!0):A&&n.imageManager.isValidId(A)?(u.#t=A,y&&(u.#e=y)):u.#i=m,u.#l=E;const[N,M]=u.pageDimensions;return u.width=(f[2]-f[0])/N,u.height=(f[3]-f[1])/M,T&&(u.altTextData=T),u._initialData=r,e.comment&&u.setCommentData(e),u.#d=!!r,u}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(n),e)return n.bitmapUrl=this.#y(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:r,altText:l}=this.serializeAltText(!1);if(!r&&l&&(n.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const f=this.#b(n);return f.isSame?null:(f.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(t===null)return n;t.stamps||=new Map;const u=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:u,serialized:n}),n.bitmap=this.#y(!1);else if(this.#l){const f=t.stamps.get(this.#t);u>f.area&&(f.area=u,f.serialized.bitmap.close(),f.serialized.bitmap=this.#y(!1))}return n}#b(e){const{pageIndex:t,accessibilityData:{altText:n}}=this._initialData,r=e.pageIndex===t,l=(e.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&l,isSameAltText:l}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Br{#e;#t=!1;#n=null;#i=null;#s=null;#r=new Map;#a=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#g=-1;#u;static _initialized=!1;static#p=new Map([pi,jm,rL,$n,Lr].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:l,annotationLayer:u,drawLayer:f,textLayer:y,viewport:m,l10n:A}){const E=[...Br.#p.values()];if(!Br._initialized){Br._initialized=!0;for(const T of E)T.initialize(A,e)}e.registerEditorTypes(E),this.#u=e,this.pageIndex=t,this.div=n,this.#e=l,this.#n=u,this.viewport=m,this.#h=y,this.drawLayer=f,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===yt.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#A(),e){case yt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case yt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case yt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===yt.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of Br.#p.values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#h?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}get#y(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const e=new Set;for(const n of this.#y)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),e.add(n.annotationElementId));const t=this.#n;if(t)for(const n of t.getEditableAnnotations()){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const n=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",r=>{const{clientX:u,clientY:f,timeStamp:y}=r,m=this.#g;if(y-m>500){this.#g=y;return}this.#g=-1;const{classList:A}=this.div;A.toggle("getElements",!0);const E=document.elementsFromPoint(u,f);if(A.toggle("getElements",!1),!this.div.contains(E[0]))return;let T;const N=new RegExp(`^${ah}[0-9]+$`);for(const R of E)if(N.test(R.id)){T=R.id;break}if(!T)return;const M=this.#r.get(T);M?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),M.dblclick(r))},{signal:n,capture:!0})}const e=this.#n;if(e){const n=new Map,r=new Map;for(const u of this.#y){if(u.disableEditing(),!u.annotationElementId){u.updateFakeAnnotationElement(e);continue}if(u.serialize()!==null){n.set(u.annotationElementId,u);continue}else r.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const l=e.getEditableAnnotations();for(const u of l){const{id:f}=u.data;if(this.#u.isDeletedAnnotationElement(f)){u.updateEdited({deleted:!0});continue}let y=r.get(f);if(y){y.resetAnnotationElement(u),y.show(!1),u.show();continue}y=n.get(f),y&&(this.#u.addChangedExistingAnnotation(y),y.renderAnnotationElement(u)&&y.show(!1)),u.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const n of Br.#p.values())t.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#b.bind(this),{signal:e}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#b(e){this.#u.unselectAll();const{target:t}=e;if(t===this.#h.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#h.div.contains(t)){const{isMac:n}=yi.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),$n.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:e.x,y:e.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const e=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#i?.abort(),this.#i=null}attach(e){this.#r.set(e.id,e);const{annotationElementId:t}=e;t&&this.#u.isDeletedAnnotationElement(t)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#r.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e.annotationElementId),it.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#s&&(e._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of this.#r.values())if(t.uid===e)return t;return null}getNextId(){return this.#u.getId()}get#x(){return Br.#p.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#C(e){const t=this.#x;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#x?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:n,offsetY:r}=this.#v(),l=this.getNextId(),u=this.#C({parent:this,id:l,x:n,y:r,uiManager:this.#u,isCentered:!0,...t});u&&this.add(u)}async deserialize(e){return await Br.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),l=this.#C({parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:t,...n});return l&&this.add(l),l}get boundingClientRect(){return this.div.getBoundingClientRect()}#v(){const{x:e,y:t,width:n,height:r}=this.boundingClientRect,l=Math.max(0,e),u=Math.max(0,t),f=Math.min(window.innerWidth,e+n),y=Math.min(window.innerHeight,t+r),m=(l+f)/2-e,A=(u+y)/2-t,[E,T]=this.viewport.rotation%180===0?[m,A]:[A,m];return{offsetX:E,offsetY:T}}addNewEditor(e={}){this.createAndAddNewEditor(this.#v(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:t}=yi.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#a||(this.#a=!1,this.#x?.isDrawer&&this.#x.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const n=this.#u.getMode();if(n===yt.STAMP||n===yt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===yt.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:t}=yi.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#a=!0,this.#x?.isDrawer){this.startDrawingSession(e);return}const n=this.#u.getActive();this.#t=!n||n.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#x.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#d=null,this.commitOrRemove())},{signal:t}),this.#x.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#d=t);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#x.endDrawing(e)):null}findNewParent(e,t,n){const r=this.#u.findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#x.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(const e of this.#r.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#A(){for(const e of this.#r.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,_o(this.div,e);for(const t of this.#u.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#A();const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,_o(this.div,{rotation:n}),t!==n)for(const r of this.#r.values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#u.viewParameters.realScale}}class mi{#e=null;#t=new Map;#n=new Map;static#i=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return St(this,"_svgFactory",new hh)}static#s(e,[t,n,r,l]){const{style:u}=e;u.top=`${100*n}%`,u.left=`${100*t}%`,u.width=`${100*r}%`,u.height=`${100*l}%`}#r(){const e=mi._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#a(e,t){const n=mi._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const l=mi._svgFactory.createElement("use");return n.append(l),l.setAttribute("href",`#${t}`),l.classList.add("clip"),r}#o(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)}draw(e,t=!1,n=!1){const r=mi.#i++,l=this.#r(),u=mi._svgFactory.createElement("defs");l.append(u);const f=mi._svgFactory.createElement("path");u.append(f);const y=`path_p${this.pageIndex}_${r}`;f.setAttribute("id",y),f.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#n.set(r,f);const m=n?this.#a(u,y):null,A=mi._svgFactory.createElement("use");return l.append(A),A.setAttribute("href",`#${y}`),this.updateProperties(l,e),this.#t.set(r,l),{id:r,clipPathId:`url(#${m})`}}drawOutline(e,t){const n=mi.#i++,r=this.#r(),l=mi._svgFactory.createElement("defs");r.append(l);const u=mi._svgFactory.createElement("path");l.append(u);const f=`path_p${this.pageIndex}_${n}`;u.setAttribute("id",f),u.setAttribute("vector-effect","non-scaling-stroke");let y;if(t){const E=mi._svgFactory.createElement("mask");l.append(E),y=`mask_p${this.pageIndex}_${n}`,E.setAttribute("id",y),E.setAttribute("maskUnits","objectBoundingBox");const T=mi._svgFactory.createElement("rect");E.append(T),T.setAttribute("width","1"),T.setAttribute("height","1"),T.setAttribute("fill","white");const N=mi._svgFactory.createElement("use");E.append(N),N.setAttribute("href",`#${f}`),N.setAttribute("stroke","none"),N.setAttribute("fill","black"),N.setAttribute("fill-rule","nonzero"),N.classList.add("mask")}const m=mi._svgFactory.createElement("use");r.append(m),m.setAttribute("href",`#${f}`),y&&m.setAttribute("mask",`url(#${y})`);const A=m.cloneNode();return r.append(A),m.classList.add("mainOutline"),A.classList.add("secondaryOutline"),this.updateProperties(r,e),this.#t.set(n,r),n}finalizeDraw(e,t){this.#n.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:r,rootClass:l,path:u}=t,f=typeof e=="number"?this.#t.get(e):e;if(f){if(n&&this.#o(f,n),r&&mi.#s(f,r),l){const{classList:y}=f;for(const[m,A]of Object.entries(l))y.toggle(m,A)}if(u){const m=f.firstChild.firstChild;this.#o(m,u)}}}updateParent(e,t){if(t===this)return;const n=this.#t.get(e);n&&(t.#e.append(n),this.#t.delete(e),t.#t.set(e,n))}remove(e){this.#n.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Pp};globalThis.pdfjsLib={AbortException:va,AnnotationEditorLayer:Br,AnnotationEditorParamsType:Bt,AnnotationEditorType:yt,AnnotationEditorUIManager:Sa,AnnotationLayer:Fm,AnnotationMode:Fr,AnnotationType:Zn,applyOpacity:Jv,build:bS,ColorPicker:Es,createValidAbsoluteUrl:Am,CSSConstants:$v,DOMSVGFactory:hh,DrawLayer:mi,FeatureTest:yi,fetchData:Uc,findContrastColor:eS,getDocument:Dm,getFilenameFromUrl:Kv,getPdfFilenameFromUrl:Qv,getRGB:zc,getUuid:Em,getXfaPageViewport:Zv,GlobalWorkerOptions:vo,ImageKind:Qu,InvalidPDFException:Xf,isDataScheme:Nh,isPdfFile:y0,isValidExplicitDest:sS,MathClamp:Ii,noContextMenu:_s,normalizeUnicode:qv,OPS:Ic,OutputScale:ur,PasswordResponses:Yv,PDFDataRangeTransport:Lm,PDFDateString:qf,PDFWorker:Nc,PermissionFlag:Gv,PixelsPerInch:gl,RenderingCancelledException:m0,renderRichText:Cm,ResponseException:oh,setLayerDimensions:_o,shadow:St,SignatureExtractor:tl,stopEvent:Bn,SupportedImageMimeTypes:Wf,TextLayer:ch,TouchManager:Mh,updateUrlHash:wm,Util:Ke,VerbosityLevel:_h,version:km,XfaLayer:Sm};const aL=Object.freeze(Object.defineProperty({__proto__:null,AbortException:va,AnnotationEditorLayer:Br,AnnotationEditorParamsType:Bt,AnnotationEditorType:yt,AnnotationEditorUIManager:Sa,AnnotationLayer:Fm,AnnotationMode:Fr,AnnotationType:Zn,CSSConstants:$v,ColorPicker:Es,DOMSVGFactory:hh,DrawLayer:mi,FeatureTest:yi,GlobalWorkerOptions:vo,ImageKind:Qu,InvalidPDFException:Xf,MathClamp:Ii,OPS:Ic,OutputScale:ur,PDFDataRangeTransport:Lm,PDFDateString:qf,PDFWorker:Nc,PasswordResponses:Yv,PermissionFlag:Gv,PixelsPerInch:gl,RenderingCancelledException:m0,ResponseException:oh,SignatureExtractor:tl,SupportedImageMimeTypes:Wf,TextLayer:ch,TouchManager:Mh,Util:Ke,VerbosityLevel:_h,XfaLayer:Sm,applyOpacity:Jv,build:bS,createValidAbsoluteUrl:Am,fetchData:Uc,findContrastColor:eS,getDocument:Dm,getFilenameFromUrl:Kv,getPdfFilenameFromUrl:Qv,getRGB:zc,getUuid:Em,getXfaPageViewport:Zv,isDataScheme:Nh,isPdfFile:y0,isValidExplicitDest:sS,noContextMenu:_s,normalizeUnicode:qv,renderRichText:Cm,setLayerDimensions:_o,shadow:St,stopEvent:Bn,updateUrlHash:wm,version:km},Symbol.toStringTag,{value:"Module"}));function IS(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var r=i.length;for(e=0;e<r;e++)i[e]&&(t=IS(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function A0(){for(var i,e,t=0,n="",r=arguments.length;t<r;t++)(i=arguments[t])&&(e=IS(i))&&(n&&(n+=" "),n+=e);return n}var bw=Object.prototype.hasOwnProperty;function Aw(i,e,t){for(t of i.keys())if(wc(t,e))return t}function wc(i,e){var t,n,r;if(i===e)return!0;if(i&&e&&(t=i.constructor)===e.constructor){if(t===Date)return i.getTime()===e.getTime();if(t===RegExp)return i.toString()===e.toString();if(t===Array){if((n=i.length)===e.length)for(;n--&&wc(i[n],e[n]););return n===-1}if(t===Set){if(i.size!==e.size)return!1;for(n of i)if(r=n,r&&typeof r=="object"&&(r=Aw(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(i.size!==e.size)return!1;for(n of i)if(r=n[0],r&&typeof r=="object"&&(r=Aw(e,r),!r)||!wc(n[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)i=new Uint8Array(i),e=new Uint8Array(e);else if(t===DataView){if((n=i.byteLength)===e.byteLength)for(;n--&&i.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(i)){if((n=i.byteLength)===e.byteLength)for(;n--&&i[n]===e[n];);return n===-1}if(!t||typeof i=="object"){n=0;for(t in i)if(bw.call(i,t)&&++n&&!bw.call(e,t)||!(t in e)||!wc(i[t],e[t]))return!1;return Object.keys(e).length===n}}return i!==i&&e!==e}function Lh(i){let e=!1;return{promise:new Promise((n,r)=>{i.then(l=>!e&&n(l)).catch(l=>!e&&r(l))}),cancel(){e=!0}}}const oL=["onCopy","onCut","onPaste"],lL=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],cL=["onFocus","onBlur"],uL=["onInput","onInvalid","onReset","onSubmit"],hL=["onLoad","onError"],dL=["onKeyDown","onKeyPress","onKeyUp"],fL=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],gL=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],pL=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],mL=["onSelect"],yL=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],xL=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],bL=["onScroll"],AL=["onWheel"],wL=["onAnimationStart","onAnimationEnd","onAnimationIteration"],EL=["onTransitionEnd"],vL=["onToggle"],SL=["onChange"],CL=[...oL,...lL,...cL,...uL,...hL,...dL,...fL,...gL,...pL,...mL,...yL,...xL,...bL,...AL,...wL,...EL,...SL,...vL];function NS(i,e){const t={};for(const n of CL){const r=i[n];r&&(e?t[n]=(l=>r(l,e(n))):t[n]=r)}return t}var _L="Invariant failed";function yn(i,e){if(!i)throw new Error(_L)}var ip,ww;function TL(){if(ww)return ip;ww=1;var i=function(){};return ip=i,ip}var IL=TL();const Ri=zp(IL),RS=W.createContext(null),NL="noopener noreferrer nofollow";class RL{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return yn(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){yn(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||NL,e.target=n?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{yn(this.pdfDocument),yn(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{yn(Array.isArray(t));const n=t[0];new Promise(r=>{yn(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(l=>{r(l)}).catch(()=>{yn(!1)}):typeof n=="number"?r(n):yn(!1)}).then(r=>{const l=r+1;yn(this.pdfViewer),yn(l>=1&&l<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:l})})})}goToPage(e){const t=e-1;yn(this.pdfViewer),yn(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function Ec({children:i,type:e}){return S.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:i})}const Ew={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function ML(i,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function Rc(){return W.useReducer(ML,{value:void 0,error:void 0})}const w0=typeof window<"u",MS=w0&&window.location.protocol==="file:";function DL(i){return typeof i<"u"}function $o(i){return DL(i)&&i!==null}function OL(i){return typeof i=="string"}function LL(i){return i instanceof ArrayBuffer}function kL(i){return yn(w0),i instanceof Blob}function jp(i){return OL(i)&&/^data:/.test(i)}function vw(i){yn(jp(i));const[e="",t=""]=i.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function PL(){return w0&&window.devicePixelRatio||1}const DS="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Sw(){Ri(!MS,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${DS}`)}function BL(){Ri(!MS,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${DS}`)}function ml(i){i?.cancel&&i.cancel()}function Up(i,e){return Object.defineProperty(i,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function FL(i){return i.name==="RenderingCancelledException"}function jL(i){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return t(new Error("Error while reading a file."));e(n.result)},n.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:l}=r.target;if(!l)return t(new Error("Error while reading a file."));switch(l.code){case l.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case l.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case l.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},n.readAsArrayBuffer(i)})}const{PDFDataRangeTransport:UL}=aL,zL=(i,e)=>{switch(e){case Ew.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");i(t);break}case Ew.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");i(t);break}}};function Cw(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const HL=W.forwardRef(function({children:e,className:t,error:n="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:l,file:u,inputRef:f,imageResourcesPath:y,loading:m="Loading PDF",noData:A="No PDF file specified.",onItemClick:E,onLoadError:T,onLoadProgress:N,onLoadSuccess:M,onPassword:R=zL,onSourceError:L,onSourceSuccess:k,options:P,renderMode:j,rotate:U,scale:G,...Y},V){const[ie,Q]=Rc(),{value:be,error:we}=ie,[oe,Ee]=Rc(),{value:Se,error:ae}=oe,K=W.useRef(new RL),re=W.useRef([]),Ie=W.useRef(void 0),Ue=W.useRef(void 0);u&&u!==Ie.current&&Cw(u)&&(Ri(!wc(u,Ie.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Ie.current=u),P&&P!==Ue.current&&(Ri(!wc(P,Ue.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Ue.current=P);const Je=W.useRef({scrollPageIntoView:Ye=>{const{dest:bt,pageNumber:It,pageIndex:Qt=It-1}=Ye;if(E){E({dest:bt,pageIndex:Qt,pageNumber:It});return}const ln=re.current[Qt];if(ln){ln.scrollIntoView();return}Ri(!1,`An internal link leading to page ${It} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});W.useImperativeHandle(V,()=>({linkService:K,pages:re,viewer:Je}),[]);function $(){k&&k()}function ue(){we&&(Ri(!1,we.toString()),L&&L(we))}function Ce(){Q({type:"RESET"})}W.useEffect(Ce,[u,Q]);const Oe=W.useCallback(async()=>{if(!u)return null;if(typeof u=="string")return jp(u)?{data:vw(u)}:(Sw(),{url:u});if(u instanceof UL)return{range:u};if(LL(u))return{data:u};if(w0&&kL(u))return{data:await jL(u)};if(yn(typeof u=="object"),yn(Cw(u)),"url"in u&&typeof u.url=="string"){if(jp(u.url)){const{url:Ye,...bt}=u;return{data:vw(Ye),...bt}}Sw()}return u},[u]);W.useEffect(()=>{const Ye=Lh(Oe());return Ye.promise.then(bt=>{Q({type:"RESOLVE",value:bt})}).catch(bt=>{Q({type:"REJECT",error:bt})}),()=>{ml(Ye)}},[Oe,Q]),W.useEffect(()=>{if(!(typeof be>"u")){if(be===!1){ue();return}$()}},[be]);function Ve(){Se&&(M&&M(Se),re.current=new Array(Se.numPages),K.current.setDocument(Se))}function Re(){ae&&(Ri(!1,ae.toString()),T&&T(ae))}W.useEffect(function(){Ee({type:"RESET"})},[Ee,be]),W.useEffect(function(){if(!be)return;const bt=P?{...be,...P}:be,It=Dm(bt);N&&(It.onProgress=N),R&&(It.onPassword=R);const Qt=It,ln=Qt.promise.then(Dt=>{Ee({type:"RESOLVE",value:Dt})}).catch(Dt=>{Qt.destroyed||Ee({type:"REJECT",error:Dt})});return()=>{ln.finally(()=>Qt.destroy())}},[P,Ee,be]),W.useEffect(()=>{if(!(typeof Se>"u")){if(Se===!1){Re();return}Ve()}},[Se]),W.useEffect(function(){K.current.setViewer(Je.current),K.current.setExternalLinkRel(r),K.current.setExternalLinkTarget(l)},[r,l]);const Ge=W.useCallback((Ye,bt)=>{re.current[Ye]=bt},[]),Ne=W.useCallback(Ye=>{delete re.current[Ye]},[]),Qe=W.useMemo(()=>({imageResourcesPath:y,linkService:K.current,onItemClick:E,pdf:Se,registerPage:Ge,renderMode:j,rotate:U,scale:G,unregisterPage:Ne}),[y,E,Se,Ge,j,U,G,Ne]),ct=W.useMemo(()=>NS(Y,()=>Se),[Y,Se]);function Ht(){function Ye(It){return!!It?.pdf}if(!Ye(Qe))throw new Error("pdf is undefined");const bt=typeof e=="function"?e(Qe):e;return S.jsx(RS.Provider,{value:Qe,children:bt})}function kn(){return u?Se==null?S.jsx(Ec,{type:"loading",children:typeof m=="function"?m():m}):Se===!1?S.jsx(Ec,{type:"error",children:typeof n=="function"?n():n}):Ht():S.jsx(Ec,{type:"no-data",children:typeof A=="function"?A():A})}return S.jsx("div",{className:A0("react-pdf__Document",t),ref:f,...ct,children:kn()})});function OS(){return W.useContext(RS)}function LS(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var t=i.filter(Boolean);if(t.length<=1){var n=t[0];return n||null}return function(l){for(var u=0,f=t;u<f.length;u++){var y=f[u];typeof y=="function"?y(l):y&&(y.current=l)}}}const kS=W.createContext(null);function E0(){return W.useContext(kS)}function VL(){const i=OS(),e=E0();yn(e);const t={...i,...e},{imageResourcesPath:n,linkService:r,onGetAnnotationsError:l,onGetAnnotationsSuccess:u,onRenderAnnotationLayerError:f,onRenderAnnotationLayerSuccess:y,page:m,pdf:A,renderForms:E,rotate:T,scale:N=1}=t;yn(A),yn(m),yn(r);const[M,R]=Rc(),{value:L,error:k}=M,P=W.useRef(null);Ri(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function j(){L&&u&&u(L)}function U(){k&&(Ri(!1,k.toString()),l&&l(k))}W.useEffect(function(){R({type:"RESET"})},[R,m]),W.useEffect(function(){if(!m)return;const Q=Lh(m.getAnnotations()),be=Q;return Q.promise.then(we=>{R({type:"RESOLVE",value:we})}).catch(we=>{R({type:"REJECT",error:we})}),()=>{ml(be)}},[R,m]),W.useEffect(()=>{if(L!==void 0){if(L===!1){U();return}j()}},[L]);function G(){y&&y()}function Y(ie){Ri(!1,`${ie}`),f&&f(ie)}const V=W.useMemo(()=>m.getViewport({scale:N,rotation:T}),[m,T,N]);return W.useEffect(function(){if(!A||!m||!r||!L)return;const{current:Q}=P;if(!Q)return;const be=V.clone({dontFlip:!0}),we={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:A.annotationStorage,commentManager:null,div:Q,l10n:null,linkService:r,page:m,structTreeLayer:null,viewport:be},oe={annotations:L,annotationStorage:A.annotationStorage,div:Q,imageResourcesPath:n,linkService:r,page:m,renderForms:E,viewport:be};Q.innerHTML="";try{new Fm(we).render(oe),G()}catch(Ee){Y(Ee)}return()=>{}},[L,n,r,m,A,E,V]),S.jsx("div",{className:A0("react-pdf__Page__annotations","annotationLayer"),ref:P})}const PS={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},GL=/^H(\d+)$/;function YL(i){return i in PS}function v0(i){return"children"in i}function BS(i){return v0(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function XL(i){const e={};if(v0(i)){const{role:t}=i,n=t.match(GL);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(YL(t)){const r=PS[t];r&&(e.role=r)}}return e}function FS(i){const e={};if(v0(i)){if(i.alt!==void 0&&(e["aria-label"]=i.alt),i.lang!==void 0&&(e.lang=i.lang),BS(i)){const[t]=i.children;if(t){const n=FS(t);return{...e,...n}}}}else"id"in i&&(e["aria-owns"]=i.id);return e}function qL(i){return i?{...XL(i),...FS(i)}:null}function jS({className:i,node:e}){const t=W.useMemo(()=>qL(e),[e]),n=W.useMemo(()=>!v0(e)||BS(e)?null:e.children.map((r,l)=>S.jsx(jS,{node:r},l)),[e]);return S.jsx("span",{className:i,...t,children:n})}function WL(){const i=E0();yn(i);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=i,[n,r]=Rc(),{value:l,error:u}=n,{customTextRenderer:f,page:y}=i;function m(){l&&t&&t(l)}function A(){u&&(Ri(!1,u.toString()),e&&e(u))}return W.useEffect(function(){r({type:"RESET"})},[r,y]),W.useEffect(function(){if(f||!y)return;const T=Lh(y.getStructTree()),N=T;return T.promise.then(M=>{r({type:"RESOLVE",value:M})}).catch(M=>{r({type:"REJECT",error:M})}),()=>ml(N)},[f,y,r]),W.useEffect(()=>{if(l!==void 0){if(l===!1){A();return}m()}},[l]),l?S.jsx(jS,{className:"react-pdf__Page__structTree structTree",node:l}):null}const _w=Fr;function KL(i){const e=E0();yn(e);const t={...e,...i},{_className:n,canvasBackground:r,devicePixelRatio:l=PL(),onRenderError:u,onRenderSuccess:f,page:y,renderForms:m,renderTextLayer:A,rotate:E,scale:T}=t,{canvasRef:N}=i;yn(y);const M=W.useRef(null);function R(){y&&f&&f(Up(y,T))}function L(U){FL(U)||(Ri(!1,U.toString()),u&&u(U))}const k=W.useMemo(()=>y.getViewport({scale:T*l,rotation:E}),[l,y,E,T]),P=W.useMemo(()=>y.getViewport({scale:T,rotation:E}),[y,E,T]);W.useEffect(function(){if(!y)return;y.cleanup();const{current:G}=M;if(!G)return;G.width=k.width,G.height=k.height,G.style.width=`${Math.floor(P.width)}px`,G.style.height=`${Math.floor(P.height)}px`,G.style.visibility="hidden";const Y={annotationMode:m?_w.ENABLE_FORMS:_w.ENABLE,canvas:G,canvasContext:G.getContext("2d",{alpha:!1}),viewport:k};r&&(Y.background=r);const V=y.render(Y),ie=V;return V.promise.then(()=>{G.style.visibility="",R()}).catch(L),()=>ml(ie)},[r,y,m,k,P]);const j=W.useCallback(()=>{const{current:U}=M;U&&(U.width=0,U.height=0)},[]);return W.useEffect(()=>j,[j]),S.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:LS(N,M),style:{display:"block",userSelect:"none"},children:A?S.jsx(WL,{}):null})}function QL(i){return"str"in i}function ZL(){const i=E0();yn(i);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:n,onRenderTextLayerError:r,onRenderTextLayerSuccess:l,page:u,pageIndex:f,pageNumber:y,rotate:m,scale:A}=i;yn(u);const[E,T]=Rc(),{value:N,error:M}=E,R=W.useRef(null);Ri(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function L(){N&&n&&n(N)}function k(){M&&(Ri(!1,M.toString()),t&&t(M))}W.useEffect(function(){T({type:"RESET"})},[u,T]),W.useEffect(function(){if(!u)return;const ie=Lh(u.getTextContent()),Q=ie;return ie.promise.then(be=>{T({type:"RESOLVE",value:be})}).catch(be=>{T({type:"REJECT",error:be})}),()=>ml(Q)},[u,T]),W.useEffect(()=>{if(N!==void 0){if(N===!1){k();return}L()}},[N]);const P=W.useCallback(()=>{l&&l()},[l]),j=W.useCallback(V=>{Ri(!1,V.toString()),r&&r(V)},[r]);function U(){const V=R.current;V&&V.classList.add("selecting")}function G(){const V=R.current;V&&V.classList.remove("selecting")}const Y=W.useMemo(()=>u.getViewport({scale:A,rotation:m}),[u,m,A]);return W.useLayoutEffect(function(){if(!u||!N)return;const{current:ie}=R;if(!ie)return;ie.innerHTML="";const Q=u.streamTextContent({includeMarkedContent:!0}),be={container:ie,textContentSource:Q,viewport:Y},we=new ch(be),oe=we;return we.render().then(()=>{const Ee=document.createElement("div");Ee.className="endOfContent",ie.append(Ee);const Se=ie.querySelectorAll('[role="presentation"]');if(e){let ae=0;N.items.forEach((K,re)=>{if(!QL(K))return;const Ie=Se[ae];if(!Ie)return;const Ue=e({pageIndex:f,pageNumber:y,itemIndex:re,...K});Ie.innerHTML=Ue,ae+=K.str&&K.hasEOL?2:1})}P()}).catch(j),()=>ml(oe)},[e,j,P,u,f,y,N,Y]),S.jsx("div",{className:A0("react-pdf__Page__textContent","textLayer"),onMouseUp:G,onMouseDown:U,ref:R})}const Tw=1;function $L(i){const t={...OS(),...i},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:l,canvasRef:u,children:f,className:y,customRenderer:m,customTextRenderer:A,devicePixelRatio:E,error:T="Failed to load the page.",height:N,inputRef:M,loading:R="Loading page",noData:L="No page specified.",onGetAnnotationsError:k,onGetAnnotationsSuccess:P,onGetStructTreeError:j,onGetStructTreeSuccess:U,onGetTextError:G,onGetTextSuccess:Y,onLoadError:V,onLoadSuccess:ie,onRenderAnnotationLayerError:Q,onRenderAnnotationLayerSuccess:be,onRenderError:we,onRenderSuccess:oe,onRenderTextLayerError:Ee,onRenderTextLayerSuccess:Se,pageIndex:ae,pageNumber:K,pdf:re,registerPage:Ie,renderAnnotationLayer:Ue=!0,renderForms:Je=!1,renderMode:$="canvas",renderTextLayer:ue=!0,rotate:Ce,scale:Oe=Tw,unregisterPage:Ve,width:Re,...Ge}=t,[Ne,Qe]=Rc(),{value:ct,error:Ht}=Ne,kn=W.useRef(null);yn(re);const Ye=$o(K)?K-1:ae??null,bt=K??($o(ae)?ae+1:null),It=Ce??(ct?ct.rotate:null),Qt=W.useMemo(()=>{if(!ct)return null;let gt=1;const ut=Oe??Tw;if(Re||N){const _t=ct.getViewport({scale:1,rotation:It});Re?gt=Re/_t.width:N&&(gt=N/_t.height)}return ut*gt},[N,ct,It,Oe,Re]);W.useEffect(function(){return()=>{$o(Ye)&&r&&Ve&&Ve(Ye)}},[r,re,Ye,Ve]);function ln(){if(ie){if(!ct||!Qt)return;ie(Up(ct,Qt))}if(r&&Ie){if(!$o(Ye)||!kn.current)return;Ie(Ye,kn.current)}}function Dt(){Ht&&(Ri(!1,Ht.toString()),V&&V(Ht))}W.useEffect(function(){Qe({type:"RESET"})},[Qe,re,Ye]),W.useEffect(function(){if(!re||!bt)return;const ut=Lh(re.getPage(bt)),_t=ut;return ut.promise.then(Vi=>{Qe({type:"RESOLVE",value:Vi})}).catch(Vi=>{Qe({type:"REJECT",error:Vi})}),()=>ml(_t)},[Qe,re,bt]),W.useEffect(()=>{if(ct!==void 0){if(ct===!1){Dt();return}ln()}},[ct,Qt]);const ft=W.useMemo(()=>$o(Ye)&&bt&&$o(It)&&$o(Qt)?{_className:n,canvasBackground:l,customTextRenderer:A,devicePixelRatio:E,onGetAnnotationsError:k,onGetAnnotationsSuccess:P,onGetStructTreeError:j,onGetStructTreeSuccess:U,onGetTextError:G,onGetTextSuccess:Y,onRenderAnnotationLayerError:Q,onRenderAnnotationLayerSuccess:be,onRenderError:we,onRenderSuccess:oe,onRenderTextLayerError:Ee,onRenderTextLayerSuccess:Se,page:ct,pageIndex:Ye,pageNumber:bt,renderForms:Je,renderTextLayer:ue,rotate:It,scale:Qt}:null,[n,l,A,E,k,P,j,U,G,Y,Q,be,we,oe,Ee,Se,ct,Ye,bt,Je,ue,It,Qt]),te=W.useMemo(()=>NS(Ge,()=>ct&&(Qt?Up(ct,Qt):void 0)),[Ge,ct,Qt]),J=`${Ye}@${Qt}/${It}`;function Ae(){switch($){case"custom":return yn(m),S.jsx(m,{},`${J}_custom`);case"none":return null;case"canvas":default:return S.jsx(KL,{canvasRef:u},`${J}_canvas`)}}function je(){return ue?S.jsx(ZL,{},`${J}_text`):null}function Le(){return Ue?S.jsx(VL,{},`${J}_annotations`):null}function Fe(){function gt(_t){return!!_t?.page}if(!gt(ft))throw new Error("page is undefined");const ut=typeof f=="function"?f(ft):f;return S.jsxs(kS.Provider,{value:ft,children:[Ae(),je(),Le(),ut]})}function ze(){return bt?re===null||ct===void 0||ct===null?S.jsx(Ec,{type:"loading",children:typeof R=="function"?R():R}):re===!1||ct===!1?S.jsx(Ec,{type:"error",children:typeof T=="function"?T():T}):Fe():S.jsx(Ec,{type:"no-data",children:typeof L=="function"?L():L})}return S.jsx("div",{className:A0(n,y),"data-page-number":bt,ref:LS(M,kn),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Qt}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:l||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...te,children:ze()})}BL();vo.workerSrc="pdf.worker.mjs";vo.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${km}/pdf.worker.min.js`;function JL(){const{show:i}=dr(),{selectedProjectId:e}=_a(),[t,n]=W.useState([]),[r,l]=W.useState([]),[u,f]=W.useState("ALL"),[y,m]=W.useState(!1),[A,E]=W.useState(null),[T,N]=W.useState([]),[M,R]=W.useState(""),[L,k]=W.useState(!0),[P,j]=W.useState(null),[U,G]=W.useState(0),[Y,V]=W.useState(1),[ie]=W.useState("PM"),[Q]=W.useState(""),{register:be,handleSubmit:we,reset:oe,formState:{isSubmitting:Ee}}=jc();W.useEffect(()=>{Se(),ae()},[]);const Se=async()=>Ft.get("/projects").then(Ne=>l(Ne.data)),ae=async()=>{try{const Ne=await Ft.get("/sms/documents");n(Ne.data),k(!1)}catch{i("  ","error"),k(!1)}},K=async Ne=>{try{const Qe=await Ft.get(`/sms/documents/${Ne}/comments`);N(Qe.data)}catch(Qe){console.error(Qe)}},re=async Ne=>{try{await Ft.post("/sms/documents",{...Ne,file_url:P}),i(" .","success"),m(!1),oe(),j(null),ae()}catch{i(" ","error")}},Ie=Ne=>{const Qe=Ne.target.files?.[0];if(!Qe)return;const ct=new FileReader;ct.onloadend=()=>{j(ct.result),i(`${Qe.name}  `,"success")},ct.readAsDataURL(Qe)},Ue=async()=>{if(!(!A||!M.trim()))try{await Ft.post(`/sms/documents/${A.id}/comments`,{commenter_name:Q,commenter_role:ie,comment:M}),i(" .","success"),R(""),K(A.id)}catch{i("  ","error")}},Je=Ne=>{E(Ne),V(1),K(Ne.id)},$=({numPages:Ne})=>{G(Ne)},ue=[{value:"ALL",label:"",color:"badge",borderColor:"#e0e0e0"},{value:"",label:"",color:"badge-primary",borderColor:"var(--primary)"},{value:"",label:"",color:"badge-live",borderColor:"#10b981"},{value:"",label:"",color:"badge-error",borderColor:"#ef4444"},{value:"",label:"",color:"badge-tag",borderColor:"#6b7280"},{value:"",label:"",color:"badge",borderColor:"#e0e0e0"}],Ce=t.filter(Ne=>{const Qe=u==="ALL"||Ne.category===u,ct=e==="ALL"||Ne.projectId===e||Ne.project_id===e;return Qe&&ct}),Oe=Ne=>{const Qe=ue.find(kn=>kn.value===Ne),ct=Qe?.color||"badge",Ht=Qe?.borderColor||"#e0e0e0";return S.jsx("span",{className:`badge ${ct}`,style:{fontWeight:600,padding:"0.4rem 0.8rem",fontSize:"0.85rem",border:`2px solid ${Ht}`},children:Qe?.label||Ne})},Ve=Ne=>{if(!Ne)return"0 KB";const Qe=Ne/1024;return Qe<1024?`${Qe.toFixed(1)} KB`:`${(Qe/1024).toFixed(1)} MB`},Re=ie==="PM"||ie==="",Ge=ie==="";return S.jsxs("div",{className:"page",children:[S.jsxs("header",{className:"page-header",children:[S.jsxs("div",{children:[S.jsx("p",{className:"eyebrow",children:"SMS Module"}),S.jsx("h1",{children:" /  (Reports)"}),S.jsxs("p",{className:"muted",children:["       .",Re&&S.jsxs("span",{style:{color:"var(--primary)",marginLeft:"0.5rem"},children:[" ",ie,"  ( )"]}),Ge&&S.jsx("span",{style:{color:"var(--primary)",marginLeft:"0.5rem"},children:"   ( )"})]})]}),S.jsx("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:Ge&&S.jsxs("button",{className:"btn-primary",onClick:()=>m(!0),children:[S.jsx(So,{size:18}),"  "]})})]}),S.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:ue.map(Ne=>S.jsx("button",{className:u===Ne.value?"btn-primary":"btn-secondary",onClick:()=>f(Ne.value),style:{minWidth:"auto"},children:Ne.label},Ne.value))}),S.jsx("div",{className:"grid three",children:Ce.map(Ne=>S.jsxs("div",{className:"card",style:{cursor:"pointer"},onClick:()=>Je(Ne),children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[Oe(Ne.category),S.jsx("span",{className:"muted",style:{fontSize:"0.8rem"},children:Ve(Ne.file_size)})]}),S.jsx("h3",{style:{margin:"0 0 0.75rem 0",fontSize:"1.1rem"},children:Ne.title}),S.jsx("p",{className:"muted",style:{fontSize:"0.9rem",marginBottom:"0.75rem",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:Ne.content_summary||Ne.description}),S.jsxs("div",{className:"milestone-meta",children:[S.jsx(th,{size:14})," ",new Date(Ne.upload_date).toLocaleDateString(),S.jsx("span",{style:{margin:"0 0.5rem"},children:"|"}),S.jsx(eE,{size:14})," ",Ne.uploaded_by]})]},Ne.id))}),Ce.length===0&&!L&&S.jsxs("section",{className:"empty-state",children:[S.jsx(ll,{size:48,className:"empty-icon"}),S.jsx("h3",{children:"  ."}),S.jsx("p",{children:" /   ."})]}),y&&S.jsx("div",{className:"modal-overlay",children:S.jsxs("div",{className:"modal-content",children:[S.jsxs("header",{className:"modal-header",children:[S.jsx("h2",{children:" "}),S.jsx("button",{className:"btn-text",onClick:()=>{m(!1),j(null)},children:S.jsx(Gs,{size:24})})]}),S.jsxs("form",{onSubmit:we(re),className:"modal-body",children:[S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:""}),S.jsx("select",{className:"input",...be("projectId",{required:!0}),children:r.map(Ne=>S.jsx("option",{value:Ne.id,children:Ne.name},Ne.id))})]}),S.jsxs("div",{className:"form-grid",children:[S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:""}),S.jsxs("select",{className:"input",...be("category",{required:!0}),children:[S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsxs("option",{value:"",children:["","",""]})]})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:""}),S.jsx("input",{className:"input",...be("uploaded_by",{required:!0}),placeholder:""})]})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:""}),S.jsx("input",{className:"input",...be("title",{required:!0}),placeholder:"2023 12   "})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:"  ()"}),S.jsx("textarea",{className:"input",rows:4,...be("content_summary",{required:!0}),placeholder:"   3-5  ."})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:"  (PDF)"}),S.jsxs("div",{style:{border:"2px dashed var(--border)",borderRadius:"8px",padding:"1.5rem",textAlign:"center",background:"var(--bg-surface-hover)"},children:[S.jsx("input",{type:"file",accept:".pdf",onChange:Ie,style:{display:"none"},id:"file-upload"}),S.jsxs("label",{htmlFor:"file-upload",style:{cursor:"pointer",display:"block"},children:[S.jsx(Jw,{size:32,color:"var(--primary)",style:{marginBottom:"0.5rem"}}),S.jsx("p",{style:{margin:0,color:"var(--primary)",fontWeight:600},children:" PDF  "}),S.jsx("p",{className:"muted",style:{fontSize:"0.85rem",margin:"0.25rem 0 0 0"},children:"PDF  "})]}),P&&S.jsx("p",{style:{marginTop:"1rem",color:"var(--primary)",fontWeight:600},children:"   "})]})]}),S.jsxs("div",{className:"modal-footer",children:[S.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{m(!1),j(null)},children:""}),S.jsx("button",{type:"submit",className:"btn-primary",disabled:Ee||!P,children:Ee?" ...":""})]})]})]})}),A&&S.jsx("div",{className:"modal-overlay",children:S.jsxs("div",{className:"modal-content",style:{maxWidth:"500px",width:"95%",height:"75vh",maxHeight:"none",display:"flex",flexDirection:"column"},children:[S.jsxs("header",{className:"modal-header",children:[S.jsxs("div",{style:{flex:1},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[Oe(A.category),S.jsx("span",{className:"task-id",style:{fontSize:"0.85rem",marginBottom:"0.5rem",display:"block"},children:A.projectId&&r.find(Ne=>Ne.id===A.projectId)?.name||A.project_id&&r.find(Ne=>Ne.id===A.project_id)?.name||e!=="ALL"&&r.find(Ne=>Ne.id===e)?.name||"  "})]}),S.jsxs("h2",{style:{margin:0,fontSize:"1.1rem",wordBreak:"break-all"},children:[": ",A.title]})]}),S.jsx("button",{className:"btn-text",onClick:()=>E(null),children:S.jsx(Gs,{size:24})})]}),S.jsxs("div",{className:"modal-body",style:{flex:1,overflowY:"hidden",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[S.jsxs("div",{style:{background:"#525252",borderRadius:"8px",padding:"0.5rem",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[S.jsxs("h3",{style:{margin:0,color:"#fff",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem"},children:[S.jsx(ll,{size:16}),"  "]}),S.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[S.jsx("button",{className:"btn-secondary",onClick:()=>V(Ne=>Math.max(1,Ne-1)),disabled:Y<=1,style:{padding:"0.2rem 0.4rem",fontSize:"0.75rem"},children:""}),S.jsxs("span",{style:{color:"#fff",fontSize:"0.75rem"},children:[Y," / ",U||"?"]}),S.jsx("button",{className:"btn-secondary",onClick:()=>V(Ne=>Math.min(U,Ne+1)),disabled:Y>=U,style:{padding:"0.2rem 0.4rem",fontSize:"0.75rem"},children:""})]})]}),S.jsx("div",{style:{background:"#fff",borderRadius:"4px",overflow:"auto",flex:1,display:"flex",justifyContent:"center",alignItems:"flex-start",padding:"0.5rem"},children:A.file_url?S.jsx(HL,{file:A.file_url,onLoadSuccess:$,loading:S.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"PDF  ..."}),error:S.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#ef4444"},children:"PDF   ."}),children:S.jsx($L,{pageNumber:Y,width:450})}):S.jsxs("div",{style:{padding:"3rem",textAlign:"center",color:"#6b7280"},children:[S.jsx(ll,{size:32,style:{marginBottom:"0.5rem",opacity:.5}}),S.jsx("p",{style:{fontSize:"0.9rem"},children:" "})]})})]}),S.jsxs("div",{style:{flexShrink:0},children:[S.jsxs("button",{className:"btn-primary",style:{width:"100%",padding:"0.5rem",fontSize:"0.9rem"},children:[S.jsx(T3,{size:16,style:{marginRight:"0.5rem"}}),"  "]}),S.jsxs("div",{style:{marginTop:"0.5rem",display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.85rem",justifyContent:"center"},children:[S.jsx("span",{style:{color:"#93c5fd"},children:" :"}),S.jsx("strong",{style:{color:"#fff",fontSize:"0.9rem"},children:A.uploaded_by}),S.jsx("span",{style:{width:"1px",height:"12px",background:"#525252"}}),S.jsx("span",{style:{color:"#93c5fd"},children:" :"}),S.jsx("strong",{style:{color:"#fff",fontSize:"0.9rem"},children:new Date(A.upload_date).toLocaleDateString()})]})]}),S.jsxs("div",{className:"panel",style:{padding:"0.5rem",display:"flex",flexDirection:"column",height:"150px",minHeight:"100px"},children:[S.jsxs("h3",{style:{margin:"0 0 0.5rem 0",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[S.jsx(O3,{size:14}),"  (",T.length,")"]}),S.jsxs("div",{className:"list-group",style:{flex:1,overflowY:"auto",marginBottom:"0.5rem",border:"1px solid var(--border)",borderRadius:"6px",padding:"0.3rem"},children:[T.map(Ne=>S.jsxs("div",{className:"list-item",style:{flexDirection:"column",alignItems:"flex-start",padding:"0.4rem",borderBottom:"1px solid #eee"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",marginBottom:"0.1rem"},children:[S.jsxs("div",{children:[S.jsx("strong",{style:{fontSize:"0.75rem"},children:Ne.commenter_name}),S.jsx("span",{className:`badge ${Ne.commenter_role==="PM"?"badge-primary":"badge-error"}`,style:{marginLeft:"0.3rem",fontSize:"0.6rem",padding:"0 0.2rem"},children:Ne.commenter_role})]}),S.jsx("span",{className:"muted",style:{fontSize:"0.65rem"},children:new Date(Ne.created_at).toLocaleDateString()})]}),S.jsx("p",{style:{margin:0,fontSize:"0.75rem",whiteSpace:"pre-wrap",lineHeight:1.2},children:Ne.comment})]},Ne.id)),T.length===0&&S.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#999"},children:S.jsx("p",{style:{fontSize:"0.75rem",margin:0},children:" "})})]}),Re&&S.jsxs("div",{style:{flexShrink:0,display:"flex",gap:"0.5rem"},children:[S.jsx("input",{className:"input",placeholder:" ...",value:M,onChange:Ne=>R(Ne.target.value),style:{flex:1,marginBottom:0,fontSize:"0.8rem",padding:"0.3rem"}}),S.jsx("button",{className:"btn-primary",onClick:Ue,disabled:!M.trim(),style:{padding:"0.3rem 0.6rem",fontSize:"0.8rem"},children:""})]}),!Re&&S.jsx("div",{style:{padding:"0.3rem",background:"var(--bg-surface-hover)",textAlign:"center",borderRadius:"4px"},children:S.jsx("p",{className:"muted",style:{margin:0,fontSize:"0.75rem"},children:"  "})})]})]})]})})]})}function ek(){const{signIn:i}=h0(),{show:e}=dr(),t=yl(),n=Hr(),[r,l]=W.useState(""),[u,f]=W.useState(""),[y,m]=W.useState(!1),A=n.state?.from||"/dashboard",E=async T=>{if(T.preventDefault(),!r||!u){e("  .","warning");return}m(!0);try{await i(r,u),e(Uf?" ":"  .","success"),t(A,{replace:!0})}catch(N){console.error(N),e(" .   .","error")}finally{m(!1)}};return S.jsx("div",{className:"center-page",children:S.jsxs("div",{className:"auth-card",children:[S.jsx("h2",{children:"SMS "}),S.jsx("p",{className:"muted",children:Uf?"  .":"Firebase     ."}),S.jsxs("form",{onSubmit:E,className:"auth-form",children:[S.jsxs("label",{children:[S.jsx("span",{children:""}),S.jsx("input",{type:"email",value:r,autoComplete:"email",onChange:T=>l(T.target.value)})]}),S.jsxs("label",{children:[S.jsx("span",{children:""}),S.jsx("input",{type:"password",value:u,autoComplete:"current-password",onChange:T=>f(T.target.value)})]}),S.jsx("button",{type:"submit",className:"btn-primary",disabled:y,children:y?" ...":""})]})]})})}const tk=[{path:"/dashboard",label:" "},{path:"/ra",label:"(RA)"},{path:"/dri",label:"DRI( )"},{path:"/checklist",label:""},{path:"/patrol",label:""},{path:"/education",label:"/"},{path:"/incidents",label:"/"},{path:"/reports",label:""}];function nk(){const{user:i,loading:e,signOut:t}=h0(),{projects:n,selectedProjectId:r,setSelectedProjectId:l,loading:u}=_a();return e?S.jsx(Sh,{}):S.jsx(W3,{children:S.jsxs("div",{className:"app-shell",children:[S.jsxs("header",{className:"topbar",children:[S.jsx("div",{className:"brand-group",children:S.jsxs("div",{className:"brand",children:[S.jsx("img",{src:"images/cross-logo.png",alt:"Cross ",className:"brand-logo"}),S.jsxs("div",{className:"brand-text",children:[S.jsx("p",{className:"brand-label",children:"Cross Specialness Inc."}),S.jsx("strong",{className:"brand-title",children:"  (SMS)"})]})]})}),i&&S.jsx("div",{className:"nav-container",children:S.jsx("nav",{className:"main-nav",children:tk.map(f=>S.jsx(ap,{to:f.path,className:({isActive:y})=>`nav-link ${y?"active":""}`,children:f.label},f.path))})}),S.jsxs("div",{className:"header-actions",children:[i&&!u&&n.length>0&&S.jsx("div",{style:{marginRight:"1rem"},children:S.jsxs("select",{className:"input",value:r,onChange:f=>l(f.target.value),style:{minWidth:"250px",fontWeight:"bold",background:"var(--bg-surface)",border:"2px solid var(--primary)",color:"var(--primary)"},children:[S.jsx("option",{value:"ALL",children:"  "}),n.map(f=>S.jsxs("option",{value:f.id,children:[" ",f.name]},f.id))]})}),i?S.jsxs("div",{className:"auth-pill",children:[S.jsx("span",{children:i.email}),S.jsxs("button",{className:"pill pill-outline",onClick:()=>t(),children:[S.jsx(R3,{size:16}),""]})]}):S.jsx(ap,{to:"/login",className:"pill pill-outline",children:""})]})]}),S.jsx("main",{className:"content",children:S.jsxs(aT,{children:[S.jsx(xs,{path:"/login",element:S.jsx(ek,{})}),S.jsx(xs,{path:"/dashboard",element:S.jsx(Rr,{children:S.jsx(t4,{})})}),S.jsx(xs,{path:"/ra",element:S.jsx(Rr,{children:S.jsx(n4,{})})}),S.jsx(xs,{path:"/ra/new",element:S.jsx(Rr,{children:S.jsx(_4,{})})}),S.jsx(xs,{path:"/ra/:id",element:S.jsx(Rr,{children:S.jsx(T4,{})})}),S.jsx(xs,{path:"/dri",element:S.jsx(Rr,{children:S.jsx(I4,{})})}),S.jsx(xs,{path:"/checklist",element:S.jsx(Rr,{children:S.jsx(N4,{})})}),S.jsx(xs,{path:"/patrol",element:S.jsx(Rr,{children:S.jsx(R4,{})})}),S.jsx(xs,{path:"/education",element:S.jsx(Rr,{children:S.jsx(y8,{})})}),S.jsx(xs,{path:"/incidents",element:S.jsx(Rr,{children:S.jsx(b8,{})})}),S.jsx(xs,{path:"/reports",element:S.jsx(Rr,{children:S.jsx(JL,{})})}),S.jsx(xs,{path:"/",element:S.jsx(Bw,{to:"/dashboard",replace:!0})})]})}),S.jsx(K3,{})]})})}function ik(){return S.jsx($O,{children:S.jsx(nk,{})})}const sk=new c3;f_.createRoot(document.getElementById("root")).render(S.jsx(W.StrictMode,{children:S.jsx(NT,{basename:"/sms/",children:S.jsx(h3,{client:sk,children:S.jsx(e4,{children:S.jsx(ik,{})})})})}));
